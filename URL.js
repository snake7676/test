/*! For license information please see index.min.js.LICENSE.txt */
( () => {
    var __webpack_modules__ = {
        80045: () => {
            !function() {
                var e, t, n = {};
                function r(e) {
                    var t = [].slice.call(arguments, 1);
                    return e.replace(/{(\d+)}/g, (function(e, n) {
                        return void 0 !== t[n] ? t[n] : e
                    }
                    ))
                }
                function o(e) {
                    return {
                        value: n[e] || e,
                        notfound: !n[e]
                    }
                }
                function i(e) {
                    return "[object Object]" === Object.prototype.toString.call(e)
                }
                e = t = function(e) {
                    return e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2
                }
                ,
                $.localize = function() {
                    if (1 === arguments.length)
                        return i(arguments[0]) ? void ("function" == typeof (e = arguments[0].pluralRule) && 1 == e.length && (t = e)) : o(arguments[0]).value;
                    var e;
                    if (2 == arguments.length && i(arguments[1]))
                        Object.assign(n, arguments[1]);
                    else if (arguments.length > 1 && arguments[0] && arguments[0].indexOf(!1)) {
                        var s = [].slice.call(arguments, 1);
                        return s.unshift(o(arguments[0]).value),
                        r.apply(this, s)
                    }
                }
                ,
                $.pluralize = function() {
                    if (arguments.length < 2)
                        return arguments[0];
                    for (var n = new Array(arguments.length - 1), i = 0; i < arguments.length - 1; i++)
                        n[i] = arguments[i + 1];
                    var s = o(n.join(","))
                      , a = s.value.split(",")
                      , l = s.notfound ? e(arguments[0]) : t(arguments[0])
                      , c = a[l < a.length ? l : a.length - 1];
                    return c.indexOf("{0}") > -1 ? r(c, arguments[0]) : c
                }
            }()
        }
        ,
        49921: () => {
            DOMTokenList.prototype.addMany = function(e) {
                if (null == e || !Array.isArray(e))
                    throw new Error("DOMTokenList.prototype.addMany accepts only array");
                e.forEach((e => this.add(e)))
            }
            ,
            DOMTokenList.prototype.removeMany = function(e) {
                if (null == e || !Array.isArray(e))
                    throw new Error("DOMTokenList.prototype.removeMany accepts only array");
                e.forEach((e => this.remove(e)))
            }
        }
        ,
        56105: () => {
            HTMLElement.prototype.hide = function() {
                this.style.display = "none"
            }
            ,
            HTMLElement.prototype.show = function() {
                this.style.display = "block"
            }
            ,
            HTMLElement.prototype.width = function() {
                return 0 == this.clientWidth ? getComputedStyle(this).width.replace("px", "") : this.clientWidth
            }
            ,
            HTMLElement.prototype.wrap = function(e) {
                let t = (new DOMParser).parseFromString(e, "text/html").body.firstElementChild;
                for (this.parentNode.insertBefore(t, this); null != t.firstElementChild; )
                    t = t.firstElementChild;
                t.appendChild(this)
            }
            ,
            HTMLElement.prototype.parents = function(e) {
                for (var t = [], n = this, r = void 0 !== e; null !== (n = n.parentElement); )
                    n.nodeType === Node.ELEMENT_NODE && (r && !n.matches(e) || t.push(n));
                return t
            }
            ,
            HTMLElement.prototype.isHidden = function() {
                return 0 === this.offsetWidth && 0 === this.offsetHeight || "none" === window.getComputedStyle(this).display
            }
            ,
            HTMLElement.prototype.isVisible = function() {
                return !this.isHidden()
            }
        }
        ,
        24349: () => {
            URLSearchParams.prototype.toDictionary = function() {
                const e = {};
                return this.forEach(( (t, n) => e[n] = t)),
                e
            }
            ,
            URLSearchParams.prototype.hasOwnProperty("size") || Object.defineProperty(URLSearchParams.prototype, "size", {
                get: function() {
                    let e = 0;
                    for (let t of this.keys())
                        e++;
                    return e
                }
            })
        }
        ,
        95407: () => {
            Array.prototype.getIntesection = function(e) {
                return Array.isArray(e) ? this.filter((t => e.includes(t))) : (console.error("Argument must be an array"),
                [])
            }
            ,
            Array.prototype.last || (Array.prototype.last = function() {
                return this[this.length - 1]
            }
            ),
            Array.prototype.first || (Array.prototype.first = function() {
                return this[0]
            }
            ),
            Array.prototype.max = function() {
                return Math.max.apply(null, this)
            }
            ,
            Array.prototype.min = function() {
                return Math.min.apply(null, this)
            }
            ,
            Array.prototype.findWhere = function(e) {
                return this.find((t => Object.keys(e).every((n => t[n] === e[n]))))
            }
            ,
            Array.prototype.distinct = function() {
                return this.filter((function(e, t, n) {
                    return n.indexOf(e) === t
                }
                ))
            }
            ,
            Array.prototype.toHashSet = function(e) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("toHashSet method require callback function or null");
                return this.reduce(( (t, n) => {
                    var r;
                    return t.add(null !== (r = null == e ? void 0 : e(n)) && void 0 !== r ? r : n),
                    t
                }
                ), new Set)
            }
            ,
            Array.prototype.toMap = function(e, t) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("toMap method require callback function or null");
                if (null != t && "function" != typeof t)
                    throw new TypeError("toMap method require callback function or null");
                return this.reduce(( (n, r) => (n.set(null == e ? r : e(r), null == t ? r : t(r)),
                n)), new Map)
            }
            ,
            Array.prototype.sum = function(e) {
                let t = 0;
                for (let n = 0, r = this.length; n < r; n++)
                    t += e ? this[n][e] : this[n];
                return t
            }
            ,
            Array.prototype.sumBy = function(e) {
                let t = 0;
                for (let n = 0, r = this.length; n < r; n++)
                    t += e(this[n]);
                return t
            }
            ,
            Array.prototype.groupBy = function(e) {
                const t = new Map;
                return this.forEach((n => {
                    const r = e(n)
                      , o = t.get(r);
                    o ? o.push(n) : t.set(r, [n])
                }
                )),
                t
            }
            ,
            Array.prototype.selectMany = function(e) {
                return this.length ? this.map((t => e(t))).reduce(( (e, t) => e.concat(t))) : []
            }
            ,
            Array.prototype.toChunk = function(e) {
                const t = Math.ceil(this.length / e)
                  , n = new Array(t);
                for (let r = 0; r < t; r++) {
                    const t = e * r;
                    n[r] = this.slice(t, t + e)
                }
                return n
            }
            ,
            Array.prototype.merge = function(e, {lookup: t=e => e, hasConflict: n= (e, t) => !1}={}) {
                if (!e || 0 == e.length)
                    return !1;
                const r = new Map;
                for (const e of this || []) {
                    const n = JSON.stringify(t(e));
                    r.set(n, e)
                }
                let o = !1;
                for (const i of e) {
                    const e = JSON.stringify(t(i));
                    if (r.has(e)) {
                        const t = r.get(e);
                        n(i, t) && (Object.assign(t, i),
                        o = !0)
                    } else
                        this.push(i),
                        o = !0
                }
                return o
            }
            ,
            Array.prototype.diff = function(e, {lookup: t=e => e, hasConflict: n= (e, t) => !1}={}) {
                const r = [];
                if (!e || 0 == e.length)
                    return r;
                const o = new Map;
                for (const e of this || []) {
                    const n = JSON.stringify(t(e));
                    o.set(n, e)
                }
                for (const i of e) {
                    const e = JSON.stringify(t(i));
                    if (o.has(e)) {
                        n(i, o.get(e)) && r.push(i)
                    } else
                        r.push(i)
                }
                return r
            }
            ,
            Array.prototype.remove = function(e) {
                let t = this.indexOf(e);
                t > -1 && this.splice(t, 1)
            }
        }
        ,
        9856: () => {
            Date.prototype.format = function(e, t) {
                var n, r, o, i, s = (n = /d{1,4}|M{1,5}|yy(?:yy)?|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
                r = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
                o = /[^-+\dA-Z]/g,
                i = function(e, t) {
                    for (e = String(e),
                    t = t || 2; e.length < t; )
                        e = "0" + e;
                    return e
                }
                ,
                function(e, t, a) {
                    var l = s;
                    if (1 != arguments.length || "[object String]" != Object.prototype.toString.call(e) || /\d/.test(e) || (t = e,
                    e = void 0),
                    e = e ? new Date(e) : new Date,
                    isNaN(e))
                        throw SyntaxError("invalid date");
                    "UTC:" == (t = String(l.masks[t] || t || l.masks.default)).slice(0, 4) && (t = t.slice(4),
                    a = !0);
                    var c = a ? "getUTC" : "get"
                      , u = e[c + "Date"]()
                      , d = e[c + "Day"]()
                      , p = e[c + "Month"]()
                      , h = e[c + "FullYear"]()
                      , m = e[c + "Hours"]()
                      , f = e[c + "Minutes"]()
                      , y = e[c + "Seconds"]()
                      , g = e[c + "Milliseconds"]()
                      , v = a ? 0 : e.getTimezoneOffset()
                      , b = {
                        d: u,
                        dd: i(u),
                        ddd: l.i18n.dayNames[d],
                        dddd: l.i18n.dayNames[d + 7],
                        M: p + 1,
                        MM: i(p + 1),
                        MMM: l.i18n.monthShortNames[p],
                        MMMM: l.i18n.monthNames[p + 12],
                        MMMMM: l.i18n.monthNames[p + 24],
                        yy: String(h).slice(2),
                        yyyy: h,
                        h: m % 12 || 12,
                        hh: i(m % 12 || 12),
                        H: m,
                        HH: i(m),
                        m: f,
                        mm: i(f),
                        s: y,
                        ss: i(y),
                        l: i(g, 3),
                        L: i(g > 99 ? Math.round(g / 10) : g),
                        t: m < 12 ? "a" : "p",
                        tt: m < 12 ? "am" : "pm",
                        T: m < 12 ? "A" : "P",
                        TT: m < 12 ? "AM" : "PM",
                        Z: a ? "UTC" : (String(e).match(r) || [""]).pop().replace(o, ""),
                        o: (v > 0 ? "-" : "+") + i(100 * Math.floor(Math.abs(v) / 60) + Math.abs(v) % 60, 4),
                        S: ["th", "st", "nd", "rd"][u % 10 > 3 ? 0 : (u % 100 - u % 10 != 10) * u % 10]
                    };
                    return t.replace(n, (function(e) {
                        return e in b ? b[e] : e.slice(1, e.length - 1)
                    }
                    ))
                }
                );
                return s.masks = {
                    default: "ddd mmm dd yyyy HH:MM:ss",
                    shortDate: "m/d/yy",
                    mediumDate: "mmm d, yyyy",
                    longDate: "mmmm d, yyyy",
                    fullDate: "dddd, mmmm d, yyyy",
                    shortTime: "h:MM TT",
                    mediumTime: "h:MM:ss TT",
                    longTime: "h:MM:ss TT Z",
                    isoDate: "yyyy-mm-dd",
                    isoTime: "HH:MM:ss",
                    isoDateTime: "yyyy-mm-dd'T'HH:MM:ss",
                    isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
                },
                s.i18n = {
                    dayNames: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб", "Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"],
                    monthNames: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек", "января", "февраля", "марта", "апреля", "мая", "июня", "июля", "августа", "сентября", "октября", "ноября", "декабря"],
                    monthShortNames: ["янв", "февр", "марта", "апр", "мая", "июня", "июля", "авг", "сент", "окт", "нояб", "дек"]
                },
                $.localize.dfr && (s.i18n.dayNames = $.localize.dfr.abbreviatedDayNames.concat($.localize.dfr.dayNames),
                $.localize.dfr.abbreviatedMonthNames[1] = "февр",
                $.localize.dfr.abbreviatedMonthNames[2] = "марта",
                $.localize.dfr.abbreviatedMonthNames[4] = "мая",
                $.localize.dfr.abbreviatedMonthNames[5] = "июня",
                $.localize.dfr.abbreviatedMonthNames[6] = "июля",
                $.localize.dfr.abbreviatedMonthNames[8] = "сент",
                $.localize.dfr.abbreviatedMonthNames[10] = "нояб",
                s.i18n.monthNames = $.localize.dfr.abbreviatedMonthNames.concat($.localize.dfr.monthGenitiveNames).concat($.localize.dfr.monthNames.map(( ([e,...t]) => e.toUpperCase() + t.join(""))))),
                s(this, e, t)
            }
            ,
            Date.prototype.daysBetween = function(e) {
                var t = new Date(this.getFullYear(),this.getMonth(),this.getDate())
                  , n = (new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime() - t.getTime()) / 864e5;
                return Math.floor(n)
            }
            ,
            Date.prototype.dateEqual = function(e) {
                return this.getDate() === e.getDate() && this.getMonth() === e.getMonth() && this.getFullYear() === e.getFullYear()
            }
            ,
            Date.prototype.is1stJan = function() {
                return 1 === this.getDate() && 0 === this.getMonth()
            }
            ,
            Date.prototype.getUtcTime = function() {
                return this.getTime() - 6e4 * this.getTimezoneOffset()
            }
            ,
            Date.utcNow = function() {
                return (new Date).getUtcTime()
            }
            ,
            Date.prototype.addDays = function(e) {
                let t = new Date(this.valueOf());
                return t.setDate(t.getDate() + e),
                t
            }
            ,
            Date.prototype.addMinutes = function(e) {
                let t = new Date(this.valueOf());
                return t.setMinutes(t.getMinutes() + e),
                t
            }
            ,
            Date.prototype.addHours = function(e) {
                const t = new Date(this.valueOf());
                return isNaN(e) || t.setHours(t.getHours() + +e),
                t
            }
            ,
            Date.prototype.addMinutes = function(e) {
                let t = new Date(this.valueOf());
                return t.setMinutes(t.getMinutes() + e),
                t
            }
        }
        ,
        66350: () => {
            var e;
            Event.prototype.stopPropagation = (e = Event.prototype.stopPropagation,
            function() {
                this.isPropagationStopped = !0,
                e.call(this)
            }
            )
        }
        ,
        77416: () => {
            Map.prototype.every = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                let t = !0;
                return this.forEach(( (n, r, o) => {
                    t &= e(n, r, o)
                }
                )),
                1 == t
            }
            ,
            Map.prototype.some = function(e) {
                if (!(e instanceof Function))
                    throw new TypeError("Callback is not a function");
                let t = !1;
                return this.forEach(( (n, r, o) => {
                    t || (t = e(n, r, o))
                }
                )),
                t
            }
            ,
            Map.prototype.reduce = function(e, t) {
                if ("function" != typeof e)
                    throw new TypeError("Map reduce argument 1 must be a function");
                let n = t
                  , r = 0;
                return this.forEach(( (o, i, s) => {
                    r++,
                    n = 1 != r || null != t ? e(n, o, i, s) : o
                }
                )),
                n
            }
            ,
            Map.prototype.map = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                const t = new Map;
                return this.forEach(( (n, r, o) => {
                    t.set(r, e(n, r, o))
                }
                )),
                t
            }
            ,
            Map.prototype.toArray = function(e) {
                if ("function" != typeof e && null != e)
                    throw new TypeError("Callback if not a function");
                const t = [];
                return this.forEach(( (n, r, o) => t.push(null == e ? n : e(n, r, o)))),
                t
            }
            ,
            Map.prototype.find = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                let t = null;
                return this.forEach(( (n, r, o) => {
                    t || e(n, r, o) && (t = n)
                }
                )),
                t
            }
            ,
            Map.prototype.sort = function(e) {
                let t = new Map;
                this[Symbol.iterator] = function*() {
                    yield*[...this.entries()].sort(e)
                }
                ;
                for (let[e,n] of this)
                    t.set(e, n);
                return t
            }
        }
        ,
        82353: () => {
            Number.prototype.formatMoney = function(e, t, n) {
                var r = this
                  , o = (e = isNaN(e = Math.abs(e)) ? 2 : e,
                t = null == t ? "." : t,
                n = null == n ? "," : n,
                r < 0 ? "-" : "")
                  , i = parseInt(r = Math.abs(+r || 0).toFixed(e)) + ""
                  , s = (s = i.length) > 3 ? s % 3 : 0;
                return o + (s ? i.substr(0, s) + n : "") + i.substr(s).replace(/(\d{3})(?=\d)/g, "$1" + n) + (e ? t + Math.abs(r - i).toFixed(e).slice(2) : "")
            }
            ,
            Number.prototype.countDecimals = function() {
                return Math.floor(this.valueOf()) === this.valueOf() ? 0 : this.toString().split(".")[1].length || 0
            }
            ,
            Number.prototype.toFixedNumber = function(e, t) {
                var n = Math.pow(t || 10, e);
                return Math.round(this * n) / n
            }
            ,
            Number.tryParseInt = function(e) {
                const t = parseInt(e);
                return isNaN(t) ? null : t
            }
        }
        ,
        58330: () => {
            Set.prototype.toArray = function(e) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.toArray must be null or function");
                const t = [];
                return this.forEach((n => t.push(null == e ? n : e(n)))),
                t
            }
            ,
            Set.prototype.map = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.map must be function");
                const t = new Set;
                return this.forEach((n => t.add(e(n)))),
                t
            }
            ,
            Set.prototype.filter = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.map must be function");
                const t = new Set;
                return this.forEach((n => {
                    e(n) && t.add(n)
                }
                )),
                t
            }
        }
        ,
        54447: () => {
            if ("localStorage"in window || null !== window.localStorage) {
                const e = Storage.prototype.setItem;
                Storage.prototype.setItem = function(t, n) {
                    try {
                        e.apply(this, arguments)
                    } catch (t) {
                        if (-1 === t.message.indexOf("quota"))
                            throw wb.spa.logError(t),
                            t;
                        let n, r, o = {
                            len: 0
                        }, i = 0;
                        for (r in localStorage)
                            localStorage.hasOwnProperty(r) && (n = 2 * (localStorage[r].length + r.length),
                            i += n,
                            o.len < n && (o = {
                                len: n,
                                key: r
                            }));
                        if (o.key)
                            if (o.len > 307200) {
                                this.removeItem(o.key);
                                const n = `localstorage delkey:${o.key}, len:${o.len / 1024} KB, key:${arguments[0]}, exp:${t.message}`;
                                console.log(n),
                                wb.spa.logError(new Error(n)),
                                e.apply(this, arguments)
                            } else {
                                const e = `localstorage exception key:${arguments[0]}, exp:${t.message}, storageKeys:${localStorage.length}, storageLen:${i / 1024} KB`;
                                console.log(e),
                                wb.spa.logError(new Error(e))
                            }
                    }
                }
                ,
                Storage.prototype.trySetItem = function(e, t) {
                    try {
                        this.setItem(e, t)
                    } catch (e) {}
                }
                ,
                Storage.prototype.clearStartsWith = function(e, t) {
                    if (e)
                        try {
                            Object.entries(this).filter((n => 0 === n[0].indexOf(e) && n[0] !== t)).forEach((e => {
                                this.removeItem(e[0])
                            }
                            ))
                        } catch (e) {}
                }
                ,
                Storage.prototype.putObject = function(e, t, {tryCatch: n}={}) {
                    if (n)
                        try {
                            this.setItem(e, JSON.stringify(t))
                        } catch (e) {}
                    else
                        this.setItem(e, JSON.stringify(t))
                }
                ,
                Storage.prototype.getObject = function(e) {
                    var t = this.getItem(e);
                    try {
                        return t && JSON.parse(t)
                    } catch (t) {
                        this.removeItem(e)
                    }
                    return null
                }
                ,
                Storage.prototype.hasItem = function(e) {
                    return null != this.getItem(e)
                }
            }
        }
        ,
        63545: () => {
            String.prototype.capitalizeIf = function(e) {
                return e ? this.charAt(0).toUpperCase() + this.slice(1) : this
            }
            ,
            String.prototype.trimRight = function() {
                return this.replace(/\s+$/g, "")
            }
            ,
            String.prototype.trimLeft = function() {
                return this.replace(/^\s+/g, "")
            }
            ,
            String.prototype.trim = function() {
                return this.trimRight().trimLeft()
            }
            ,
            String.prototype.trimMiddle = function() {
                return this.trim().replace(/\s\s+/g, " ")
            }
            ,
            String.prototype.cleanTrashBetweenTd = function() {
                return this.replace(new RegExp(">[ \t\r\n\v\f]*<","g"), "><")
            }
            ,
            String.format = function() {
                for (var e = arguments[0], t = 0; t < arguments.length - 1; t++) {
                    var n = new RegExp("\\{" + t + "\\}","gm");
                    e = e.replace(n, arguments[t + 1])
                }
                return e
            }
            ,
            String.prototype.formatPhone = function(e) {
                let t = this.split("")
                  , n = "";
                for (let r = 0; r < e.length; r++)
                    n += "#" === e[r] ? t.splice(0, 1) : e[r];
                return n
            }
            ,
            String.prototype.capitalize = function() {
                return this.charAt(0).toUpperCase() + this.slice(1)
            }
            ,
            String.prototype.endsWith = function(e) {
                return -1 !== this.indexOf(e, this.length - e.length)
            }
            ,
            String.prototype.toSafeString = function() {
                return encodeURIComponent(this.replace(/<\/?[^>]+>/gi, "").trim())
            }
            ,
            String.prototype.hashCode = function() {
                let e, t, n = 0;
                if (0 === this.length)
                    return n;
                for (e = 0; e < this.length; e++)
                    t = this.charCodeAt(e),
                    n = (n << 5) - n + t,
                    n |= 0;
                return n
            }
        }
        ,
        93066: (e, t, n) => {
            "use strict";
            var r = {};
            n.r(r),
            n.d(r, {
                Deferred: () => W,
                animationFrameWithMinDelay: () => V,
                base64: () => G,
                currentCulture: () => P,
                debounce: () => A,
                debounceLead: () => E,
                debounceTrail: () => O,
                deepMerge: () => T,
                deepMerge_v2: () => D,
                delegator: () => N,
                getClientDt: () => H,
                isElementInViewport: () => R,
                isMobileBrowser: () => z,
                isNumber: () => q,
                loadCssAsync: () => Q,
                loadJsAsync: () => J,
                lockPromise: () => L,
                nextTick: () => U,
                objectSerializer: () => k,
                once: () => j,
                repeat: () => x,
                serializeToFormData: () => M,
                sleep: () => F,
                throttle: () => B
            });
            n(63545),
            n(95407),
            n(77416),
            n(58330),
            n(56105),
            n(49921),
            n(9856),
            n(82353),
            n(54447),
            n(66350),
            n(24349);
            NodeList.prototype.toArray = function() {
                return Array.prototype.slice.call(this)
            }
            ,
            HTMLCollection.prototype.forEach = function(e) {
                Array.prototype.slice.call(this).forEach(( (t, n, r) => e(t, n, r)))
            }
            ,
            window.requestIdleCallback || (window.requestIdleCallback = function(e) {
                setTimeout(e, 1)
            }
            );
            var o = n(84230);
            const i = function() {
                function e() {}
                var t = e.prototype;
                return t.init = function() {
                    const e = {}
                      , t = document.querySelector(".j-lk-menu-top")
                      , n = [{
                        type: "top",
                        selector: document.querySelector(".j-lk-menu-top")
                    }];
                    return this.alternateRoutes = new Map,
                    n.forEach((t => t.selector.querySelectorAll("a").forEach((t => {
                        var n;
                        let r;
                        try {
                            r = new URL(t.href).pathname
                        } catch (e) {
                            return
                        }
                        const o = "true" == t.dataset.main
                          , i = "true" == t.dataset.sub
                          , s = t.parentElement;
                        e.hasOwnProperty(r) || (e[r] = {
                            links: [],
                            elements: []
                        });
                        const a = t.closest(o ? "li" : "ul");
                        e[r].elements.push(a),
                        e[r].links.push({
                            el: s,
                            isMainMenu: o,
                            isSubMenu: i,
                            path: r,
                            switch: s.dataset.switch,
                            altSwitch: s.dataset.altSwitch
                        }),
                        null === (n = t.dataset.altRoutes) || void 0 === n || n.split(",").forEach((e => {
                            e && this.alternateRoutes.set(e.trim(), r)
                        }
                        )),
                        "6" === a.dataset.attr && (this.walletWrapperEl = a,
                        this.walletEl = t,
                        this.walletEl.innerText = wb.settings.balanceTitle,
                        this.walletWrapperEl.classList.add(wb.settings.walletTypeCode > 0 ? "lk-menu-main__item--wallet" : "lk-menu-main__item--balance"))
                    }
                    )))),
                    this.menuDictionary = e,
                    this.menuDictionaryKeys = Object.keys(this.menuDictionary),
                    this.root = t,
                    this.roots = n.map((e => e.selector)),
                    this.nextAnimationFrame = null,
                    this._initDropDownMenu(),
                    this.toggleVisibilityNodes(),
                    wb.global.subscribe(this.toggleVisibilityNodes.bind(this)),
                    $.observe(wb.settings, "balanceTitle", ( () => {
                        this.walletEl.innerText = wb.settings.balanceTitle,
                        this.walletWrapperEl.classList.add(wb.settings.walletTypeCode > 0 ? "lk-menu-main__item--wallet" : "lk-menu-main__item--balance")
                    }
                    )),
                    this
                }
                ,
                t.setStatic = function(e) {
                    this.stylesLink = e.stylesLink
                }
                ,
                t.updateMenu = function(e, t, n) {
                    if (this.toggleVisibility(t, n),
                    "/" != e[0] && (e = "/" + e),
                    null == this.root)
                        return;
                    const r = this.alternateRoutes.get(e);
                    r && (e = r);
                    const o = this.menuDictionary[e];
                    if (null == o)
                        return;
                    const i = o.elements.length > 0 ? o.elements[0].dataset.attr : "";
                    this.menuDictionaryKeys.forEach((t => {
                        const n = this.menuDictionary[t].elements;
                        if (n.length > 0) {
                            const e = n[0].dataset.attr == i;
                            n.forEach((t => t.classList.toggle("active", e)))
                        }
                        this.menuDictionary[t].links.forEach((t => {
                            !t.isMainMenu && t.el.classList.toggle("active", t.path == e)
                        }
                        ))
                    }
                    ))
                }
                ,
                t.toggleVisibility = function(e, t) {
                    if (!e || !e.visible || e.authOnly && void 0 !== t && !t)
                        return this.hide();
                    this.show()
                }
                ,
                t.toggleVisibilityNodes = function() {
                    this.menuDictionaryKeys.forEach((e => {
                        this.menuDictionary[e].links.forEach((e => {
                            if (e.switch || e.altSwitch) {
                                let t = wb.global.settings.switches[e.switch];
                                if (!t && e.altSwitch && (t = wb.global.settings.switches[e.altSwitch],
                                t))
                                    for (const [t,n] of this.alternateRoutes)
                                        if (n == e.path) {
                                            const n = e.el.querySelector("a");
                                            if (n) {
                                                n.href = t;
                                                break
                                            }
                                        }
                                e.el.classList.toggle("hide", !t)
                            }
                        }
                        ))
                    }
                    ))
                }
                ,
                t.show = async function() {
                    await this.$helper.loadCssAsync(this.stylesLink),
                    this.roots.forEach((e => e.classList.remove("hide"))),
                    "ru" == wb.settings.currentLocale || wb.global.userSettings.closed.includes("new_fin_oper_loc") || (wb.global.userSettings.closed.push("new_fin_oper_loc"),
                    wb.global.saveUserSettings(),
                    this._showFinOperationsTooltip())
                }
                ,
                t.hide = function() {
                    this.roots.forEach((e => e.classList.add("hide")))
                }
                ,
                t._initDropDownMenu = function() {
                    const e = ["mouseleave", "click"];
                    this.menuDictionaryKeys.forEach((t => {
                        this.menuDictionary[t].links.forEach((t => {
                            t.isMainMenu && t.el.addEventListener("mouseover", ( () => {
                                t.isMainMenu && t.el.classList.add("open")
                            }
                            )),
                            e.forEach((function(e) {
                                t.isMainMenu && t.el.addEventListener(e, (function() {
                                    t.isMainMenu && t.el.classList.remove("open")
                                }
                                ))
                            }
                            ))
                        }
                        ))
                    }
                    )),
                    this._addClickStat()
                }
                ,
                t._addClickStat = function() {
                    this.roots.forEach((e => {
                        e.addEventListener("click", (e => {
                            var t, n;
                            const r = null === (t = e.target) || void 0 === t ? void 0 : t.closest("a")
                              , o = null == r || null === (n = r.dataset) || void 0 === n ? void 0 : n.lkHeaderWba;
                            if (!o)
                                return;
                            const i = `${o}_T`;
                            this.$analitic.sendEvent(i)
                        }
                        ))
                    }
                    ))
                }
                ,
                t._showFinOperationsTooltip = function() {
                    const e = "lk-menu-main__item--tooltip-active"
                      , t = document.getElementById("menuTooltipTarget");
                    if (!t)
                        return;
                    const n = t.querySelector(".j-tooltip-close")
                      , r = () => t.classList.remove(e);
                    null == n || n.addEventListener("click", r),
                    setTimeout(r, 6e3),
                    t.classList.add(e)
                }
                ,
                e
            }()
              , s = ["ru-basket-api.wildberries.ru", "basket-api.wildberries.by", "basket-api.wildberries.kz", "basket-api.wildberries.kg", "basket-api.wildberries.am", "basket-api.wildberries.uz", "localhost", "wbxoofex.wildberries.ru", "logistics.wb.ru", "user-geo-data.wildberries.ru"]
              , a = ["www.wildberries.ru", "www.wildberries.by", "www.wildberries.kz", "www.wildberries.kg", "kz.wildberries.ru", "www.wildberries.am", "www.wildberries.uz", "ru-basket-api.wildberries.ru", "basket-api.wildberries.by", "basket-api.wildberries.kz", "basket-api.wildberries.kg", "basket-api.wildberries.am", "basket-api.wildberries.uz", "localhost"];
            const l = new (function() {
                function e() {}
                var t = e.prototype;
                return t.fetchJSON = async function(e, t={}, n={}) {
                    let r;
                    try {
                        if (n.timeout) {
                            const e = new AbortController;
                            setTimeout(( () => e.abort()), n.timeout),
                            t.signal = e.signal
                        }
                        let o;
                        switch (r = await this.fetch(e, t),
                        this._wrapTimeout(r, n),
                        r.status) {
                        case 401:
                        case 403:
                            throw new UnauthorizeError({
                                jwtDrop: r.headers.has("X-Jwt-Drop")
                            });
                        case 404:
                            throw new NotFoundError;
                        case 204:
                        case 208:
                            o = null;
                            break;
                        default:
                            if (!r.ok) {
                                const e = new Error(`Fetch failed with status code ${r.status}`);
                                throw e.status = r.status,
                                n.keepRespData && (e.data = await r.json()),
                                e
                            }
                            o = await r.json()
                        }
                        return n.noProcessResponse || null == o ? n.includeResponse ? {
                            response: r,
                            responseData: o,
                            headers: r.headers
                        } : o : new Promise(( (e, t) => {
                            $.processResponse(o, (t => n.includeResponse ? e({
                                response: r,
                                responseData: t,
                                headers: r.headers
                            }) : e(t)), (e => t(new KnownServerError(e))), (t => n.includeResponse ? e({
                                response: r,
                                responseData: t,
                                headers: r.headers
                            }) : e(t)))
                        }
                        ))
                    } catch (i) {
                        let s = i;
                        if ("AbortError" == i.name && n.throwAbortError)
                            throw i;
                        const a = !i.isCustomError && i instanceof TypeError && ("Failed to fetch" === i.message || "NetworkError when attempting to fetch resource." === i.message || "Cancelled" === i.message);
                        if (a && (s = new CancelledRequestError(i.message)),
                        (a || "AbortError" == i.name) && n.tryResend)
                            return WbSpaModel.prototype.$services.retryFetchService.saveRequest(e, t, n),
                            Promise.resolve({});
                        if (n.hasOwnProperty("defaultValue"))
                            return n.includeResponse ? {
                                response: r,
                                responseData: n.defaultValue
                            } : n.defaultValue;
                        var o;
                        if (s.isCustomError || "AbortError" !== i.name && console.error(`Unknown server error, msg=${i.message}, requested_url=${e}`),
                        s.isUnauthorize)
                            s.jwtDrop && WbSpaModel.prototype.$auth.setToken(null),
                            n.redirectUnauth && wb.spa.signIn({
                                query: {
                                    returnUrl: window.location.href
                                }
                            }, null !== (o = n.replaceState) && void 0 !== o && o);
                        throw s
                    }
                }
                ,
                t.fetchBasicJSON = async function(e, t={}, n={}) {
                    var r;
                    if (n.timeout) {
                        const e = new AbortController;
                        setTimeout(( () => e.abort()), n.timeout),
                        t.signal = e.signal
                    }
                    if (!t.headers && (t.headers = new Headers),
                    n.addUserHeader) {
                        const e = WbSpaModel.prototype.$user.getId();
                        e && t.headers.set("X-Userid", e)
                    }
                    const o = WbSpaModel.prototype.$auth.jwt;
                    n.addAuthHeader && o && t.headers.set("Authorization", `Bearer ${o}`);
                    const i = null !== (r = n.retry) && void 0 !== r ? r : 1;
                    let s;
                    for (let r = 1; r <= i; r++)
                        try {
                            var a;
                            if (n.addCatalogCaptcha && null !== (a = wb.global) && void 0 !== a && a.settings.switches.enableCatalogCaptcha && !o) {
                                var l;
                                const e = null !== (l = WbSpaModel.prototype.$services.parseTokenService) && void 0 !== l ? l : await WbSpaModel.prototype.$getService("parseTokenService")
                                  , n = await e.getTokenCatalog();
                                t.headers.set("X-Captcha-ID", `Catalog ${n}`)
                            }
                            return await this.fetch(e, t).then((async t => {
                                var r, o, i;
                                if (204 === t.status)
                                    return Promise.resolve(n.return204 ? t : null);
                                if (208 === t.status)
                                    return Promise.resolve(null);
                                if (t.ok)
                                    return s = await t.json(),
                                    "v2" === n.v && s.error ? Promise.reject(new KnownServerError(s.error)) : s;
                                if (n.addCatalogCaptcha && null !== (r = wb.global) && void 0 !== r && r.settings.switches.enableCatalogCaptcha && 498 === t.status)
                                    throw null === (i = WbSpaModel.prototype.$services.parseTokenService) || void 0 === i || i.resetToken(),
                                    new Error("Need refresh token");
                                if ("v2" === n.v)
                                    return Promise.reject(new NetworkError);
                                n.logOff || null === (o = wb.spa) || void 0 === o || o.logError(new Error(`Failed fetch. status:${t.status}; type:${t.type}`), {
                                    url: e
                                })
                            }
                            ))
                        } catch (t) {
                            var c;
                            if ((t.isCustomError || t.isNetworkError) && "v2" === n.v)
                                return Promise.reject(t);
                            if ("AbortError" === t.name && n.throwAbortError)
                                throw t;
                            if (t instanceof TypeError && "Cancelled" === t.message)
                                return null;
                            if (n.logOff || null === (c = wb.spa) || void 0 === c || c.logError(t, {
                                url: e,
                                attempt: r
                            }),
                            r === i && n.nullOnError)
                                return null;
                            if (r === i && t instanceof TypeError && ("Failed to fetch" === t.message || "NetworkError when attempting to fetch resource." === t.message))
                                throw new NetworkError
                        }
                    return null
                }
                ,
                t.fetchText = async function(e, t, n={}) {
                    let r;
                    if (n.timeout) {
                        const e = new AbortController;
                        setTimeout(( () => e.abort()), n.timeout),
                        t.signal = e.signal
                    }
                    try {
                        let o;
                        if (r = await this.fetch(e, t),
                        401 === r.status)
                            throw new UnauthorizeError;
                        return r.ok && (o = await r.text()),
                        this._wrapTimeout(r, n),
                        o
                    } catch (t) {
                        let r = t;
                        var o;
                        if (!t.isCustomError && t instanceof TypeError && ("Failed to fetch" === t.message || "NetworkError when attempting to fetch resource." === t.message || "Cancelled" === t.message) && (r = new CancelledRequestError),
                        r.isCustomError || (console.log(t.message),
                        r = new KnownServerError("Unknown server error, msg=" + t.message + ", requested_url=" + e)),
                        r.isUnauthorize)
                            r.jwtDrop && WbSpaModel.prototype.$auth.setToken(null),
                            n.redirectUnauth && wb.spa.signIn({
                                query: {
                                    returnUrl: window.location.href
                                }
                            }, null !== (o = n.replaceState) && void 0 !== o && o);
                        throw r
                    }
                }
                ,
                t.fetchStaticDataV2 = async function(e, t=3e4, n="json") {
                    var r, o;
                    return "text" === n ? null !== (r = await this.fetchText(wb.helpers.url.urlStaticData("data/" + e), {}, {
                        timeout: t,
                        nullOnError: !0
                    })) && void 0 !== r ? r : await this.fetchText(wb.helpers.url.urlStaticDataObsolete(e), {
                        cache: "no-cache"
                    }, {
                        timeout: t,
                        nullOnError: !0
                    }) : null !== (o = await this.fetchBasicJSON(wb.helpers.url.urlStaticData("data/" + e), {}, {
                        timeout: t,
                        nullOnError: !0
                    })) && void 0 !== o ? o : await this.fetchBasicJSON(wb.helpers.url.urlStaticDataObsolete(e), {
                        cache: "no-cache"
                    }, {
                        timeout: t,
                        nullOnError: !0
                    })
                }
                ,
                t.fetchStaticV2 = async function(e, t=3e4, n="json") {
                    var r, o;
                    return "text" === n ? null !== (r = await this.fetchText(wb.helpers.url.urlStaticData(e), {}, {
                        timeout: t,
                        nullOnError: !0
                    })) && void 0 !== r ? r : await this.fetchText(e, {
                        cache: "no-cache"
                    }, {
                        timeout: t,
                        nullOnError: !0
                    }) : null !== (o = await this.fetchBasicJSON(wb.helpers.url.urlStaticData(e), {}, {
                        timeout: t,
                        nullOnError: !0
                    })) && void 0 !== o ? o : await this.fetchBasicJSON(e, {
                        cache: "no-cache"
                    }, {
                        timeout: t,
                        nullOnError: !0
                    })
                }
                ,
                t.fetch = function(e) {
                    function t(t) {
                        return e.apply(this, arguments)
                    }
                    return t.toString = function() {
                        return e.toString()
                    }
                    ,
                    t
                }((async function(e, t={}) {
                    const {headers: n={}, ...r} = t
                      , o = new Headers(n)
                      , i = WbSpaModel.prototype;
                    let l = !1;
                    try {
                        const t = new URL(e.startsWith("//") ? `${document.location.protocol}${e}` : e);
                        (t.hostname === window.location.host && t.port === window.location.port || s.includes(t.hostname)) && (a.includes(t.hostname) && (o.set("X-Spa-Version", WbSpaModel.appVersion),
                        o.set("X-Requested-With", "XMLHttpRequest"),
                        o.set("DeviceId", i.$services.sessionService.getSession()),
                        i.$adult.isConfirmed && o.set("adultConfirmed", "1")),
                        !o.has("Authorization") && i.$auth.jwt && o.set("Authorization", `Bearer ${i.$auth.jwt}`))
                    } catch (e) {
                        l = !0,
                        o.set("X-Requested-With", "XMLHttpRequest"),
                        o.set("X-Spa-Version", WbSpaModel.appVersion),
                        o.set("DeviceId", i.$services.sessionService.getSession()),
                        !o.has("Authorization") && i.$auth.jwt && o.set("Authorization", `Bearer ${i.$auth.jwt}`),
                        i.$adult.isConfirmed && o.set("adultConfirmed", "1")
                    }
                    return t.body instanceof URLSearchParams && (o.set("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"),
                    r.body = r.body.toString()),
                    fetch(e, {
                        credentials: "same-origin",
                        headers: o,
                        ...r
                    }).then((e => {
                        var t, n;
                        if (l && null !== (t = wb) && void 0 !== t && null !== (n = t.helpers) && void 0 !== n && n.date) {
                            const t = e.headers.get("Date");
                            wb.helpers.date.serverDate = new Date(t)
                        }
                        return e
                    }
                    ))
                }
                )),
                t._wrapTimeout = function(e, t) {
                    return t && e.headers.has("X-Timeout") && (t.modified = {
                        timeout: !0
                    }),
                    t
                }
                ,
                e
            }());
            const c = new (function() {
                function e() {}
                var t = e.prototype;
                return t.fetch = async function(e, t, n, r) {
                    var o;
                    const i = WbSpaModel.prototype.$auth;
                    let s = i.getToken();
                    const a = null == r ? void 0 : r(null === (o = s.data) || void 0 === o ? void 0 : o.shard_key);
                    if (null != t && t.timeout) {
                        const e = new AbortController;
                        setTimeout(( () => e.abort()), t.timeout),
                        t.signal = e.signal
                    }
                    return this._fetch(`${a || ""}${e}`, t, s.token).then((async t => {
                        if (t.ok) {
                            const e = +t.headers.get("content-length");
                            if (e > 16 && e < 256) {
                                const e = await t.clone().json();
                                -1 === (null == e ? void 0 : e.state) && 41 === e.reason && i._slide(!0)
                            }
                            return t
                        }
                        function r(n, r) {
                            return wb.spa.logError({
                                message: n
                            }, {
                                status: r,
                                msg: "wbx_fetch"
                            }),
                            Promise.reject(new Error(`url:${e}, response:${n}, code:${t.status}`))
                        }
                        return 401 === t.status && i._slide(!0),
                        "function" == typeof n ? n(t, r) : t.text().then((e => r(e, t.status)))
                    }
                    ))
                }
                ,
                t.postJSON = async function(e, t, n) {
                    return this._fetchJSON(e, t, n, "POST")
                }
                ,
                t.getJSON = async function(e, t) {
                    return this._fetchJSON(e, null, t, "GET")
                }
                ,
                t._fetch = function(e, t, n) {
                    return n ? (!t && (t = {}),
                    t.headers = Object.assign({}, t.headers, {
                        Authorization: "Bearer " + n
                    }),
                    WbSpaModel.prototype.$httpClient.fetch(e, t)) : Promise.reject("miss accessToken")
                }
                ,
                t._fetchJSON = async function(e, t, n, r) {
                    const o = {
                        method: r
                    };
                    Object.assign(o, n),
                    o.headers = {
                        "X-Service-Name": "site"
                    },
                    t && (o.headers["Content-Type"] = "application/json",
                    o.body = t);
                    const i = await this.fetch(e, o);
                    if (i.ok)
                        return await i.json()
                }
                ,
                e
            }());
            function u(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, d(r.key), r)
                }
            }
            function d(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const p = "wbx__tokenData"
              , h = "v2"
              , m = `/${h}/auth/slide-v3`
              , f = `/${h}/auth/slide-v3-confirm`
              , y = `/${h}/auth/logoff`;
            const g = new (function() {
                function e() {
                    this._pull(),
                    window.addEventListener("storage", (e => {
                        e.key === p && this._pull()
                    }
                    ))
                }
                var t, n, r, o = e.prototype;
                return o.getToken = function() {
                    if (this.jwt)
                        if (this.isWbxSite)
                            this._slide(!1, !0);
                        else {
                            this._isJwtExpired(this.jwtData) && this._slide()
                        }
                    return this._data
                }
                ,
                o.setToken = function(e) {
                    try {
                        if (e) {
                            const t = this._tryDecodeJwt(e);
                            if (t) {
                                this._data = {
                                    token: e,
                                    data: t,
                                    um: this._createUm(t)
                                };
                                try {
                                    localStorage.putObject(p, {
                                        token: e
                                    })
                                } catch (e) {}
                                return
                            }
                        }
                        this._data = {
                            token: null,
                            data: {},
                            um: this._createUm()
                        },
                        localStorage.removeItem(p)
                    } catch (e) {} finally {
                        this._jwtUpdateResp = null
                    }
                }
                ,
                o.signOut = async function(e) {
                    if (!this.isAuth)
                        return;
                    const t = new AbortController;
                    setTimeout(( () => t.abort()), 2e3),
                    await this._fetch(y, {
                        method: "POST",
                        credentials: "include",
                        signal: t.signal,
                        headers: {
                            deviceid: WbSpaModel.prototype.$services.sessionService.getSession(),
                            "wb-apptype": "web",
                            "wb-appversion": WbSpaModel.appVersion
                        }
                    }).catch((e => Promise.resolve({
                        isNetworkError: !0
                    }))),
                    this.signOutOld(e),
                    this.setToken(null)
                }
                ,
                o.signOutOld = async function(e) {
                    return WbSpaModel.prototype.$httpClient.fetchJSON(`/webapi/security/exit?returnUrl=${encodeURIComponent(e || "")}`, {
                        method: "POST"
                    })
                }
                ,
                o._pull = function() {
                    var e;
                    const t = null === (e = localStorage.getObject(p)) || void 0 === e ? void 0 : e.token
                      , n = this._tryDecodeJwt(t);
                    this._data = n ? {
                        token: t,
                        data: n,
                        um: this._createUm(n)
                    } : {
                        token: null,
                        data: {},
                        um: this._createUm(n)
                    }
                }
                ,
                o._isJwtExpired = function(e) {
                    return Date.now() >= 1e3 * (e.iat + 172800)
                }
                ,
                o._isJwtShortExpired = function(e) {
                    return Date.now() >= 1e3 * (e.iat + 120)
                }
                ,
                o._slide = function(e, t) {
                    try {
                        return this._slideToken(e, t)
                    } catch (e) {
                        wb.spa.logError(e, {
                            msg: "wbx_auth_slide"
                        })
                    }
                }
                ,
                o._createUm = function(e) {
                    let t = null == e ? void 0 : e.user;
                    if (t) {
                        t = `user:${t}`;
                        const e = [];
                        for (let n = 0; n < t.length; n++)
                            e.push(129 ^ t.charCodeAt(n));
                        return {
                            userUid: btoa(String.fromCodePoint(...(new TextEncoder).encode(String.fromCharCode.apply(null, e)))),
                            userId: t
                        }
                    }
                    return {
                        userUid: "",
                        userId: ""
                    }
                }
                ,
                o._tryDecodeJwt = function(e) {
                    try {
                        if (!e)
                            return null;
                        const [t,n,r] = e.split(".");
                        if (!(t || n || r))
                            return null;
                        const o = atob(n);
                        return o ? JSON.parse(o) || {} : null
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                }
                ,
                o.slideRefreshCookie = function() {
                    return WbSpaModel.prototype.$httpClient.fetchBasicJSON("v2/auth/sliderefresh", {
                        method: "POST",
                        credentials: "include"
                    })
                }
                ,
                o.delRefreshCookie = function() {
                    return WbSpaModel.prototype.$httpClient.fetch("v2/auth/delrefresh", {
                        method: "POST",
                        credentials: "include"
                    }).catch(( () => {}
                    ))
                }
                ,
                o._fetch = function(e, t) {
                    return WbSpaModel.prototype.$httpClient.fetch(this.AUTH_HOST + e, t)
                }
                ,
                o._slideToken = async function(e, t) {
                    navigator.locks.request("lock-auth-slide", (async n => {
                        var r;
                        if (!this.jwt)
                            return;
                        if (t && this.isWbxSite && this._isJwtShortExpired(this.jwtData)) {
                            const t = await this.slideRefreshCookie().catch(( () => {}
                            ));
                            0 === (null == t ? void 0 : t.ResultState) ? e = !0 : -1 === (null == t ? void 0 : t.ResultState) && localStorage.removeItem("wbx__exchangeRates")
                        }
                        if (e && !this._isJwtShortExpired(this.jwtData))
                            return;
                        if (!e && !this._isJwtExpired(this.jwtData))
                            return;
                        const o = new AbortController;
                        setTimeout(( () => o.abort()), 1e4);
                        const i = WbSpaModel.prototype.$services.sessionService.getSession()
                          , s = await this._fetch(m, {
                            method: "POST",
                            credentials: "include",
                            signal: o.signal,
                            headers: {
                                deviceid: i,
                                "wb-apptype": "web",
                                "wb-appversion": WbSpaModel.appVersion
                            }
                        }).then((e => e.ok ? e.json() : {})).then((e => (e.error && wb.spa.logError(new Error(`[wbx_auth_slide]: res: ${e.result}, error: ${e.error}`)),
                        e))).catch(( () => ({})));
                        if (t && (await this.delRefreshCookie(),
                        localStorage.removeItem("wbx__exchangeRates")),
                        12 !== s.result) {
                            if (0 === s.result && null !== (r = s.payload) && void 0 !== r && r.sticker && s.payload.access_token) {
                                const e = JSON.stringify({
                                    sticker: s.payload.sticker
                                })
                                  , t = await this._fetch(f, {
                                    method: "POST",
                                    credentials: "include",
                                    signal: o.signal,
                                    headers: {
                                        deviceid: i,
                                        "wb-apptype": "web",
                                        "wb-appversion": WbSpaModel.appVersion
                                    },
                                    body: e
                                }).then((e => e.ok ? e.json() : {})).then((e => (e.error && wb.spa.logError(new Error(`[wbx_auth_slide_confirm]: res: ${e.result}, error: ${e.error}`)),
                                e))).catch(( () => ({})));
                                12 === t.result ? this.setToken(null) : 0 === t.result && this.setToken(s.payload.access_token)
                            }
                        } else
                            this.setToken(null)
                    }
                    ))
                }
                ,
                o.sendMetrics = function(e, t) {
                    try {
                        WbSpaModel.prototype.$httpClient.fetch(`/webapi/logging/wbxauth/metrics?act=${e}&status=${t}`, {
                            method: "POST"
                        })
                    } catch (e) {}
                }
                ,
                t = e,
                (n = [{
                    key: "AUTH_HOST",
                    get: function() {
                        let e = wb.settings.currentDomain;
                        return "kz" === e && (e = "ru"),
                        `https://wbx-auth.wildberries.${e}`
                    }
                }, {
                    key: "isAuth",
                    get: function() {
                        return !!this._data.token
                    }
                }, {
                    key: "jwt",
                    get: function() {
                        return this._data.token
                    }
                }, {
                    key: "jwtData",
                    get: function() {
                        return this._data.data
                    }
                }, {
                    key: "isUserGuid",
                    get: function() {
                        var e;
                        return isNaN(null === (e = this.jwtData) || void 0 === e ? void 0 : e.user)
                    }
                }, {
                    key: "um",
                    get: function() {
                        return this._data.um
                    }
                }, {
                    key: "shard",
                    get: function() {
                        var e;
                        return Number(null === (e = this.jwtData) || void 0 === e ? void 0 : e.shard_key) || 1
                    }
                }, {
                    key: "sShard",
                    get: function() {
                        return $.views.converters.leadZero(this.shard, 2)
                    }
                }, {
                    key: "isWbxSite",
                    get: function() {
                        return localStorage.hasItem("wbx__exchangeRates")
                    }
                }]) && u(t.prototype, n),
                r && u(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }());
            n(2929),
            n(15970);
            function v(e) {
                return e < 26 ? e + 65 : e < 52 ? e + 71 : e < 62 ? e - 4 : 62 === e ? 43 : 63 === e ? 47 : 65
            }
            function b(e) {
                for (var t = 2, n = "", r = e.length, o = 0, i = 0; i < r; i++)
                    t = i % 3,
                    o |= e[i] << (16 >>> t & 24),
                    2 !== t && e.length - i != 1 || (n += String.fromCodePoint(v(o >>> 18 & 63), v(o >>> 12 & 63), v(o >>> 6 & 63), v(63 & o)),
                    o = 0);
                return n.substr(0, n.length - 2 + t) + (2 === t ? "" : 1 === t ? "=" : "==")
            }
            let w = function() {
                function e() {}
                return e.decode = function(e) {
                    return e ? function(e) {
                        for (var t, n = "", r = e.length, o = 0; o < r; o++)
                            t = e[o],
                            n += String.fromCodePoint(t > 251 && t < 254 && o + 5 < r ? 1073741824 * (t - 252) + (e[++o] - 128 << 24) + (e[++o] - 128 << 18) + (e[++o] - 128 << 12) + (e[++o] - 128 << 6) + e[++o] - 128 : t > 247 && t < 252 && o + 4 < r ? (t - 248 << 24) + (e[++o] - 128 << 18) + (e[++o] - 128 << 12) + (e[++o] - 128 << 6) + e[++o] - 128 : t > 239 && t < 248 && o + 3 < r ? (t - 240 << 18) + (e[++o] - 128 << 12) + (e[++o] - 128 << 6) + e[++o] - 128 : t > 223 && t < 240 && o + 2 < r ? (t - 224 << 12) + (e[++o] - 128 << 6) + e[++o] - 128 : t > 191 && t < 224 && o + 1 < r ? (t - 192 << 6) + e[++o] - 128 : t);
                        return n
                    }(function(e, t) {
                        for (var n, r, o, i = e.replace(/[^A-Za-z0-9\+\/]/g, ""), s = i.length, a = t ? Math.ceil((3 * s + 1 >> 2) / t) * t : 3 * s + 1 >> 2, l = new Uint8Array(a), c = 0, u = 0, d = 0; d < s; d++)
                            if (r = 3 & d,
                            c |= ((o = i.charCodeAt(d)) > 64 && o < 91 ? o - 65 : o > 96 && o < 123 ? o - 71 : o > 47 && o < 58 ? o + 4 : 43 === o ? 62 : 47 === o ? 63 : 0) << 6 * (3 - r),
                            3 === r || s - d == 1) {
                                for (n = 0; n < 3 && u < a; n++,
                                u++)
                                    l[u] = c >>> (16 >>> n & 24) & 255;
                                c = 0
                            }
                        return l
                    }(e)) : null
                }
                ,
                e.encode = function(e) {
                    return e ? b(function(e) {
                        for (var t, n, r = e.length, o = 0, i = 0; i < r; i++)
                            (n = e.codePointAt(i)) > 65536 && i++,
                            o += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : n < 2097152 ? 4 : n < 67108864 ? 5 : 6;
                        t = new Uint8Array(o);
                        for (var s = 0, a = 0; s < o; a++)
                            (n = e.codePointAt(a)) < 128 ? t[s++] = n : n < 2048 ? (t[s++] = 192 + (n >>> 6),
                            t[s++] = 128 + (63 & n)) : n < 65536 ? (t[s++] = 224 + (n >>> 12),
                            t[s++] = 128 + (n >>> 6 & 63),
                            t[s++] = 128 + (63 & n)) : n < 2097152 ? (t[s++] = 240 + (n >>> 18),
                            t[s++] = 128 + (n >>> 12 & 63),
                            t[s++] = 128 + (n >>> 6 & 63),
                            t[s++] = 128 + (63 & n),
                            a++) : n < 67108864 ? (t[s++] = 248 + (n >>> 24),
                            t[s++] = 128 + (n >>> 18 & 63),
                            t[s++] = 128 + (n >>> 12 & 63),
                            t[s++] = 128 + (n >>> 6 & 63),
                            t[s++] = 128 + (63 & n),
                            a++) : (t[s++] = 252 + (n >>> 30),
                            t[s++] = 128 + (n >>> 24 & 63),
                            t[s++] = 128 + (n >>> 18 & 63),
                            t[s++] = 128 + (n >>> 12 & 63),
                            t[s++] = 128 + (n >>> 6 & 63),
                            t[s++] = 128 + (63 & n),
                            a++);
                        return t
                    }(e)) : ""
                }
                ,
                e.encodeBytesArr = function(e) {
                    return b(e)
                }
                ,
                e
            }();
            const S = w
              , _ = {
                cache: {},
                onFirstExecution() {
                    0 === Object.keys(this.cache).length && document.querySelectorAll("script[type='text/javascript']").forEach((e => {
                        "" !== e.src && (this.cache[e.src.replace(/https?:/, "")] = Promise.resolve())
                    }
                    ))
                },
                require(e) {
                    let t = this.cache[e];
                    return null == t && (this.onFirstExecution(),
                    t = this.cache[e],
                    null == t && (t = this.cache[e] = I(e, this.loadScriptAsync))),
                    t.catch((t => (this.cache[e] = null,
                    Promise.reject(t))))
                },
                loadScriptAsync: e => new Promise(( (t, n) => {
                    try {
                        const r = document.createElement("script");
                        r.type = "text/javascript",
                        r.src = e,
                        r.readyState ? r.onreadystatechange = function() {
                            "loaded" !== r.readyState && "complete" !== r.readyState || (r.onreadystatechange = null,
                            t())
                        }
                        : r.onload = t,
                        r.onerror = n,
                        document.body.appendChild(r)
                    } catch (e) {
                        n(e)
                    }
                }
                ))
            }
              , C = {
                cashe: {},
                orinalStylesIncluded: !1,
                require(e) {
                    return new Promise(( (t, n) => {
                        this.orinalStylesIncluded || this.addOrinalStyles(),
                        null == this.cashe[e] && (this.cashe[e] = I(e, this.loadCssAsync)),
                        this.cashe[e].then(t).catch((t => {
                            this.cashe[e] = null,
                            n(t)
                        }
                        ))
                    }
                    ))
                },
                addOrinalStyles() {
                    this.orinalStylesIncluded = !0,
                    document.querySelectorAll("link[type='text/css']").forEach((e => this.cashe[e.href.replace(/https?:/, "")] = Promise.resolve()))
                },
                loadCssAsync: e => new Promise(( (t, n) => {
                    let r;
                    if (navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0) {
                        const o = document.createElement("link");
                        o.href = e,
                        o.type = "text/css",
                        o.rel = "stylesheet",
                        o.onload = t,
                        o.onerror = n,
                        r = o
                    } else {
                        const o = document.createElement("style");
                        o.onload = t,
                        o.textContent = `@import "${e}"`,
                        o.onload = t,
                        o.onerror = n,
                        r = o
                    }
                    document.querySelector("head").appendChild(r)
                }
                ))
            };
            async function I(e, t) {
                return new Promise(( (n, r) => {
                    t(e).then((e => n())).catch((r => t(wb.helpers.url.urlStaticDataFallback(e)).then((e => n()))))
                }
                ))
            }
            function k(e, t=new URLSearchParams, n=!1, r=!1) {
                const o = (e, i) => {
                    r && "boolean" == typeof i ? t.append(e, i.toString()) : "object" == typeof i && null != i ? Object.entries(i).forEach(( ([n,r]) => {
                        o(`${e}[${n}]`, r, t)
                    }
                    )) : n && null == i || t.append(e, i)
                }
                ;
                return Object.entries(e).forEach(( ([e,t]) => o(e, t))),
                t
            }
            function M(e, t=new FormData) {
                const n = (e, r="") => {
                    for (let o in e) {
                        const i = e[o];
                        let s = o;
                        r && (s = Array.isArray(e) ? `${r}[${o}]` : `${r}.${o}`),
                        "boolean" == typeof i ? t.append(s, i.toString()) : "string" == typeof i || "number" == typeof i ? t.append(s, i) : "object" == typeof i && n(i, s)
                    }
                }
                ;
                return n(e),
                t
            }
            const P = function() {
                const e = wb.cookieHelper.getCookie(".AspNetCore.Culture");
                if (e) {
                    const t = e.match(/^c=([a-z]{2})(-[A-Z]{2})?\|uic=([a-z]{2})(-[A-Z]{2})?$/);
                    if (t)
                        return t[1]
                }
                return document.documentElement.getAttribute("lang")
            }();
            function T() {
                let e = arguments[0]
                  , t = t => {
                    for (let n in t)
                        t.hasOwnProperty(n) && ("[object Object]" === Object.prototype.toString.call(t[n]) && null != e[n] ? e[n] = T(e[n], t[n]) : e[n] = t[n])
                }
                ;
                for (let e = 1; e < arguments.length; e++)
                    t(arguments[e]);
                return e
            }
            function D() {
                let e = arguments[0]
                  , t = t => {
                    for (let n in t)
                        t.hasOwnProperty(n) && ("[object Object]" === Object.prototype.toString.call(t[n]) && null != e[n] ? e[n] = D(e[n], t[n]) : void 0 !== t[n] && (e[n] = t[n]))
                }
                ;
                for (let e = 1; e < arguments.length; e++)
                    t(arguments[e]);
                return e
            }
            const A = (e, t) => {
                let n = null;
                return (...r) => {
                    n && clearTimeout(n),
                    n = setTimeout(( () => {
                        e.apply(void 0, r),
                        n = null
                    }
                    ), t)
                }
            }
              , E = (e, t=300) => {
                let n;
                return function(...r) {
                    n || e.apply(this, r),
                    clearTimeout(n),
                    n = setTimeout(( () => n = null), t)
                }
            }
              , O = (e, t=300) => {
                let n;
                return function(...r) {
                    clearTimeout(n),
                    n = setTimeout(( () => {
                        e.apply(this, r)
                    }
                    ), t)
                }
            }
              , B = (e, t) => {
                let n, r, o = !1;
                return function i() {
                    if (o)
                        return n = arguments,
                        void (r = this);
                    e.apply(this, arguments),
                    o = !0,
                    setTimeout((function() {
                        o = !1,
                        n && (i.apply(r, n),
                        n = r = null)
                    }
                    ), t)
                }
            }
              , x = (e, t, n, r) => {
                let o = 0
                  , i = setInterval((function() {
                    if (o > t)
                        return clearInterval(i),
                        void (r && r());
                    e(i) && clearInterval(i),
                    o++
                }
                ), n);
                return i
            }
              , j = e => {
                let t;
                return function() {
                    return j.done || (t = e.apply(this, arguments),
                    j.done = !0),
                    t
                }
            }
              , L = e => {
                let t = null;
                return function() {
                    return t || (t = e.apply(this, arguments).then((e => e)).finally(( () => t = null))),
                    t
                }
            }
              , N = (e, t) => function(n) {
                const r = n.target.closest(e);
                null != r && t(n, r)
            }
              , U = () => Promise.resolve().then(( () => Promise.resolve()))
              , F = e => new Promise((t => setTimeout(t, e)));
            function R(e, t, n) {
                const r = e.getBoundingClientRect();
                var o;
                if (n && (n.threshold = null !== (o = n.threshold) && void 0 !== o ? o : 10,
                q(n.top)))
                    return r.top >= n.top - n.threshold && r.top <= n.top + n.threshold;
                return r.top >= 0 && (t || r.left >= 0) && r.bottom <= (window.innerHeight || document.documentElement.clientHeight) && (t || r.right <= (window.innerWidth || document.documentElement.clientWidth))
            }
            function W() {
                this.promise = new Promise(( (e, t) => {
                    this.reject = t,
                    this.resolve = e
                }
                ))
            }
            function H() {
                const e = new Date
                  , t = new Date(e.getTime() - 6e4 * e.getTimezoneOffset()).toISOString();
                return t.slice(0, t.length - 1)
            }
            function z() {
                if (void 0 !== window._isMobileBrowser)
                    return window._isMobileBrowser;
                let e = !1;
                var t;
                return t = navigator.userAgent || navigator.vendor || window.opera,
                (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4))) && (e = !0),
                window._isMobileBrowser = e,
                window._isMobileBrowser
            }
            function q(e) {
                return !isNaN(parseFloat(e)) && isFinite(e)
            }
            function V(e, t) {
                const n = performance.now()
                  , r = () => performance.now() - n > e ? t() : window.requestAnimationFrame(r);
                window.requestAnimationFrame(r)
            }
            const G = S
              , J = _.require.bind(_)
              , Q = C.require.bind(C);
            let K = function() {
                function e() {
                    this.allModules = {},
                    this.modulesDict = {},
                    this.allServices = {},
                    this.servicesDict = {},
                    this.loadingServices = {}
                }
                var t = e.prototype;
                return t.init = function() {
                    return window.__spaModuleManager__ = {
                        register: (e, t) => {
                            this._enrichProto(t),
                            this.modulesDict[e] = t
                        }
                        ,
                        getModule: (e, t) => {
                            if (null != this.modulesDict[e] || t)
                                return this.modulesDict[e];
                            throw new Error("Module " + e + " has not been loaded yet")
                        }
                    },
                    window.__spaServiceManager__ = {
                        register: (e, t) => {
                            this._enrichProto(t),
                            this.servicesDict[e] = t
                        }
                        ,
                        getService: (e, t) => {
                            if (null != this.servicesDict[e] || t)
                                return this.servicesDict[e];
                            throw new Error("Service " + e + " has not been loaded yet")
                        }
                    },
                    this
                }
                ,
                t.setModules = function(e) {
                    this.allModules = e
                }
                ,
                t.setServices = function(e) {
                    this.allServices = e
                }
                ,
                t.loadServiceAsync = async function(e) {
                    const {physicalPath: t} = this.allServices[e] || {};
                    if (null == t)
                        throw new Error(e + " service doesnt exist");
                    const n = await this._loadServiceAsync(e, t);
                    this.$services[e] = new n
                }
                ,
                t.loadServiceAsSingletonAsync = async function(e) {
                    const {physicalPath: t} = this.allServices[e] || {};
                    if (null == t)
                        throw new Error(e + " service doesnt exist");
                    return this.loadingServices[e] || (this.loadingServices[e] = this._loadServiceAsync(e, t).then((t => (this.$services[e] = new t,
                    this.$services[e])))),
                    this.loadingServices[e]
                }
                ,
                t.loadModuleAsync = async function(e, t=!1) {
                    let {physicalPath: n, dataPath: r, hasTmpl: o, tmpls: i=[], templateId: s, isDynamic: a=!1, httpMethod: l="GET", cssPaths: c, jsPaths: u, apiName: d} = this.allModules[e] || {};
                    if (null == n)
                        throw new Error(e + " module doesnt exist");
                    const p = i.map((e => this._loadTemplateAsync(e)))
                      , h = this._loadTemplateAsync(o ? e : null, s)
                      , m = this._loadDataAsync(e, r, a, l, d)
                      , f = null == c ? [Promise.resolve(null)] : c.map((e => this.$helper.loadCssAsync(e)))
                      , y = null == u ? [Promise.resolve(null)] : u.map((e => this.$helper.loadJsAsync(e)))
                      , [g,v,b] = await Promise.all([this._loadModule(e, n, t), m, h, ...p, ...f, ...y]);
                    return null != g && (g.data = v,
                    g.template = b),
                    g
                }
                ,
                t.execModule = async function(e="", t="", n=[]) {
                    try {
                        (await this.loadModuleAsync(e))[t](...n)
                    } catch (e) {
                        console.error(e)
                    }
                }
                ,
                t._loadModule = async function(e, t, n) {
                    if (null == e || null == t)
                        throw new Error("path and name are required to load module");
                    return await this.$helper.loadJsAsync(t),
                    window.__spaModuleManager__.getModule(e, n)
                }
                ,
                t._loadServiceAsync = async function(e, t) {
                    if (null == e || null == t)
                        throw new Error("path and name are required to load service");
                    return await this.$helper.loadJsAsync(t),
                    window.__spaServiceManager__.getService(e)
                }
                ,
                t._loadDataAsync = async function(e, t, n, r, o) {
                    return null == t ? null : n || null == this.modulesDict[e] ? ("basket" === o && (t = `${this.$services.cartService.publicBasketApiUrl}${t}`),
                    await this.$httpClient.fetchJSON(t, {
                        method: r || "GET",
                        credentials: "include"
                    })) : this.modulesDict[e].data
                }
                ,
                t._loadTemplateAsync = async function(e, t, n) {
                    return null == e && null == t ? Promise.resolve(null) : t ? $.views.loadWebApiTemplateAsync(t, n) : $.views.loadTemplateAsync(e, n)
                }
                ,
                t._enrichProto = function(e) {
                    if (!e.prototype)
                        return;
                    let t = e.prototype
                      , n = null;
                    for (; (n = Object.getPrototypeOf(t)) && n != Object.prototype; )
                        t = n;
                    t != WbSpaModel.prototype && Object.setPrototypeOf(t, WbSpaModel.prototype)
                }
                ,
                e
            }();
            const X = K;
            function Y(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Z(r.key), r)
                }
            }
            function Z(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const ee = function() {
                function e() {
                    this.proceedIfAdultConfirmed = this.proceedIfAdultConfirmed.bind(this)
                }
                var t, n, r, o = e.prototype;
                return o.proceedIfAdultConfirmed = function(e, t, n, ...r) {
                    this.adultPopup.then((o => {
                        o.closePopup(),
                        !e || this.isConfirmed ? null == t || t.apply(n, r) : o.proceedIfAdultConfirmed(t, n, r).then((e => {
                            $.observable(this).setProperty({
                                isConfirmed: e
                            })
                        }
                        ))
                    }
                    ))
                }
                ,
                o.pushToQueue = function(e) {
                    this.adultPopup.then((t => t.pushToQueue(e)))
                }
                ,
                o.closePopup = function() {
                    this.adultPopup.then((e => e.closePopup()))
                }
                ,
                t = e,
                (n = [{
                    key: "isConfirmed",
                    get: function() {
                        if (null == this._isConfirmed) {
                            const e = localStorage.getObject("__ac");
                            e && e.dtExp > Date.utcNow() ? this._isConfirmed = e.state : this._isConfirmed = !1
                        }
                        return this._isConfirmed
                    },
                    set: function(e) {
                        this._isConfirmed = e;
                        try {
                            localStorage.putObject("__ac", {
                                dtExp: Date.utcNow() + 36e5,
                                state: e
                            })
                        } catch (e) {}
                        return e
                    }
                }, {
                    key: "adultPopup",
                    get: function() {
                        return this._adultPopup ? Promise.resolve(this._adultPopup) : new Promise((e => {
                            WbSpaModel.prototype.$moduleLoader.loadModuleAsync("adultConfirmedPopup").then((t => {
                                this._adultPopup = new t,
                                e(this._adultPopup)
                            }
                            ))
                        }
                        ))
                    }
                }]) && Y(t.prototype, n),
                r && Y(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const te = function() {
                function e() {}
                var t = e.prototype;
                return t.getVerticalObserver = function(e, t, n) {
                    return new ne(e,t,n)
                }
                ,
                t.getCarouselBannersObserver = function(e, t, n) {
                    const r = Object.assign({
                        keepObserve: !0,
                        sendOutEvent: !0
                    }, null != n ? n : {});
                    return new ne(e,t,r)
                }
                ,
                t.getSimpleObserver = function(e, t, n) {
                    if (WbSpaModel.prototype.$apiSupport.intersectionObserver) {
                        const r = {
                            threshold: .5
                        }
                          , o = Object.assign(r, null != t ? t : {})
                          , i = {
                            keepObserve: !1
                        }
                          , s = Object.assign(i, null != n ? n : {});
                        let a = [];
                        const l = new IntersectionObserver(( (t, n) => {
                            t.forEach((t => {
                                t.isIntersecting && (e(t.target, a.indexOf(t.target) + 1),
                                s.keepObserve || n.unobserve(t.target))
                            }
                            ))
                        }
                        ),o);
                        function c() {
                            null == l || l.disconnect()
                        }
                        function u(e) {
                            a.forEach((e => l.unobserve(e))),
                            a = [],
                            a = e,
                            a.forEach((e => l.observe(e)))
                        }
                        return {
                            observe: u,
                            destroy: c
                        }
                    }
                    return {
                        observe: t => t.forEach((n => e(n, t.indexOf(n) + 1))),
                        destroy: () => {}
                    }
                }
                ,
                e
            }();
            let ne = function() {
                function e(e, t, n) {
                    var r;
                    this.intersectionObserverEnable = WbSpaModel.prototype.$apiSupport.intersectionObserver,
                    e = null !== (r = e) && void 0 !== r ? r : [],
                    this.items = (Array.isArray(e) ? e : [e]).toHashSet(),
                    this.options = null != t ? t : {};
                    this.settings = Object.assign({
                        keepObserve: !1,
                        sendOutEvent: !1
                    }, null != n ? n : {}),
                    this.observer = null,
                    this.elementInViewportEventName = "elementInViewportEvent",
                    this.elementOutOfViewportEventName = "elementOutOfViewportEvent"
                }
                var t = e.prototype;
                return t._observe = function(e) {
                    var t;
                    const n = {
                        bubbles: !0
                    };
                    null !== (t = this.settings) && void 0 !== t && t.eventDetails && (n.detail = this.settings.eventDetails);
                    let r = new CustomEvent(this.elementInViewportEventName,n)
                      , o = new CustomEvent(this.elementOutOfViewportEventName,n);
                    var i;
                    this.intersectionObserverEnable ? (this.observer = null !== (i = this.observer) && void 0 !== i ? i : new IntersectionObserver(( (e, t) => {
                        e.forEach((e => {
                            e.isIntersecting ? (e.target.dispatchEvent(r),
                            this.settings.keepObserve || (this.items.delete(e.target),
                            t.unobserve(e.target))) : !e.isIntersecting && this.settings.sendOutEvent && e.target.dispatchEvent(o)
                        }
                        ))
                    }
                    ),this.options),
                    e.forEach((e => {
                        e && this.observer.observe(e)
                    }
                    ))) : e.forEach((e => {
                        e.dispatchEvent(r),
                        this.items.delete(e)
                    }
                    ))
                }
                ,
                t.observe = function() {
                    return this._observe(this.items),
                    this
                }
                ,
                t.update = function(e) {
                    let t;
                    if (Array.isArray(e))
                        t = e;
                    else if (e instanceof HTMLElement)
                        t = [e];
                    else {
                        if (!("toArray"in e))
                            return;
                        t = e.toArray()
                    }
                    this._observe(t)
                }
                ,
                t.unobserve = function(e) {
                    e && this.intersectionObserverEnable && this.observer.unobserve(e)
                }
                ,
                t.unobserveAll = function() {
                    this.items.forEach((e => this.observer.unobserve(e))),
                    this.items.clear()
                }
                ,
                t.destroy = function() {
                    var e;
                    this.items.clear(),
                    null === (e = this.observer) || void 0 === e || e.disconnect()
                }
                ,
                e
            }()
              , re = null;
            const oe = function() {
                function e() {
                    this.productCardPopup = null,
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null,
                    this.onPopupShow = this.onPopupShow.bind(this)
                }
                var t = e.prototype;
                return t.showSlider = async function(e, t, n) {
                    if (!this.$isDesktop)
                        return void this.$router.moveTo($.views.converters.urlForGood(e.cod1S, !0, e.newTargetUrl, null, !1, e.chrtId));
                    const {observeDisplayMode: r, removeObserver: o} = this._createObservable();
                    wb.displayModeSettings.addObserver(r),
                    e.onHideCallback = o;
                    if (await this._processingPopup(e.cod1S, e.chrtId, e.newTargetUrl, n))
                        try {
                            await re.showSlider(e, t, n)
                        } catch (e) {
                            this._onShowError(o)
                        } finally {
                            this.onPopupShow()
                        }
                }
                ,
                t.show = async function(e, t, n, r, o) {
                    if (!this.$isDesktop)
                        return r && this.$analitic.updateState(r),
                        void this.$router.moveTo($.views.converters.urlForGood(e, !0, n, null, !1, t));
                    const {observeDisplayMode: i, removeObserver: s} = this._createObservable();
                    wb.displayModeSettings.addObserver(i);
                    if (await this._processingPopup(e, t, n, null))
                        try {
                            await re.show(e, t, n, r, s, o)
                        } catch (e) {
                            this._onShowError(s)
                        } finally {
                            this.onPopupShow()
                        }
                }
                ,
                t.onPopupShow = async function() {
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null
                }
                ,
                t._processingPopup = async function(e, t, n, r) {
                    var o;
                    return this.processing ? (e != (null === (o = this.currentData) || void 0 === o ? void 0 : o.cod1S) && (this.targetData = {
                        cod1S: e,
                        chrtId: t,
                        newTargetUrl: n,
                        cardIndex: r
                    }),
                    !1) : (this.processing = !0,
                    this.currentData = {
                        cod1S: e,
                        chrtId: t,
                        newTargetUrl: n,
                        cardIndex: r
                    },
                    await this._loadProductCardPopup(),
                    !0)
                }
                ,
                t._loadProductCardPopup = async function() {
                    if (this.productCardPopup)
                        return;
                    const e = await this.$moduleLoader.loadModuleAsync("productCardPopup");
                    re = e;
                    window.addEventListener("spaTransition", ( () => {
                        this.processing = !1,
                        this.currentData = null,
                        this.targetData = null
                    }
                    ).bind(this))
                }
                ,
                t._createObservable = function() {
                    const e = () => wb.displayModeSettings.removeObserver(t)
                      , t = () => {
                        var t;
                        null === (t = this.productCardPopup) || void 0 === t || t.hidePopup(),
                        e()
                    }
                    ;
                    return {
                        observeDisplayMode: t,
                        removeObserver: e
                    }
                }
                ,
                t._onShowError = function(e) {
                    navigator.onLine || wb.popup.renderModalError("Internet connection is lost"),
                    null == e || e(),
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null
                }
                ,
                e
            }();
            const ie = new (function() {
                function e() {
                    this.eventsDictionary = {}
                }
                var t = e.prototype;
                return t.addEventListener = function(e, t, {single: n}={}) {
                    const r = this._validateInput(e, t);
                    if (!r.valid)
                        throw r.error;
                    null == this.eventsDictionary[e] && (this.eventsDictionary[e] = []);
                    const o = this.eventsDictionary[e];
                    n && o.includes(t) || o.push(t)
                }
                ,
                t.removeEventListener = function(e, t) {
                    var n;
                    const r = this._validateInput(e, t);
                    if (!r.valid)
                        throw r.error;
                    const o = this.eventsDictionary[e];
                    this.eventsDictionary[e] = null !== (n = null == o ? void 0 : o.filter((e => e !== t))) && void 0 !== n ? n : []
                }
                ,
                t.dispatchEvent = function(e) {
                    if (!(e instanceof Event))
                        throw new TypeError("DispatchEvent can be called only with Event instance");
                    if ("" == e.type)
                        throw new TypeError("Event doesnt have sufficient type");
                    const t = this.eventsDictionary[e.type];
                    null == t || t.forEach((t => {
                        e.isPropagationStopped || queueMicrotask(( () => {
                            t(e)
                        }
                        ))
                    }
                    ))
                }
                ,
                t._validateInput = function(e, t) {
                    return "string" != typeof e || "" == e ? {
                        valid: !1,
                        error: new TypeError("Event type must be a valid string value")
                    } : t instanceof Function ? {
                        valid: !0
                    } : {
                        valid: !1,
                        error: new TypeError("Callback must be a function")
                    }
                }
                ,
                e
            }());
            const se = new (function() {
                function e() {
                    this.items = [],
                    this.requestUrl = ""
                }
                var t = e.prototype;
                return t.init = function(e, t, n) {
                    this.requestUrl = t,
                    this.items = e.map((e => {
                        try {
                            var t;
                            return document.querySelector(`${e.tagName}${Object.keys(null !== (t = e.attributesDictionary) && void 0 !== t ? t : {}).map((t => `[${t}='${e.attributesDictionary[t].replace(/[\n\r]/g, "").replace(/["']/g, "\\$&")}']`)).join("")}`)
                        } catch (e) {
                            return console.error(e.message),
                            null
                        }
                    }
                    )),
                    this.defaultTitle = n
                }
                ,
                t.update = async function(e, t=null) {
                    return this._loadMetaTags(null != t ? t : this.requestUrl, e).then((e => {
                        if (this.delete(),
                        (null != e ? e : []).length > 0)
                            return this._renderMetatags(e),
                            e;
                        this._renderDefaultTitle()
                    }
                    )).catch(( () => {}
                    ))
                }
                ,
                t.render = function(e) {
                    this.delete(),
                    (null != e ? e : []).length > 0 ? this._renderMetatags(e) : this._renderDefaultTitle()
                }
                ,
                t.loadMetaTags = async function(e, t) {
                    if (e.metaTags)
                        return this.render(e.metaTags);
                    const n = await this.update(window.location.pathname, WbSpaModel.prototype.$router.currentRoute.metaTagsUrl);
                    if (!n)
                        return;
                    const r = n.find((e => "H1" === e.tagName));
                    if (r && window.requestAnimationFrame(( () => $.observable(e).setProperty({
                        title: r.hTMLContent
                    }))),
                    t) {
                        const t = n.find((e => "bottomText" === e.tagName));
                        t && window.requestAnimationFrame(( () => $.observable(e).setProperty({
                            bottomText: t.hTMLContent
                        })))
                    }
                }
                ,
                t.delete = function() {
                    this.items.forEach((e => null == e ? void 0 : e.remove())),
                    this.items.length = 0
                }
                ,
                t._loadMetaTags = function(e, t) {
                    if (!e)
                        return Promise.resolve();
                    const n = new URLSearchParams(this.$router.queryParams);
                    let r;
                    return n.append("targetUrl", encodeURIComponent(("/" === t[0] ? "" : "/") + t)),
                    e.indexOf("{*category}") > -1 && (e = e.replace("{*category}", this.$router.routeParameters.category)),
                    e.indexOf("{brandBasePath}") > -1 && "/" === (e = e.replace("{brandBasePath}", this.$router.routeParameters.brandBasePath))[e.length - 1] && (e = e.slice(0, -1)),
                    e.indexOf("{promoBasePath}") > -1 && "/" === (e = e.replace("{promoBasePath}", this.$router.routeParameters.promoBasePath))[e.length - 1] && (e = e.slice(0, -1)),
                    r = e,
                    this.$httpClient.fetchJSON(r + "?" + n).then((e => Promise.resolve(null == e ? void 0 : e.metaTags))).catch((n => (n.isCancelled || "" === n.message || (console.error(n.message),
                    console.error(`Error loading meta tags for path ${t} by requesting ${e}`)),
                    Promise.resolve())))
                }
                ,
                t._renderMetatags = function(e) {
                    const t = document.createDocumentFragment();
                    e.forEach((e => {
                        var n;
                        if ("H1" === e.tagName)
                            return;
                        if ("bottomText" === e.tagName)
                            return;
                        const r = document.createElement(e.tagName);
                        Object.keys(null !== (n = e.attributesDictionary) && void 0 !== n ? n : {}).forEach((t => r.setAttribute(t, e.attributesDictionary[t]))),
                        (e.hTMLContent || e.htmlContent) && (r.innerHTML = e.hTMLContent || e.htmlContent),
                        this.items.push(r),
                        t.appendChild(r)
                    }
                    )),
                    document.head.appendChild(t)
                }
                ,
                t._renderDefaultTitle = function() {
                    const e = document.createElement("title");
                    e.innerHTML = this.defaultTitle,
                    this.items.push(e),
                    document.head.appendChild(e)
                }
                ,
                e
            }())
              , ae = {
                updateVerificationToken(e) {
                    const t = document.querySelector("input[name=__RequestVerificationToken]");
                    t && (t.value = e)
                }
            };
            function le(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, ce(r.key), r)
                }
            }
            function ce(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const ue = {
                short: 9e5,
                halfHour: 18e5,
                normal: 36e5
            };
            Object.freeze(ue);
            let de = function() {
                function e() {}
                return e.createStorageHelperItem = function(e, t, n) {
                    return new pe(e,t,n)
                }
                ,
                e.supportIndexedDb = function() {
                    return null != window.indexedDB
                }
                ,
                e.metadataTableName = function(e) {
                    return e + "_metadata"
                }
                ,
                e.openDb = function(e, t={}) {
                    return new Promise(( (n, r) => {
                        var o;
                        const i = indexedDB.open(e, null !== (o = null == t ? void 0 : t.version) && void 0 !== o ? o : 1);
                        i.onupgradeneeded = e => {
                            var n;
                            null === (n = t.onupgradeneeded) || void 0 === n || n.call(t, e.target.result)
                        }
                        ,
                        i.onsuccess = e => {
                            n(e.target.result)
                        }
                        ,
                        i.onerror = t => {
                            r(new Error(`[StorageHelper]: Database cannot be opened db_name=${e} error=${i.error}`))
                        }
                    }
                    ))
                }
                ,
                e.setItem = function(e, t, n) {
                    return new Promise(( (r, o) => {
                        const i = e.transaction([t], "readwrite").objectStore(t).put(n);
                        i.onsuccess = r,
                        i.onerror = e => {
                            console.error(e.message),
                            o("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                ,
                e.addItem = function(e, t, n, r) {
                    return new Promise(( (o, i) => {
                        const s = e.transaction([t], "readwrite").objectStore(t).add(n);
                        s.onsuccess = e => o(e.target.result),
                        s.onerror = e => {
                            !r && console.error(e.message),
                            i("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                ,
                e.setItems = function(e, t, n, r) {
                    return new Promise(( (o, i) => {
                        let s = e.transaction([t], "readwrite")
                          , a = s.objectStore(t);
                        a.clear(),
                        r.forEach((e => {
                            e.__expiredAt__ = n,
                            a.add(e)
                        }
                        )),
                        s.oncomplete = o,
                        s.onerror = e => {
                            console.error(e.message),
                            i("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                ,
                e.getAll = function(e, t) {
                    return new Promise(( (n, r) => {
                        const o = e.transaction([t]).objectStore(t).getAll();
                        o.onsuccess = e => n(e.target.result),
                        o.onerror = () => r("Error while getting item from indexedDb")
                    }
                    ))
                }
                ,
                e.get = function(e, t, n) {
                    return new Promise(( (r, o) => {
                        const i = e.transaction([t]).objectStore(t).get(n);
                        i.onsuccess = e => r(e.target.result),
                        i.onerror = () => o("Error while getting item from indexedDb")
                    }
                    ))
                }
                ,
                e.getItem = function(t, n, r) {
                    return new Promise(( (o, i) => {
                        const s = t.transaction([n]).objectStore(n).get(r);
                        s.onsuccess = i => {
                            const s = i.target.result;
                            return s && s.__expiredAt__ <= Date.now() ? (e.removeItem(t, n, r),
                            o(null)) : o(i.target.result)
                        }
                        ,
                        s.onerror = () => i("Error while getting item from indexedDb")
                    }
                    ))
                }
                ,
                e.removeItem = function(e, t, n) {
                    return new Promise(( (r, o) => {
                        const i = e.transaction([t], "readwrite").objectStore(t).delete(n);
                        i.onsuccess = r,
                        i.onerror = () => o("Error while removing item from indexedDb")
                    }
                    ))
                }
                ,
                e.updateItem = function(e, t, n, r) {
                    return new Promise(( (o, i) => {
                        const s = e.transaction([t], "readwrite").objectStore(t).put(n, r);
                        s.onsuccess = o,
                        s.onerror = e => {
                            console.error(e.message),
                            i("Error while updating item in indexedDb")
                        }
                    }
                    ))
                }
                ,
                e.clear = function(e, t) {
                    return new Promise(( (n, r) => {
                        const o = e.transaction([t], "readwrite").objectStore(t).clear();
                        o.onsuccess = n,
                        o.onerror = () => r("Error while removing item from indexedDb")
                    }
                    ))
                }
                ,
                e.removeDb = function(e) {
                    return new Promise(( (t, n) => {
                        const r = indexedDB.deleteDatabase(e);
                        r.onsuccess = t,
                        r.onerror = () => n("Error while removing database")
                    }
                    ))
                }
                ,
                e.exec = function(e, t, n) {
                    if ("function" == typeof n)
                        return new Promise(( (r, o) => {
                            const i = e.transaction([t]).objectStore(t)
                              , s = n(i);
                            s.onsuccess = e => r(e.target.result),
                            s.onerror = () => o("Error while getting item from indexedDb")
                        }
                        ))
                }
                ,
                e.withCursor = function(e, t, n, r) {
                    return new Promise(( (o, i) => {
                        let s = e.transaction([t], "readwrite").objectStore(t);
                        n && (s = s.index(n));
                        const a = s.openCursor();
                        a.onsuccess = e => {
                            const t = e.target.result;
                            t ? (r(t.key, t.value, t),
                            t.continue()) : o()
                        }
                        ,
                        a.onerror = () => i("Error while getting item from indexedDb")
                    }
                    ))
                }
                ,
                e.objectStorePromise = function(e, t, n) {
                    return new Promise(( (r, o) => {
                        const i = e.objectStore(t)
                          , s = n(i);
                        s.onsuccess = e => r(e.target.result),
                        s.onerror = () => o("Error while work on objectStore from indexedDb")
                    }
                    ))
                }
                ,
                e.withTransaction = function(e, t, n) {
                    return new Promise(( (r, o) => {
                        const i = e.transaction(t, "readwrite");
                        n(i).then((e => {}
                        )),
                        i.onsuccess = r(i),
                        i.onerror = () => o("Error while open transaction in indexedDb on :" + t.join(","))
                    }
                    ))
                }
                ,
                t = e,
                r = [{
                    key: "cacheActivityType",
                    get: function() {
                        return ue
                    }
                }],
                (n = null) && le(t.prototype, n),
                r && le(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t;
                var t, n, r
            }()
              , pe = function() {
                function e(e, t, n=1) {
                    if (null == e || "" == e)
                        throw new Error("creating database without name is impossible");
                    this.databaseName = e,
                    this.databaseVersion = n,
                    this.onupgradeneeded = t
                }
                var t = e.prototype;
                return t.updateCacheAsync = function(e, t, n, r, o) {
                    return o = {
                        saveAllDb: !1,
                        getResultFunc: e => e,
                        ...o
                    },
                    de.supportIndexedDb() ? this._getItemFromDb(e, t, n, r, o) : this._getItemFromLocalStorage(e, t, n, r, o)
                }
                ,
                t._getItemFromDb = function(e, t, n, r, o) {
                    let i;
                    return de.openDb(this.databaseName, {
                        version: this.databaseVersion,
                        onupgradeneeded: this.onupgradeneeded
                    }).then((n => (i = n,
                    de.getItem(i, e, t)))).then((t => null != t ? Promise.resolve(t) : r().then((t => {
                        null != t && (o.saveAllDb ? de.setItems(i, e, Date.now() + n, t) : de.setItem(i, e, {
                            __expiredAt__: Date.now() + n,
                            ...t
                        }));
                        const r = o.getResultFunc(t);
                        return Promise.resolve(r)
                    }
                    ))))
                }
                ,
                t._getItemFromLocalStorage = function(e, t, n, r, o) {
                    const i = o.saveAllDb ? `${this.databaseName};${this.databaseVersion};${e}` : `${this.databaseName};${this.databaseVersion};${e};${t}`
                      , s = localStorage.getItem(i)
                      , a = s ? JSON.parse(s) : null;
                    if ((null == a ? void 0 : a.__expiredAt__) >= Date.now() && (!o.saveAllDb || !!a.items.length)) {
                        const e = o.getResultFunc(o.saveAllDb ? a.items : a);
                        return Promise.resolve(e)
                    }
                    return r().then((e => {
                        const t = o.saveAllDb ? {
                            items: e
                        } : e;
                        return t.__expiredAt__ = Date.now() + n,
                        localStorage.setItem(i, JSON.stringify(t)),
                        Promise.resolve(o.getResultFunc(e))
                    }
                    ))
                }
                ,
                e
            }();
            const he = de;
            var me = n(7893);
            const fe = function() {
                function e() {
                    this.$eventBus.addEventListener("CurrencyChanged", this._onChangeCurrency.bind(this))
                }
                var t = e.prototype;
                return t.initPreferredLocation = async function() {
                    await this.updateLocation();
                    document.querySelectorAll(".j-geocity-link").forEach((e => {
                        e.addEventListener("click", this.doOnGeoBtnClick.bind(this))
                    }
                    ))
                }
                ,
                t.updateLocation = async function() {
                    this.location = await this.$user.getLocationData(),
                    this.setCityName(this.location.address)
                }
                ,
                t.setCityName = function(e) {
                    const t = document.querySelectorAll(".j-geocity-link")
                      , n = decodeURI(e);
                    t.forEach((e => {
                        e.textContent !== n && (e.textContent = n)
                    }
                    ))
                }
                ,
                t.doOnGeoBtnClick = function(e) {
                    const t = e.currentTarget;
                    e.preventDefault(),
                    t.classList.contains("_click") || (t.classList.add("_click"),
                    this.openDeliveryPointsPopup().then((e => t.classList.remove("_click"))))
                }
                ,
                t.findCurrentAddress = function(e, t=!1) {
                    return this.location ? null == e ? void 0 : e.find((e => e.lat == this.location.latitude && e.lon == this.location.longitude && (e.address == this.location.address || !t))) : null
                }
                ,
                t.openDeliveryPointsPopup = async function(e) {
                    const t = await this.$moduleLoader.loadModuleAsync("deliveryPointsChoosePopup");
                    this.dpPopup || (this.dpPopup = new t),
                    await this.dpPopup.init({
                        source: "geo",
                        selectAddress: (e, t, n, r) => {
                            const o = n || this.$services.userAddressService.get(t, e);
                            this._submitGeo(o, r)
                        }
                        ,
                        updateSelectedAddresses: t => {
                            const n = this.findCurrentAddress(t.courier.list, !0)
                              , r = this.findCurrentAddress(t.self.list);
                            t.courier.selected = null == n ? void 0 : n.addressId,
                            t.self.selected = null == r ? void 0 : r.addressId,
                            t.preferred = "courier" === e || "self" === e ? e : n ? "courier" : "self"
                        }
                        ,
                        beforeSelectDw: (e, t) => {
                            if ("self" == $.view(e.target).ctxPrm("selectedDeliveryWay"))
                                return;
                            if (this.dpPopup.deliveryWays.length < 2)
                                return;
                            "self" === $.view(e.target).data.code && this.$moduleLoader.loadModuleAsync("basketProductModel").then((t => {
                                var n;
                                const r = (null === (n = this.$services.cartService.get(!0).basketItems) || void 0 === n ? void 0 : n.map((e => new t(e))).filter((e => e.onlyCourier))) || [];
                                r.length > 0 && (e.preventDefault(),
                                this.$moduleLoader.loadModuleAsync("productCourierOnlyPopup").then((e => {
                                    var t;
                                    e.show(e.template, r, null === (t = this.dpPopup.selectedAddresses) || void 0 === t ? void 0 : t.preferred, this.openDeliveryPointsPopup.bind(this))
                                }
                                )),
                                this.dpPopup.close())
                            }
                            ))
                        }
                    }),
                    this.dpPopup.show()
                }
                ,
                t._onChangeCurrency = function() {
                    var e;
                    "SpaBasketEntrypoint" !== (null === (e = this.$router.currentRoute) || void 0 === e ? void 0 : e.name) && this.$services.cartService.localBasket.enrichProductsIfNeedAsync({
                        force: !0
                    })
                }
                ,
                t._submitGeo = function(e, t) {
                    var n;
                    let r, o = this.map;
                    if ((null != e && e.id || null != e && e.addressId) && (r = e),
                    r || (r = null != o && o.selectedPointId ? ("courier" === o.deliveryType ? o.courierList : o.visiblePoints).find((e => e.id === o.selectedPointId)) : o.selectedPoint),
                    !r)
                        return;
                    const i = r.id || r.addressId || (null == o ? void 0 : o.selectedPointId);
                    this.saveLastAddressAsync(i, r.deliveryType, e.address, t, null !== (n = r.officeId) && void 0 !== n ? n : r.addressId),
                    this.$user.setGeo(r).then(( () => {
                        this.$eventBus.dispatchEvent(new CustomEvent("ExternalSelectAddress",{
                            detail: {
                                selectedAddressId: i,
                                dWay: r.deliveryType
                            }
                        }))
                    }
                    )),
                    this.dpPopup.close()
                }
                ,
                t.saveLastAddressAsync = async function(e, t, n, r, o) {
                    this.$services.cartService.localBasket.setAddress(e, t, n, r),
                    this.$router.userIsAuth && this.$httpClient.fetchJSON(this.$services.cartService.publicBasketApiUrl + "/spa/address/select", {
                        credentials: "include",
                        method: "POST",
                        body: this.$helper.objectSerializer({
                            addressId: e,
                            deliveryWay: t
                        })
                    }),
                    this.$analitic.setCurrentAddress(t, o),
                    this.$analitic.sendAddressSelection({
                        source: "Header",
                        deliveryType: t,
                        addressId: e,
                        address: n,
                        isChanged: r
                    })
                }
                ,
                e
            }();
            const ye = function() {
                function e() {
                    this.nativeLazyImage = "loading"in HTMLImageElement.prototype,
                    this.intersectionObserver = "IntersectionObserver"in window,
                    this.webpImage = !1,
                    this._checkWebpImageSupport()
                }
                return e.prototype._checkWebpImageSupport = async function() {
                    if (0 === document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"))
                        this.webpImage = !0;
                    else
                        try {
                            const e = new Image;
                            e.onload = function() {
                                e.width > 0 && e.height > 0 && (this.webpImage = !0)
                            }
                            .bind(this),
                            e.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"
                        } catch (e) {}
                }
                ,
                e
            }();
            const ge = function() {
                function e() {}
                return e.get = function() {
                    const t = localStorage.getObject(e.storageKey()) || {
                        url: [],
                        query: [],
                        nm: []
                    };
                    return t.nm = t.nm.map((e => e.nmId)),
                    t
                }
                ,
                e.getRecentWithTimestamp = function() {
                    return localStorage.getObject(e.storageKey()) || {
                        url: [],
                        query: [],
                        nm: []
                    }
                }
                ,
                e.addProduct = function(t) {
                    ("number" == typeof t || "string" == typeof t && !isNaN(Number(t))) && e.putInStorage("nm", t, 100)
                }
                ,
                e.putInStorage = function(t, n, r) {
                    let o = e.getRecentWithTimestamp()
                      , i = {
                        time: parseInt(Date.now() / 1e3),
                        nmId: n
                    }
                      , s = o[t];
                    const a = s.indexOf(i);
                    0 !== a && (a > 0 && s.splice(a, 1),
                    s.unshift(i),
                    s.length > r && (s.length = r),
                    o[t] = s,
                    e.clearPrevStorage(),
                    localStorage.putObject(e.storageKey(), o))
                }
                ,
                e.storageKey = function() {
                    return `recentViewsV2-${WbSpaModel.prototype.$user.getUid()}`
                }
                ,
                e.clearPrevStorage = function() {
                    const e = `recentViews-${WbSpaModel.prototype.$user.getUid()}`;
                    localStorage.removeItem(e)
                }
                ,
                e
            }();
            var ve;
            const be = "promotion-creatives";
            let we, Se, _e, Ce, Ie, ke = function() {
                function e() {}
                return e.getById = function(e) {
                    return we && we[e]
                }
                ,
                e.isThermometerNeeded = function(e) {
                    return _e && _e.has(e)
                }
                ,
                e.isRedPriceNeeded = function(e) {
                    return Ie && Ie.has(e)
                }
                ,
                e.getFilter = function() {
                    return Ce
                }
                ,
                e.getMainActionId = function() {
                    return 188852
                }
                ,
                e.getHomeCarouselData = function() {
                    return {
                        caruselUrl: "/promotions/uhtydazha",
                        carouselName: "За яркими ценами!",
                        carouselBg: "#ED1AD8"
                    }
                }
                ,
                e._startUpdate = async function() {
                    try {
                        await navigator.locks.request(`lock-${be}`, (async t => {
                            var n;
                            const r = await e.prototype.$httpClient.fetchText(wb.helpers.url.urlStaticData(`data/${be}.json.hash`), {
                                method: "GET",
                                cache: "no-cache"
                            }, {
                                noProcessResponse: !0
                            });
                            if (r && r !== (null === (n = localStorage.getObject(be)) || void 0 === n ? void 0 : n.hash)) {
                                const t = await e.prototype.$httpClient.fetchBasicJSON(wb.helpers.url.urlStaticData(`data/${be}.json`), {
                                    cache: "no-cache"
                                }, {
                                    nullOnError: !0
                                });
                                t.hash = r,
                                this.initPromoCreatives(t),
                                localStorage.putObject(be, t),
                                localStorage.removeItem("promotions"),
                                localStorage.removeItem("promotions-hash")
                            }
                        }
                        ))
                    } catch (e) {}
                }
                ,
                e.initPromoCreatives = function(e) {
                    var t, n, r, o;
                    e && (we = {},
                    null === (t = e.panels) || void 0 === t || t.forEach((e => we[e.id] = e)),
                    _e = new Set(null !== (n = e.thermometer) && void 0 !== n ? n : []),
                    Ie = new Set(null !== (r = e.redPrices) && void 0 !== r ? r : []),
                    e.filter && (null === (o = Ce) || void 0 === o ? void 0 : o.id) !== e.filter.id && (document.documentElement.style.setProperty("--custom-promo-filter-color", e.filter.color),
                    document.documentElement.style.setProperty("--custom-promo-filter-background", e.filter.background),
                    document.documentElement.style.setProperty("--custom-promo-filter-switch-color", e.filter.switch),
                    document.documentElement.style.setProperty("--custom-promo-filter-switch-background", e.filter.switchBackground)),
                    Ce = e.filter)
                }
                ,
                e
            }();
            (ve = ke).initPromoCreatives(localStorage.getObject(be)),
            ve._startUpdate(),
            Se = setInterval(ve._startUpdate.bind(ve), 18e4);
            const Me = ke;
            n(51584);
            var $e = n(83503)
              , Pe = n.n($e);
            const Te = navigator.connection || navigator.mozConnection || navigator.webkitConnection
              , De = Object.freeze({
                c246x328: "c246x328",
                c516x688: "c246x328",
                big: "c516x688"
            })
              , Ae = {
                volHostV2: function(e) {
                    let t;
                    switch (!0) {
                    case e >= 0 && e <= 143:
                        t = "01";
                        break;
                    case e <= 287:
                        t = "02";
                        break;
                    case e <= 431:
                        t = "03";
                        break;
                    case e <= 719:
                        t = "04";
                        break;
                    case e <= 1007:
                        t = "05";
                        break;
                    case e <= 1061:
                        t = "06";
                        break;
                    case e <= 1115:
                        t = "07";
                        break;
                    case e <= 1169:
                        t = "08";
                        break;
                    case e <= 1313:
                        t = "09";
                        break;
                    case e <= 1601:
                        t = "10";
                        break;
                    case e <= 1655:
                        t = "11";
                        break;
                    case e <= 1919:
                        t = "12";
                        break;
                    case e <= 2045:
                        t = "13";
                        break;
                    case e <= 2189:
                        t = "14";
                        break;
                    case e <= 2405:
                        t = "15";
                        break;
                    case e <= 2621:
                        t = "16";
                        break;
                    case e <= 2837:
                        t = "17";
                        break;
                    case e <= 3053:
                        t = "18";
                        break;
                    default:
                        t = "19"
                    }
                    return `basket-${t}.wbbasket.ru`
                },
                volFeedbackHost: function(e) {
                    let t;
                    switch (!0) {
                    case e >= 0 && e <= 431:
                        t = "01";
                        break;
                    case e <= 863:
                        t = "02";
                        break;
                    case e <= 1199:
                        t = "03";
                        break;
                    case e <= 1535:
                        t = "04";
                        break;
                    case e <= 1919:
                        t = "05";
                        break;
                    case e <= 2303:
                        t = "06";
                        break;
                    case e <= 2688:
                        t = "07";
                        break;
                    default:
                        t = "08"
                    }
                    return `feedback${t}.wbbasket.ru`
                },
                volVideoHost: function(e) {
                    let t;
                    switch (!0) {
                    case e >= 0 && e <= 11:
                        t = "01";
                        break;
                    case e <= 23:
                        t = "02";
                        break;
                    case e <= 35:
                        t = "03";
                        break;
                    case e <= 47:
                        t = "04";
                        break;
                    case e <= 59:
                        t = "05";
                        break;
                    case e <= 71:
                        t = "06";
                        break;
                    case e <= 83:
                        t = "07";
                        break;
                    case e <= 95:
                        t = "08";
                        break;
                    case e <= 107:
                        t = "09";
                        break;
                    case e <= 119:
                        t = "10";
                        break;
                    case e <= 131:
                        t = "11";
                        break;
                    case e <= 143:
                        t = "12";
                        break;
                    default:
                        t = "13"
                    }
                    return `videonme-basket-${t}.wbbasket.ru`
                },
                constructHostV2: function(e, t="nm") {
                    const n = parseInt(e, 10)
                      , r = "video" === t ? n % 144 : ~~(n / 1e5)
                      , o = "video" === t ? ~~(n / 1e4) : ~~(n / 1e3);
                    let i;
                    return "nm" === t ? i = Ae.volHostV2(r) : "feedback" === t ? i = Ae.volFeedbackHost(r) : "video" === t && (i = Ae.volVideoHost(r)),
                    `https://${i}/vol${r}/part${o}/${n}`
                }
            };
            wb.helpers = {
                deepClone: e => JSON.parse(JSON.stringify(e)),
                getHashCode: e => {
                    let t, n, r = 0;
                    if (0 === e.length)
                        return r;
                    for (t = 0; t < e.length; t++)
                        n = e.charCodeAt(t),
                        r = (r << 5) - r + n,
                        r |= 0;
                    return r
                }
                ,
                generateGuid: e => {
                    const t = URL.createObjectURL(new Blob).split("/").pop();
                    return e ? t : t.replace(/-/g, "")
                }
                ,
                date: {
                    leftBefore: function(e) {
                        const t = wb.helpers.date.serverDate ? new Date(wb.helpers.date.serverDate) : new Date
                          , n = e.getTime() - t.getTime()
                          , r = Math.floor(n / 1e3 % 60)
                          , o = Math.floor(n / 6e4 % 60)
                          , i = Math.floor(n / 36e5);
                        return String.format("{0}:{1}:{2}", $.views.converters.leadZero(i, 2), $.views.converters.leadZero(o, 2), $.views.converters.leadZero(r, 2))
                    },
                    diff: (e, t=new Date) => {
                        const n = {
                            days: 0,
                            months: 0,
                            years: 0
                        };
                        if (e == t)
                            return n;
                        if (e > t)
                            return wb.helpers.date.diff(t, e);
                        if (n.years = t.getFullYear() - e.getFullYear(),
                        n.months = t.getMonth() - e.getMonth(),
                        n.days = t.getDate() - e.getDate(),
                        n.days < 0) {
                            const t = new Date(e.getFullYear(),e.getMonth() + 1,0);
                            n.months--,
                            n.days += t.getDate()
                        }
                        return n.months < 0 && (n.years--,
                        n.months += 12),
                        n
                    }
                    ,
                    formatEstimated: (e, t, n) => {
                        const {timeFrom: r, timeTo: o} = n || {}
                          , i = new Date;
                        i.setHours(0, 0, 0, 0);
                        const s = new Date(e);
                        t || (t = new Date(e)),
                        t.setDate(t.getDate());
                        if (t - i < 0)
                            return "Задерживается";
                        if (r && o) {
                            const e = $.views.converters.formatTimeStr(r);
                            return `${$.views.converters.dayNameFromDate(s, !0)} c ${e} до&nbsp;${o}`
                        }
                        return s.getMonth() !== t.getMonth() ? `${s.format("d MMMM")}-${t.format("d MMMM")}` : s.getDate() !== t.getDate() ? `${s.getDate()}-${t.format("d MMMM")}` : `${s.format("d MMMM")}`
                    }
                },
                getParamsFromUrlQuery: function(e) {
                    if (!e)
                        return {};
                    0 === e.indexOf("?") && (e = e.substring(1));
                    const t = e.split("&")
                      , n = {};
                    for (let e = 0, r = t.length; e < r; e++) {
                        const r = t[e].split("=");
                        n[r[0]] = r[1]
                    }
                    return n
                },
                appendToParamsFromQuery: function(e, t) {
                    if (!t)
                        return;
                    0 === t.indexOf("?") && (t = t.substring(1));
                    const n = t.split("&");
                    for (let t = 0, r = n.length; t < r; t++) {
                        const r = n[t].split("=");
                        e.set(r[0], r[1])
                    }
                },
                getCardImgName: function(e) {
                    if (1 === e.idx) {
                        return function(e, t) {
                            if (!t)
                                return !1;
                            const n = parseInt((2048 & t ? "1" : "0") + (1024 & t ? "1" : "0"), 2);
                            if (0 === n)
                                return !1;
                            const r = wb.cookieHelper.getCookie("_wbauid");
                            if (!r)
                                return !1;
                            const o = e + r + "ABTest=Be$t"
                              , i = Pe()(o)
                              , s = BigInt("0x" + i.slice(-16)) % BigInt(n + 1);
                            return 0 != s && `ab_${s}`
                        }(e.nmId, e.viewFlags) || e.idx
                    }
                    return e.idx
                },
                url: {
                    imageUrl: function(e, t, n, r, o) {
                        var i, s;
                        r && !WbSpaModel.prototype.$isDesktop && (t = r);
                        const a = parseInt(e, 10);
                        if (null != Te && Te.effectiveType && "4g" !== (null == Te ? void 0 : Te.effectiveType) && "3g" !== (null == Te ? void 0 : Te.effectiveType) && De[t] && null !== (i = wb.global.settings) && void 0 !== i && null !== (s = i.switches) && void 0 !== s && s.enableProductImageDowngrade && (t = De[t]),
                        isNaN(a) || 0 === a)
                            return `${wb.settings.staticSiteUrl}/i/product/notfound/${t}.jpg`;
                        return `${Ae.constructHostV2(a)}/images/${t}/${wb.helpers.getCardImgName({
                            nmId: e,
                            viewFlags: o,
                            idx: null != n ? n : 1
                        })}.webp`
                    },
                    urlProductStatic: function(e) {
                        return `${Ae.constructHostV2(e)}/info/ru/card.json`
                    },
                    urlPriceHistoryStatic: function(e) {
                        return `${Ae.constructHostV2(e)}/info/price-history.json`
                    },
                    urlSellerStatic: function(e) {
                        return `${Ae.constructHostV2(e)}/info/sellers.json`
                    },
                    urlMulticardStatic: function(e) {
                        return `${Ae.constructHostV2(e)}/multicart/${e}.json`
                    },
                    urlCertificateStatic: function(e) {
                        return `${Ae.constructHostV2(e)}/info/certificate.json`
                    },
                    urlStaticData: function(e) {
                        return e.startsWith("//") ? e : `https:${wb.settings.staticBasketUrl}/${e}`
                    },
                    urlStaticDataFallback: function(e) {
                        return e = e.replace(wb.settings.staticBasketUrl + "/", ""),
                        `https:${wb.settings.staticFallbackUrl}/${e}`
                    },
                    urlStaticDataObsolete: function(e) {
                        return `https://static.wbstatic.net/data/${e}`
                    },
                    urlFeedbackPhoto: function(e, t="ms") {
                        const n = parseInt(e, 10);
                        return `${Ae.constructHostV2(n, "feedback")}/photos/${t}.${$.views.converters.toWebp("jpg")}`
                    },
                    urlVideoProduct: function(e, t="mp4", n="360p") {
                        const r = parseInt(e, 10);
                        return `${Ae.constructHostV2(r, "video")}/${t}/${n}/${"mp4" === t ? "1.mp4" : "index.m3u8"}`
                    },
                    urlRichContent: function(e) {
                        return `${Ae.constructHostV2(e)}/info/ru/rich_v1.json`
                    },
                    urlImageTags: function(e, t) {
                        const n = Ae.constructHostV2(e);
                        return t ? `${n}/info/tags/${t}.json` : `${n}/info/tags/picMap.json`
                    },
                    urlToExternalStatic: function(e) {
                        return `https://static-basket-01.wbbasket.ru${e}`
                    },
                    urlFeedbackVideoPreview: function(e) {
                        const t = e.id
                          , [n,r] = null == t ? void 0 : t.split("/");
                        return `https://videofeedback${("00" + n).slice(-2)}.wbbasket.ru/${r}/preview.jpg`
                    }
                },
                replaceDeliveryFilterVal: function(e) {
                    return e.replace(/&fdlvr=(\d+)/, ( (e, t) => {
                        const n = 23 - new Date(Date.now()).getHours() - 1;
                        let r = null;
                        switch (parseInt(t)) {
                        case 4:
                            r = n > 4 ? 4 : n;
                            break;
                        case 12:
                            r = n;
                            break;
                        case 24:
                            r = 24 + n;
                            break;
                        case 48:
                            r = 48 + n;
                            break;
                        case 72:
                            r = 72 + n;
                            break;
                        case 120:
                            r = 120 + n
                        }
                        return null != r ? `&fdlvr=${r}` : ""
                    }
                    ))
                },
                path: {
                    fileName: e => (null == e ? void 0 : e.substring(e.lastIndexOf("/") + 1)) || "",
                    extension: e => (null == e ? void 0 : e.slice(1 + (Math.max(e.lastIndexOf("."), 0) || e.length))) || ""
                },
                iOS: function() {
                    return ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"].includes(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend"in document
                },
                huawei: function() {
                    const e = navigator.userAgent || navigator.vendor || window.opera;
                    return /huawei/i.test(e)
                },
                formatVideoDuration: function(e) {
                    const t = Math.floor(e / 60)
                      , n = e % 60;
                    return `${t < 10 ? `0${t}` : t}:${n < 10 ? `0${n}` : n}`
                },
                setImgFunc: function(e, t) {
                    if ("function" == typeof t)
                        switch (e) {
                        case "basket_route_map":
                            Ae.volHostV2 = t;
                            break;
                        case "feedback_route_map":
                            Ae.volFeedbackHost = t
                        }
                },
                downloadFile(e) {
                    const t = URL.createObjectURL(e)
                      , n = document.createElement("a");
                    n.setAttribute("target", "_blank"),
                    n.href = t,
                    document.body.appendChild(n),
                    n.click(),
                    document.body.removeChild(n)
                }
            };
            const Ee = Object.freeze({
                delete: 0,
                add: 1
            });
            function Oe(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Be(r.key), r)
                }
            }
            function Be(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const xe = function() {
                return e = function(e, t=!1) {
                    this.items = e.sort(( (e, t) => {
                        var n, r;
                        return null !== (n = t.timestamp) && void 0 !== n ? n : 0 - (null !== (r = e.timestamp) && void 0 !== r ? r : 0)
                    }
                    )),
                    this.isEmptyCache = t,
                    this._favoritesGoodsMap = null
                }
                ,
                (t = [{
                    key: "count",
                    get: function() {
                        return this.items.length
                    }
                }, {
                    key: "favoritesGoodsMap",
                    get: function() {
                        return null != this._favoritesGoodsMap || (this._favoritesGoodsMap = this.items.reduce(( (e, t) => (e.set(t.characteristicId, t),
                        e)), new Map)),
                        this._favoritesGoodsMap
                    }
                }]) && Oe(e.prototype, t),
                n && Oe(e, n),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                e;
                var e, t, n
            }();
            function je(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Le(r.key), r)
                }
            }
            function Le(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Ne = "user_favorite_goods_{0}_v{1}";
            let Ue = function() {
                function e(e) {
                    this.uid = null,
                    this.cacheModel = null,
                    this._storageHelper = e,
                    this._bindEvents()
                }
                var t, n, r, o = e.prototype;
                return o.setKey = function(e) {
                    this.uid = e,
                    this._checkOldCache(),
                    this.cacheModel = null
                }
                ,
                o.getLastSyncDt = async function() {
                    if (null == this.uid)
                        return -1;
                    try {
                        var e;
                        const t = await this._openIDb()
                          , n = await this._storageHelper.getItem(t, this.lastSyncCacheKey, "sync_dt");
                        return null !== (e = null == n ? void 0 : n.lastSyncDt) && void 0 !== e ? e : -1
                    } catch (e) {
                        return this.getLastSyncDtFromLocalStorage()
                    }
                }
                ,
                o.getLastSyncDtFromLocalStorage = function() {
                    var e;
                    if (null == this.uid)
                        return -1;
                    const t = null !== (e = localStorage.getItem(this.lastSyncCacheKey)) && void 0 !== e ? e : -1;
                    return parseInt(localStorage.hasItem(this.cacheKey) ? t : -1)
                }
                ,
                o.setLastSyncDt = async function(e) {
                    if (!(await this.getLastSyncDt() >= e || null == this.uid))
                        try {
                            const t = await this._openIDb();
                            await this._storageHelper.setItem(t, this.lastSyncCacheKey, {
                                name: "sync_dt",
                                lastSyncDt: e
                            })
                        } catch (t) {
                            localStorage.setItem(this.lastSyncCacheKey, e)
                        }
                }
                ,
                o.clearLastSyncDt = async function() {
                    try {
                        const e = await this._openIDb();
                        await this._storageHelper.removeItem(e, this.lastSyncCacheKey, "sync_dt")
                    } catch (e) {
                        localStorage.removeItem(this.lastSyncCacheKey)
                    }
                }
                ,
                o.getFavoriteGoods = async function(e=!1) {
                    if (null == this.uid && (this.cacheModel = new xe([],!0)),
                    !this.cacheModel) {
                        let e = await this._fetchFromIDb();
                        null == e && (e = localStorage.getObject(this.cacheKey)),
                        this.cacheModel = null == e ? new xe([],!0) : new xe(e)
                    }
                    return e ? this.cacheModel : new xe(this.cacheModel.items.filter((e => !e.needSync || e.needSync && e.syncType !== Ee.delete)),this.cacheModel.isEmptyCache)
                }
                ,
                o.getFavoriteGoodsFromLocalStorage = async function(e=null) {
                    var t;
                    null == this.uid && (this.cacheModel = new xe([],!0));
                    const n = null !== (t = null != e ? e : await this._fetchFromIDb()) && void 0 !== t ? t : localStorage.getObject(this.cacheKey)
                      , r = null == n ? new xe([],!0) : new xe(n);
                    return new xe(r.items.filter((e => !e.needSync || e.needSync && e.syncType != Ee.delete)),r.isEmptyCache)
                }
                ,
                o.setFavoriteGoods = async function(e) {
                    if (null == this.uid)
                        return;
                    this.cacheModel = null == e ? new xe([],!0) : new xe(e);
                    !await this._saveToIDb(e) && localStorage.putObject(this.cacheKey, e),
                    localStorage.setItem(this.tabsSyncCacheKey, `${Date.now()}`)
                }
                ,
                o.contains = function(e) {
                    if (null == this.cacheModel)
                        return !1;
                    const t = this.cacheModel.favoritesGoodsMap.get(e);
                    return null != t && !(t.needSync && t.syncType === Ee.delete)
                }
                ,
                o._checkOldCache = function() {
                    for (let e = 1; e < 1; e++)
                        localStorage.removeItem(String.format(Ne, this.uid, e))
                }
                ,
                o._bindEvents = function() {
                    window.addEventListener("storage", (e => {
                        null != e.key && e.key !== this.tabsSyncCacheKey || (this.cacheModel = null,
                        this.getFavoriteGoods())
                    }
                    ))
                }
                ,
                o._fetchFromIDb = async function() {
                    try {
                        const e = await this._openIDb()
                          , t = await this._storageHelper.getAll(e, this.cacheKey);
                        return null != t ? t : []
                    } catch (e) {
                        return console.log(`[FAVS_STORAGE]: fetching from idb failed, reason=${e.message}`),
                        null
                    }
                }
                ,
                o._saveToIDb = async function(e) {
                    try {
                        const t = await this._openIDb()
                          , n = t.transaction([this.cacheKey], "readwrite").objectStore(this.cacheKey);
                        n.clear();
                        for (let t of e)
                            n.put(t);
                        return !0
                    } catch (e) {
                        return console.log(`[FAVS_STORAGE]: saving to idb failed, reason=${e.message}`),
                        !1
                    }
                }
                ,
                o._openIDb = async function() {
                    try {
                        return await this._storageHelper.openDb("wb_" + this.cacheKey, {
                            onupgradeneeded: e => {
                                if (!e.objectStoreNames.contains(this.cacheKey)) {
                                    e.createObjectStore(this.cacheKey, {
                                        keyPath: "characteristicId"
                                    }).createIndex("timestamp", "timestamp", {
                                        unique: !1
                                    })
                                }
                                e.objectStoreNames.contains(this.lastSyncCacheKey) || e.createObjectStore(this.lastSyncCacheKey, {
                                    keyPath: "name"
                                })
                            }
                            ,
                            version: 1
                        })
                    } catch (e) {
                        return null
                    }
                }
                ,
                t = e,
                (n = [{
                    key: "cacheKey",
                    get: function() {
                        return String.format(Ne, this.uid, 1)
                    }
                }, {
                    key: "lastSyncCacheKey",
                    get: function() {
                        return String.format("favorite_last_sync_dt_{0}_v{1}", this.uid, 1)
                    }
                }, {
                    key: "tabsSyncCacheKey",
                    get: function() {
                        return String.format("favorite_tabs_sync_v{0}", 1)
                    }
                }]) && je(t.prototype, n),
                r && je(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const Fe = Ue;
            const Re = function() {
                function e() {}
                return e.convertToFavoriteGoods = function(e={}, t={}) {
                    var n, r, o, i, s, a, l, c;
                    const u = null === (n = e.sizes) || void 0 === n ? void 0 : n.find((e => e.optionId === t.characteristicId))
                      , d = null !== (r = null == u ? void 0 : u.price) && void 0 !== r ? r : e.price
                      , p = d && null !== (o = null == u || null === (i = u.stocks) || void 0 === i ? void 0 : i.some((e => e.qty > 0))) && void 0 !== o && o
                      , h = 20624 === e.brandId || 30624 === e.siteBrandId
                      , m = p ? d.priceToShow / 100 : 0;
                    return {
                        nmId: e.id,
                        cod1S: e.id,
                        brandName: e.brand,
                        characteristicId: t.characteristicId,
                        meta: t.meta,
                        id: t.characteristicId,
                        goodsName: e.name,
                        colorName: null === (s = e.colors) || void 0 === s || null === (a = s[0]) || void 0 === a ? void 0 : a.name,
                        onStock: p ? 1 : 0,
                        star: e.rating,
                        price: p ? d.basic / 100 : 0,
                        priceWithSale: m,
                        priceWithCouponAndDiscount: m,
                        sale: p ? d.sale : 0,
                        totalSale: p ? d.sale : 0,
                        salePrice: m,
                        targetUrl: null !== (l = t.targetUrl) && void 0 !== l ? l : "",
                        sizeName: null !== (c = null == u ? void 0 : u.origName) && void 0 !== c ? c : "",
                        stocks: null == u ? void 0 : u.stocks,
                        timestamp: t.timestamp,
                        deliveryHours: p && e.time1 + e.time2,
                        source: t.source,
                        subjectId: e.subjectId,
                        subjectParentId: e.subjectParentId,
                        reviewRating: e.reviewRating,
                        feedbacks: e.feedbacks || e.commentsCount,
                        supplierId: e.supplierId,
                        supplier: e.supplier,
                        newlyArrived: p && (1 & t.source) > 0,
                        _rawCatalogModel: e,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !h && !!(8 & e.viewFlags),
                        paymentDiscountAmount: wb.priceHelper.calcWalletDiscount(m, e.currency, null == u ? void 0 : u.saleConditions),
                        premiumSale: e.premiumSale,
                        showRedPrice: wb.xnm.isRedPrice(e.panelPromoId),
                        get isDeleted() {
                            return !(this.goodsName || this.brandName || this.colorName || this.sizeName)
                        },
                        get showDiscount() {
                            return (this.price > 0 || this.priceWithCouponAndDiscount > 0) && this.price != this.priceWithCouponAndDiscount
                        }
                    }
                }
                ,
                e.convertFromAddModelToCacheItem = function(e, t) {
                    var n, r, o;
                    const i = wb.analitics.analiticsInfoToListName(e)
                      , s = {
                        characteristicId: e.characteristicId,
                        cod1S: e.cod1S,
                        id: e.characteristicId,
                        source: t,
                        targetUrl: `${null !== (n = e.targetUrl) && void 0 !== n ? n : ""}|${null !== (r = e.iid) && void 0 !== r ? r : 1}|${i}|${e.logs}`,
                        timestamp: Math.ceil(Date.now() / 1e3),
                        meta: e.meta
                    };
                    return null !== (o = s.meta) && void 0 !== o && o.shade && delete s.meta.shade,
                    s
                }
                ,
                e.convertFromCacheItemToUserStorageItem = function(e) {
                    return {
                        product_option_id: e.characteristicId,
                        product_id: e.cod1S,
                        target_url: e.targetUrl,
                        added_timestamp: e.timestamp,
                        meta: e.meta,
                        fav_type: 3 == e.source || 1 == e.source ? 1 : 2
                    }
                }
                ,
                e.convertFromUserStorageItemToCacheItem = function(e) {
                    return {
                        characteristicId: e.product_option_id,
                        cod1S: e.product_id,
                        targetUrl: e.target_url,
                        timestamp: e.added_timestamp,
                        count: 1,
                        source: e.fav_type,
                        meta: e.meta
                    }
                }
                ,
                e
            }()
              , We = Object.freeze({
                waitlist: 1,
                poned: 2,
                both: 3
            });
            const He = function() {
                function e(e, t, n, r, o) {
                    this.chrt_id = +t,
                    this.cod_1s = n,
                    this.client_ts = r || Date.now() / 1e3 | 0,
                    this.op_type = e || 1,
                    this.type = o || 2
                }
                return e.fromCache = function(t) {
                    if (0 === t.syncType)
                        return e.toDelete(t.characteristicId);
                    const n = new e(1,t.characteristicId,t.cod1S,t.timestamp,t.source);
                    return n.client_ts > 1e12 && (n.client_ts = n.client_ts / 1e3 | 0),
                    n.target_url = t.targetUrl,
                    t.meta && (n.meta_json = JSON.stringify(t.meta)),
                    n
                }
                ,
                e.toDelete = function(t) {
                    return new e(3,t)
                }
                ,
                e.convertFromSharedModelToCacheItem = function(e) {
                    const t = {
                        characteristicId: e.chrt_id,
                        cod1S: e.cod_1s,
                        targetUrl: e.target_url,
                        timestamp: e.client_ts,
                        source: e.type
                    };
                    try {
                        t.meta = e.meta_json ? JSON.parse(e.meta_json) : null
                    } catch (e) {}
                    return t
                }
                ,
                e
            }();
            let ze = function() {
                function e(e) {
                    this._cacheHelper = e,
                    this.debounceSync = this.$helper.debounce(this.sync.bind(this), 3e3)
                }
                var t = e.prototype;
                return t._getOperationAsync = async function() {
                    return (await this._cacheHelper.getFavoriteGoods(!0)).items.filter((e => e.needSync)).map((e => He.fromCache(e)))
                }
                ,
                t._getAllAsync = async function() {
                    return (await this._cacheHelper.getFavoriteGoods()).items.map((e => He.fromCache(e)))
                }
                ,
                t.sync = async function(e) {
                    var t;
                    if (this.$auth.isAuth) {
                        this._syncProcess = null !== (t = this._syncProcess) && void 0 !== t ? t : this._sync(e);
                        try {
                            return await this._syncProcess
                        } catch (e) {} finally {
                            this._syncProcess = null
                        }
                    }
                }
                ,
                t._sync = async function(e) {
                    return await navigator.locks.request("lock-fav-sync", (async t => {
                        const n = await this._cacheHelper.getLastSyncDt()
                          , r = await this._getOperationAsync()
                          , o = this.$services.sessionService.getSession();
                        try {
                            const t = await this._doSync({
                                ts: n,
                                sessionId: o,
                                operations: r,
                                timeout: e
                            });
                            if (this._sendMetrics(t.state),
                            0 === t.state && t.change_ts > 0)
                                return await this._updateProductsAsync(r, t);
                            if (1 === t.state) {
                                const e = await this._getAllAsync()
                                  , t = await this._doSync({
                                    ts: n,
                                    sessionId: o,
                                    operations: e,
                                    rememberMe: !0
                                });
                                if (0 === t.state && t.change_ts > 0)
                                    return await this._updateProductsAsync(e, t)
                            } else
                                t && wb.spa.logError(new Error(`[WB_FAVS_SYNC]: sync state:${t.state}`), {
                                    result: t,
                                    ts: n,
                                    deviceId: o,
                                    opLen: r.length,
                                    hasJwt: this.$auth.isAuth
                                })
                        } catch (e) {
                            const t = !e.isCustomError && e instanceof TypeError && ("Failed to fetch" === e.message || "NetworkError when attempting to fetch resource." === e.message || "Cancelled" === e.message);
                            this._sendMetrics(t ? "network" : "error"),
                            wb.spa.logError(new Error(`[WB_FAVS_SYNC]: ${e.message}`), {
                                ts: n,
                                deviceId: o,
                                opLen: r.length,
                                hasJwt: this.$auth.isAuth
                            })
                        }
                        return !1
                    }
                    ))
                }
                ,
                t._updateProductsAsync = async function(e, t) {
                    return await this._cacheHelper.setFavoriteGoods(await this.mergeUpdatedAndCacheItems(e, t.result_set)),
                    await this._cacheHelper.setLastSyncDt(t.change_ts),
                    !0
                }
                ,
                t.mergeUpdatedAndCacheItems = async function(e, t) {
                    var n;
                    const r = (null === (n = (await this._cacheHelper.getFavoriteGoods(!0)).items) || void 0 === n ? void 0 : n.toMap((e => e.characteristicId), (e => e))) || new Map;
                    return null == e || e.forEach((e => {
                        if (3 === e.op_type)
                            r.delete(e.chrt_id);
                        else {
                            const t = r.get(e.chrt_id);
                            t && (delete t.needSync,
                            delete t.syncType)
                        }
                    }
                    )),
                    null == t || t.forEach((e => {
                        const t = r.get(e.chrt_id);
                        if (null != t && t.needSync) {
                            if (!e.is_deleted)
                                return;
                            if (1 === t.op_type)
                                return
                        }
                        e.is_deleted ? r.delete(e.chrt_id) : r.set(e.chrt_id, He.convertFromSharedModelToCacheItem(e))
                    }
                    )),
                    r.toArray().sort(( (e, t) => t.timestamp - e.timestamp))
                }
                ,
                t._doSync = function({ts: e, sessionId: t, operations: n, rememberMe: r=!1, timeout: o=null}) {
                    return this.$wbxHttpClient.fetch(`https://favs-storage-api.wildberries.ru/api/favs/sync?ts=${e}&device_id=${t}${r ? "&remember_me=true" : ""}`, {
                        method: "POST",
                        body: JSON.stringify(n),
                        headers: {
                            "Content-Type": "application/json",
                            "Wb-AppType": "site"
                        },
                        timeout: o || 1e4
                    }).then((async e => e.ok ? e.json() : {})).then((e => (e.result_set && (e.result_set = e.result_set[0] || []),
                    e)))
                }
                ,
                t._sendMetrics = function(e) {
                    try {
                        fetch(`/webapi/logging/favs/metrics?status=${e}`, {
                            method: "POST"
                        })
                    } catch (e) {}
                }
                ,
                e
            }();
            const qe = ze;
            function Ve(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Ge(r.key), r)
                }
            }
            function Ge(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Je = "/webapi/lk/favorites"
              , Qe = "favs/favs_v1_synced"
              , Ke = "favs/favs_v3_synced"
              , Xe = "favs/site_items"
              , Ye = "_favs_synced_v3";
            const Ze = function() {
                function e() {
                    this._cacheHelper = new Fe(this.$storageHelper),
                    this._enrichedFavoriteItems = new Map,
                    this._timer = null,
                    this.isSynced = !1,
                    this._hasBeenLoadedOnce = !1,
                    this._bindEvents()
                }
                var t, n, r, o = e.prototype;
                return o.init = function() {
                    Object.setPrototypeOf(qe.prototype, WbSpaModel.prototype),
                    this.dumpFav = new qe(this._cacheHelper)
                }
                ,
                o.setKey = function(e, t) {
                    this._stopSyncronizing(),
                    e && (this._cacheHelper.setKey(t),
                    localStorage.clearStartsWith(Ye, this._favV3Key),
                    this._startSyncronizing())
                }
                ,
                o.syncFromServerAsync = async function() {
                    if (this.isSynced || this._initialSyncInProgress)
                        return;
                    this._initialSyncInProgress = !0;
                    const e = await this._loadRawGoodsFromDumpAsync();
                    return this._initialSyncInProgress = !1,
                    e
                }
                ,
                o.getWlArrivedCatalogModelAsync = async function() {
                    window._debug && console.time("buildWlArrivedCatalogModel");
                    try {
                        const [e,t] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel")])
                          , n = new t(e);
                        return n.setOnlyWlArrived(!0).setSorting(1).setGoods(Number.MAX_SAFE_INTEGER).complete(),
                        {
                            goods: n.favoriteGoods
                        }
                    } catch (e) {
                        return console.error(e),
                        {
                            goods: [],
                            isEmptyCache: !0
                        }
                    } finally {
                        window._debug && console.timeEnd("buildWlArrivedCatalogModel")
                    }
                }
                ,
                o.getSimplifiedModelAsync = async function() {
                    window._debug && console.time("buildFavSimpleModel");
                    try {
                        const [e,t] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel")]);
                        return new t(e).setSorting(7).setGoods(16).toSimpleModel()
                    } catch (e) {
                        return console.error(e),
                        {
                            goods: [],
                            totalCount: 0,
                            availableCount: 0,
                            isEmptyCache: !0
                        }
                    } finally {
                        window._debug && console.timeEnd("buildFavSimpleModel")
                    }
                }
                ,
                o.getFavsDataAsync = async function(e="") {
                    var t, n, r, o;
                    window._debug && console.time("buildFavModel");
                    const i = new URLSearchParams(e)
                      , s = (parseInt(null !== (t = i.get("page")) && void 0 !== t ? t : 1),
                    null !== (n = i.get("sort")) && void 0 !== n ? n : "newlydown")
                      , a = null !== (r = i.get("search")) && void 0 !== r ? r : ""
                      , l = "true" == (null !== (o = i.get("wlArrived")) && void 0 !== o ? o : i.get("wlarrived"));
                    try {
                        const [e,t,n,{FavorireGoodsSorterModel: r}] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel"), this.$moduleLoader.loadModuleAsync("pagerHelper"), this.$moduleLoader.loadModuleAsync("sorterModel")])
                          , o = new t(e,new r(s,window.location.href));
                        return o.setOnlyWlArrived(l).setSearch(a).setSorting().setGoods().complete(),
                        o
                    } catch (e) {
                        return console.error(e),
                        {
                            isEmptyCache: !0
                        }
                    } finally {
                        window._debug && console.timeEnd("buildFavModel")
                    }
                }
                ,
                o.addToFavs = async function(e, t=!1, n) {
                    if (!this.$router.userIsAuth)
                        throw new UnauthorizeError;
                    return this.sendToWishlistStat(e, n),
                    t ? this._addToPoned(e) : this._addToWl(e)
                }
                ,
                o.sendToWishlistStat = async function(e, t) {
                    var n;
                    if (window.wba)
                        try {
                            var r, o, i, s, a, l, c, u, d, p, h, m;
                            const f = t && t.sizes || e && e.sizes || [];
                            let y = {
                                stores: null === (r = f.find((t => t.ch == e.characteristicId))) || void 0 === r ? void 0 : r.stocks,
                                salePrice: t ? t.salePrice : e.salePrice
                            };
                            if (!y.stores) {
                                y = (await wb.xnm.getInfoForWbaStat([{
                                    nmId: e.cod1S,
                                    size: e.characteristicId
                                }])).get(e.cod1S)
                            }
                            const g = this.$analitic.getAnaliticsInfoFromTargetUrl(e.targetUrl)
                              , v = () => this.$analitic.analiticsInfoToListName(e.l ? e : g)
                              , b = () => this.$analitic.getTailObjectFromAnalyticsInfo(e.l ? e : g);
                            if (["CSD", "CAD", "WLC", "WLA"].includes(e.l)) {
                                const t = WbSpaModel.prototype.$analitic.getTermsFromTailObject(e.l);
                                e.t = t.category,
                                e.t1 = t.id_category,
                                e.t2 = t.discount_name
                            }
                            const w = {
                                id: e.cod1S,
                                chrt: e.characteristicId,
                                quantity: e.quantity,
                                price: null === (o = y) || void 0 === o ? void 0 : o.salePrice,
                                affiliation: null !== (i = null == t ? void 0 : t.supplierId) && void 0 !== i ? i : e.supplierId,
                                inListIndex: e.iid || 1,
                                listName: v(),
                                name: null !== (s = null == t ? void 0 : t.name) && void 0 !== s ? s : e.goodsName,
                                brand: null !== (a = null == t ? void 0 : t.brand) && void 0 !== a ? a : e.brandName,
                                rating: null !== (l = null == t ? void 0 : t.reviewRating) && void 0 !== l ? l : e.reviewRating,
                                storeId: null !== (c = null == e ? void 0 : e.storeId) && void 0 !== c ? c : (n = null === (u = y) || void 0 === u ? void 0 : u.stores,
                                (null == n ? void 0 : n.length) > 0 ? null == n ? void 0 : n.sort(( (e, t) => e.time1 + e.time2 - t.time1 - t.time2))[0].wh : null),
                                feedbacksCount: null !== (d = null == t ? void 0 : t.feedbacks) && void 0 !== d ? d : e.feedbacks,
                                subjectId: null !== (p = null == t ? void 0 : t.subjectId) && void 0 !== p ? p : e.subjectId,
                                subjectParentId: null !== (h = null == t ? void 0 : t.subjectParentId) && void 0 !== h ? h : e.subjectParentId,
                                logs: null !== (m = null == t ? void 0 : t.logs) && void 0 !== m ? m : e.logs,
                                tailObject: b()
                            };
                            this.$analitic.sendWbaEcomStat("add_to_wishlist", [w])
                        } catch (e) {
                            console.error(e)
                        }
                }
                ,
                o.deleteFromFavs = function(e, t) {
                    return this._removeFromPoned(t)
                }
                ,
                o.isAddedToFavs = function(e) {
                    return this.syncFromServerAsync(),
                    this._cacheHelper.contains(e)
                }
                ,
                o.deleteManyFromFavsAsync = async function(e) {
                    const t = e.map((e => ({
                        characteristicId: e.characteristicId,
                        targetInfo: e.targetInfo,
                        source: e.source
                    })));
                    this.$httpClient.fetchJSON(`${Je}/remove`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(t)
                    });
                    const n = await this._cacheHelper.getFavoriteGoods(!0);
                    e.forEach((e => {
                        const t = n.favoritesGoodsMap.get(e.characteristicId);
                        t && (t.needSync = !0,
                        t.syncType = Ee.delete)
                    }
                    )),
                    await this._cacheHelper.setFavoriteGoods(n.favoritesGoodsMap.toArray()),
                    this._canUseV3() && this.dumpFav.debounceSync(),
                    WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Товар удалён из избранного"])
                }
                ,
                o.moveManyToBasketAsync = async function(e) {
                    this.$services.cartService.addManyItems(e).isSuccess && WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Товар добавлен в корзину"])
                }
                ,
                o._bindEvents = function() {
                    this.$eventBus.addEventListener("GeoUpdated", ( () => this._enrichedFavoriteItems.clear()))
                }
                ,
                o._loadFavoriteGoodsAsync = async function() {
                    try {
                        const e = await this._loadRawGoodsFromDumpAsync(4e3);
                        if (!e)
                            return {
                                isEmptyCache: !0,
                                items: []
                            };
                        if (e.isEmptyCache)
                            return {
                                isEmptyCache: !0,
                                items: []
                            };
                        const t = e.items;
                        return t.length < 1 ? {
                            isEmptyCache: !1,
                            items: []
                        } : this._enrichGoodsAsync(t)
                    } catch (e) {
                        return console.error(e),
                        this._loadFromCache()
                    }
                }
                ,
                o._loadRawGoodsAsync = async function() {
                    return this._cacheHelper.getFavoriteGoodsFromLocalStorage()
                }
                ,
                o._enrichGoodsAsync = async function(e) {
                    const t = e.reduce(( (e, t) => (!this._enrichedFavoriteItems.has(t.characteristicId) && e.set(t.characteristicId, t),
                    e)), new Map);
                    let n = {};
                    return t.size > 0 && (n = await wb.xnm.getCatalogCards(t.toArray((e => e.cod1S)), !1, !0, !0)),
                    {
                        isEmptyCache: !1,
                        items: e.reduce(( (e, t) => {
                            const r = n[t.cod1S]
                              , o = this._enrichedFavoriteItems.get(t.characteristicId);
                            if (r || o) {
                                var i;
                                const n = null !== (i = o && {
                                    ...o
                                }) && void 0 !== i ? i : Re.convertToFavoriteGoods(r, t);
                                e.push(n),
                                !o && this._enrichedFavoriteItems.set(n.characteristicId, n)
                            }
                            return e
                        }
                        ), [])
                    }
                }
                ,
                o._addToPoned = function(e) {
                    return this._addThroughCache(e, We.poned)
                }
                ,
                o._removeFromPoned = async function(e) {
                    const t = (await this._cacheHelper.getFavoriteGoods(!0)).items
                      , n = t.find((t => t.characteristicId === e));
                    n && (n.needSync = !0,
                    n.syncType = Ee.delete),
                    await this._cacheHelper.setFavoriteGoods(t),
                    this._canUseV3() && this.dumpFav.debounceSync()
                }
                ,
                o._addToWl = function(e) {
                    return this._addThroughCache(e, We.waitlist)
                }
                ,
                o._addThroughCache = async function(e, t) {
                    if (this.$httpClient.fetchJSON(`${Je}/${t === We.poned ? "addtoponed" : "addtowl"}`, {
                        method: "POST",
                        body: new URLSearchParams(e)
                    }),
                    !e.isFromCache) {
                        if ((await this._cacheHelper.getFavoriteGoods()).count >= 2e3)
                            throw new KnownServerError(String.format(this.$localziation.ponedMaxStorage, 2e3))
                    }
                    const n = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                    let r = n.find((t => t.characteristicId == e.characteristicId));
                    r ? r.timestamp = Math.ceil(Date.now() / 1e3) : (r = Re.convertFromAddModelToCacheItem(e, t),
                    n.push(r)),
                    r.needSync = !0,
                    r.syncType = Ee.add,
                    await this._cacheHelper.setFavoriteGoods(n),
                    this._canUseV3() && this.dumpFav.debounceSync()
                }
                ,
                o.mergeActualAndCacheItems = async function(e, t, n) {
                    const r = e.reduce(( (e, t) => (e.set(t.characteristicId, t),
                    e)), new Map)
                      , o = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                    t > n && o.forEach((e => {
                        1e3 * e.timestamp > n && e.syncType != Ee.delete && (e.needSync = !0,
                        e.syncType = Ee.add)
                    }
                    ));
                    return o.filter((e => e.needSync)).forEach((e => {
                        (e.syncType == Ee.delete && r.has(e.characteristicId) || e.syncType == Ee.add && !r.has(e.characteristicId)) && r.set(e.characteristicId, e)
                    }
                    )),
                    r.toArray()
                }
                ,
                o._startSyncronizing = function() {
                    this._canUseV3() || (this._timer = setInterval((async () => {
                        if (this._syncronizigInProcess || !this.isSynced)
                            return;
                        const e = await this._cacheHelper.getLastSyncDt();
                        let t = await this._getDumpFilesInfoAsync();
                        if (null === t || t.needsMigration)
                            return;
                        if (t.migratedV3)
                            return this._stopSyncronizing();
                        const n = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                        let r = 0
                          , o = !1;
                        if (!(0 === n.filter((e => e.needSync)).length && t.dumpTs <= e)) {
                            this._syncronizigInProcess = !0;
                            try {
                                let s = [];
                                if (t.dumpTs <= e)
                                    s = n.filter((e => !e.needSync || e.needSync && e.syncType !== Ee.delete));
                                else {
                                    const r = await this.$services.apiUserStorage.getData([{
                                        path: t.dumpFiles[0].path
                                    }]);
                                    if (!Array.isArray(r) || 0 === r.length)
                                        throw new Error(`failed to fetch data at path ${t.dumpFiles[0].path}`);
                                    let i = null;
                                    try {
                                        i = JSON.parse(this.$helper.base64.decode(r[0].file))
                                    } catch (e) {
                                        wb.spa.logError(e, `[FAVS_SYNC]: latest file is corrupted, file=${t.dumpFiles[0].path}`, !0)
                                    }
                                    if (Array.isArray(i)) {
                                        let n = i.map((e => Re.convertFromUserStorageItemToCacheItem(e)));
                                        s = await this.mergeActualAndCacheItems(n, e, t.dumpTs),
                                        o = this._itemsAreMatched(n, s)
                                    } else
                                        s = n.filter((e => !e.needSync || e.needSync && e.syncType !== Ee.delete))
                                }
                                if (o)
                                    r = t.dumpTs;
                                else {
                                    const e = this.$helper.base64.encode(JSON.stringify(s.map((e => Re.convertFromCacheItemToUserStorageItem(e)))))
                                      , n = [{
                                        path: Xe,
                                        file: e
                                    }]
                                      , o = await this.$services.apiUserStorage.setData(n);
                                    var i;
                                    if (!o.success)
                                        throw new Error(`failed to set data reason=${null === (i = o.error) || void 0 === i ? void 0 : i.message}`);
                                    {
                                        r = t.dumpTs;
                                        const e = await this._getDumpFilesInfoAsync();
                                        (null == e ? void 0 : e.dumpTs) > 0 && (r = e.dumpTs)
                                    }
                                }
                                await this._cacheHelper.setFavoriteGoods(s.map((e => (e.needSync = !1,
                                e))))
                            } catch (e) {
                                wb.spa.logError(e, "[FAVS_SYNC]: sync failed", !0)
                            } finally {
                                this._syncronizigInProcess = !1,
                                await this._cacheHelper.setLastSyncDt(r > 0 ? r : e)
                            }
                        }
                    }
                    ), 3e4))
                }
                ,
                o._itemsAreMatched = function(e, t) {
                    return e.map((e => e.characteristicId)).sort(( (e, t) => e - t)).join(",") === t.map((e => e.characteristicId)).sort(( (e, t) => e - t)).join(",")
                }
                ,
                o._stopSyncronizing = function() {
                    clearInterval(this._timer)
                }
                ,
                o._updateSyncStatus = function(e) {
                    $.observable(this).setProperty({
                        isSynced: e
                    })
                }
                ,
                o._getTimeout = function(e) {
                    const t = new AbortController;
                    return setTimeout(( () => t.abort()), e),
                    t.signal
                }
                ,
                o._getDumpFilesInfoAsync = async function() {
                    try {
                        let e = await this.$services.apiUserStorage.getList("favs", {
                            signal: this._getTimeout(5e3)
                        });
                        if (null == e)
                            return null;
                        const t = {};
                        return t.dumpFiles = e.filter((e => [Xe, "favs/ios_items", "favs/android_items"].indexOf(e.path) > -1)),
                        t.dumpFiles.sort(( (e, t) => t.modify_time - e.modify_time)),
                        t.needsMigration = !e.find((e => e.path === Qe || "favs/favs_v2_synced" === e.path)),
                        t.migratedV3 = !!e.find((e => e.path === Ke)),
                        t.migratedV3 && localStorage.setItem(this._favV3Key, "1"),
                        t.dumpFiles.forEach((e => {
                            e.modify_time = 1e3 * e.modify_time
                        }
                        )),
                        t.dumpTs = t.dumpFiles.length > 0 ? t.dumpFiles[0].modify_time : 0,
                        t
                    } catch (e) {
                        return null
                    }
                }
                ,
                o._migrateFromOldStorageAsync = async function() {
                    const e = await this._loadRawGoodsAsync();
                    if (!e.isEmptyCache) {
                        const t = e.items.map((e => Re.convertFromCacheItemToUserStorageItem(e)))
                          , n = [{
                            path: Xe,
                            file: this.$helper.base64.encode(JSON.stringify(t))
                        }, {
                            path: Qe,
                            file: "W10="
                        }];
                        wb.spa.logError(new Error(`[FAVS_SYNC]: sync completed items_synced=${t.length}`)),
                        await this.$services.apiUserStorage.setData(n)
                    }
                }
                ,
                o._loadRawGoodsFromDumpAsync = async function(e) {
                    return this._canUseV3() ? await this._loadRawGoodsFromFavsServiceAsync(e) : (await this._loadRawGoodsFromUserStorageAsync(),
                    this._canUseV3() && await this._loadRawGoodsFromFavsServiceAsync(e)),
                    await this._cacheHelper.getFavoriteGoods()
                }
                ,
                o._loadRawGoodsFromFavsServiceAsync = async function(e) {
                    await this.dumpFav.sync(e),
                    this._migrateV3FromUserStorageAsync(),
                    this._updateSyncStatus(!0)
                }
                ,
                o._migrateV3FromUserStorageAsync = async function() {
                    if (localStorage.hasItem(this._favV3Key))
                        return;
                    const e = await this._getDumpFilesInfoAsync();
                    if (null !== e && !e.migratedV3)
                        if (e.dumpTs > 0) {
                            const t = e.dumpFiles.find((e => e.path === Xe));
                            let n = null;
                            const r = await this.$services.apiUserStorage.getData([{
                                path: t.path
                            }]);
                            if (!Array.isArray(r) || 0 === r.length)
                                throw new Error(`failed to fetch data at path ${t.path}`);
                            try {
                                n = JSON.parse(this.$helper.base64.decode(r[0].file))
                            } catch (e) {
                                throw wb.spa.logError(e, `[FAVS_MIGR]: latest file is corrupted, file=${t.path}`, !0),
                                e
                            }
                            if (!n || !Array.isArray(n))
                                throw "[FAVS_MIGR]: all dump files are corrupted";
                            if (!n.length)
                                return void this._setMigratedV3();
                            const o = n.map((e => Re.convertFromUserStorageItemToCacheItem(e)))
                              , i = (await this._cacheHelper.getFavoriteGoods(!0)).favoritesGoodsMap;
                            o.forEach((e => {
                                i.get(e.characteristicId) || (e.needSync = !0,
                                e.syncType = Ee.add,
                                i.set(e.characteristicId, e))
                            }
                            )),
                            await this._cacheHelper.setFavoriteGoods(i.toArray().sort(( (e, t) => t.timestamp - e.timestamp))),
                            await this.dumpFav.sync() && this._setMigratedV3()
                        } else
                            this._setMigratedV3()
                }
                ,
                o._setMigratedV3 = function() {
                    localStorage.setItem(this._favV3Key, "1"),
                    this.$services.apiUserStorage.setData([{
                        path: Ke,
                        file: "W10="
                    }])
                }
                ,
                o._loadRawGoodsFromUserStorageAsync = async function() {
                    var e, t, n;
                    const r = await this._cacheHelper.getLastSyncDt();
                    let o, i = !1, s = null;
                    try {
                        const e = await this._getDumpFilesInfoAsync();
                        if (null != e && e.needsMigration && this._migrateFromOldStorageAsync(),
                        null != e && e.migratedV3)
                            return;
                        if (null != e) {
                            if (r === e.dumpTs || 0 === e.dumpTs)
                                return;
                            let t = 0
                              , n = null;
                            for (; t < e.dumpFiles.length && !(t > 0 && e.dumpFiles[t].modify_time < r); ) {
                                const r = await this.$services.apiUserStorage.getData([{
                                    path: e.dumpFiles[t].path
                                }]);
                                if (!Array.isArray(r) || 0 === r.length)
                                    throw new Error(`failed to fetch data at path ${e.dumpFiles[t].path}`);
                                try {
                                    n = JSON.parse(this.$helper.base64.decode(r[0].file));
                                    break
                                } catch (n) {
                                    wb.spa.logError(n, `[FAVS_SYNC]: latest file is corrupted, file=${e.dumpFiles[t].path}`, !0),
                                    t++,
                                    s = -1
                                }
                            }
                            if (!Array.isArray(n))
                                throw "[FAVS_SYNC]: all dump files are corrupted";
                            o = {
                                favsList: n.map((e => Re.convertFromUserStorageItemToCacheItem(e)))
                            },
                            s = -1 === s ? s : e.dumpTs,
                            i = !0
                        }
                    } catch (e) {
                        if (e.isUnauthorize)
                            return null
                    } finally {
                        !this._cacheHelper.cacheModel && await this._cacheHelper.getFavoriteGoods(),
                        this._updateSyncStatus(!0)
                    }
                    if (!i)
                        return;
                    s = null !== (e = s) && void 0 !== e ? e : r;
                    const a = null !== (t = null === (n = o) || void 0 === n ? void 0 : n.favsList) && void 0 !== t ? t : [];
                    await this._cacheHelper.setFavoriteGoods(await this.mergeActualAndCacheItems(a, r, s)),
                    await this._cacheHelper.setLastSyncDt(s)
                }
                ,
                o._canUseV3 = function() {
                    return !0
                }
                ,
                t = e,
                (n = [{
                    key: "_favV3Key",
                    get: function() {
                        return `${Ye}_${WbSpaModel.prototype.$auth.um.userUid}`
                    }
                }]) && Ve(t.prototype, n),
                r && Ve(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const et = function() {
                function e() {
                    this.timer = null,
                    this.lastUpdate = -1 / 0,
                    this.userData = {},
                    this.balanceInfo = {},
                    this.loadRequesterPromise = null
                }
                var t = e.prototype;
                return t.setKey = function(e, t) {
                    e && (this.USER_INFO_CACHE_KEY_FORMATTED = String.format("user-info-{0}", t))
                }
                ,
                t.getMaskedInfo = function() {
                    return this._getLocalUserInfo()
                }
                ,
                t._getLocalUserInfo = function() {
                    var e;
                    return null !== (e = this._masketInfo) && void 0 !== e ? e : localStorage.getObject(this.USER_INFO_CACHE_KEY_FORMATTED)
                }
                ,
                t.clear = function() {
                    this.lastUpdate = -1 / 0
                }
                ,
                t.clearLocalUserInfo = function() {
                    this.USER_INFO_CACHE_KEY_FORMATTED && localStorage.removeItem(this.USER_INFO_CACHE_KEY_FORMATTED)
                }
                ,
                t.getUserDataAsync = async function(e=!1, t=!1) {
                    var n;
                    if (t && this.userData.isAuthenticated && !this.userData.isAuthenticated)
                        return wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        });
                    this.basicDataTask = null !== (n = this.basicDataTask) && void 0 !== n ? n : this._loadBasicDataInternal();
                    const r = this.basicDataTask
                      , [o] = await Promise.all([r]);
                    if (this.basicDataTask = null,
                    t && !this.userData.isAuthenticated)
                        return wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        });
                    if (o.maskedInfo) {
                        o.maskedInfo.isEmp = o.isEmployeeSynced,
                        this._masketInfo = o.maskedInfo;
                        try {
                            localStorage.putObject(this.USER_INFO_CACHE_KEY_FORMATTED, o.maskedInfo)
                        } catch (e) {}
                    }
                    return {
                        userInfo: o,
                        userExtraInfo: {
                            dataLoaded: !0,
                            discountInfo: {
                                purchase: o.purchaseAmount,
                                personalDiscount: o.personalDiscount,
                                purchasePercent: o.purchasePercent
                            }
                        }
                    }
                }
                ,
                t.removeInn = function() {
                    $.observable(this.userData).setProperty({
                        inn: ""
                    })
                }
                ,
                t.updateFioAsync = async function(e, t, n) {
                    return (await this._loadRequetser()).updateFioAsync(e, t, n, this.userData)
                }
                ,
                t.updateSexAsync = async function(e) {
                    return (await this._loadRequetser()).updateSexAsync(e, this.userData)
                }
                ,
                t.updateBirthdayAsync = async function(e) {
                    return (await this._loadRequetser()).updateBirthdayAsync(e, this.userData)
                }
                ,
                t.updateEmailAsync = async function(e) {
                    return (await this._loadRequetser()).updateEmailAsync(e, this.userData)
                }
                ,
                t.updatePhoneMobileAsync = async function(e, t, n) {
                    return (await this._loadRequetser()).updatePhoneMobileAsync(e, t, n, this.userData)
                }
                ,
                t.updateInnAsync = async function(e) {
                    return (await this._loadRequetser()).updateInnAsync(e, this.userData)
                }
                ,
                t.updateImageAsync = async function(e) {
                    return (await this._loadRequetser()).updateImageAsync(e, this.userData)
                }
                ,
                t.removeUserPhotoAsync = async function() {
                    return (await this._loadRequetser()).removeUserPhotoAsync(this.userData)
                }
                ,
                t.updateSettingsAsync = async function(e, t) {
                    return (await this._loadRequetser()).updateUserSettingsAsync(e, t, this.userData)
                }
                ,
                t._loadBasicDataInternal = async function() {
                    if (Date.now() - this.lastUpdate < 6e5)
                        return this.userData;
                    const e = await this._loadRequetser();
                    return this.lastUpdate = Date.now(),
                    e.loadBasicInfo(this.userData, this._getLocalUserInfo())
                }
                ,
                t._loadRequetser = async function() {
                    return this.loadRequesterPromise || (this.loadRequesterPromise = this.$moduleLoader.loadModuleAsync("userInfoRequester")),
                    this.loadRequesterPromise
                }
                ,
                t.migrateProfileFromGlobal = async function() {
                    if (localStorage.hasItem("wbx_to_wb_profile_synced"))
                        return;
                    if (!!(await this.$services.apiUserStorage.getList("profile")).find((e => "profile/info_synced" === e.path)))
                        return;
                    const e = `${this.$services.cartService.publicBasketApiUrl}/lk/account/addresses/migratefromglobal`;
                    try {
                        await this.$httpClient.fetchJSON(e, {
                            method: "POST"
                        }),
                        localStorage.setItem("wbx_to_wb_profile_synced", 1)
                    } catch (e) {
                        wb.spa.logError("[WBX_PROFILE_MIGR]: failed to migrate profile", e)
                    }
                }
                ,
                e
            }()
              , tt = "/webapi/newsfeed/events";
            const nt = function() {
                function e() {
                    this.eventsModel = {
                        eventsCount: 0,
                        loading: !0
                    }
                }
                var t = e.prototype;
                return t.checkNotificationCountAsync = async function() {
                    if (this._clearTimer(),
                    !this.$auth.isAuth)
                        return this.eventsModel;
                    let e = !1;
                    try {
                        const t = await this.$httpClient.fetchJSON(`${tt}/count`, {
                            method: "POST"
                        });
                        $.observable(this.eventsModel).setProperty({
                            eventsCount: t
                        }),
                        e = !0
                    } catch (e) {
                        console.error(e),
                        $.observable(this.eventsModel).setProperty({
                            isNetworkError: !0
                        })
                    } finally {
                        return $.observable(this.eventsModel).setProperty({
                            loading: !1
                        }),
                        this._startTimer(e),
                        this.eventsModel
                    }
                }
                ,
                t.markNotificationRead = async function(e) {
                    this._clearTimer();
                    let t = !1;
                    try {
                        await this.$httpClient.fetchJSON(`${tt}/mark`, {
                            method: "POST",
                            body: new URLSearchParams({
                                readIds: e.join(";")
                            })
                        }),
                        $.observable(this.eventsModel).setProperty({
                            eventsCount: Math.max(this.eventsModel.eventsCount - e.length, 0)
                        }),
                        t = !0
                    } catch (e) {
                        $.observable(this.eventsModel).setProperty({
                            isNetworkError: !0
                        })
                    } finally {
                        return this._startTimer(t),
                        {
                            isSuccess: t,
                            error: undefined
                        }
                    }
                }
                ,
                t._clearTimer = function() {
                    clearTimeout(this.timer)
                }
                ,
                t._startTimer = function(e) {
                    this.timer = setTimeout(( () => this.checkNotificationCountAsync()), e ? 3e5 : 6e3)
                }
                ,
                e
            }();
            const rt = function() {
                function e() {
                    this.maxQuantity = 10,
                    this.canBeOrdered = !0,
                    this.includeInOrder = !0
                }
                return e.fromWbBasketProduct = function(t) {
                    var n;
                    const r = new e
                      , o = +t.quantity;
                    r.characteristicId = r.id = +t.chrt_id,
                    r.quantity = o > 0 ? o : 1,
                    r.cod1S = t.cod_1s;
                    try {
                        r.meta = t.meta_json ? JSON.parse(t.meta_json) : null
                    } catch (e) {}
                    return r.targetUrl = null === (n = t.target_url) || void 0 === n ? void 0 : n.replace(/\x00/g, ""),
                    r.isDeleted = t.is_deleted,
                    r.timestamp = t.client_ts,
                    r._fromSync = !0,
                    r.viewFlags = t.viewFlags,
                    r
                }
                ,
                e.fromWbxBasketProduct = function(t) {
                    const n = new e
                      , r = +t.count;
                    return n.characteristicId = n.id = +t.product_option_id,
                    n.quantity = r > 0 ? r : 1,
                    n.cod1S = t.product_id,
                    n.targetUrl = t.target_url,
                    n.timestamp = t.added_timestamp,
                    n.meta = t.meta,
                    n.viewFlags = t.viewFlags,
                    n
                }
                ,
                e.fromCardModel = function(t, n, r) {
                    var o, i, s;
                    const a = new e
                      , l = +t.quantity
                      , c = WbSpaModel.prototype.$analitic.analiticsInfoToListName({
                        l: "AAA",
                        lw: "IT",
                        ...t
                    })
                      , u = null === (o = t.meta) || void 0 === o ? void 0 : o.analitic
                      , d = (null == u ? void 0 : u.logs) || t.logs || (null === (i = t.targetInfo) || void 0 === i || null === (s = i.analiticsInfo) || void 0 === s ? void 0 : s.logs) || "";
                    u && d && (u.logs = d),
                    t.meta || (t.meta = {}),
                    t.meta.analitic = u;
                    const p = WbSpaModel.prototype.$user.getUserGradeFromCache();
                    if (a.characteristicId = a.id = +t.characteristicId,
                    a.quantity = l > 0 ? l : 1,
                    a.maxQuantity = (null == n ? void 0 : n.totalQuantity) || 10,
                    a.cod1S = t.cod1S,
                    a.targetUrl = `EX|${t.iid || "1"}|${c}|${d}`,
                    a.priceWithCoupon = a.priceWithCouponAndDiscount = a.priceWithCouponAndSpp = a.priceWithSale = a.price = t.priceWithCouponAndDiscount,
                    a.subjectId = t.subjectId,
                    a.subjectParentId = t.subjectParentId,
                    a.supplierId = t.supplierId,
                    a.supplierName = t.supplier,
                    a.reviewRating = t.reviewRating,
                    a.feedbacks = t.feedbacks || t.commentsCount,
                    a.meta = t.meta,
                    a.timestamp = Date.now() / 1e3 | 0,
                    a.viewFlags = (null == n ? void 0 : n.viewFlags) || t.viewFlags,
                    n) {
                        var h, m, f, y;
                        if (a.brandName = n.brand,
                        a.goodsName = n.name,
                        a.colorName = n.colorName || n.color,
                        a.promos = n.promotions,
                        a.isUnrefusable = n.isUnrefusable,
                        a.isPrepaid = n.isPrepaid,
                        a.isUnreturnable = n.isUnreturnable,
                        a.isVerificationReturn = n.isVerificationReturn,
                        a.logisticsCost = n.logisticsCost,
                        a.payloadV2 = n.payloadV2,
                        a.whDtype = null !== (h = n.whDtype) && void 0 !== h ? h : n.dtype,
                        a.catalogReturnCost = null !== (m = n.returnCost) && void 0 !== m ? m : null === (f = n.catalogPrice) || void 0 === f ? void 0 : f.return,
                        a.saleConditions = n.saleConditions,
                        n.panelPromoId && (a.panelPromoId = n.panelPromoId),
                        n.feedbacks && (a.feedbacks = n.feedbacks),
                        n.reviewRating && (a.reviewRating = n.reviewRating),
                        n.deliveryHours && (a.deliveryHours = n.deliveryHours),
                        n.catalogPrice ? (a.price = a.priceWithCoupon = n.catalogPrice.basic / 100,
                        a.salePrice = a.priceWithSale = a.priceWithCouponAndDiscount = a.priceWithCouponAndSpp = n.catalogPrice.total / 100,
                        a.sale = n.catalogPrice.sale) : (a.priceWithSale = n.salePrice,
                        a.sale = n.sale),
                        WbSpaModel.prototype.$useCatalogReturnCost() && (a.returnCost = Math.round(a.catalogReturnCost / 100),
                        4 == (null == p ? void 0 : p.version))) {
                            const e = 16 & a.whDtype || 32 & a.whDtype ? 1 : p.return_fee;
                            a.returnCost = Math.min(a.priceWithCouponAndDiscount, a.returnCost * e)
                        }
                        const e = null === (y = n.sizes) || void 0 === y ? void 0 : y.find((e => e.ch === a.id));
                        var g;
                        if (e)
                            if (a.sizeName = e.nm,
                            a.stocks = e.stocks,
                            e.deliveryHours && (a.deliveryHours = e.deliveryHours),
                            a.payloadV2 = e.payloadV2,
                            a.whDtype = null !== (g = e.whDtype) && void 0 !== g ? g : e.dtype,
                            e.returnCost && (a.catalogReturnCost = e.returnCost),
                            e.logisticsCost && (a.logisticsCost = e.logisticsCost),
                            e.saleConditions && (a.saleConditions = e.saleConditions),
                            e.catalogPrice ? (a.price = a.priceWithCoupon = e.catalogPrice.basic / 100,
                            a.salePrice = a.priceWithSale = a.priceWithCouponAndDiscount = e.catalogPrice.total / 100,
                            a.sale = e.catalogPrice.sale) : e.salePrice && e.salePrice != a.priceWithCouponAndDiscount && (a.priceWithCoupon = a.priceWithCouponAndDiscount = a.priceWithCouponAndSpp = a.priceWithSale = a.price = e.salePrice),
                            e.saleConditions && wb.xnm.expandSaleConditions(a, e),
                            WbSpaModel.prototype.$useCatalogReturnCost() && e.returnCost && (a.returnCost = Math.round(a.catalogReturnCost / 100),
                            4 == (null == p ? void 0 : p.version))) {
                                const e = 16 & a.whDtype || 32 & a.whDtype ? 1 : p.return_fee;
                                a.returnCost = Math.min(a.priceWithCouponAndDiscount, a.returnCost * e)
                            }
                    }
                    return r && (a.stocks = r),
                    a.stocks && (a.maxQuantity = a.stocks.sumBy((e => e.qty))),
                    a.canBeOrdered = a.maxQuantity > 0,
                    a
                }
                ,
                e.fromBasketInputExtended = function(t) {
                    const n = e.fromCardModel(t, null, t.stocks);
                    return n.price = t.price,
                    n.colorName = t.colorName,
                    n.goodsName = t.goodsName,
                    n.sizeName = t.sizeName,
                    n.viewFlags = t.viewFlags,
                    n
                }
                ,
                e.enrichCatalogGood = function(e, t={}) {
                    var n, r, o, i, s, a, l;
                    if (!e)
                        return;
                    const c = null === (n = t.sizes) || void 0 === n ? void 0 : n.find((t => t.optionId === e.characteristicId))
                      , u = null !== (r = null == c || null === (o = c.stocks) || void 0 === o ? void 0 : o.some((e => e.qty > 0))) && void 0 !== r && r
                      , d = null !== (i = null == c ? void 0 : c.price) && void 0 !== i ? i : t.price;
                    if (e.brandName = t.brand,
                    e.goodsName = t.name,
                    e.colorName = null === (s = t.colors) || void 0 === s || null === (a = s[0]) || void 0 === a ? void 0 : a.name,
                    e.canBeOrdered = u,
                    e.price = u ? d.basic / 100 : 0,
                    e.priceWithSale = u ? d.total / 100 : 0,
                    e.priceWithCoupon = u ? d.basic / 100 : 0,
                    e.priceWithCouponAndDiscount = d.total / 100,
                    e.sale = u ? d.sale : 0,
                    e.totalSale = u ? d.sale : 0,
                    e.salePrice = u ? d.total / 100 : 0,
                    e.sizeName = null !== (l = null == c ? void 0 : c.origName) && void 0 !== l ? l : "",
                    e.stocks = null == c ? void 0 : c.stocks,
                    e.stocks && (e.maxQuantity = e.stocks.sumBy((e => e.qty))),
                    e.subjectId = t.subjectId,
                    e.subjectParentId = t.subjectParentId,
                    e.supplierId = t.supplierId,
                    e.supplierName = t.supplier,
                    e.volume = t.volume,
                    e.reviewRating = t.reviewRating,
                    e.feedbacks = t.feedbacks || t.commentsCount,
                    e.promos = t.promotions,
                    e.isUnrefusable = t.isUnrefusable,
                    e.isPrepaid = t.isPrepaid,
                    e.isUnreturnable = t.isUnreturnable,
                    e.isVerificationReturn = t.isVerificationReturn,
                    e.priceWithCouponAndSpp = e.priceWithCouponAndDiscount,
                    e.catalogReturnCost = d.return,
                    WbSpaModel.prototype.$useCatalogReturnCost()) {
                        e.returnCost = Math.round(d.return / 100);
                        const t = WbSpaModel.prototype.$user.getUserGradeFromCache();
                        if (4 == (null == t ? void 0 : t.version)) {
                            const n = 16 & e.whDtype || 32 & e.whDtype ? 1 : t.return_fee;
                            e.returnCost = Math.min(e.priceWithCouponAndDiscount, e.returnCost * n)
                        }
                    }
                    return e.logisticsCost = d.logistics || 0,
                    e.priceBasic = d.basic,
                    e.priceTotal = d.total,
                    e.whDtype = null == c ? void 0 : c.dtype,
                    e.payloadV2 = null == c ? void 0 : c.payload,
                    e.saleConditions = null == c ? void 0 : c.saleConditions,
                    e.viewFlags = t.viewFlags,
                    t.panelPromoId && (e.panelPromoId = t.panelPromoId),
                    e
                }
                ,
                e.enrichStaticGood = function(e, t={}) {
                    if (e)
                        return e.goodsName = t.n || e.goodsName || "Название не указано",
                        e.colorName = t.c || e.colorName,
                        e
                }
                ,
                e
            }();
            const ot = function() {
                function e(e, t) {
                    this.settings = {},
                    this.paymentTypes = [e ? {
                        userGrade: 0,
                        bankCards: [{
                            id: "_newcardid",
                            name: "Привязать карту",
                            createNew: !0,
                            system: "bindnew"
                        }],
                        isOnline: !0,
                        isCreditCard: !0,
                        codeLower: "crd",
                        name: "Оплата картой",
                        id: "63",
                        available: !0
                    } : {
                        isOnline: !0,
                        isCreditCard: !0,
                        codeLower: "crd",
                        name: "Оплата картой",
                        id: "63",
                        available: !0
                    }],
                    this.deliveryWay = "self",
                    this.basketItems = null != t ? t : []
                }
                return e.calc = function(e) {
                    e.basketItems.forEach((e => {
                        e.stocks && (e.maxQuantity = e.stocks.sumBy((e => e.qty))),
                        e.maxQuantity > 0 && e.maxQuantity < e.quantity ? e.partQuantity = e.maxQuantity : e.partQuantity = null,
                        e._qnt = e.partQuantity || e.quantity,
                        wb.global.settings.switches.dontIncludeSoldItemsInOrder && !e.maxQuantity && (e.includeInOrder = !1)
                    }
                    ));
                    const t = e.basketItems.filter((e => e.maxQuantity > 0));
                    return 1 === t.length && (t[0].includeInOrder = !0),
                    e.totalQuantity = e.basketItems.sumBy((e => e._qnt)),
                    e
                }
                ,
                e
            }();
            function it(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, st(r.key), r)
                }
            }
            function st(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const at = 256;
            let lt = function() {
                function e(e, t, n) {
                    this._isAuth = e,
                    this.sessionService = t,
                    this.$eventBus = n,
                    this.$eventBus.addEventListener("onUserAuth", this.clearMemory.bind(this))
                }
                var t, n, r, o = e.prototype;
                return o.clearMemory = function() {
                    this.innerStorage = new ot(this.isAuth,[])
                }
                ,
                o.migrate = function() {
                    if (localStorage.hasItem("_basket")) {
                        const e = this._getGuestBasket();
                        return e.basketItems && e.basketItems.reverse(),
                        this.addManyItems(e.basketItems, !0),
                        this._detGuestBasket(),
                        e.basketItems
                    }
                    return []
                }
                ,
                o.addManyItems = function(e, t) {
                    if (null == e || !e.length)
                        return {
                            isSuccess: !1,
                            error: "[basket] Неизвестная ошибка"
                        };
                    const n = this._syncFrom();
                    if (!t && n.basketItems.length + e.length > at)
                        return {
                            isSuccess: !1,
                            error: String.format("Вы не можете добавить в корзину больше {0}", $.views.converters.pluralize(at, "{0} товар", "{0} товара", "{0} товаров"))
                        };
                    let r = !0;
                    const o = n.basketItems.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder));
                    for (let t = 0; t < e.length; t++) {
                        const i = n.basketItems.findIndex((n => n.characteristicId === e[t].characteristicId));
                        -1 === i ? (r = !1,
                        e[t].timestamp <= this.lastTs && (e[t].timestamp = this.lastTs + 1),
                        e[t].includeInOrder = o,
                        n.basketItems.unshift(e[t])) : n.basketItems[i].timestamp > 0 && (e[t].timestamp = n.basketItems[i].timestamp,
                        e[t].quantity = n.basketItems[i].quantity)
                    }
                    this._syncTo();
                    return {
                        isExist: r,
                        isSuccess: !0,
                        xnmDictTask: this._enrichProducts(n.basketItems.map((e => e.cod1S)))
                    }
                }
                ,
                o.clearItems = function(e) {
                    if ((null == e ? void 0 : e.length) > 0) {
                        const t = this._syncFrom();
                        t.basketItems = t.basketItems.filter((function(t) {
                            return -1 === e.indexOf(t.characteristicId)
                        }
                        )),
                        this._syncTo()
                    }
                }
                ,
                o.add = function(e) {
                    const t = this._syncFrom();
                    if (t.basketItems.length + 1 > at)
                        return {
                            isSuccess: !1,
                            error: String.format("Вы не можете добавить в корзину больше {0}", $.views.converters.pluralize(at, "{0} товар", "{0} товара", "{0} товаров"))
                        };
                    const n = t.basketItems.find((t => t.characteristicId === e.characteristicId));
                    n ? n.timestamp > 0 && (e.timestamp = n.timestamp,
                    e.quantity = n.quantity) : (e.timestamp <= this.lastTs && (e.timestamp = this.lastTs + 1),
                    e.includeInOrder = t.basketItems.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder)),
                    t.basketItems.unshift(e)),
                    this._syncTo();
                    return {
                        isExist: !!n,
                        isSuccess: !0,
                        xnmDictTask: this._enrichProducts(t.basketItems.map((e => e.cod1S)))
                    }
                }
                ,
                o.updateMeta = function(e, t) {
                    if (!e || !t)
                        return !1;
                    const n = this._syncFrom().basketItems.find((t => t.characteristicId === e));
                    return !!n && (n.meta = WbSpaModel.prototype.$helper.deepMerge(n.meta || {}, t),
                    this._syncTo(),
                    !0)
                }
                ,
                o.refresh = function(e, t) {
                    var n, r, o, i;
                    const s = this._syncFrom();
                    if ("remove" === t) {
                        var a;
                        const t = (null === (a = e.chrtIds) || void 0 === a ? void 0 : a.length) > 0 ? e.chrtIds[0] : e.chrtId;
                        s.basketItems = s.basketItems.filter((function(e) {
                            return e.characteristicId !== t
                        }
                        ))
                    } else if ("recalc" === t && e.quantity > 0) {
                        const t = s.basketItems.find((t => t.characteristicId === e.chrtId));
                        t && (t.quantity = e.quantity)
                    }
                    !e.isBuyItNowMode && e.includeInOrderMap && s.basketItems.forEach((t => {
                        e.includeInOrderMap.has(t.id) && (t.includeInOrder = e.includeInOrderMap.get(t.id))
                    }
                    )),
                    s.deliveryWay = e.deliveryWay;
                    let l = WbSpaModel.prototype.$services.userAddressService.get(e.addressId, e.deliveryWay);
                    var c, u;
                    (l && (null === (n = s.deliveryPoint) || void 0 === n ? void 0 : n.addressId) !== l.addressId && (s.deliveryPoint = l,
                    s.deliveryPriceModel = null),
                    e.paymentTypeId && e.paymentTypeId !== (null === (r = s.paymentType) || void 0 === r ? void 0 : r.id) && (s.paymentType = s.paymentTypes.find((t => t.id === e.paymentTypeId && t.available))),
                    null !== (o = s.paymentType) && void 0 !== o && o.isCreditCard && e.bankCardId && e.bankCardId !== (null === (i = s.paymentType) || void 0 === i ? void 0 : i.bankCardId)) && (s.paymentType.bankCardId = e.bankCardId,
                    s.paymentType.selectedBankCard = null === (c = s.paymentTypes.find((e => e.isCreditCard))) || void 0 === c || null === (u = c.bankCards) || void 0 === u ? void 0 : u.find((t => t.id === e.bankCardId)));
                    this._syncTo()
                }
                ,
                o.deleteCards = function(e) {
                    var t;
                    if (!e)
                        return;
                    const n = null === (t = this._syncFrom().paymentTypes) || void 0 === t ? void 0 : t.find((e => e.isCreditCard));
                    n && (n.bankCards = (n.bankCards || []).filter((t => -1 === e.indexOf(t.id)))),
                    this._syncTo()
                }
                ,
                o.setCardDefault = function(e) {
                    this.getBankCards().forEach((t => {
                        t.default = t.id === e
                    }
                    )),
                    this._syncTo()
                }
                ,
                o.setAddress = function(e, t) {
                    var n;
                    const r = this._syncFrom();
                    let o = WbSpaModel.prototype.$services.userAddressService.get(e, t);
                    o && (null === (n = r.deliveryPoint) || void 0 === n ? void 0 : n.addressId) !== o.addressId && (r.deliveryWay = t,
                    r.deliveryPoint = o,
                    r.deliveryPriceModel = null,
                    this._syncTo())
                }
                ,
                o.getBankCards = function() {
                    var e, t;
                    return (null === (e = this._syncFrom().paymentTypes) || void 0 === e || null === (t = e.find((e => e.isCreditCard))) || void 0 === t ? void 0 : t.bankCards) || []
                }
                ,
                o.getPaymentsForDeliveries = async function(e) {
                    var t;
                    const {payments: n} = await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`, {
                        method: "POST",
                        credentials: "include",
                        body: new URLSearchParams({
                            currency: e
                        })
                    }) || {};
                    return null == n || null === (t = n.find((e => "crd" == e.codeLower))) || void 0 === t || t.bankCards.forEach((e => {
                        e.isSbp || (e.icon = e.system)
                    }
                    )),
                    n
                }
                ,
                o.getItems = function() {
                    return this._syncFrom().basketItems
                }
                ,
                o.enrichItemsLocalInfo = function(e) {
                    const t = this._syncFrom().basketItems.toMap((e => e.id), (e => e));
                    e.forEach((e => {
                        const n = t.get(e.id);
                        null != n && n.meta && (e.meta = null == n ? void 0 : n.meta)
                    }
                    ))
                }
                ,
                o.save = function(e) {
                    const t = this._syncFrom()
                      , n = JSON.parse(JSON.stringify(e, ( (e, t) => "basketItems" === e ? void 0 : t)));
                    n.basketItems = e.basketItems.reduce(( (e, t) => (e.get(t.id) && e.set(t.id, wb.helpers.deepClone(t)),
                    e)), t.basketItems.toMap((e => e.id), (e => e))).toArray(),
                    this._syncTo(n)
                }
                ,
                o.updateIncludeInOrder = function(e) {
                    if (!e)
                        return;
                    this._syncFrom().basketItems.forEach((t => {
                        e.has(t.id) && (t.includeInOrder = e.get(t.id))
                    }
                    )),
                    this._syncTo()
                }
                ,
                o.get = function() {
                    return this._syncFrom()
                }
                ,
                o.getDeliveryPoint = function() {
                    return this._syncFrom().deliveryPoint
                }
                ,
                o.buyItNow = function(e) {
                    const t = this._syncFrom()
                      , n = t.basketItems.find((t => t.characteristicId == e));
                    if (n) {
                        const e = new ot(this.isAuth);
                        return e.isBuyItNowMode = !0,
                        n.includeInOrder = !0,
                        e.basketItems.unshift(n),
                        e.deliveryWay = t.deliveryWay,
                        e.deliveryPoint = t.deliveryPoint,
                        e.paymentTypes = t.paymentTypes,
                        e.paymentType = t.paymentType,
                        e.paymentType && (e.paymentType.bankCardId = t.paymentType.bankCardId,
                        e.paymentType.selectedBankCard = t.paymentType.selectedBankCard),
                        ot.calc(e),
                        e
                    }
                    return t
                }
                ,
                o.enrichProductsIfNeedAsync = function({force: e}={}) {
                    const t = this._syncFrom();
                    return t.basketItems.length > 0 && t.basketItems.every((e => !e.hasOwnProperty("priceWithCouponAndDiscount") && !e.hasOwnProperty("price"))) || e ? this._enrichProducts(t.basketItems.map((e => e.cod1S))) : Promise.resolve([])
                }
                ,
                o._getGuestBasket = function() {
                    const e = localStorage.getObject("_basket");
                    return e || new ot(!1)
                }
                ,
                o._detGuestBasket = function() {
                    localStorage.removeItem("_basket")
                }
                ,
                o._syncFrom = function() {
                    try {
                        var e, t;
                        const n = this.basketKey
                          , r = localStorage.getObject(n);
                        return r ? (this.innerStorage = r,
                        this.innerStorage ? this.innerStorage.basketItems || (this.innerStorage.basketItems = []) : this.innerStorage = new ot(this.isAuth,[])) : null !== (e = this.innerStorage) && void 0 !== e && null !== (t = e.basketItems) && void 0 !== t && t.length || (this.innerStorage = new ot(this.isAuth,[])),
                        this.isAuth && (localStorage.clearStartsWith("wb_basket_", n),
                        localStorage.clearStartsWith("wb___basketStorage_", `wb___basketStorage_${this.sessionService.getUserUid()}`)),
                        this.innerStorage
                    } catch (e) {
                        var n;
                        return console.error(e),
                        wb.spa.logError(e, "cartService syncfrom"),
                        null !== (n = this.innerStorage) && void 0 !== n ? n : new ot(this.isAuth)
                    }
                }
                ,
                o._syncTo = function(e) {
                    var t;
                    e && (this.innerStorage = e),
                    ot.calc(this.innerStorage);
                    try {
                        localStorage.putObject(this.basketKey, this.innerStorage)
                    } catch (e) {}
                    this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{
                        detail: {
                            count: null === (t = this.innerStorage) || void 0 === t ? void 0 : t.totalQuantity
                        }
                    }))
                }
                ,
                o._enrichProducts = async function(e) {
                    if (0 === e.length)
                        return {};
                    const [t,n] = await Promise.all([wb.xnm.getXnmProducts(e, !1), wb.xnm.getProductColorsByNmIdsAsync(e)])
                      , r = this._syncFrom();
                    let o = !1;
                    return r.basketItems.forEach((e => {
                        t[e.cod1S] && (rt.enrichCatalogGood(e, t[e.cod1S]),
                        o = !0),
                        n[e.cod1S] && (rt.enrichStaticGood(e, n[e.cod1S]),
                        o = !0)
                    }
                    )),
                    r.currency = WbSpaModel.prototype.$user.getCurrency(),
                    o && this._syncTo(r),
                    t
                }
                ,
                o.updateWbProducts = function(e) {
                    const t = this._syncFrom();
                    localStorage.hasItem(this.basketKey) || this._syncTo(),
                    null != e && e.length && (t.basketItems = [...t.basketItems, ...e.map((e => rt.fromWbBasketProduct(e)))].reduce(( (e, t) => {
                        const n = e.findIndex((e => e.id === t.id));
                        return -1 !== n || t.isDeleted ? -1 !== n && (e[n].timestamp = Math.max(e[n].timestamp, t.timestamp),
                        e[n].quantity = t.quantity,
                        e[n].targetUrl = t.targetUrl,
                        e[n].isDeleted = t.isDeleted,
                        e[n].meta = t.meta) : (t._fromSync && (t.includeInOrder = e.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder)),
                        delete t._fromSync),
                        e.push(JSON.parse(JSON.stringify(t)))),
                        e
                    }
                    ), []).filter((e => !e.isDeleted)).sort(( (e, t) => t.timestamp - e.timestamp)),
                    this._syncTo())
                }
                ,
                t = e,
                (n = [{
                    key: "isAuth",
                    get: function() {
                        return this._isAuth()
                    }
                }, {
                    key: "lastTs",
                    get: function() {
                        var e, t;
                        return null === (e = this.innerStorage.basketItems) || void 0 === e || null === (t = e[0]) || void 0 === t ? void 0 : t.timestamp
                    }
                }, {
                    key: "count",
                    get: function() {
                        const e = this._syncFrom();
                        return this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{
                            detail: {
                                count: e.totalQuantity
                            }
                        })),
                        e.totalQuantity
                    }
                }, {
                    key: "basketKey",
                    get: function() {
                        return this.isAuth ? `wb_basket_${this.sessionService.getUserUid()}` : "_basket"
                    }
                }]) && it(t.prototype, n),
                r && it(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const ct = "wb___basketMgrt";
            const ut = function() {
                function e() {}
                var t = e.prototype;
                return t.check = function(e) {
                    return this._migrated || (this._migrated = localStorage.getItem(ct) === e),
                    this._migrated
                }
                ,
                t.set = function(e) {
                    this._migrated = !!e;
                    try {
                        this._migrated ? localStorage.setItem(ct, e) : localStorage.removeItem(ct)
                    } catch (e) {}
                }
                ,
                e
            }();
            function dt(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, pt(r.key), r)
                }
            }
            function pt(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            let ht = function(e) {
                this.ts = e.modify_time,
                this.path = e.path;
                const t = e.path.split("/")
                  , n = t.find((e => e.split("|").length > 1));
                if (n) {
                    const e = n.split("|");
                    this.sessionId = e[0],
                    this.ver = parseInt(e[1])
                } else
                    !0 === e.is_dir && (this.isDir = e.is_dir,
                    this.dirId = t[t.length - 1])
            }
              , mt = function() {
                function e(e) {
                    this.storage = e
                }
                var t = e.prototype;
                return t.getList = async function() {
                    const e = await this.storage.getList.apply(this.storage, arguments);
                    if (null === e)
                        throw "userstorage err";
                    return e
                }
                ,
                t.getData = async function() {
                    const e = await this.storage.getData.apply(this.storage, arguments);
                    if (null === e)
                        throw "userstorage err";
                    return e
                }
                ,
                e
            }();
            const ft = function() {
                function e(e) {
                    this.constants = e,
                    this.userStorage = new mt(this.$services.apiUserStorage),
                    this.wbBasketMigrated = new ut
                }
                var t, n, r, o = e.prototype;
                return o.unAuth = function() {
                    this.clear(),
                    this.wbBasketMigrated.set(!1)
                }
                ,
                o.clear = function() {
                    localStorage.removeItem("wbx___basketSyncDate"),
                    localStorage.removeItem("wbx___basketLocal"),
                    localStorage.removeItem("wbx___basketRemote"),
                    localStorage.removeItem("wbx___basketId"),
                    localStorage.removeItem("wbx___basketMgrt"),
                    localStorage.removeItem("wb__basketSyncDate"),
                    localStorage.removeItem("wb__basketId"),
                    localStorage.removeItem("wb__queue_basket-fetch")
                }
                ,
                o.sync = async function(e) {
                    const t = new AbortController;
                    return setTimeout(( () => t.abort()), e || 5e3),
                    this._task || (this._task = this._sync(t.signal)),
                    await this._task
                }
                ,
                o._sync = async function(e) {
                    try {
                        var t;
                        const n = {
                            signal: e
                        }
                          , r = await this._getLastIndBasket(n);
                        if (this.isWbBasketMigrated)
                            return null;
                        const o = (null === (t = await this.userStorage.getList(`cart/${r}`, n)) || void 0 === t ? void 0 : t.map((e => new ht(e)))) || []
                          , i = await this._getData(o, n);
                        return i.selectMany((e => e.data)).reduce(( (e, t) => {
                            const n = e.findIndex((e => e.product_option_id === t.product_option_id));
                            return t.added_timestamp > 1e12 && (t.added_timestamp = t.added_timestamp / 1e3 | 0),
                            -1 === n ? e.push(Object.assign({}, t)) : (e[n].added_timestamp = Math.min(e[n].added_timestamp, t.added_timestamp),
                            e[n].count += t.count,
                            e[n].target_url = e[n].target_url || t.target_url),
                            e
                        }
                        ), []).filter((e => e.product_id && e.product_option_id && e.count > 0)).sort(( (e, t) => e.added_timestamp - t.added_timestamp))
                    } catch (e) {
                        return null
                    } finally {
                        this._task = null
                    }
                }
                ,
                o._getLastIndBasket = async function(e) {
                    const t = await this.userStorage.getList("cart", e)
                      , n = (null == t ? void 0 : t.map((e => new ht(e)))) || [];
                    null != t && n.some((e => e.path === this.constants.WB_BASKET_SYNC_FILEPATH)) && this.wbBasketMigrated.set(this.$auth.um.userUid);
                    const r = n.filter((e => !0 === e.isDir));
                    if (0 !== r.length) {
                        const e = r.filter((e => !isNaN(e.dirId))).reduce(( (e, t) => Number(e.dirId) > Number(t.dirId) ? e : t));
                        return Number(e.dirId)
                    }
                    return 0
                }
                ,
                o._getData = async function(e, t) {
                    if (!e.length)
                        return [];
                    let n = await this.userStorage.getData(e, t);
                    return null == n ? void 0 : n.reduce(( (e, t) => {
                        const n = t.path.split("/")
                          , r = n.find((e => e.split("|").length > 1));
                        if (r) {
                            const o = r.split("|");
                            let i = [];
                            try {
                                i = JSON.parse(this.$helper.base64.decode(t.file))
                            } catch (e) {
                                wb.spa.logError(new Error(`[BASKET_WBX_SYNC]: file is corrupted path:${n}`), t)
                            }
                            e.push({
                                ts: t.modify_time,
                                sessionId: o[0],
                                data: i
                            })
                        }
                        return e
                    }
                    ), [])
                }
                ,
                t = e,
                (n = [{
                    key: "isWbBasketMigrated",
                    get: function() {
                        return this.wbBasketMigrated.check(this.$auth.um.userUid)
                    }
                }]) && dt(t.prototype, n),
                r && dt(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const yt = function() {
                function e(e, t, n, r, o) {
                    this.chrt_id = +t;
                    const i = +n;
                    this.quantity = i > 0 ? i : 1,
                    this.cod_1s = r,
                    this.client_ts = o || Date.now() / 1e3 | 0,
                    this.op_type = e || 1
                }
                return e.fromLocalBasket = function(t, n) {
                    const r = new e(n,t.characteristicId,t.quantity,t.cod1S,t.timestamp);
                    return r.client_ts > 1e12 && (r.client_ts = r.client_ts / 1e3 | 0),
                    r.target_url = t.targetUrl,
                    t.meta && (r.meta_json = JSON.stringify(t.meta)),
                    r
                }
                ,
                e.toUpdate = function(t) {
                    return e.fromLocalBasket(t, 2)
                }
                ,
                e.toDelete = function(t) {
                    return new e(3,t)
                }
                ,
                e
            }();
            function gt(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, vt(r.key), r)
                }
            }
            function vt(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const bt = "wb___basketStorage"
              , wt = {
                ts: 0,
                c_ts: 0,
                operations: new Map
            };
            const St = function() {
                function e(e) {
                    window.addEventListener("storage", (e => {
                        e.key === this._basketKey && this._pull()
                    }
                    )),
                    WbSpaModel.prototype.$eventBus.addEventListener("onUserAuth", this._pull.bind(this)),
                    this.getLocalItems = e,
                    this._data = wt
                }
                var t, n, r, o = e.prototype;
                return o.checkBug = function() {
                    this._data.ts > 10 && WbSpaModel.prototype.$auth.um.userUid && !localStorage.hasItem(`wb_basket_${WbSpaModel.prototype.$auth.um.userUid}`) && (wb.spa.logError(new Error(`[WB_BASKET_STORAGE]: key wb_basket_${WbSpaModel.prototype.$auth.um.userUid} notfound`), {
                        ts: this.ts,
                        opLen: this._data.operations.size,
                        hasKey: localStorage.hasItem(this._basketKey)
                    }),
                    this._data.ts = 10)
                }
                ,
                o.hasOperations = function() {
                    return !!this._data.operations.size
                }
                ,
                o.getOperations = function() {
                    return this.ts || (this._data.operations.clear(),
                    this.getLocalItems().forEach((e => {
                        this._data.operations.set(e.chrt_id, e)
                    }
                    ))),
                    this._data.operations.toArray()
                }
                ,
                o.setTs = function(e) {
                    e && (this._data.ts = e,
                    this._push())
                }
                ,
                o.setClientTs = function(e) {
                    this._data.c_ts = e,
                    this._push()
                }
                ,
                o._mergeOp = function(e, t) {
                    return (null == e ? void 0 : e.chrt_id) === t.chrt_id && (1 === e.op_type && 2 === t.op_type && (t.op_type = 1),
                    2 === e.op_type && 2 === t.op_type && (t.meta = t.meta || e.meta,
                    t.quantity = t.quantity || e.quantity)),
                    t
                }
                ,
                o.normalize = function(e, t) {
                    e.forEach((e => {
                        const t = this._data.operations.get(e.chrt_id);
                        t.quantity === e.quantity && t.client_ts === e.client_ts && t.op_type === e.op_type && this._data.operations.delete(e.chrt_id)
                    }
                    ));
                    let n = [];
                    return (null == t ? void 0 : t.length) > 0 && (t.forEach((e => {
                        const t = this._data.operations.get(e.chrt_id);
                        if (t) {
                            if (!e.is_deleted)
                                return;
                            if (1 === t.op_type)
                                return;
                            this._data.operations.delete(e.chrt_id)
                        }
                        n.push(e)
                    }
                    )),
                    this._push()),
                    n
                }
                ,
                o.update = function(e) {
                    if ((null == e ? void 0 : e.length) > 0) {
                        for (let t = 0; t < e.length; t++) {
                            const n = e[t].chrt_id;
                            this._data.operations.set(n, this._mergeOp(this._data.operations.get(n), e[t]))
                        }
                        this._push()
                    }
                }
                ,
                o.clear = function() {
                    localStorage.removeItem(bt)
                }
                ,
                o._pull = function() {
                    const e = localStorage.getObject(this._basketKey) || localStorage.getObject(bt);
                    e && (e.operations = Array.isArray(e.operations) ? new Map(e.operations.map((e => [e.chrt_id, e]))) : wt.operations),
                    this._data = null != e ? e : wt
                }
                ,
                o._push = function() {
                    try {
                        const e = this._data.operations.toArray();
                        localStorage.putObject(this._basketKey, {
                            ts: this._data.ts,
                            c_ts: this._data.c_ts,
                            operations: e
                        }),
                        localStorage.hasItem(bt) && localStorage.putObject(bt, {
                            ts: this._data.ts,
                            c_ts: this._data.c_ts,
                            operations: e
                        })
                    } catch (e) {}
                }
                ,
                t = e,
                (n = [{
                    key: "_basketKey",
                    get: function() {
                        return `${bt}_${WbSpaModel.prototype.$auth.um.userUid}`
                    }
                }, {
                    key: "clientTs",
                    get: function() {
                        return this._data.c_ts
                    }
                }, {
                    key: "ts",
                    get: function() {
                        return this._data.ts
                    }
                }]) && gt(t.prototype, n),
                r && gt(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const _t = function() {
                function e(e) {
                    this.localBasket = e,
                    this.storage = new St(( () => this.localBasket.getItems().map((e => yt.fromLocalBasket(e))))),
                    this.debounceSync = this.$helper.debounce(this._sync.bind(this), 3e3),
                    this.debounceShortSync = this.$helper.debounce(this._sync.bind(this), 1e3),
                    setTimeout(( () => this._backupBasketAsync()), 11e3)
                }
                var t = e.prototype;
                return t.unAuth = function() {
                    this.storage.clear()
                }
                ,
                t.onBeforeSignOut = function() {
                    this.storage.hasOperations() && this._sync()
                }
                ,
                t.addItem = function(e) {
                    e && (this.storage.update([yt.fromLocalBasket(e)]),
                    this.debounceShortSync())
                }
                ,
                t.addManyItems = function(e) {
                    e.length && (this.storage.update(e.map((e => yt.fromLocalBasket(e)))),
                    this.debounceShortSync())
                }
                ,
                t.clearItems = function(e) {
                    e.length && (this.storage.update(e.map((e => yt.toDelete(e)))),
                    this.debounceShortSync())
                }
                ,
                t.updateItem = function(e) {
                    if (!e)
                        return;
                    const t = this.localBasket.getItems().find((t => t.characteristicId === e));
                    t && this.storage.update([yt.toUpdate(t)]),
                    this.debounceSync()
                }
                ,
                t.refresh = function(e, t) {
                    if ("remove" === t) {
                        var n, r, o, i;
                        const t = null !== (n = null !== (r = null === (o = e.chrtIds) || void 0 === o ? void 0 : o[0]) && void 0 !== r ? r : null === (i = e.items) || void 0 === i ? void 0 : i[0].chrtId) && void 0 !== n ? n : e.chrtId;
                        t > 0 && this.storage.update([yt.toDelete(t)])
                    } else
                        "recalc" === t && this.updateItem(e.chrtId);
                    this.debounceSync()
                }
                ,
                t.sync = async function(e, t) {
                    return await this._sync(e, t)
                }
                ,
                t._sync = async function(e, t) {
                    return await navigator.locks.request("lock-basket-sync", (async n => {
                        this.storage.checkBug();
                        const r = this.storage.getOperations();
                        if (t && !r.length && this.storage.clientTs > (Date.now() / 1e3 | 0))
                            return !1;
                        const o = this.$services.sessionService.getSession();
                        try {
                            const t = await this._doSync({
                                sessionId: o,
                                operations: r,
                                signal: e
                            });
                            if (this._sendMetrics(t.state),
                            0 === t.state && t.change_ts > 0)
                                return this._updateProducts(t, r);
                            if (1 === t.state) {
                                const e = this.localBasket.getItems().map((e => yt.fromLocalBasket(e)))
                                  , t = await this._doSync({
                                    sessionId: o,
                                    operations: e,
                                    rememberMe: !0
                                });
                                if (0 === t.state && t.change_ts > 0)
                                    return this._updateProducts(t, r)
                            } else
                                t && wb.spa.logError(new Error(`[WB_BASKET_SYNC]: sync state:${t.state}`), {
                                    result: t,
                                    ts: this.storage.ts,
                                    deviceId: o,
                                    opLen: r.length,
                                    hasJwt: this.$auth.isAuth
                                })
                        } catch (e) {
                            const t = !e.isCustomError && e instanceof TypeError && ("Failed to fetch" === e.message || "NetworkError when attempting to fetch resource." === e.message || "Cancelled" === e.message);
                            this._sendMetrics(t ? "network" : "error"),
                            wb.spa.logError(new Error(`[WB_BASKET_SYNC]: ${e.message}`), {
                                ts: this.storage.ts,
                                deviceId: o,
                                opLen: r.length,
                                hasJwt: this.$auth.isAuth
                            })
                        }
                        return !1
                    }
                    ))
                }
                ,
                t._updateProducts = function(e, t) {
                    const n = this.storage.normalize(t, e.result_set);
                    return this.localBasket.updateWbProducts(n),
                    this.storage.setTs(e.change_ts),
                    this.storage.setClientTs(235 + (Date.now() / 1e3 | 0)),
                    e.change_ts > 0
                }
                ,
                t._doSync = function({sessionId: e, operations: t, rememberMe: n=!1, signal: r=null}) {
                    return this.$wbxHttpClient.fetch(`https://cart-storage-api.wildberries.ru/api/basket/sync?ts=${this.storage.ts}&device_id=${e}${n ? "&remember_me=true" : ""}`, {
                        method: "POST",
                        body: JSON.stringify(t),
                        headers: {
                            "Content-Type": "application/json",
                            "Wb-AppType": "site"
                        },
                        signal: r
                    }).then((async e => e.ok ? e.json() : {})).then((e => (e.result_set && (e.result_set = e.result_set[0] || []),
                    e)))
                }
                ,
                t._sendMetrics = function(e) {
                    try {
                        this.$httpClient.fetch(`/webapi/logging/wbbasket/metrics?status=${e}`, {
                            method: "POST"
                        })
                    } catch (e) {}
                }
                ,
                t._backupBasketAsync = function() {
                    if (this.storage.ts <= 0)
                        return;
                    const e = this.localBasket.getItems().map((e => {
                        let t = yt.fromLocalBasket(e);
                        return delete t.op_type,
                        t
                    }
                    ))
                      , t = [{
                        path: "/cart/wb_backup",
                        file: this.$helper.base64.encode(JSON.stringify(e))
                    }];
                    this.$services.apiUserStorage.setData(t)
                }
                ,
                e
            }();
            const Ct = function(e) {
                var t, n, r, o;
                this.characteristicId = +e.characteristicId;
                const i = +e.quantity;
                this.quantity = i > 0 ? i : 1,
                this.cod1S = e.cod1S,
                this.customsFeeAmount = e.customCharges,
                this.targetUrl = null === (t = e.targetUrl) || void 0 === t ? void 0 : t.replace(/\x00/g, ""),
                this.includeInOrder = e.includeInOrder,
                this.dstOffice = e.dstOffice,
                this.storeName = e.storeName,
                this.isLargeItem = e.isLargeItem,
                this.couponSale = e.couponSale,
                this.goodsName = e.goodsName,
                this.colorName = e.colorName,
                this.sizeName = e.sizeName,
                this.brandName = e.brandName,
                this.sale = e.sale,
                this.salePrice = e.salePrice,
                this.totalSale = e.totalSale,
                this.personalDiscount = e.personalDiscount,
                this.returnCost = e.returnCost,
                this.premiumSaleAmount = e.premiumSaleAmount ? e.premiumSaleAmount : 0,
                this.price = e.price,
                this.priceWithSale = e.priceWithSale,
                this.priceWithCoupon = e.priceWithCoupon,
                this.priceWithCouponAndSpp = e.priceWithCouponAndSpp + this.premiumSaleAmount,
                this.priceWithCouponAndDiscount = e.priceWithCouponAndDiscount + this.premiumSaleAmount,
                this.paymentSaleAmount = e.paymentSaleAmount,
                this.subjectId = e.subjectId,
                this.subjectRoot = e.subjectParentId,
                this.reviewRating = e.reviewRating,
                this.commentsCount = e.commentsCount || e.feedbacks,
                this.payloadV2 = e.payloadV2,
                this.logisticsCost = e.logisticsCost,
                this.whDtype = e.whDtype,
                this.supplierId = e.supplierId,
                this.supplierName = e.supplierName,
                this.saleConditions = e.saleConditions,
                this.catalogReturnCost = e.catalogReturnCost,
                this.maxQuantity = e.maxQuantity,
                this.volume = e.volume,
                this.storeIds = (null === (n = e.stocks) || void 0 === n || null === (r = n.filter((e => e.qty > 0))) || void 0 === r ? void 0 : r.map((e => e.wh))) || [],
                this.stocks = null === (o = e.stocks) || void 0 === o ? void 0 : o.reduce(( (e, t) => (e[t.wh] = {
                    storeId: t.wh,
                    quantity: t.qty || 0,
                    time1: t.time1,
                    time2: t.time2,
                    priority: t.priority
                },
                e)), {}),
                this.timestamp = e.timestamp,
                this.shadeModel = e.shadeModel
            };
            function It(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, kt(r.key), r)
                }
            }
            function kt(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Mt = lt
              , $t = rt
              , Pt = {
                WB_BASKET_SYNC_FILE: "migration-us-wb",
                WB_BASKET_SYNC_FILEPATH: "cart/migration-us-wb"
            };
            const Tt = function() {
                function e() {}
                var t, n, r, o = e.prototype;
                return o.init = function() {
                    Object.setPrototypeOf(ft.prototype, WbSpaModel.prototype),
                    Object.setPrototypeOf(_t.prototype, WbSpaModel.prototype),
                    this.localBasket = new Mt(( () => this.$router.userIsAuth),this.$services.sessionService,this.$eventBus),
                    this.wbxBasket = new ft(Pt),
                    this.wbxBasket.clear(),
                    this.wbBasket = new _t(this.localBasket),
                    this.srv = this.wbBasket,
                    this.$eventBus.addEventListener("onUserAuth", this.sync.bind(this)),
                    this.$eventBus.addEventListener("onUserUnAuth", this.wbBasket.unAuth.bind(this.wbBasket)),
                    this.$eventBus.addEventListener("onBeforeSignOut", this.wbBasket.onBeforeSignOut.bind(this.wbBasket)),
                    $.observe(this.$router, "activeContainer", "showPreview", ( (e, t) => {
                        document.body.classList.toggle("body-gray", 2 === e.target.activeContainer && !e.target.showPreview)
                    }
                    )),
                    "hidden"in document && "visibilityState"in document && document.addEventListener("visibilitychange", (e => {
                        "visible" === document.visibilityState && this.sync("interval")
                    }
                    ))
                }
                ,
                o.sync = async function(e) {
                    if (this.$router.userIsAuth) {
                        var t;
                        let n = new AbortController;
                        return n._dt = (new Date).getTime() + 6e4,
                        null != e && e.timeout ? (this.backgroundController && this.backgroundController._dt < (new Date).getTime() ? (this.backgroundController.abort(),
                        this.backgroundController = null) : this.backgroundController && (n = this.backgroundController),
                        setTimeout(( () => n.abort()), e.timeout)) : this.backgroundController = n,
                        this._syncProcess = null !== (t = this._syncProcess) && void 0 !== t ? t : this.srv.sync(n.signal, "interval" === e),
                        this._syncProcess.catch((e => {}
                        )).finally(( () => {
                            this.$router.userIsAuth && (this._migrate(),
                            this.localBasket.enrichProductsIfNeedAsync(),
                            this.migrateFromUserStorageAsync(2e3)),
                            this._syncProcess = null,
                            this.backgroundController = null
                        }
                        ))
                    }
                }
                ,
                o.migrateFromUserStorageAsync = async function(e) {
                    if (this.wbxBasket.isWbBasketMigrated || this.$auth.isUserGuid || this.$router.userId > 146e6)
                        return;
                    const t = await this.wbxBasket.sync(e);
                    t && this.addManyItems(t.map((e => $t.fromWbxBasketProduct(e))), !0);
                    const n = await this.srv.sync();
                    t && !this.wbxBasket.isWbBasketMigrated && n && (await this.$services.apiUserStorage.setData([{
                        path: `/cart/${Pt.WB_BASKET_SYNC_FILE}`,
                        file: "W10="
                    }]),
                    this.localBasket.enrichProductsIfNeedAsync(),
                    wb.spa.logError(new Error(`[CART_SERVICE]: synced ${t.length} items`)))
                }
                ,
                o.updateMeta = function(e, t) {
                    t && this.localBasket.updateMeta(e, t) && this.srv.updateItem(e)
                }
                ,
                o.addItem = function({model: e, product: t, stores: n}) {
                    const r = $t.fromCardModel(e, t, n)
                      , o = this.localBasket.add(r);
                    return this.$router.userIsAuth && o.isSuccess && !o.isExist && this.srv.addItem(r),
                    o
                }
                ,
                o.addManyItems = function(e, t) {
                    if (null == e || !e.length)
                        return;
                    const n = e.map((e => $t.prototype.isPrototypeOf(e) ? e : $t.fromBasketInputExtended(e)))
                      , r = this.localBasket.addManyItems(n, t);
                    return this.$router.userIsAuth && r.isSuccess && !r.isExist && this.srv.addManyItems(n),
                    r
                }
                ,
                o.refresh = function({data: e, type: t}) {
                    this.localBasket.refresh(e, t),
                    this.$router.userIsAuth && t && this.srv.refresh(e, t)
                }
                ,
                o.clearItems = function(e) {
                    null != e && e.length && (this.localBasket.clearItems(e),
                    this.$router.userIsAuth && this.srv.clearItems(e))
                }
                ,
                o.getItems = function() {
                    return this.localBasket.getItems().map((e => new Ct(e)))
                }
                ,
                o.getSelectedBankCard = async function() {
                    var e, t, n;
                    let r = this.localBasket.getBankCards();
                    const o = null === (e = (await this.$services.userData.getUserDataAsync()).userInfo.phone) || void 0 === e ? void 0 : e.toString().startsWith("79");
                    null === (t = r) || void 0 === t || t.forEach((e => {
                        e.isSbp || (e.icon = e.system,
                        o || "mir" !== e.icon || (e.icon = "none",
                        e.name = e.nameNotPaySystem))
                    }
                    ));
                    const i = r.find((e => e.default));
                    return i || (r = await this.getBankCards(),
                    null === (n = r) || void 0 === n || n.forEach((e => {
                        e.isSbp || (e.icon = e.system,
                        o || "mir" !== e.icon || (e.icon = "none",
                        e.name = e.nameNotPaySystem))
                    }
                    )),
                    r.find((e => e.default)))
                }
                ,
                o.getBankCards = async function(e=6e3, t="", n=!1) {
                    var r;
                    const o = null === (r = (await this.$services.userData.getUserDataAsync()).userInfo.phone) || void 0 === r ? void 0 : r.toString().startsWith("79");
                    try {
                        var i, s;
                        t || (t = this.$user.getCurrency());
                        const r = await this.$user.getUserGrade(t)
                          , a = await this.$httpClient.fetchJSON(`${this.publicBasketApiUrl}/webapi/lk/bankcards`, {
                            method: "POST",
                            credentials: "include",
                            body: this.$helper.objectSerializer({
                                currency: t,
                                userGradeSigned: r,
                                bypassCache: n
                            }, new URLSearchParams, !0, !0)
                        }, {
                            timeout: e
                        });
                        null == a || null === (i = a.maskedCards) || void 0 === i || i.forEach((e => {
                            e.isSbp || (e.icon = e.system,
                            o || "mir" !== e.icon || (e.icon = "none",
                            e.name = e.nameNotPaySystem))
                        }
                        ));
                        const l = null !== (s = null == a ? void 0 : a.maskedCards) && void 0 !== s ? s : [];
                        return this.$eventBus.dispatchEvent(new CustomEvent("BankCardsUpdated",{
                            detail: l
                        })),
                        l
                    } catch (e) {
                        return []
                    }
                }
                ,
                o.getPaymentsForDeliveries = async function(e) {
                    var t;
                    const {payments: n} = await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`, {
                        method: "POST",
                        credentials: "include",
                        body: new URLSearchParams({
                            currency: e
                        })
                    }) || {};
                    return null == n || null === (t = n.find((e => e.isCreditCard))) || void 0 === t || t.bankCards.forEach((e => {
                        e.isSbp || (e.icon = e.system)
                    }
                    )),
                    n
                }
                ,
                o.save = function(e) {
                    this.localBasket.save(e)
                }
                ,
                o.get = function(e) {
                    return this.localBasket.get()
                }
                ,
                o.buyItNow = function(e) {
                    return e ? this.localBasket.buyItNow(e) : this.localBasket.get()
                }
                ,
                o._migrate = function() {
                    const e = this.localBasket.migrate();
                    0 !== e.length && this.srv.addManyItems(e)
                }
                ,
                t = e,
                (n = [{
                    key: "BasketItemViewModel",
                    get: function() {
                        return $t
                    }
                }, {
                    key: "BasketItemSharedModel",
                    get: function() {
                        return Ct
                    }
                }, {
                    key: "publicBasketApiUrl",
                    get: function() {
                        return "localhost" === location.host ? "//localhost:5000" : "ru" === wb.settings.currentDomain || "kz" === wb.settings.currentDomain ? "//ru-basket-api.wildberries.ru" : `//basket-api.wildberries.${wb.settings.currentDomain}`
                    }
                }, {
                    key: "deliveryWays",
                    get: function() {
                        var e, t;
                        let n = [{
                            id: 2,
                            code: "self",
                            name: "Пункт выдачи",
                            calendars: []
                        }, {
                            id: 1,
                            code: "courier",
                            name: "Курьером",
                            calendars: []
                        }];
                        return !1 === (null === (e = wb.global.settings) || void 0 === e || null === (t = e.switches) || void 0 === t ? void 0 : t.enableCourierDelivery) && (n = n.filter((e => "courier" !== e.code))),
                        n
                    }
                }, {
                    key: "localCount",
                    get: function() {
                        return this.localBasket.count
                    }
                }, {
                    key: "currentDeliveryType",
                    get: function() {
                        return this.localBasket.getDeliveryPoint()
                    }
                }]) && It(t.prototype, n),
                r && It(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            var Dt, At = n(39332);
            const Et = "by" === (null === (Dt = wb.settings) || void 0 === Dt ? void 0 : Dt.currentLocale) ? "Склад поставщика" : "Склад продавца"
              , Ot = {
                0: Et,
                507: "Коледино WB",
                686: "Новосибирск WB",
                1193: "Хабаровск WB",
                1733: "Екатеринбург WB",
                2737: "Уткина Заводь WB",
                117442: "Калуга WB",
                117501: "Подольск WB",
                117866: "Тамбов WB",
                117986: "Казань WB",
                120762: "Электросталь WB",
                121709: "Электросталь WB",
                130744: "Краснодар WB",
                159402: "Шушары WB",
                161812: "Санкт-Петербург WB",
                172430: "Барнаул WB",
                204615: "Томск WB",
                204939: "Астана WB",
                205104: "Ульяновск WB",
                205205: "Киров WB",
                205228: "Белая дача WB",
                206236: "Белые Столбы WB",
                206348: "Алексин WB",
                206708: "Новокузнецк WB",
                206844: "Калининград WB",
                206968: "Новосёлки WB",
                208277: "Невинномысск WB",
                208941: "Домодедово WB",
                209513: "Домодедово WB",
                210001: "Новосёлки-2 WB",
                210515: "Вёшки WB",
                208768: Et + " Абакан",
                209649: Et + " Алексин",
                208769: Et + " Алматы",
                212038: Et + " Алматы-2",
                209902: Et + " Артём",
                214110: Et + " Архангельск",
                122495: Et + " Астана",
                204492: Et + " Астрахань",
                204493: Et + " Барнаул",
                206239: Et + " Белая Дача (Москва)",
                213892: Et + " Белгород",
                214112: Et + " Белогорск",
                209112: Et + " Белые Столбы",
                208814: Et + " Бишкек",
                204494: Et + " Брянск",
                204495: Et + " Владикавказ",
                117392: Et + " Владимир",
                152588: Et + " Волгоград",
                204496: Et + " Вологда",
                211895: Et + " Воронеж",
                209111: Et + " Гольяново (Москва)",
                208771: Et + " Гомель (Беларусь)",
                210967: Et + " Домодедово",
                208815: Et + " Екатеринбург",
                211790: Et + " Екатеринбург-2",
                208816: Et + " Ереван",
                208772: Et + " Иваново",
                172073: Et + " Ижевск",
                131643: Et + " Иркутск",
                208817: Et + " Казань",
                208761: Et + " Калининград",
                144046: Et + " Калуга",
                208773: Et + " Киров",
                119261: Et + " Коледино",
                209109: Et + " Комсомольский (Москва)",
                208818: Et + " Краснодар",
                118365: Et + " Красноярск",
                208774: Et + " Крыловская (Краснодар)",
                172075: Et + " Курск",
                209108: Et + " Курьяновская (Москва)",
                208776: Et + " Липецк",
                168826: Et + " Лобня (Москва)",
                121700: Et + " Минск",
                211672: Et + " Минск-2",
                212032: Et + " Вешки",
                211730: Et + " Внуково",
                117673: Et + " Москва",
                122259: Et + " Москва",
                208777: Et + " Мурманск",
                208778: Et + " Набережные Челны",
                209107: Et + " Нахабино (Москва)",
                209601: Et + " Невинномысск",
                118535: Et + " Нижний Новгород",
                213651: Et + " Нижний Тагил",
                208789: Et + " Новокузнецк",
                117419: Et + " Новосибирск",
                209591: Et + " Омск",
                208780: Et + " Оренбург",
                157848: Et + " Пенза",
                209592: Et + " Пермь",
                208781: Et + " Печатники",
                214111: Et + " Псков",
                208782: Et + " Пушкино (Москва)",
                204497: Et + " Пятигорск",
                118019: Et + " Ростов-на-Дону",
                152594: Et + " Рязань",
                146666: Et + " Самара",
                132043: Et + " Санкт-Петербург",
                117414: Et + " Санкт-Петербург (Уткина Заводь)",
                208819: Et + " Санкт-Петербург (Шушары)",
                158929: Et + " Саратов",
                204498: Et + " Серов",
                144154: Et + " Симферополь",
                208783: Et + " Смоленск",
                204212: Et + " Солнцево",
                158448: Et + " Ставрополь",
                208784: Et + " Сургут",
                115651: Et + " Тамбов",
                152610: Et + " Тверь",
                208785: Et + " Темрюк (Краснодарский край)",
                208786: Et + " Томск",
                146725: Et + " Тюмень",
                209950: Et + " Ульяновск",
                152700: Et + " Уфа",
                208820: Et + " Хабаровск",
                210815: Et + " Хоргос",
                204499: Et + " Чебоксары",
                152611: Et + " Челябинск",
                209113: Et + " Черная грязь (Москва)",
                209106: Et + " Чертановский (Москва)",
                208787: Et + " Чита",
                209510: Et + " Электросталь",
                209110: Et + " Южные ворота (Москва)",
                152612: Et + " Ярославль"
            }
              , Bt = ["ru", "by", "kg", "kz", "am", "uz"];
            const xt = function() {
                function e() {}
                var t = e.prototype;
                return t.isMp = function(e) {
                    return this._checkStoreFlag(e, 2)
                }
                ,
                t.isCargoStore = function(e) {
                    return this._checkStoreFlag(e, 4)
                }
                ,
                t.isDbs = function(e) {
                    return this._checkStoreFlag(e, 8)
                }
                ,
                t.isForeign = function(e) {
                    return this._checkStoreFlag(e, 16)
                }
                ,
                t.isWbGo = function(e) {
                    return this._checkStoreFlag(e, 32)
                }
                ,
                t.isExpress = function(e) {
                    return this._checkStoreFlag(e, 64)
                }
                ,
                t.needVerification = function(e, t) {
                    return this._checkStoreFlag(e, 1 << this._localeBit(t), "import")
                }
                ,
                t._checkStoreFlag = function(e, t, n="type") {
                    var r;
                    return ((null === (r = this[e]) || void 0 === r ? void 0 : r[n]) & t) === t
                }
                ,
                t._localeBit = function(e) {
                    const t = Bt.indexOf(null == e ? void 0 : e.toLowerCase());
                    return Math.max(t, 0)
                }
                ,
                e
            }();
            function jt(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Lt(r.key), r)
                }
            }
            function Lt(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Nt = "wb__cargo_data_dt"
              , Ut = 9e5
              , Ft = "cargo-stores"
              , Rt = "stores-data";
            const Wt = function() {
                function e() {
                    this._storeNames = Ot,
                    this._stores = new xt,
                    this._getCargoStoresAsync().then(( ({storesData: e}) => {
                        if (this._cargoStores = [],
                        e) {
                            for (let {id: t, name: n, type: r, intervals: o, workingHours: i} of e)
                                this._storeNames[t] = n,
                                !0 & r && this._cargoStores.push(t),
                                this._stores[t] = {
                                    name: n,
                                    type: r,
                                    intervals: o,
                                    workingHours: i
                                };
                            this._storesLoaded = !0
                        }
                        this._startJobSync()
                    }
                    ))
                }
                var t, n, r, o = e.prototype;
                return o._openDb = function() {
                    return this.$storageHelper.openDb("all-stores", {
                        onupgradeneeded: e => {
                            e.objectStoreNames.contains(Ft) || e.createObjectStore(Ft, {
                                keyPath: "id"
                            }),
                            e.objectStoreNames.contains(Rt) || e.createObjectStore(Rt, {
                                keyPath: "id"
                            })
                        }
                        ,
                        version: 2
                    })
                }
                ,
                o._setStoresAsync = function(e, t) {
                    this._openDb().then((n => {
                        if (e instanceof Array) {
                            let t = n.transaction([Ft], "readwrite").objectStore(Ft);
                            t.clear();
                            for (let n = 0; n < e.length; n++)
                                t.add(e[n])
                        }
                        if (t instanceof Array) {
                            const e = n.transaction([Rt], "readwrite").objectStore(Rt);
                            for (const n of t)
                                e.put(n)
                        }
                    }
                    ))
                }
                ,
                o._getCargoStoresAsync = async function() {
                    const e = await this._openDb()
                      , [t,n] = await Promise.all([this.$storageHelper.getAll(e, Ft), this.$storageHelper.getAll(e, Rt)]);
                    return {
                        cargoStores: t,
                        storesData: n
                    }
                }
                ,
                o._startJobSync = function() {
                    (!this._cargoStores || !this._storesLoaded || +localStorage.getItem("wb__cargo_stores_dt") < Date.now() || +localStorage.getItem(Nt) < Date.now()) && this._syncStores(),
                    setInterval(this._syncStores.bind(this), Ut)
                }
                ,
                o._syncStores = async function() {
                    const [e,t] = await Promise.all([this.$httpClient.fetchStaticDataV2("cargo-delivery-stores-v2.json"), this.$httpClient.fetchStaticDataV2("stores-data.json")]);
                    if (t instanceof Array) {
                        if (t instanceof Array) {
                            this._storesLoaded = !0,
                            this._cargoStores = [];
                            for (let {id: e, name: n, type: r, intervals: o=null, workingHours: i=null, import: s} of t)
                                this._storeNames[e] = n,
                                !0 & r && this._cargoStores.push(e),
                                this._stores[e] = {
                                    name: n,
                                    type: r,
                                    intervals: o,
                                    workingHours: i,
                                    import: s
                                };
                            localStorage.setItem(Nt, Date.now() + Ut)
                        }
                        this._setStoresAsync(e, t)
                    }
                }
                ,
                t = e,
                (n = [{
                    key: "cargoStores",
                    get: function() {
                        return this._cargoStores || []
                    }
                }, {
                    key: "names",
                    get: function() {
                        return this._storeNames
                    }
                }, {
                    key: "storesMap",
                    get: function() {
                        return this._stores
                    }
                }]) && jt(t.prototype, n),
                r && jt(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }()
              , Ht = [5352, 2255]
              , zt = [1, 2, 3, 4, 6, 200, 204, 1327, 1465, 1513, 1616, 2273, 3497, 4607, 4735]
              , qt = [213, 1542, 2605, 2693, 4733, 4737, 212, 380, 733, 1675, 2687, 4738, 4827, 4932, 214, 2616, 218, 757, 53, 61, 63, 305, 946, 1161, 1422, 1439, 1475, 1487, 2318, 2379, 2747, 2920, 3489, 3490, 3579, 3766, 4200, 4256, 4537, 5154, 5220, 5222, 5273, 5094, 5096, 1339, 836, 5131, 1542, 5095, 4021, 4022, 1338, 2564]
              , Vt = [786, 1107]
              , Gt = [1524, 1525]
              , Jt = [1, 2, 4, 200, 204, 239, 1513, 5038];
            let Qt = [];
            const Kt = function() {
                function e() {}
                var t = e.prototype;
                return t.loadProductCardAsync = async function(e, t, n=!1) {
                    try {
                        var r;
                        return (null === (r = this._stashedCatalogProduct) || void 0 === r ? void 0 : r.nmId) !== e || n || this._stashedCatalogProduct.currency !== WbSpaModel.prototype.$user.getCurrency() ? this.loadDynamicProductAsync(e, t, await this.loadStaticProductAsync(e)) : this.fromCatalogProduct(this._stashedCatalogProduct, t)
                    } catch (e) {
                        return null
                    }
                }
                ,
                t.loadStaticProductAsync = async function(e) {
                    try {
                        const [t] = await Promise.all([this.$httpClient.fetchBasicJSON(wb.helpers.url.urlProductStatic(e), {}, {
                            timeout: 2e3
                        }), wb.xnm.waitNoReturnSubjectsInitialized()]);
                        return t
                    } catch (e) {
                        return null
                    }
                }
                ,
                t.loadDynamicProductAsync = async function(e, t, n, r) {
                    var o, i, s, a;
                    if (!e || isNaN(parseInt(e)))
                        throw new TypeError("[ProductCardService] nmId must be an integer at loadDynamicProductAsync");
                    t && isNaN(parseInt(t)) && (console.warn("[ProductCardService] chrtId is not an integer at loadDynamicProductAsync"),
                    t = null),
                    n = null !== (o = n) && void 0 !== o ? o : await this.loadStaticProductAsync(e);
                    const l = new Map;
                    let c = null !== (i = null === (s = n) || void 0 === s ? void 0 : s.colors) && void 0 !== i ? i : [e];
                    n && (n.colors = this._colorLimiter(e, c),
                    c = n.colors,
                    l.set(n.nm_id, n));
                    const u = this.$router.queryParams.get("helpKursk") ? -2307160 : null
                      , d = 1 === c.length && r ? {
                        [e]: r
                    } : await wb.xnm.getXnmProducts(c, !1, u).catch((e => null));
                    let p = null == d ? void 0 : d[e];
                    if (!p)
                        return null;
                    const h = await this._getMultiInfo(p, n)
                      , m = !!h
                      , f = !m && this._canCheckForMulti(n)
                      , y = {}
                      , g = this._fillBaseProductCardFromX(n, p, m || f);
                    g.metacard = h,
                    m && (c = [e]),
                    c.forEach((t => {
                        const n = l.get(t)
                          , r = null == d ? void 0 : d[t];
                        if (r && r.pics > 0) {
                            const o = this._fillNomenclature(t, n, r);
                            o.groupedAddedOptions = g.groupedAddedOptions,
                            o.miniAddedOptions = g.miniAddedOptions,
                            o.verifiedCertificate = this._setVerifiedCertificate(n),
                            e === t && (o.isHelpKursk = new URL(window.location.href).searchParams.get("helpKursk") || window.location.pathname.includes("pomozhem-kursku-vmeste")),
                            g.nomenclatures.push(o)
                        }
                    }
                    )),
                    g.nomenclatures = g.nomenclatures.sort(( (t, n) => t.nmId === e ? -1 : n.nmId === e ? 1 : n.sort - t.sort));
                    const v = g.nomenclatures.find((t => t.nmId === e));
                    if (null == v || null == v.sizes)
                        return null;
                    const b = Object.assign({}, v);
                    return this.fillSelectedNomenclature(b, t),
                    this._addDigitalLinks(b, n),
                    Object.assign(y, {
                        product: g,
                        selectedNomenclature: b
                    }),
                    y.metaTags = this._fillProductCardMetaTags(g),
                    y.promoUrl = this._fillPromoUrl(e, g, n, b.brandId),
                    y.openGraphDescription = this._fillOpenGraphDescription(e, v, y.metaTags),
                    y.targetInfo = null !== (a = y.targetInfo) && void 0 !== a ? a : {},
                    y.selectedNomenclature.goodsName || (y.product.goodsName = "Название не указано"),
                    this._checkGroupedAddedOptionsExist(y.selectedNomenclature.groupedAddedOptions) || (y.selectedNomenclature.groupedAddedOptions = []),
                    y.product.canCheckForMulti = f,
                    y
                }
                ,
                t.getMultiInfo = async function(e, t) {
                    return this._getMultiInfo(e, t)
                }
                ,
                t._getMultiInfo = async function(e, t) {
                    var n;
                    if (null === (n = wb.global.settings.switches) || void 0 === n || !n.multicardV2Enable)
                        return null;
                    const r = e.rcId;
                    if (!r)
                        return null;
                    const o = e.id || e.nmId
                      , [i] = await Promise.all([(async () => null != t ? t : this.loadStaticProductAsync(o))(), this.$moduleLoader.loadServiceAsync("metacardService")])
                      , s = this.$services.metacardService;
                    if (null == i || !i.rc || 2 !== i.rc.type || i.rc.id !== r)
                        return null;
                    if (e.metacard && e.metacard.id == r)
                        return e.metacard = s.getMetacardFromExisting(e.metacard, o, i),
                        Promise.resolve(e.metacard);
                    e.metacard = null;
                    return await s.getMetacardData(r, o, i)
                }
                ,
                t.loadSizeTable = async function(e) {
                    const t = await this.loadStaticProductAsync(e);
                    return this._fillSizeTable(t)
                }
                ,
                t.fromCatalogProduct = function(e, t) {
                    var n, r, o, i;
                    const s = {}
                      , a = {
                        imtId: e.imtId,
                        nomenclatures: [],
                        supplierDeliveryInfo: {
                            time1: e.time1 || null,
                            time2: e.time2 || null,
                            storeId: e.fastestStore || null
                        },
                        rcId: e.rcId
                    }
                      , l = e.pics
                      , c = 20624 === e.brandId || 30624 === e.siteBrandId
                      , u = {
                        adult: e.adult,
                        brandId: e.brandCod,
                        brandName: e.brand,
                        canFit: this._setCanFit(e.subjectId, e.subjectParentId),
                        colorName: -1 !== Vt.indexOf(e.subjectId) ? null : e.color,
                        consist: "",
                        deliveryHours: e.deliveryHours,
                        description: null,
                        markdownDescription: null,
                        dest: e.dest,
                        fastestStore: e.wh || e.fastestStore,
                        feedbacks: e.feedbacks,
                        gluedOptions: e.gluedOptions,
                        goodsName: e.name,
                        isActivationKey: -1 !== Ht.indexOf(e.subjectId),
                        isDataLoaded: !1,
                        isDetailsLoaded: !1,
                        isDigital: e.isDigitalGood,
                        isWbInstCompliant: e.isWbInstCompliant,
                        isPreorder: 5772 === e.brandCod && wb.settings.preOrderList.includes(e.nmId),
                        isPrepaid: e.isPrepaid,
                        isVideo: 5105 === e.subjectId,
                        hasVideo: !!(16 & e.viewFlags),
                        hasRich: !1,
                        hasImageTags: !1,
                        kindId: null !== (n = e.kindId) && void 0 !== n ? n : 0,
                        nmId: e.nmId,
                        nonRefundable: e.isUnrefusable || wb.xnm.setNoRefund(e.subjectId),
                        panelPromoId: e.panelPromoId,
                        picsCount: l,
                        promoText: e.promoTextCard,
                        promotions: null,
                        saleConditions: e.saleConditions,
                        subjectId: e.subjectId,
                        subjectName: "",
                        subjectParent: "",
                        subjectParentId: e.subjectParentId,
                        sizes: e.sizes.map((t => {
                            var n, r, o;
                            const i = null !== (n = t.catalogPrice) && void 0 !== n ? n : e.catalogPrice;
                            return {
                                characteristicId: t.ch,
                                sizeName: t.nm,
                                sizeNameRus: t.rusNm,
                                quantity: t.unavailable || e.soldOut ? 0 : 1,
                                stocks: t.stocks,
                                storeIds: null === (r = t.stocks) || void 0 === r ? void 0 : r.map((e => e.wh)),
                                isSoldOut: !!t.unavailable || e.soldOut,
                                deliveryHours: e.deliveryHours,
                                payloadV2: t.payloadV2,
                                saleConditions: t.saleConditions,
                                whDtype: null !== (o = t.dtype) && void 0 !== o ? o : t.whDtype,
                                price: i ? {
                                    price: i.basic ? i.basic / 100 : 0,
                                    salePrice: i.priceToShow ? i.priceToShow / 100 : 0,
                                    sale: i.sale,
                                    logisticsCost: i.logistics,
                                    returnCost: i.return
                                } : null
                            }
                        }
                        )),
                        sizeTable: null,
                        showMinDetails: !Jt.includes(e.subjectParentId),
                        reviewRating: e.reviewRating,
                        star: e.star,
                        urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${e.nmId}&excludeNms=true`,
                        supplier: $.views.helpers.supplierFineName("Wildberries" === e.supplier ? "WILDBERRIES" : $.views.converters.trimWord(e.supplier, $.views.helpers.suppliersOrgForms), e.brandId),
                        supplierId: e.supplierId,
                        supplierRating: e.supplierRating,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !c && !!(8 & e.viewFlags),
                        miniAddedOptions: [],
                        groupedAddedOptions: [],
                        showThermometer: e.showThermometer,
                        quantity: e.totalQuantity,
                        whDtype: e.whDtype,
                        isHelpKursk: new URL(window.location.href).searchParams.get("helpKursk") || window.location.pathname.includes("pomozhem-kursku-vmeste")
                    };
                    u.allSizesSoldOut = null === (r = u.sizes) || void 0 === r ? void 0 : r.every((e => e.isSoldOut));
                    const d = !u.allSizesSoldOut && (null === (o = e.catalogPrice) || void 0 === o ? void 0 : o.total) > 0;
                    return u.price = {
                        price: d ? e.catalogPrice.basic / 100 : 0,
                        salePrice: d ? e.catalogPrice.priceToShow / 100 : 0,
                        sale: d ? e.catalogPrice.sale : 0,
                        priceDiff: !!d && e.priceDiff,
                        logisticsCost: e.catalogPrice.logistics,
                        returnCost: e.catalogPrice.return,
                        soldOut: e.allSizesSoldOut
                    },
                    u.sort = 0,
                    u.sizes.length > 0 && (1 === u.sizes.length ? u.sort = u.sizes[0].quantity > 0 ? 1 : 0 : u.sizes.reduce(( (e, t) => u.sort += t.quantity > 0), {})),
                    a.nomenclatures.push(u),
                    this.fillSelectedNomenclature(u, t),
                    Object.assign(s, {
                        product: a,
                        selectedNomenclature: u
                    }),
                    s.product.canCheckForMulti = !0,
                    s.targetInfo = null !== (i = s.targetInfo) && void 0 !== i ? i : {},
                    s.metaTags = this._fillProductCardMetaTags(a),
                    s.openGraphDescription = this._fillOpenGraphDescription(u.nmId, a, s.metaTags),
                    s
                }
                ,
                t.stashCatalogProduct = function(e={}) {
                    this._stashedCatalogProduct = e
                }
                ,
                t._checkGroupedAddedOptionsExist = function(e) {
                    return (null == e ? void 0 : e.length) > 0 && e.some((e => {
                        var t;
                        return (null === (t = e.addedOptions) || void 0 === t ? void 0 : t.length) > 0
                    }
                    ))
                }
                ,
                t.fillSelectedNomenclature = function(e, t) {
                    var n, r, o;
                    wb.xnm.fillFeedbacksPayment([e]),
                    wb.xnm.isRedPrice(e.panelPromoId) && (e.showRedPrice = !0);
                    const i = e.sizes.length <= 2 && e.sizes.every((e => "0" === e.sizeName));
                    i || 1 === e.sizes.length ? e.selectedSize = e.sizes.find((e => !e.isSoldOut)) || e.sizes[0] : null != t && (e.selectedSize = e.sizes.find((e => e.characteristicId === t))),
                    this._setSelectedPrice(e),
                    this._setButtons(e),
                    e.showSize = !i,
                    e.deliveryInfoEnable = !e.isDigital && !(null !== (n = e.selectedSize) && void 0 !== n && n.isSoldOut || e.allSizesSoldOut),
                    e.isVehicle = 8242 == e.subjectParentId,
                    e.saleConditions = null === (r = e.sizes) || void 0 === r || null === (o = r.find((e => {
                        var t;
                        return null === (t = e.stocks) || void 0 === t ? void 0 : t.length
                    }
                    ))) || void 0 === o ? void 0 : o.saleConditions,
                    e.colorGroupBaseType && e.selectedSize && (e.isShowChooseColorBtn = !0)
                }
                ,
                t.loadNomenclature = async function(e) {
                    let t = null;
                    if (!e.isDataLoaded)
                        try {
                            t = await this.loadStaticProductAsync(e.nmId)
                        } catch (e) {
                            t = null
                        }
                    if (t) {
                        var n, r, o, i, s, a, l, c, u, d, p, h, m, f, y, g, v, b, w, S, _, C, I;
                        if (e.goodsName = null !== (n = null === (r = t) || void 0 === r ? void 0 : r.imt_name) && void 0 !== n ? n : e.goodsName,
                        e.brandName = null !== (o = null === (i = t) || void 0 === i || null === (s = i.selling) || void 0 === s ? void 0 : s.brand_name) && void 0 !== o ? o : e.brandName,
                        e.colorName = t.nm_colors_names,
                        e.hasVideo = null === (a = t.media) || void 0 === a ? void 0 : a.has_video,
                        e.hasRich = null !== (l = null === (c = t) || void 0 === c ? void 0 : c.has_rich) && void 0 !== l && l,
                        e.hasImageTags = null !== (u = (null === (d = t) || void 0 === d ? void 0 : d.enable_tags) && (null === (p = t) || void 0 === p ? void 0 : p.has_photo_tags)) && void 0 !== u && u,
                        e.consist = null !== (h = null !== (m = null === (f = t) || void 0 === f || null === (y = f.compositions) || void 0 === y ? void 0 : y.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join(", ")) && void 0 !== m ? m : null === (g = t) || void 0 === g || null === (v = g.options) || void 0 === v || null === (b = v.find((e => "Состав" === e.name))) || void 0 === b ? void 0 : b.value) && void 0 !== h ? h : "",
                        t.sizes_table && t.sizes_table.details_props) {
                            e.sizeTable = [];
                            const n = t.sizes_table.details_props.indexOf("RU")
                              , r = {
                                row: []
                            };
                            n >= 0 && (r.row[0] = this.$localziation.russianSize),
                            r.row[1] = this.$localziation.manufactureSize;
                            let o = 2;
                            for (let e = 2; e < t.sizes_table.details_props.length; e++) {
                                const n = t.sizes_table.details_props[e];
                                r.row[o++] = "" !== n ? n : "-"
                            }
                            e.sizeTable.push(r),
                            t.sizes_table.values.forEach((t => {
                                var r;
                                const o = {
                                    chrtId: null !== (r = t.chrt_id) && void 0 !== r ? r : 0,
                                    row: []
                                };
                                if (n >= 0 && (o.row[0] = t.details[n]),
                                o.row[1] = t.tech_size,
                                t.details.length > 2)
                                    for (let e = 2; e < t.details.length; e++)
                                        o.row[e] = "" !== t.details[e] ? t.details[e] : "-";
                                e.sizeTable.push(o)
                            }
                            ));
                            for (const n of e.sizes) {
                                const e = t.sizes_table.values.find((e => e.chrt_id === n.characteristicId));
                                if (e && t.sizes_table.details_props.length === e.details.length)
                                    for (let r = 2; r < t.sizes_table.details_props.length; r++) {
                                        const o = {
                                            name: t.sizes_table.details_props[r],
                                            value: "" !== e.details[r] ? e.details[r] : "-"
                                        };
                                        n.dimensions.push(o)
                                    }
                            }
                        }
                        const k = this._fillGroupedAddedOptions(t);
                        e.groupedAddedOptions = k,
                        e.miniAddedOptions = this._fillMiniGroupedAddedOptions(k),
                        e.gluedOptions = wb.xnm.convertOptionsToGluedOptions(null === (w = t) || void 0 === w ? void 0 : w.options),
                        e.subjectName = null !== (S = null === (_ = t) || void 0 === _ ? void 0 : _.subj_name) && void 0 !== S ? S : "",
                        e.subjectParent = null !== (C = null === (I = t) || void 0 === I ? void 0 : I.subj_root_name) && void 0 !== C ? C : "",
                        e.verifiedCertificate = this._setVerifiedCertificate(t),
                        this._addDigitalLinks(e, t),
                        e.description = t.description,
                        e.markdownDescription = t.markdown_description,
                        e.isDataLoaded = !0,
                        this._fillIsChooseColor(t, e)
                    }
                    const k = Object.assign({}, e);
                    return this.fillSelectedNomenclature(k),
                    k
                }
                ,
                t.loadPriceHistory = async function(e) {
                    return await this.$httpClient.fetchBasicJSON(wb.helpers.url.urlPriceHistoryStatic(e), {}, {
                        nullOnError: !0,
                        logOff: !0
                    })
                }
                ,
                t.loadProductVideosAsync = async function(e) {
                    const t = Qt.find((t => t.nmId == e));
                    if (null != t)
                        return await t.payloadTask;
                    try {
                        const t = this.$httpClient.fetchBasicJSON(`https://video-reviews.wildberries.ru/api/v1/video-by-nm?nm=${e}`);
                        Qt.push({
                            nmId: e,
                            payloadTask: t
                        }),
                        Qt = Qt.slice(-25);
                        return await t
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                }
                ,
                t.setChooseColorInBasket = function(e, t) {
                    for (let i = 0; i < e.length; i++) {
                        var n, r, o;
                        if (null !== (n = e[i].meta) && void 0 !== n && null !== (r = n.shade) && void 0 !== r && r.colorHex && t.sizes) {
                            if (e[i].characteristicId === (null === (o = t.sizes[0]) || void 0 === o ? void 0 : o.characteristicId)) {
                                $.observable(t).setProperty({
                                    chooseColorInBasket: !0
                                });
                                break
                            }
                        } else
                            $.observable(t).setProperty({
                                chooseColorInBasket: !1
                            })
                    }
                }
                ,
                t._addDigitalLinks = function(e, t) {
                    var n, r;
                    e.digitalLinks = {
                        audio: null == t || null === (n = t.media) || void 0 === n ? void 0 : n.audiobook,
                        electronic: null == t || null === (r = t.media) || void 0 === r ? void 0 : r.electronic_book
                    }
                }
                ,
                t._colorLimiter = function(e, t) {
                    if (null === t || t.length < 60)
                        return t;
                    if (t.indexOf(e) < 60)
                        return t.slice(0, 60);
                    const n = [e];
                    return n.push(...t.slice(0, 59)),
                    n
                }
                ,
                t._fillBaseProductCardFromX = function(e, t, n) {
                    var r, o, i, s;
                    const a = this._fillGroupedAddedOptions(e);
                    return {
                        imtId: null !== (r = null !== (o = null == e ? void 0 : e.imt_id) && void 0 !== o ? o : null == t ? void 0 : t.root) && void 0 !== r ? r : 0,
                        groupedAddedOptions: a,
                        miniAddedOptions: this._fillMiniGroupedAddedOptions(a, n),
                        nomenclatures: [],
                        promoTemplateUfu: null == e || null === (i = e.media) || void 0 === i || null === (s = i.promo_url) || void 0 === s ? void 0 : s.replace(/^\/+|\/+$/g, ""),
                        supplierDeliveryInfo: {
                            time1: null == t ? void 0 : t.time1,
                            time2: null == t ? void 0 : t.time2,
                            storeId: null == t ? void 0 : t.wh
                        }
                    }
                }
                ,
                t._fillGroupedAddedOptions = function(e) {
                    var t, n, r, o, i, s;
                    const a = null !== (t = null == e || null === (n = e.grouped_options) || void 0 === n ? void 0 : n.map((e => {
                        var t;
                        return {
                            categoryName: e.group_name,
                            addedOptions: null === (t = e.options) || void 0 === t ? void 0 : t.map((e => ({
                                property: e.name,
                                subProperty: e.value
                            })))
                        }
                    }
                    ))) && void 0 !== t ? t : [];
                    let l = null == a ? void 0 : a.find((e => "Дополнительная информация" === (null == e ? void 0 : e.categoryName)));
                    var c;
                    (null != l && null != l.addedOptions || (l = {
                        categoryName: "Дополнительная информация",
                        addedOptions: []
                    },
                    a.push(l)),
                    null != e && null !== (r = e.options) && void 0 !== r && r.find((e => "Состав" === e.name)) || null == (null == e ? void 0 : e.compositions)) || l.addedOptions.unshift({
                        property: "Состав",
                        subProperty: null == e || null === (c = e.compositions) || void 0 === c ? void 0 : c.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join("; ")
                    });
                    return null != e && null !== (o = e.options) && void 0 !== o && o.find((e => "Комплектация" === e.name)) || null == (null == e ? void 0 : e.contents) || l.addedOptions.push({
                        property: "Комплектация",
                        subProperty: e.contents
                    }),
                    null != e && null !== (i = e.options) && void 0 !== i && i.find((e => "Пол" === e.name)) || null == (null == e ? void 0 : e.kinds) || l.addedOptions.push({
                        property: "Пол",
                        subProperty: e.kinds.join(", ")
                    }),
                    null != e && null !== (s = e.options) && void 0 !== s && s.find((e => "Сезон" === e.name)) || null == e || !e.season || l.addedOptions.push({
                        property: "Сезон",
                        subProperty: e.season
                    }),
                    a.filter((e => e.addedOptions.length > 0))
                }
                ,
                t._fillNomenclature = function(e, t, n) {
                    var r, o, i, s, a, l, c, u, d, p, h, m, f, y, g, v, b, w, S, _, C, I, k, M, P, T, D, A, E, O, B, x, j, L, N;
                    const U = null !== (r = null !== (o = null == t || null === (i = t.data) || void 0 === i ? void 0 : i.subject_id) && void 0 !== o ? o : null == n ? void 0 : n.subjectId) && void 0 !== r ? r : 0
                      , F = null !== (s = null !== (a = null == t || null === (l = t.data) || void 0 === l ? void 0 : l.subject_root_id) && void 0 !== a ? a : null == n ? void 0 : n.subjectParentId) && void 0 !== s ? s : 0
                      , R = null !== (c = null == t ? void 0 : t.subj_name) && void 0 !== c ? c : ""
                      , W = null !== (u = null == t ? void 0 : t.subj_root_name) && void 0 !== u ? u : ""
                      , H = null !== (d = null !== (p = null == n ? void 0 : n.pics) && void 0 !== p ? p : null == t || null === (h = t.media) || void 0 === h ? void 0 : h.photo_count) && void 0 !== d ? d : 0
                      , z = 20624 === (null == n ? void 0 : n.brandId) || 30624 === (null == n ? void 0 : n.siteBrandId)
                      , q = this.$services.storeService.storesMap[null == n ? void 0 : n.wh] || null;
                    JSON.parse(localStorage.getItem("isWentAuthPage"));
                    setTimeout(( () => {
                        localStorage.putObject("isWentAuthPage", {
                            isWentAuthPage: !1
                        })
                    }
                    ), 2e3);
                    const V = {
                        adult: null !== (m = null == n ? void 0 : n.isAdult) && void 0 !== m && m,
                        brandId: null !== (f = null == n ? void 0 : n.brandId) && void 0 !== f ? f : 0,
                        brandName: null !== (y = null == t || null === (g = t.selling) || void 0 === g ? void 0 : g.brand_name) && void 0 !== y ? y : null == n ? void 0 : n.brand,
                        canFit: this._setCanFit(U, F),
                        colorName: -1 !== Vt.indexOf(null == n ? void 0 : n.subjectId) ? null : null !== (v = null == t ? void 0 : t.nm_colors_names) && void 0 !== v ? v : null == n || null === (b = n.colors) || void 0 === b ? void 0 : b.map((e => e.name)).join(", "),
                        consist: null !== (w = null !== (S = null == t || null === (_ = t.compositions) || void 0 === _ ? void 0 : _.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join(", ")) && void 0 !== S ? S : null == t || null === (C = t.options) || void 0 === C || null === (I = C.find((e => "Состав" === e.name))) || void 0 === I ? void 0 : I.value) && void 0 !== w ? w : "",
                        deliveryHours: ((null == n ? void 0 : n.time1) || 0) + ((null == n ? void 0 : n.time2) || 0),
                        intervals: null == q ? void 0 : q.intervals,
                        workingHours: null == q ? void 0 : q.workingHours,
                        description: null == t ? void 0 : t.description,
                        markdownDescription: null == t ? void 0 : t.markdown_description,
                        dest: null == n ? void 0 : n.dest,
                        fastestStore: null == n ? void 0 : n.wh,
                        feedbacks: null !== (k = null == n ? void 0 : n.feedbacks) && void 0 !== k ? k : 0,
                        gluedOptions: wb.xnm.convertOptionsToGluedOptions(null == t ? void 0 : t.options),
                        goodsName: null !== (M = null == t ? void 0 : t.imt_name) && void 0 !== M ? M : null == n ? void 0 : n.name,
                        isActivationKey: -1 !== Ht.indexOf(U),
                        isDataLoaded: null != t,
                        isDetailsLoaded: !0,
                        isDigital: null !== (P = null == n ? void 0 : n.isDigital) && void 0 !== P && P,
                        isWbInstCompliant: null !== (T = null == n ? void 0 : n.isWbInstCompliant) && void 0 !== T && T,
                        isPreorder: 5772 === (null == n ? void 0 : n.brandId) && wb.settings.preOrderList.includes(e),
                        isPrepaid: null == n ? void 0 : n.isPrepaid,
                        isVideo: 5105 === U,
                        hasVideo: null !== (D = null == t || null === (A = t.media) || void 0 === A ? void 0 : A.has_video) && void 0 !== D && D,
                        hasRich: null !== (E = null == t ? void 0 : t.has_rich) && void 0 !== E && E,
                        hasImageTags: null !== (O = (null == t ? void 0 : t.enable_tags) && (null == t ? void 0 : t.has_photo_tags)) && void 0 !== O && O,
                        kindId: null !== (B = null == n ? void 0 : n.kindId) && void 0 !== B ? B : 0,
                        nmId: e,
                        nonRefundable: (null == n ? void 0 : n.isUnrefusable) || wb.xnm.setNoRefund(U),
                        panelPromoId: null == n ? void 0 : n.panelPromoId,
                        picsCount: H,
                        promoText: null == n ? void 0 : n.promoTextCard,
                        promotions: null == n ? void 0 : n.promotions,
                        saleConditions: null == n ? void 0 : n.saleConditions,
                        subjectId: U,
                        subjectName: R,
                        subjectParent: W,
                        subjectParentId: F,
                        sizes: this._fillSizes(n, t),
                        sizeTable: t ? this._fillSizeTable(t) : null,
                        showMinDetails: !Jt.includes(F),
                        reviewRating: null == n ? void 0 : n.reviewRating,
                        star: null !== (x = null == n ? void 0 : n.rating) && void 0 !== x ? x : 0,
                        urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${e}&excludeNms=true`,
                        supplier: $.views.helpers.supplierFineName(null == n ? void 0 : n.supplier, null == n ? void 0 : n.brandId),
                        supplierId: null == n ? void 0 : n.supplierId,
                        supplierRating: null == n ? void 0 : n.supplierRating,
                        premiumSale: null == n ? void 0 : n.premiumSale,
                        showRedPrice: wb.xnm.isRedPrice(n.panelPromoId),
                        whDtype: null == n ? void 0 : n.dtype
                    };
                    V.allSizesSoldOut = null === (j = V.sizes) || void 0 === j ? void 0 : j.every((e => e.isSoldOut));
                    const G = !V.allSizesSoldOut && (null == n || null === (L = n.price) || void 0 === L ? void 0 : L.total) > 0;
                    return this._fillIsChooseColor(t || n, V),
                    V.price = {
                        price: G && n.price.basic ? n.price.basic / 100 : 0,
                        salePrice: G && n.price.total ? n.price.priceToShow / 100 : 0,
                        priceForBasket: G && n.price.priceForBasket ? n.price.priceForBasket / 100 : 0,
                        sale: G ? n.price.sale : 0,
                        priceDiff: !!G && n.diffPrice,
                        logisticsCost: n.price.logistics,
                        returnCost: n.price.return,
                        soldOut: V.allSizesSoldOut
                    },
                    V.sort = 0,
                    V.quantity = 0,
                    (null === (N = V.sizes) || void 0 === N ? void 0 : N.length) > 0 && (1 === V.sizes.length ? (V.quantity = V.sizes[0].quantity,
                    V.sort = V.quantity > 0 ? 1 : 0) : V.sizes.reduce(( (e, t) => {
                        V.quantity += t.quantity,
                        V.sort += t.quantity > 0
                    }
                    ), {})),
                    this._setCanShowThermometer(null == n ? void 0 : n.panelPromoId, V),
                    V.supplierDeliveryInfo = {
                        time1: null == n ? void 0 : n.time1,
                        time2: null == n ? void 0 : n.time2,
                        storeId: null == n ? void 0 : n.wh
                    },
                    n && (V.viewFlags = n.viewFlags,
                    V.shouldShowOriginalMark = !z && !!(8 & n.viewFlags)),
                    V
                }
                ,
                t._fillSizeTable = function(e) {
                    const t = [];
                    if (e.sizes_table && e.sizes_table.details_props) {
                        const n = e.sizes_table.details_props.indexOf("RU")
                          , r = e.sizes_table.details_props.indexOf("EU")
                          , o = {
                            row: []
                        };
                        let i = 0;
                        n >= 0 && (o.row[i++] = this.$localziation.russianSize),
                        o.row[i++] = this.$localziation.manufactureSize;
                        for (let t = 0; t < e.sizes_table.details_props.length; t++) {
                            if (t === n || t === r)
                                continue;
                            const s = e.sizes_table.details_props[t];
                            o.row[i++] = "" !== s ? s : "-"
                        }
                        t.push(o),
                        e.sizes_table.values.forEach((e => {
                            var o;
                            let i = 0;
                            const s = {
                                chrtId: null !== (o = e.chrt_id) && void 0 !== o ? o : 0,
                                row: []
                            };
                            n >= 0 && (s.row[i++] = e.details[n]),
                            s.row[i++] = e.tech_size;
                            const a = (-1 !== n ? 1 : 0) + (-1 !== r ? 1 : 0);
                            if (e.details.length > a)
                                for (let t = 0; t < e.details.length; t++)
                                    t !== n && t !== r && (s.row[i++] = "" !== e.details[t] ? e.details[t] : "-");
                            t.push(s)
                        }
                        ))
                    }
                    return t
                }
                ,
                t._fillIsChooseColor = function(e, t) {
                    var n, r, o, i, s;
                    const a = null == e || null === (n = e.options) || void 0 === n ? void 0 : n.findIndex((e => "база для колеровки" === e.name.toLowerCase() && e.value))
                      , l = null == e || null === (r = e.options) || void 0 === r ? void 0 : r.find((e => "продавец может заколеровать" === e.name.toLowerCase() && "да" === e.value.toLowerCase()))
                      , c = null == e || null === (o = e.options) || void 0 === o ? void 0 : o.find((e => "каталог цветов" === e.name.toLowerCase() && e.value.toLowerCase().split(/[; ]+/).includes("ncs")))
                      , u = null === (i = t.sizes[0]) || void 0 === i || null === (s = i.stocks) || void 0 === s ? void 0 : s.every((e => [1, 2, 3].includes(e.dtype)));
                    if (a > 0 && l && c && u) {
                        var d;
                        if (!t.sizes.map((e => wb.xnm.expandSaleConditions({}, e))).some((e => e.isUnrefusable && e.isPrepaid && (e.isUnreturnable || e.isVerificationReturn))))
                            return;
                        const n = null == e || null === (d = e.options[a]) || void 0 === d ? void 0 : d.value.toLowerCase()
                          , r = ["a", "1", "bw"]
                          , o = ["c", "3", "bc", "d"];
                        n && (t.colorBaseType = n.toUpperCase(),
                        r.includes(n) ? t.colorGroupBaseType = "A" : o.includes(n) && (t.colorGroupBaseType = "C"));
                        const i = this.$services.cartService.get().basketItems;
                        this.setChooseColorInBasket(i, t)
                    }
                }
                ,
                t._fillProductCardMetaTags = function(e) {
                    const t = {};
                    return e.nomenclatures.map((e => {
                        const n = `${e.goodsName} ${e.brandName} ${e.nmId}`;
                        t[e.nmId] = {
                            title: `${n} купить %FORPRICE% в интернет-магазине Wildberries`,
                            description: `${n} купить %FORPRICE% в интернет-магазине Wildberries. Бесплатная доставка и постоянные скидки!`
                        }
                    }
                    )),
                    t
                }
                ,
                t._fillPromoUrl = function(e, t, n, r) {
                    if (t.promoTemplateUfu)
                        return `promo/${t.promoTemplateUfu}`;
                    if (6012 === r || 3363 === r) {
                        var o, i;
                        if (null == n || null === (o = n.options) || void 0 === o || null === (i = o.find((e => "Подробный обзор" === e.name))) || void 0 === i ? void 0 : i.value)
                            return `https://www.wildberries.ru/productinfo/philips/${e}`
                    }
                }
                ,
                t._canCheckForMulti = function(e) {
                    var t;
                    return !(null == e || null === (t = e.options) || void 0 === t || !t.find((e => "Модель" === e.name)))
                }
                ,
                t._fillOpenGraphDescription = function(e, t, n) {
                    if (null != t && t.description)
                        return t.description;
                    const r = n[e];
                    return null != r && r.description ? r.description : "Узнать подробнее, перейдите по ссылке"
                }
                ,
                t._fillSizes = function(e, t) {
                    var n;
                    return e && e.sizes ? e.sizes.sort(( (e, t) => e.rank - t.rank)).map((n => {
                        var r, o, i, s, a, l, c, u;
                        const d = []
                          , p = null == t || null === (r = t.sizes_table) || void 0 === r || null === (o = r.values) || void 0 === o ? void 0 : o.find((e => e.chrt_id === n.optionId));
                        if (null != p && p.details && (null === (i = t.sizes_table.details_props) || void 0 === i ? void 0 : i.length) === p.details.length)
                            for (let e = 0; e < t.sizes_table.details_props.length; e++) {
                                if ("RU" === t.sizes_table.details_props[e] || "EU" === t.sizes_table.details_props[e])
                                    continue;
                                const n = {
                                    name: t.sizes_table.details_props[e],
                                    value: "" !== p.details[e] ? p.details[e] : "-"
                                };
                                d.push(n)
                            }
                        const h = null !== (s = null === (a = n.price) || void 0 === a ? void 0 : a.total) && void 0 !== s ? s : null === (l = e.price) || void 0 === l ? void 0 : l.total;
                        let m = 0;
                        h > 0 && (null === (c = n.stocks) || void 0 === c ? void 0 : c.length) > 0 && (1 === n.stocks.length ? m = n.stocks[0].qty : n.stocks.reduce(( (e, t) => m += t.qty), 0));
                        const f = m > 0 ? null === (u = n.stocks) || void 0 === u ? void 0 : u.map((e => e.wh)) : null
                          , y = {
                            characteristicId: n.optionId,
                            sizeName: n.origName,
                            sizeNameRus: n.name,
                            dimensions: d,
                            quantity: m,
                            stocks: n.stocks,
                            storeIds: f,
                            isSoldOut: 0 === m,
                            lowQuantity: m < 3 && m > 0,
                            deliveryHours: (n.time1 || 0) + (n.time2 || 0),
                            fastestStore: n.wh,
                            payloadV2: n.payload,
                            saleConditions: n.saleConditions,
                            whDtype: n.dtype,
                            isForeign: !!(32 & n.dtype)
                        };
                        return m > 0 && n.price && (y.price = {
                            price: n.price.basic ? n.price.basic / 100 : 0,
                            salePrice: n.price.total ? n.price.priceToShow / 100 : 0,
                            priceForBasket: n.price.priceForBasket ? n.price.priceForBasket / 100 : 0,
                            sale: n.price.sale,
                            logisticsCost: n.price.logistics,
                            returnCost: n.price.return
                        },
                        this._setCanShowThermometer(e.panelPromoId, y)),
                        y
                    }
                    )) : null != t && null !== (n = t.data) && void 0 !== n && n.chrt_ids ? t.data.chrt_ids.map((e => {
                        var n;
                        const r = null == t || null === (n = t.sizes_table) || void 0 === n ? void 0 : n.values.find((t => t.chrt_id === e))
                          , o = [];
                        if (r) {
                            var i, s;
                            const e = null == t || null === (i = t.sizes_table) || void 0 === i ? void 0 : i.values.find((e => e.chrt_id === r.optionId));
                            if (null != e && e.details && (null === (s = t.sizes_table.details_props) || void 0 === s ? void 0 : s.length) === e.details.length)
                                for (let n = 0; n < t.sizes_table.details_props.length; n++) {
                                    if ("RU" === t.sizes_table.details_props[n] || "EU" === t.sizes_table.details_props[n])
                                        continue;
                                    const r = {
                                        name: t.sizes_table.details_props[n],
                                        value: "" !== e.details[n] ? e.details[n] : "-"
                                    };
                                    o.push(r)
                                }
                        }
                        return {
                            characteristicId: e,
                            sizeName: "0",
                            sizeNameRus: "",
                            dimensions: o,
                            quantity: 0,
                            isSoldOut: !0
                        }
                    }
                    )) : null
                }
                ,
                t._setCanFit = function(e, t) {
                    return -1 !== zt.indexOf(t) && -1 === qt.indexOf(e)
                }
                ,
                t._fillMiniGroupedAddedOptions = function(e, t) {
                    const n = [];
                    if (!e)
                        return n;
                    let r = t ? 4 : 6;
                    for (let t = 0; t < e.length; t++) {
                        const o = e[t].addedOptions.slice(0, r).filter((e => "Цвет" !== e.property));
                        if (n.push(...o),
                        r -= o.length,
                        r < 1)
                            break
                    }
                    return n
                }
                ,
                t._setVerifiedCertificate = function(e) {
                    var t, n;
                    return null != e && null !== (t = e.certificate) && void 0 !== t && t.verified ? null !== (n = e.data) && void 0 !== n && n.subject_id && Gt.indexOf(e.data.subject_id) >= 0 ? 2 : 1 : 0
                }
                ,
                t._setSelectedPrice = function(e) {
                    var t;
                    e.selectedPrice = null !== (t = e.selectedSize) && void 0 !== t && t.price ? e.selectedSize.price : e.price
                }
                ,
                t._setButtons = function(e) {
                    var t, n, r;
                    e.addToBasketEnable = !(null !== (t = e.selectedSize) && void 0 !== t && t.isSoldOut || e.allSizesSoldOut),
                    e.addToPonedEnable = !(null !== (n = e.selectedSize) && void 0 !== n && n.isSoldOut || e.allSizesSoldOut),
                    e.addToWaitingListEnable = (null === (r = e.selectedSize) || void 0 === r ? void 0 : r.isSoldOut) || e.allSizesSoldOut,
                    e.addedToBasket = !1,
                    e.addedToWl = !1
                }
                ,
                t._setCanShowThermometer = function(e, t) {
                    !WbSpaModel.prototype.$auth.isAuth || !t.quantity || t.quantity > 1e3 || WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(e) && (t.showThermometer = !0)
                }
                ,
                e
            }();
            const Xt = function() {
                function e(e, t) {
                    this.publicUrl = "https://banners-website.wildberries.ru/public/v1/banners",
                    this.enums = e,
                    this.helper = t
                }
                var t = e.prototype;
                return t.getBannersFromApi = async function(e) {
                    var t;
                    const n = null !== (t = e.appType) && void 0 !== t ? t : this._getAppType();
                    let r = await this._getBannersFromApi(e.urlType, n, e.menuId, e.brandId);
                    return r = r.filter((e => null != e)).map((e => this.helper.convertToBannerItem(e))),
                    r.sort(( (e, t) => {
                        var n, r;
                        return (null !== (n = e.placementOptions.sort) && void 0 !== n ? n : 0) - (null !== (r = t.placementOptions.sort) && void 0 !== r ? r : 0)
                    }
                    )),
                    r
                }
                ,
                t._getBannersFromApi = async function(e, t, n, r) {
                    var o, i, s, a;
                    let l = await WbSpaModel.prototype.$user.getLocationData();
                    const c = WbSpaModel.prototype.$user.getUserInfo()
                      , u = WbSpaModel.prototype.$user.getBannersClusters()
                      , d = this._getDisplayType(c)
                      , p = this._getCountry()
                      , h = WbSpaModel.prototype.$helper.currentCulture
                      , m = new URLSearchParams({
                        urltype: e,
                        apptype: t,
                        displaytype: d,
                        longitude: l.longitude,
                        latitude: l.latitude,
                        country: p,
                        culture: h
                    });
                    WbSpaModel.prototype.$analitic.appendSplitInfoV2(m, "banner"),
                    null != u && u.length && m.append("clusterids", u),
                    n && m.append("menuid", n),
                    r && m.append("brandId", r);
                    const f = `${this.publicUrl}?${new URLSearchParams(m)}`;
                    let y = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(f, {}, {
                        timeout: 1e4,
                        nullOnError: !0,
                        addAuthHeader: !0
                    });
                    if (y && null !== (o = y) && void 0 !== o && o.length || (y = await this._getDefaultBannersFromStatic(e, t, n)),
                    y && WbSpaModel.prototype.$apiSupport.webpImage && null !== (i = wb.global.settings) && void 0 !== i && null !== (s = i.switches) && void 0 !== s && s.bannerWebp)
                        for (const e of y)
                            e.Src && (e.Src = e.Src.replace(".jpg", ".webp")),
                            e.src && (e.src = e.src.replace(".jpg", ".webp"));
                    return (null === (a = y) || void 0 === a ? void 0 : a.length) > 0 ? y : []
                }
                ,
                t._getDefaultBannersFromStatic = async function(e, t, n) {
                    const r = this._getBannersTypeForStatic(e);
                    if (!r)
                        return null;
                    const o = n ? `banners-${r}-${wb.settings.currentLocale}-${n}-v1.json` : `banners-${r}-${wb.settings.currentLocale}-v1.json`;
                    try {
                        var i, s, a;
                        let n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(o, 3e3);
                        return t == this.enums.appType.desktop ? n = null === (i = n) || void 0 === i ? void 0 : i.filter((e => e.applicationType == this.enums.appType.desktop || 225 == e.applicationType || 227 == e.applicationType)) : t == this.enums.appType.mobile && (n = null === (s = n) || void 0 === s ? void 0 : s.filter((e => e.applicationType == this.enums.appType.mobile || 227 == e.applicationType))),
                        e == this.enums.urlType.promotion && t == this.enums.appType.desktop && (null === (a = n) || void 0 === a || a.forEach((e => {
                            e.src = this.helper.createBannerPathByResolution(e.src, "c660x210")
                        }
                        ))),
                        n
                    } catch (e) {
                        return null
                    }
                }
                ,
                t._getBannersTypeForStatic = function(e) {
                    switch (e) {
                    case this.enums.urlType.main:
                        return "main";
                    case this.enums.urlType.promotion:
                        return "promo";
                    case this.enums.urlType.cataloger:
                        return "catalog"
                    }
                }
                ,
                t._getAppType = function() {
                    return "d" == wb.settings.displayMode ? this.enums.appType.desktop : this.enums.appType.mobile
                }
                ,
                t._getDisplayType = function(e) {
                    return e.isAuth ? this.enums.bannerDisplayType.forAuth : this.enums.bannerDisplayType.forNotAuth
                }
                ,
                t._getCountry = function() {
                    var e;
                    return 1 << (null !== (e = this.enums.country[WbSpaModel.prototype.$user.getLocale()]) && void 0 !== e ? e : 0) - 1
                }
                ,
                e
            }();
            let Yt = function(e, t, n, r) {
                this.urlType = e,
                this.menuId = n,
                this.brandId = r,
                this.appType = t
            };
            const Zt = function() {
                function e(e, t) {
                    this.enums = e,
                    this.helper = t,
                    this.api = new Xt(this.enums,this.helper)
                }
                var t = e.prototype;
                return t.getBannersForHomePageAsync = async function() {
                    const e = await this.api.getBannersFromApi(new Yt(this.enums.urlType.main,this.enums.appType.desktopAndMobile))
                      , t = [this.enums.locationType._215x168, this.enums.locationType._705x394, this.enums.locationType._460x394, this.enums.locationType._364x668]
                      , n = []
                      , r = []
                      , o = []
                      , i = [];
                    let s = [];
                    return null == e || e.forEach((e => {
                        e.locationType == this.enums.locationType._1440x168 ? e.applicationType == this.enums.appType.desktop ? n.push(e) : e.applicationType == this.enums.appType.mobile && s.push(e) : e.locationType == this.enums.locationType.mainInfo ? e.applicationType == this.enums.appType.desktop ? o.push(e) : e.applicationType == this.enums.appType.mobile && i.push(e) : -1 != t.indexOf(e.locationType) && r.push(e)
                    }
                    )),
                    s.length || (s = n),
                    {
                        mainBanners: n,
                        mainMobileBanners: s,
                        contentBanners: r,
                        mainInfoBanners: o,
                        mainInfoMobileBanners: i
                    }
                }
                ,
                t.getBannersForFooterAsync = async function() {
                    const e = await this.api.getBannersFromApi(new Yt(this.enums.urlType.main,this.enums.appType.desktopAndMobile))
                      , t = []
                      , n = [];
                    return null == e || e.forEach((e => {
                        e.locationType === this.enums.locationType.footerSocial && (e.applicationType == this.enums.appType.desktop ? t.push(e) : e.applicationType == this.enums.appType.mobile && n.push(e))
                    }
                    )),
                    {
                        desktopBanners: t,
                        mobileBanners: n.length ? n : t
                    }
                }
                ,
                t.getPromoBanners = function() {
                    return this._getPromotionBanners()
                }
                ,
                t._getPromotionBanners = async function() {
                    const e = (await this.api.getBannersFromApi(new Yt(this.enums.urlType.promotion,this.enums.appType.desktop))).filter((e => e.locationType == this.enums.locationType._770x245));
                    return this.helper.dividePromotionBanners(e)
                }
                ,
                t.getPromoCatalogBanners = async function(e, t=!1) {
                    return (await this.api.getBannersFromApi(new Yt(this.enums.urlType.promotionCatalog,t ? this.enums.appType.mobile : this.enums.appType.desktop,e))).filter((e => e.locationType === this.enums.locationType.promo_strip))
                }
                ,
                t.getTopMenuBanners = async function() {
                    const e = await this.api.getBannersFromApi(new Yt(this.enums.urlType.default,this.enums.appType.desktop))
                      , t = this._menuSingleBanners(e)
                      , n = await this._getMenuPromotionBanners()
                      , r = t;
                    return (null == n ? void 0 : n.length) > 0 && (r[2192] = n),
                    r
                }
                ,
                t._menuSingleBanners = function(e) {
                    return e.reduce(( (e, t) => {
                        var n;
                        if (t.locationType != this.enums.locationType.menu_banners)
                            return e;
                        const r = null !== (n = t.placementOptions.menuID) && void 0 !== n ? n : 0;
                        return e.hasOwnProperty(r) || (e[r] = []),
                        e[r].push(t),
                        e
                    }
                    ), {})
                }
                ,
                t._getMenuPromotionBanners = async function() {
                    const e = await this._getPromotionBanners()
                      , t = e.leftBanners.slice(0, 5).concat(e.rightBanners.slice(0, 5));
                    return null == t || t.forEach((e => {
                        e.src = this.helper.createBannerPathByResolution(e.src, "t305x245q"),
                        e.absoluteUrl = e.getAbsoluteUrl()
                    }
                    )),
                    t
                }
                ,
                t.getCatalogBanners = async function(e, t, n=!1) {
                    this.menuIdEnum || (this.menuIdEnum = t);
                    const r = await this.api.getBannersFromApi(new Yt(this.enums.urlType.cataloger,this.enums.appType.desktop,e))
                      , o = this._getBannersForCatalog(r, e);
                    let i = o.firstCarousel
                      , s = o.secondCarousel;
                    if (n) {
                        var a, l;
                        const t = await this.api.getBannersFromApi(new Yt(this.enums.urlType.cataloger,this.enums.appType.mobile,e))
                          , n = this._getCatalogBigBanners(t);
                        i = (null === (a = n.firstCarousel) || void 0 === a ? void 0 : a.length) > 0 ? n.firstCarousel : o.firstCarousel,
                        s = (null === (l = n.secondCarousel) || void 0 === l ? void 0 : l.length) > 0 ? n.secondCarousel : o.secondCarousel
                    }
                    return {
                        mainBannersFirst: i,
                        mainBannersSecond: s,
                        verticalBanners: o.verticalBanners,
                        smallBanners: o.commonBanners,
                        seasonBanners: o.seasonBanners
                    }
                }
                ,
                t._getBannersForCatalog = function(e, t) {
                    if (!e)
                        return [];
                    const {firstCarousel: n, secondCarousel: r} = this._getCatalogBigBanners(e)
                      , o = this._getCatalogVerticalBanners(e)
                      , i = e.filter((e => e.locationType == this.enums.locationType.small));
                    return {
                        firstCarousel: n,
                        secondCarousel: r,
                        verticalBanners: o,
                        commonBanners: this._getCommonBanners(i, t),
                        seasonBanners: this._getSeasonBanners(i, t)
                    }
                }
                ,
                t._getCommonBanners = function(e, t) {
                    const n = this._getCatalogBannersSortParams(t, !0);
                    return this.helper.getBannersBySort(e, n).reduce(( (e, t) => {
                        const n = t.placementOptions.sort;
                        return e[n] = [...e[n] || [], t],
                        e
                    }
                    ), {})
                }
                ,
                t._getSeasonBanners = function(e, t) {
                    const n = this._getCatalogBannersSortParams(t);
                    return this.helper.getBannersBySort(e, n)
                }
                ,
                t._getCatalogVerticalBanners = function(e) {
                    return e.filter((e => e.locationType == this.enums.locationType.vertical)).reduce(( (e, t) => {
                        const n = t.placementOptions.sort;
                        return e[n] = [...e[n] || [], t],
                        e
                    }
                    ), {})
                }
                ,
                t._getCatalogBigBanners = function(e) {
                    const t = e.filter((e => e.locationType == this.enums.locationType.big))
                      , n = []
                      , r = [];
                    return t.forEach((e => {
                        e.placementOptions.sort < 100 && n.push(e),
                        e.placementOptions.sort > 100 && e.placementOptions.sort < 110 && r.push(e)
                    }
                    )),
                    {
                        firstCarousel: n,
                        secondCarousel: r
                    }
                }
                ,
                t._getCatalogBannersSortParams = function(e, t) {
                    const n = {
                        onlyMarketingSortStart: null,
                        onlyMarketingSortEnd: null,
                        suppliersSortStart: null,
                        suppliersSortCount: null
                    }
                      , r = [this.menuIdEnum.sport, this.menuIdEnum.monocity];
                    return t ? -1 != r.indexOf(e) ? (n.suppliersSortStart = 0,
                    n.suppliersSortCount = 3) : (n.onlyMarketingSortStart = 0,
                    n.onlyMarketingSortEnd = 100,
                    n.suppliersSortStart = 100,
                    n.suppliersSortCount = 3) : (n.onlyMarketingSortStart = 50,
                    n.onlyMarketingSortEnd = 99),
                    n
                }
                ,
                e
            }();
            const en = function() {
                function e() {
                    this.appType = this._getAppType(),
                    this.locationType = this._getLocationType(),
                    this.urlType = this._getUrlType(),
                    this.bannerDisplayType = this._getBannerDisplayType(),
                    this.country = this._getCountry(),
                    this.ownerType = this._getOwnerType()
                }
                var t = e.prototype;
                return t._getAppType = function() {
                    return {
                        desktop: 1,
                        mobile: 2,
                        desktopAndMobile: 3
                    }
                }
                ,
                t._getLocationType = function() {
                    return {
                        main: 42,
                        small: 38,
                        strip: 39,
                        _352x428: 60,
                        _305x245: 57,
                        _770x245: 59,
                        big: 41,
                        vertical: 36,
                        promo_strip: 61,
                        _1440x168: 62,
                        _215x168: 63,
                        _705x394: 64,
                        _460x394: 65,
                        _364x668: 66,
                        menu_banners: 73,
                        footerSocial: 80,
                        mainInfo: 81
                    }
                }
                ,
                t._getUrlType = function() {
                    return {
                        main: 1024,
                        default: 0,
                        promotion: 16384,
                        cataloger: 1 << 22,
                        promotionCatalog: 62
                    }
                }
                ,
                t._getBannerDisplayType = function() {
                    return {
                        forAuth: 2,
                        forNotAuth: 3
                    }
                }
                ,
                t._getCountry = function() {
                    return {
                        ru: 1,
                        by: 2,
                        kz: 3,
                        am: 4,
                        kg: 5,
                        uz: 13
                    }
                }
                ,
                t._getOwnerType = function() {
                    return {
                        marketing: 0,
                        supplier: 1
                    }
                }
                ,
                e
            }();
            let tn = function() {
                function e(e) {
                    var t, n, r, o, i, s, a, l, c, u, d, p, h, m, f, y, g, v, b, w, S;
                    this.id = null !== (t = e.UID) && void 0 !== t ? t : e.uID,
                    this.href = null !== (n = e.Href) && void 0 !== n ? n : e.href,
                    this.applicationType = null !== (r = e.ApplicationType) && void 0 !== r ? r : e.applicationType,
                    this.locationType = null !== (o = e.LocationType) && void 0 !== o ? o : e.locationType,
                    this.placementOptions = {
                        sort: null !== (i = null === (s = e.PlacementOptions) || void 0 === s ? void 0 : s.Sort) && void 0 !== i ? i : null === (a = e.placementOptions) || void 0 === a ? void 0 : a.sort,
                        menuID: null !== (l = null === (c = e.PlacementOptions) || void 0 === c ? void 0 : c.MenuID) && void 0 !== l ? l : null === (u = e.placementOptions) || void 0 === u ? void 0 : u.menuID
                    },
                    this.src = null !== (d = e.Src) && void 0 !== d ? d : e.src,
                    this.alt = null !== (p = e.Alt) && void 0 !== p ? p : e.alt,
                    this.noFollow = null !== (h = e.NoFollow) && void 0 !== h ? h : e.noFollow,
                    this.noIndex = null !== (m = e.NoIndex) && void 0 !== m ? m : e.noIndex,
                    this.target = null !== (f = e.Target) && void 0 !== f ? f : e.target,
                    this.ordBannerMark = null !== (y = e.OrdBannerMark) && void 0 !== y ? y : e.ordBannerMark;
                    const _ = null !== (g = e.AdditionalSections) && void 0 !== g ? g : e.additionalSections;
                    this.bannerSelections = null !== (v = null == _ ? void 0 : _.map((e => new nn(e)))) && void 0 !== v ? v : [],
                    this.promoText = null !== (b = e.PromoText) && void 0 !== b ? b : e.promoText,
                    this.promoTextLines = null !== (w = e.PromoTextLines) && void 0 !== w ? w : e.promoTextLines,
                    this.owner = null !== (S = e.Provider) && void 0 !== S ? S : e.provider,
                    this.statisticFields = new rn(e),
                    this.absoluteUrl = this.getAbsoluteUrl(),
                    this.link = this.getLink(),
                    this.pixelSrc = e.PixelSrc
                }
                var t = e.prototype;
                return t.getLink = function() {
                    const e = 0 == this.href.indexOf("https:")
                      , t = e ? new URL(this.href) : new URL(this.href,window.location);
                    return t.searchParams.append("bid", this.id),
                    e ? t.href : `${t.pathname}${t.search}`
                }
                ,
                t.getAbsoluteUrl = function() {
                    return -1 !== this.src.toLowerCase().indexOf("wildberries") ? this.src : wb.helpers.url.urlToExternalStatic(`/vol1/crm-bnrs${this.src}`)
                }
                ,
                e
            }()
              , nn = function(e) {
                var t, n, r, o, i;
                this.href = null !== (t = e.Href) && void 0 !== t ? t : e.href,
                this.relativeXPos = null !== (n = e.RelativeXPos) && void 0 !== n ? n : e.relativeXPos,
                this.relativeYPos = null !== (r = e.RelativeYPos) && void 0 !== r ? r : e.relativeYPos,
                this.relativeHeight = null !== (o = e.RelativeHeight) && void 0 !== o ? o : e.relativeHeight,
                this.relativeWidth = null !== (i = e.RelativeWidth) && void 0 !== i ? i : e.relativeWidth
            }
              , rn = function(e) {
                var t, n, r, o, i, s;
                this.urlType = null !== (t = e.URLType) && void 0 !== t ? t : e.uRLType,
                this.displayType = null !== (n = e.DisplayType) && void 0 !== n ? n : e.displayType,
                this.locationType = null !== (r = e.LocationType) && void 0 !== r ? r : e.locationType,
                this.sort = null !== (o = null === (i = e.PlacementOptions) || void 0 === i ? void 0 : i.Sort) && void 0 !== o ? o : null === (s = e.placementOptions) || void 0 === s ? void 0 : s.sort
            };
            const on = function() {
                function e(e) {
                    this.enums = e,
                    this.fillingGapsSortStart = 300
                }
                var t = e.prototype;
                return t.convertToBannerItem = function(e) {
                    return new tn(e)
                }
                ,
                t.createBannerPathByResolution = function(e, t) {
                    const n = t
                      , r = e.split("/").slice(-1);
                    return `/poster/${WbSpaModel.prototype.$helper.currentCulture}/action2/${n}/${r}`
                }
                ,
                t.dividePromotionBanners = function(e) {
                    const t = this._getBannersSoldToSuppliers(e, 100, 20)
                      , n = null == e ? void 0 : e.filter((e => e.owner == this.enums.ownerType.marketing))
                      , r = n.filter((e => e.placementOptions.sort < 100));
                    let {leftBanners: o, rightBanners: i} = this._createTwoSidesWithTheSameSize(n, r, t);
                    return o = o.map((e => e)),
                    i = i.map((e => e)),
                    {
                        leftBanners: o,
                        rightBanners: i
                    }
                }
                ,
                t.getBannersBySort = function(e, t) {
                    const n = e.filter((e => e.owner == this.enums.ownerType.marketing && e.placementOptions.sort > t.onlyMarketingSortStart && e.placementOptions.sort < t.onlyMarketingSortEnd))
                      , r = this._getBannersSoldToSuppliers(e, t.suppliersSortStart, t.suppliersSortCount);
                    return n.concat(r)
                }
                ,
                t._getBannersSoldToSuppliers = function(e, t, n) {
                    if (!WbSpaModel.prototype.$helper.isNumber(t) || !n)
                        return [];
                    const r = e.filter((e => e.owner == this.enums.ownerType.supplier))
                      , o = e.filter((e => e.owner == this.enums.ownerType.marketing && e.placementOptions.sort > 200 && e.placementOptions.sort < this.fillingGapsSortStart)).reduce(( (e, t) => {
                        const n = t.placementOptions.sort;
                        return e.set(n, [...e.get(n) || [], t])
                    }
                    ), new Map)
                      , i = r.reduce(( (e, t) => e.add(t.placementOptions.sort)), new Set);
                    for (let e = 1; e <= n; e++) {
                        const n = t + e;
                        if (!i.has(n)) {
                            const t = o.get(200 + e);
                            if ((null == t ? void 0 : t.length) > 0) {
                                const e = t[0];
                                e.placementOptions.sort = n,
                                r.push(e)
                            }
                        }
                    }
                    return r
                }
                ,
                t._createTwoSidesWithTheSameSize = function(e, t, n) {
                    const r = e.filter((e => e.placementOptions.sort >= this.fillingGapsSortStart));
                    if (0 == r.length)
                        return n;
                    var o = Math.max(t.length, n.length);
                    return this._fillGapsIfNeeded(t, o, r),
                    this._fillGapsIfNeeded(n, o, r),
                    {
                        leftBanners: t,
                        rightBanners: n
                    }
                }
                ,
                t._fillGapsIfNeeded = function(e, t, n) {
                    let r = t - e.length;
                    for (; r > 0 && n.length > 0; ) {
                        {
                            const t = n[0];
                            n.splice(0, 1),
                            e.push(t)
                        }
                        r--
                    }
                    e.sort(( (e, t) => e.placementOptions.sort - t.placementOptions.sort))
                }
                ,
                e
            }();
            function sn(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, an(r.key), r)
                }
            }
            function an(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const ln = "home-banners-cache-new"
              , cn = "menu-banners-cache-v2"
              , un = "main-catalog-banners-cache"
              , dn = "promotions-banners-cache"
              , pn = "footer-banners-cache"
              , hn = 3e5;
            const mn = function() {
                function e() {
                    WbSpaModel.prototype.$eventBus.addEventListener("GeoUpdated", ( () => this._refreshCache())),
                    this.cacheVers = 5
                }
                var t, n, r, o = e.prototype;
                return o.getCachedResults = async function(e, t, n, r) {
                    const o = WbSpaModel.prototype.$user.getUserInfo().uid
                      , i = this._getCacheKey(e);
                    return i ? (r || (r = 1),
                    await this._getCachedResults(i, t, o, n, r)) : Promise.resolve(null)
                }
                ,
                o._getCachedResults = async function(e, t, n, r, o) {
                    const i = this._tryGetCachedData(e, n)
                      , s = this._getResultsFromCachedData(i, r, o);
                    if (s)
                        return Promise.resolve(s);
                    const a = await t();
                    if (!a)
                        return Promise.resolve(null);
                    if (this._checkBannersExist(a)) {
                        const t = this._toCacheResult(n, r, o, i, a);
                        localStorage.putObject(e, t)
                    }
                    return Promise.resolve(a)
                }
                ,
                o._tryGetCachedData = function(e, t) {
                    const n = localStorage.getObject(e);
                    return n && this.cacheVers == n.version && n.userId == t ? n : null
                }
                ,
                o._getResultsFromCachedData = function(e, t, n) {
                    var r;
                    const o = this._getDisplayName(t)
                      , i = null == e || null === (r = e[o]) || void 0 === r ? void 0 : r[n];
                    return !i || Date.now() - i.updateTs > hn ? null : i.data
                }
                ,
                o._toCacheResult = function(e, t, n, r, o) {
                    r || (r = {}),
                    r.version = this.cacheVers,
                    r.userId = e,
                    r.desktop = this._getCleanedCachedData(r.desktop),
                    r.mobile = this._getCleanedCachedData(r.mobile);
                    return r[this._getDisplayName(t)][n] = {
                        updateTs: Date.now(),
                        data: o
                    },
                    r
                }
                ,
                o._checkBannersExist = function(e) {
                    let t = !1;
                    if (Array.isArray(e))
                        return !0;
                    for (let n in e) {
                        const r = e[n];
                        if (r && (Array.isArray(r) ? t = r.length > 0 : "object" == typeof r && (t = this._checkBannersExist(r)),
                        t))
                            break
                    }
                    return t
                }
                ,
                o._getCleanedCachedData = function(e) {
                    const t = {};
                    for (let n in null != e ? e : {})
                        !n || Date.now() - e[n].updateTs > hn || (t[n] = e[n]);
                    return t
                }
                ,
                o._getDisplayName = function(e) {
                    return e ? "mobile" : "desktop"
                }
                ,
                o._getCacheKey = function(e) {
                    switch (e) {
                    case this.bannersCacheType.main:
                        return ln;
                    case this.bannersCacheType.menu:
                        return cn;
                    case this.bannersCacheType.catalog:
                        return un;
                    case this.bannersCacheType.promotion:
                        return dn;
                    case this.bannersCacheType.promotionCatalog:
                        return "promotions-catalog-banners-cache";
                    case this.bannersCacheType.footer:
                        return pn;
                    default:
                        return null
                    }
                }
                ,
                o._refreshCache = function() {
                    [ln, cn, un, dn, pn].forEach((e => {
                        localStorage.removeItem(e)
                    }
                    ))
                }
                ,
                t = e,
                (n = [{
                    key: "bannersCacheType",
                    get: function() {
                        return {
                            main: 1,
                            menu: 2,
                            catalog: 3,
                            promotion: 4,
                            promotionCatalog: 5,
                            footer: 6
                        }
                    }
                }]) && sn(t.prototype, n),
                r && sn(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }()
              , fn = new en
              , yn = new on(fn);
            const gn = function() {
                function e() {
                    this.service = new Zt(fn,yn),
                    this.cache = new mn
                }
                var t = e.prototype;
                return t.getBannersForHomePageAsync = async function() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.main, ( () => this.service.getBannersForHomePageAsync()))
                }
                ,
                t.getBannersForFooterAsync = async function() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.footer, ( () => this.service.getBannersForFooterAsync()))
                }
                ,
                t.getMenuBanners = async function() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.menu, ( () => this.service.getTopMenuBanners()))
                }
                ,
                t.getCatalogBanners = async function(e, t) {
                    this.menuIdEnum || (this.menuIdEnum = t);
                    const n = "m" == wb.settings.displayMode;
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.catalog, ( () => this.service.getCatalogBanners(e, this.menuIdEnum, n)), n, e)
                }
                ,
                t.getPromoBanners = async function() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotion, ( () => this.service.getPromoBanners()))
                }
                ,
                t.getPromoCatalogBanners = async function(e) {
                    const t = "m" == wb.settings.displayMode;
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionCatalog, ( () => this.service.getPromoCatalogBanners(e, t)), t, e)
                }
                ,
                e
            }()
              , vn = 24
              , bn = 50
              , wn = 37
              , Sn = 0
              , _n = -1
              , Cn = "_userstorage_h";
            let In = function() {
                function e() {
                    this.savedHost = null,
                    window.addEventListener("storage", (e => {
                        e.key === Cn && this.getSavedHost()
                    }
                    )),
                    this.$eventBus.addEventListener("onUserAuth", ( () => {
                        this.getSavedHost()
                    }
                    )),
                    this.$eventBus.addEventListener("onUserUnAuth", ( () => {
                        this.saveHost(null)
                    }
                    ))
                }
                var t = e.prototype;
                return t.getSavedHost = function() {
                    return this.savedHost = localStorage.getItem(Cn),
                    this.savedHost
                }
                ,
                t.saveHost = function(e) {
                    this.savedHost = e,
                    this.savedHost ? localStorage.setItem(Cn, this.savedHost) : localStorage.removeItem(Cn)
                }
                ,
                t.fetch = function(e, t, n) {
                    return this.$wbxHttpClient.fetch(e, t, null, (e => n || this._userStorageHost(e))).then((e => e.json()))
                }
                ,
                t._get = async function(e, t, n, r) {
                    try {
                        const i = await this.fetch(e, t, r);
                        if (i.state === Sn)
                            return i.body;
                        if (i.state === _n && i.reason === vn)
                            return [];
                        var o;
                        if (i.state === _n && i.reason === bn)
                            return null != n && n.replaceBroken && null !== (o = t.paths) && void 0 !== o && o.length ? t.paths.map((e => ({
                                path: e.path,
                                file: "W10="
                            }))) : [];
                        if (i.state === _n && i.reason === wn) {
                            this.saveHost(i.location);
                            const n = await this.fetch(e, t);
                            if (n.state === Sn)
                                return n.body;
                            if (n.state === _n && n.reason === vn)
                                return []
                        }
                        return null
                    } catch (o) {
                        if (!r) {
                            var i;
                            const r = `https://${kn[Math.floor(Math.random() * Object.keys(kn).length) + 1]}`;
                            if (null == t || null === (i = t.signal) || void 0 === i || !i.aborted)
                                return await this._get(e, t, n, r);
                            t.signal = null,
                            this._fixLocation(e, {
                                method: t.method,
                                body: t.body
                            }, r)
                        }
                        return null
                    }
                }
                ,
                t._fixLocation = async function(e, t, n) {
                    const r = await this.fetch(e, t, n);
                    (null == r ? void 0 : r.state) === _n && (null == r ? void 0 : r.reason) === wn && this.saveHost(r.location)
                }
                ,
                t.getList = function(e, t) {
                    const n = {
                        method: "POST",
                        body: JSON.stringify({
                            path: e
                        }),
                        signal: null == t ? void 0 : t.signal,
                        timeout: null == t ? void 0 : t.timeout
                    };
                    return this._get("/api/v2/list", n, t)
                }
                ,
                t.getData = function(e, t) {
                    if (!e || 0 === e.length)
                        return null;
                    const n = {
                        method: "POST",
                        body: JSON.stringify(e),
                        signal: null == t ? void 0 : t.signal,
                        paths: e
                    };
                    return this._get("/api/v2/data/get", n, t)
                }
                ,
                t.setData = async function(e) {
                    try {
                        const t = {
                            method: "POST",
                            body: JSON.stringify(e)
                        }
                          , n = await this.fetch("/api/v2/data/set", t);
                        if (n.state === Sn)
                            return {
                                success: !0
                            };
                        if (n.state === _n && n.reason === wn) {
                            this.saveHost(n.location);
                            const e = await this.fetch("/api/v2/data/set", t);
                            return e.state === Sn ? {
                                success: !0
                            } : {
                                success: !1,
                                error: new Error(`error - ${e}`)
                            }
                        }
                        return {
                            success: !1,
                            error: new Error(`error - ${n}`)
                        }
                    } catch (e) {
                        return {
                            success: !1,
                            error: e
                        }
                    }
                }
                ,
                t._userStorageHost = function(e) {
                    return `https://${this.savedHost || kn[e || 1] || kn[1]}`
                }
                ,
                e
            }();
            const kn = {
                1: "user-storage-01dl.wb.ru",
                2: "user-storage-01iel.wb.ru",
                3: "user-storage-01hel.wb.ru",
                4: "user-storage-01fel.wb.ru",
                5: "user-storage-01eel.wb.ru",
                6: "user-storage-01gel.wb.ru",
                7: "user-storage-01del.wb.ru",
                8: "user-storage-01dp.wb.ru",
                9: "user-storage-01cxc.wb.ru",
                10: "user-storage-01bxc.wb.ru",
                11: "user-storage-01kel.wb.ru",
                12: "user-storage-01bdl.wb.ru",
                13: "user-storage-01adl.wb.ru",
                14: "user-storage-01hel.wb.ru",
                15: "user-storage-01fel.wb.ru",
                16: "user-storage-01eel.wb.ru",
                17: "user-storage-01gel.wb.ru",
                18: "user-storage-01del.wb.ru",
                19: "user-storage-01dp.wb.ru",
                20: "user-storage-01cxc.wb.ru",
                21: "user-storage-01bxc.wb.ru",
                22: "user-storage-01kel.wb.ru",
                23: "user-storage-01bdl.wb.ru",
                24: "user-storage-01adl.wb.ru",
                25: "user-storage-02dl.wb.ru",
                26: "user-storage-02el.wb.ru",
                27: "user-storage-02dl.wb.ru",
                28: "user-storage-02el.wb.ru",
                29: "user-storage-02dl.wb.ru",
                30: "user-storage-02el.wb.ru",
                31: "user-storage-02dl.wb.ru",
                32: "user-storage-02el.wb.ru",
                33: "user-storage-02dl.wb.ru",
                34: "user-storage-02el.wb.ru",
                35: "user-storage-02dl.wb.ru",
                36: "user-storage-02el.wb.ru",
                37: "user-storage-02dl.wb.ru",
                38: "user-storage-02el.wb.ru",
                39: "user-storage-02dl.wb.ru",
                40: "user-storage-02el.wb.ru",
                41: "user-storage-02dl.wb.ru",
                42: "user-storage-02el.wb.ru"
            }
              , Mn = In
              , $n = "wbx__sessionID";
            const Pn = function() {
                function e() {
                    this.session = localStorage.getItem($n),
                    window.addEventListener("storage", (e => {
                        e.key === $n && (this.session = localStorage.getItem($n))
                    }
                    ))
                }
                var t = e.prototype;
                return t.getSession = function() {
                    return this.session || (this.session = localStorage.getItem($n),
                    this.session || (this.session = `site_${wb.helpers.generateGuid()}`,
                    localStorage.setItem($n, this.session))),
                    this.session
                }
                ,
                t.getUserUid = function() {
                    return this.$router.userIsAuth ? this.$router.userUid : this.getBasketUid()
                }
                ,
                t.getBasketUid = function() {
                    let e = wb.cookieHelper.getCookie("BasketUID");
                    return e || (e = this.getSession()),
                    e
                }
                ,
                e
            }();
            const Tn = function() {
                function e() {}
                return e.createPagerModel = function(t, n, r=100, o=window.location.href, i=!1) {
                    let s = Math.ceil(t / r);
                    i && (s = s <= n ? n : n + 1);
                    let a = [];
                    if (s <= 8)
                        a.push(...e.createRange(s, 1));
                    else {
                        let t = 5;
                        if (n < 7)
                            a.push(...e.createRange(7, 1)),
                            a.push("");
                        else if (n >= s - t - 1)
                            a.push(1),
                            a.push(""),
                            a.push(...e.createRange(7, s - 7 + 1));
                        else {
                            a.push(1),
                            a.push("");
                            let t = n
                              , r = n
                              , o = !1
                              , i = 1;
                            for (; i < 7; )
                                r < s && o && (r++,
                                i++),
                                t > 1 && !1 === o && (t--,
                                i++),
                                o = !o;
                            t = 1 === t ? 2 : t,
                            a.push(...e.createRange(r - t + 1, t)),
                            r < s - 1 && a.push("")
                        }
                    }
                    const l = new URL(o,window.location.origin)
                      , c = a.map((e => (l.searchParams.set("page", e),
                    {
                        value: e,
                        href: "" !== e ? l.toString() : null
                    })));
                    return {
                        pageUrls: c,
                        pagingInfo: {
                            currentPage: n,
                            totalPages: s,
                            totalItems: t,
                            hideTotal: i
                        }
                    }
                }
                ,
                e.createRange = function(e, t) {
                    return Array.from({
                        length: e
                    }).map(( (e, n) => n + t))
                }
                ,
                e
            }()
              , Dn = "[RETRY FETCH SERVICE]";
            const An = function() {
                function e() {
                    this.sendQueue = "queue",
                    this.storage = this.$storageHelper,
                    this.storage.supportIndexedDb() ? setInterval(( () => this._sendJobChecker.call(this, this.sendQueue)), 1e4) : this.dbPromise = Promise.reject()
                }
                var t = e.prototype;
                return t.saveRequest = function(e, t, {tryTill: n, timeout: r}={}) {
                    try {
                        delete t.signal;
                        const o = {
                            url: e,
                            options: t,
                            retryCount: 1,
                            retryTime: Date.now()
                        };
                        n > 0 && (o.tryTill = n),
                        r > 0 && (o.timeout = r),
                        this._openDb().then((e => e.transaction(this.sendQueue, "readwrite").objectStore(this.sendQueue).add(o)))
                    } catch (e) {
                        wb.spa.logError(e, `${Dn}: failed to save table=${this.sendQueue}`, !0)
                    }
                }
                ,
                t._openDb = function() {
                    return this.dbPromise || (this.dbPromise = this.storage.openDb("send-queue", {
                        onupgradeneeded: e => {
                            if (!e.objectStoreNames.contains(this.sendQueue)) {
                                e.createObjectStore(this.sendQueue, {
                                    autoIncrement: !0
                                }).createIndex("retryTime", "retryTime", {
                                    unique: !1
                                })
                            }
                            e.objectStoreNames.contains(this.storage.metadataTableName(this.sendQueue)) || e.createObjectStore(this.storage.metadataTableName(this.sendQueue), {
                                keyPath: "name"
                            })
                        }
                        ,
                        version: 2
                    })),
                    this.dbPromise
                }
                ,
                t._log = function(e) {
                    window._debug && console.debug(`%c${Dn}: ${e}`, "color:#4B6F44")
                }
                ,
                t._sendJobChecker = function() {
                    const e = "job_in_progress"
                      , t = this.storage.metadataTableName(this.sendQueue);
                    wb.settings.isOffline || this._openDb().then((async n => {
                        let r = !1;
                        try {
                            const o = await this.storage.get(n, t, e);
                            o && Date.now() > o.value && await this.storage.removeItem(n, t, e).then(( () => this._log("lock cleared"))),
                            r = await this.storage.addItem(n, t, {
                                name: e,
                                value: Date.now() + 3e5
                            }, !0);
                            try {
                                await this.storage.withCursor(n, this.sendQueue, "retryTime", (async (e, t, r) => {
                                    const o = Date.now();
                                    if (this._log(`checking ${r.primaryKey} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`),
                                    t.retryCount > 10 && 0 < t.tryTill && t.tryTill > o && (t.retryCount = Math.max(2, 8),
                                    t.retryTime = o - 1e3),
                                    t.retryCount > 10)
                                        this.storage.removeItem(n, this.sendQueue, r.primaryKey).then(( () => this._log(`cleared url: ${t.url}`)));
                                    else if (t.retryTime < o) {
                                        const e = r.primaryKey;
                                        try {
                                            var i;
                                            this._log(`executing ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`);
                                            const r = {
                                                timeout: t.timeout
                                            };
                                            if (await this.$httpClient.fetchText(t.url, t.options, r),
                                            null !== (i = r.modified) && void 0 !== i && i.timeout)
                                                throw this._log(`timeout for ${e} url: ${t.url}`),
                                                new Error("service timeout");
                                            this.storage.removeItem(n, this.sendQueue, e).then(( () => this._log(`cleared ${e} url: ${t.url}`)))
                                        } catch (r) {
                                            t.retryTime = Date.now() + 2 ** t.retryCount * 1e3,
                                            t.retryCount++,
                                            delete t.options.signal,
                                            this.storage.updateItem(n, this.sendQueue, t, e).then(( () => this._log(`extended ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`)))
                                        }
                                    }
                                }
                                ))
                            } catch (e) {
                                console.log(e)
                            }
                        } catch (e) {} finally {
                            r && this.storage.removeItem(n, t, e)
                        }
                    }
                    ))
                }
                ,
                e
            }()
              , En = 36e5
              , On = "splitInfoV2"
              , Bn = {
                splitId: "no_test",
                title: "no_test"
            }
              , xn = {
                default: [{
                    key: "ab_testing",
                    value: !1
                }]
            };
            const jn = function() {
                function e() {
                    this._setSplitInfo = this._setSplitInfo.bind(this),
                    this.splitInfo = xn.default,
                    this._setSplitInfo()
                }
                var t = e.prototype;
                return t.removeCountInFilters = function() {
                    return "no_filters_count" === this.splitInfo.title
                }
                ,
                t.getSplitInfo = function() {
                    return Bn
                }
                ,
                t.getSplitInfoV2 = function(e) {
                    return this.splitInfo[e] || xn.default
                }
                ,
                t.appendSplitInfoV2 = function(e, t) {
                    const n = this.getSplitInfoV2(t);
                    n && n.forEach((t => e.append(t.key, t.value)))
                }
                ,
                t._updSplitInfo = function() {
                    this.timerId && clearTimeout(this.timerId),
                    this.timerId = setTimeout(this._setSplitInfo, En)
                }
                ,
                t._setSplitInfo = async function() {
                    var e;
                    const t = this._getSplitInfoFromCache();
                    if (this.splitInfo = null !== (e = null == t ? void 0 : t.splitInfo) && void 0 !== e ? e : xn,
                    null == t || !t.skipSplitRequest) {
                        const e = await this._getSplitInfoFromService() || xn;
                        this._setSplitInfoToCache(e),
                        this.splitInfo = e
                    }
                    wb.analitics.sendEvent("AB_Test_Splitter_Request", this.splitInfo),
                    this._updSplitInfo()
                }
                ,
                t._getSplitInfoFromService = async function() {
                    const e = wb.cookieHelper.getCookie("_wbauid");
                    if (!e)
                        return null;
                    try {
                        const t = "https://splitter.wb.ru/v2/result"
                          , n = {
                            "X-API-KEY": "c8ab0248-284e-4fad-a8a2-d4dd258cbd6c",
                            "X-USER-ID": e
                        };
                        let r = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(t, {
                            credentials: "omit",
                            headers: n
                        }, {
                            saveToBlob: "splitter_response",
                            timeout: 3e3,
                            nullOnError: !0,
                            return204: !0
                        });
                        return r && 204 !== r.status ? this._convertToAssociativeArray(r) : xn
                    } catch (e) {
                        return null
                    }
                }
                ,
                t._convertToAssociativeArray = function(e) {
                    let t = {};
                    return Array.isArray(e) && (t = e.reduce(( (e, t) => (e[t.type] = t.properties,
                    e)), {})),
                    t
                }
                ,
                t._getSplitInfoFromCache = function() {
                    var e;
                    let t = localStorage.getObject(On);
                    return t ? (t.t = null !== (e = t.t) && void 0 !== e ? e : 0,
                    Date.now() > t.t + 72e5 ? null : {
                        splitInfo: t.splitInfo,
                        skipSplitRequest: Date.now() <= t.t + En
                    }) : null
                }
                ,
                t._setSplitInfoToCache = function(e) {
                    e && localStorage.putObject(On, {
                        splitInfo: e,
                        t: Date.now()
                    })
                }
                ,
                e
            }();
            const Ln = function() {
                function e() {}
                return e.prototype.onActionExecuting = async function() {
                    let e = WbSpaModel.prototype.$user.getUid();
                    WbSpaModel.prototype.$services.userData.setKey("0" !== e, e),
                    await WbSpaModel.prototype.$services.userData.getUserDataAsync()
                }
                ,
                e
            }();
            const Nn = function() {
                function e() {}
                return e.prototype.onBeforeActionExecuting = async function(e) {
                    if ("ru" === wb.settings.currentLocale)
                        e.searchParams.set("country", "ru");
                    else {
                        const t = await WbSpaModel.prototype.$user.getLocationData();
                        e.searchParams.set("country", t.locale)
                    }
                }
                ,
                e
            }();
            const Un = function() {
                function e(e) {
                    this.checkFunction = null != e ? e : () => !0
                }
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    n.cancelRequest = this.checkFunction()
                }
                ,
                e
            }();
            const Fn = function() {
                function e() {}
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    t.body || (t.body = new URLSearchParams),
                    t.body.set("changeEmail", "SpaChangeEmailEntrypoint" == WbSpaModel.prototype.$router.targetRoute)
                }
                ,
                e
            }();
            let Rn = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n, r, o) {
                    var i, s, a;
                    WbSpaModel.prototype.$services.favsService.syncFromServerAsync();
                    const l = WbSpaModel.prototype.$services.cartService
                      , c = WbSpaModel.prototype.$auth.isAuth
                      , u = await WbSpaModel.prototype.$user.getCurrencyAsync();
                    await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("installmentAggregatorService"),
                    this.getBalanceTask = c ? WbSpaModel.prototype.$user.getBalance({
                        timeout: 1e3
                    }).catch((e => Promise.resolve())) : Promise.resolve();
                    try {
                        await l.sync({
                            timeout: 3e3
                        })
                    } catch (e) {
                        wb.spa.logError(e, {
                            customMsg: "BasketDataPipeline sync"
                        }, !0)
                    }
                    const d = l.publicBasketApiUrl;
                    t.credentials = "include",
                    e.host = d.replace("//", ""),
                    t.body || (t.body = new URLSearchParams);
                    const p = l.getItems();
                    0 === p.length && (n.cancelRequest = () => !0);
                    const [h,m,f,y,g,v,b] = await Promise.all([WbSpaModel.prototype.$user.getXinfoSignedV1(), this.getBalanceTask, WbSpaModel.prototype.$user.getUserGrade(u), WbSpaModel.prototype.$services.installmentAggregatorService.getAvailableInstallment(), WbSpaModel.prototype.$user.getBrokerInstallmentStatus(), WbSpaModel.prototype.$user.getBrokerInstallmentConfig(), WbSpaModel.prototype.$user.getCustomsDuty(u)]);
                    this.userBalanceSigned = m,
                    this.userGradeSigned = f,
                    this.pdlInstOptions = null;
                    let w = null;
                    if ("pdl" === (null == y ? void 0 : y.type))
                        this.pdlInstOptions = await WbSpaModel.prototype.$services.installmentAggregatorService.getLimit("pdl");
                    else if ("cwb" === (null == y ? void 0 : y.type)) {
                        const [e,t] = await Promise.all([WbSpaModel.prototype.$user.getBrokerInstallmentStatus(), WbSpaModel.prototype.$user.getBrokerInstallmentConfig()]);
                        this.userBrokerInstStatus = e,
                        this.userBrokerInstConfig = t
                    } else
                        "iwb" === (null == y ? void 0 : y.type) && (w = await WbSpaModel.prototype.$services.installmentAggregatorService.getLimit("iwb"));
                    this.customsDutySigned = b,
                    WbSpaModel.prototype.$services.userAddressService.getByCoordinates(h.latitude, h.longitude, h.address);
                    let S;
                    if (!!e.searchParams.get("bc") && (await l.getBankCards(2e3, WbSpaModel.prototype.$user.getCurrency(), !0),
                    WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Карта успешно привязана"]),
                    window.history.replaceState({}, "", location.pathname)),
                    c) {
                        const e = await WbSpaModel.prototype.$getService("groupedDeliveriesService").then((e => e.getPurchaseInfo()));
                        S = null == e ? void 0 : e.unpaid
                    }
                    const _ = this.userBrokerInstStatus ? "completed" === this.userBrokerInstStatus.status ? Math.ceil(this.userBrokerInstStatus.availableSum / 100) : Math.ceil(this.userBrokerInstConfig.maxSum / 100) : null
                      , C = e.searchParams.get("includeInOrderStr")
                      , I = p.find((e => e.characteristicId == C));
                    this.isBuyItNowMode = !!I,
                    I ? I.includeInOrder = !0 : 1 === p.length && (p[0].includeInOrder = !0),
                    t.body = WbSpaModel.prototype.$helper.objectSerializer({
                        isBuyItNowMode: this.isBuyItNowMode,
                        items: I ? [I] : p,
                        includeInOrderStr: this.isBuyItNowMode ? null : p.filter((e => e.includeInOrder)).map((e => e.characteristicId)).join(";") || "1",
                        currency: u,
                        xInfo: h.xinfo,
                        cityLatitude: h.latitude,
                        cityLongitude: h.longitude,
                        address: h.address,
                        userBalanceSigned: this.userBalanceSigned,
                        unpaidAmount: S,
                        userDataSigned: h.userDataSign,
                        addressDataSign: h.addressDataSign,
                        userGradeSigned: f,
                        customsDutySigned: b,
                        iwcNetLimit: null !== (i = this.pdlInstOptions) && void 0 !== i && null !== (s = i.productTypes) && void 0 !== s && s.length ? this.pdlInstOptions.limit : -1,
                        cwbLimit: _,
                        iwbLimit: null === (a = w) || void 0 === a ? void 0 : a.limit,
                        instType: null == y ? void 0 : y.type
                    }, t.body, !0, !0)
                }
                ,
                t.onActionExecuted = async function(e) {
                    var t, n;
                    (e.responseData || (e.responseData = {}),
                    e.responseData.isNetworkError) ? await WbSpaModel.prototype.$services.cartService.localBasket.enrichProductsIfNeedAsync() : (null !== (t = e.responseData.data) && void 0 !== t && t.basket && WbSpaModel.prototype.$services.cartService.localBasket.enrichItemsLocalInfo(e.responseData.data.basket.basketItems),
                    null !== (n = e.responseData.data) && void 0 !== n && n.basket && !this.isBuyItNowMode && WbSpaModel.prototype.$services.cartService.save(e.responseData.data.basket));
                    e.responseData.userBalanceSigned = this.userBalanceSigned,
                    e.responseData.pdlInstOptions = this.pdlInstOptions,
                    e.responseData.userGradeSigned = this.userGradeSigned,
                    e.responseData.customsDutySigned = this.customsDutySigned,
                    e.responseData.isBuyItNowMode = this.isBuyItNowMode
                }
                ,
                e
            }();
            const Wn = Rn;
            const Hn = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e) {
                    this.isCardBinding = !!e.searchParams.get("bc")
                }
                ,
                t.onActionExecuted = async function(e) {
                    if (!e.responseData)
                        return;
                    let t;
                    try {
                        t = await WbSpaModel.prototype.$services.cartService.getBankCards(6e3, WbSpaModel.prototype.$user.getCurrency(), this.isCardBinding),
                        this.isCardBinding && window.history.replaceState({}, "", location.pathname),
                        this.isCardBinding && WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Карта успешно привязана"])
                    } catch (e) {
                        t = []
                    } finally {
                        e.responseData.maskedCards = t
                    }
                }
                ,
                e
            }();
            const zn = function() {
                function e() {}
                var t = e.prototype;
                return t.onActionExecuting = async function(e, t, n) {
                    const r = WbSpaModel.prototype.$router
                      , o = parseInt(r.routeParameters.cod1S)
                      , i = r.queryParams.has("size") && parseInt(r.queryParams.get("size")) || null
                      , s = await WbSpaModel.prototype.$services.productCard.loadProductCardAsync(o, i);
                    if (null === s)
                        return n.redirected = !0,
                        r.moveTo404Async();
                    this.data = s
                }
                ,
                t.onActionExecuted = async function(e) {
                    e.responseData ? Object.assign(e.responseData, this.data) : e.responseData = this.data
                }
                ,
                e
            }();
            function qn(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Vn(r.key), r)
                }
            }
            function Vn(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Gn = function() {
                function e() {
                    this.data = null
                }
                var t, n, r, o = e.prototype;
                return o.onBeforeActionExecuting = function() {
                    this.data = null
                }
                ,
                o.onActionExecuting = async function(e, t, n) {
                    var r;
                    const o = await this.$services.favsService.getWlArrivedCatalogModelAsync();
                    if (0 == (null !== (r = null == o ? void 0 : o.goods) && void 0 !== r ? r : []).length)
                        return n.redirected = !0,
                        this.$router.moveTo404Async();
                    this.data = o
                }
                ,
                o.onActionExecuted = function(e) {
                    var t;
                    if (null == this.data)
                        return;
                    const n = this._adaptGoods(null !== (t = this.data.goods) && void 0 !== t ? t : []);
                    e.responseData = {
                        goods: n,
                        goodsCount: n.length
                    }
                }
                ,
                o._adaptGoods = function(e) {
                    return e.map((e => {
                        var t;
                        return {
                            ...e,
                            pics: 1,
                            brand: e.brandName,
                            name: e.goodsName,
                            canQuickOrder: !e.digitalGood,
                            sale: Math.max(e.sale, null !== (t = null == e ? void 0 : e.personalSale) && void 0 !== t ? t : 0)
                        }
                    }
                    ))
                }
                ,
                t = e,
                (n = [{
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }]) && qn(t.prototype, n),
                r && qn(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const Jn = function() {
                function e() {
                    this.data = null
                }
                var t = e.prototype;
                return t.onActionExecuting = async function(e) {
                    this.data = await WbSpaModel.prototype.$services.favsService.getFavsDataAsync(e.searchParams)
                }
                ,
                t.onActionExecuted = function(e) {
                    null != this.data && (e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, this.data))
                }
                ,
                e
            }()
              , Qn = Object.freeze({
                main: 1,
                goods: 2,
                search: 3,
                brand: 4,
                brandConstructor: 5,
                brandConstructorCatalog: 6,
                seller: 7,
                sellerCustomMain: 9,
                promoEntry: 11,
                categoryDenyLink: 12,
                recommendationsSearch: 13
            })
              , Kn = "__catalogOptions";
            const Xn = function() {
                function e() {}
                return e.updateCookie = function(e, t) {
                    const n = wb.cookieHelper.getCookie(Kn);
                    if (null != n) {
                        const r = n.split("&").map((n => n.indexOf(e) > -1 ? `${e}:${t[0].toUpperCase()}${t.slice(1)}` : n)).join("&");
                        wb.cookieHelper.setCookie(Kn, r, {
                            "max-age": 86400,
                            domain: "localhost" === window.location.host ? "" : ".wildberries.ru"
                        })
                    } else {
                        const e = "c516x688"
                          , t = "popular"
                          , n = `CardSize:${e[0].toUpperCase()}${e.slice(1)}&Sort:${t[0].toUpperCase()}${t.slice(1)}`;
                        wb.cookieHelper.setCookie(Kn, n, {
                            "max-age": 86400,
                            domain: "localhost" === window.location.host ? "" : ".wildberries.ru"
                        })
                    }
                }
                ,
                e.getCookie = function(e) {
                    let t;
                    const n = wb.cookieHelper.getCookie(Kn);
                    return null != n && n.split("&").forEach((n => {
                        n.indexOf(e) > -1 && (t = n.split(":")[1].toLowerCase())
                    }
                    )),
                    t
                }
                ,
                e
            }();
            const Yn = function() {
                function e() {}
                return e.prototype.getSeoTags = async function(e) {
                    e = e.replace("/catalogdata/", "/catalog/");
                    const t = `seo-catalog-tags-by-url-${wb.settings.currentLocale}-${e}.json`
                      , n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t, 3e3);
                    return null != n && n.link && (n.link = n.link.replace("/catalog/", "/catalogdata/")),
                    n
                }
                ,
                e
            }();
            function Zn(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, er(r.key), r)
                }
            }
            function er(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            let tr = function() {
                function e() {
                    this.initialized = !1,
                    this.cancelled = !1,
                    this.catalogMenu = null,
                    this.currentMenuItem = null,
                    this.modules = {}
                }
                var t, n, r, o = e.prototype;
                return o.onBeforeActionExecuting = async function(e, t, n) {
                    var r, o;
                    this.xData = this.xInfo = this.products = this.sort = null,
                    this.cancelled = !1,
                    this.searchSeoTag = !1,
                    this.initialized || await this._initAsync();
                    const i = new URL(e);
                    if (i.pathname = i.pathname.replace("/webapi", ""),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(i),
                    null !== (r = this.currentMenuItem) && void 0 !== r && r.landing || null !== (o = this.currentMenuItem) && void 0 !== o && o.isDenyLink)
                        return void (this.cancelled = !0);
                    this.currentMenuItem ? this.currentMenuItem.seoTagInfo = null : this.currentMenuItem = await this._tryGetMenuItemFromTags(i);
                    const [s,a] = await Promise.all([this._getXDataAsync(), WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()]);
                    this.xData = s,
                    this.xInfo = a,
                    n.cancelRequest = null != this.xData,
                    n.cancelRequest || (t.body = this.xInfo)
                }
                ,
                o._tryGetMenuItemFromTags = async function(e) {
                    const t = e.pathname
                      , n = await this.seoTagsService.getSeoTags(t);
                    if (!n)
                        return null;
                    this.searchSeoTag = !!n.searchQuery,
                    e.pathname = n.link;
                    const r = this.searchSeoTag ? this.catalogMenu.getCurrentMenuItem(e) : this._selectedMenuItemFinder(e);
                    return r ? (this.searchSeoTag || (n.xQuery = 0 === r.query.indexOf("preset") ? `${r.query}&${n.parameters}` : n.parameters),
                    r.seoTagInfo = n,
                    r) : null
                }
                ,
                o._selectedMenuItemFinder = function(e) {
                    let t, n = null;
                    for (; 0 !== (t = e.pathname.lastIndexOf("/")) && null == n; )
                        n = this.catalogMenu.getCurrentMenuItem(e),
                        e.pathname = e.pathname.substring(0, t);
                    return n
                }
                ,
                o.onActionExecuting = async function() {
                    if (this.xData && this.xInfo && !this.cancelled) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: n, ...r} = e;
                        t !== this.modules.SorterModel.getSortFromCookie && Xn.updateCookie("Sort", t);
                        const o = new this.modules.QueryHelper({
                            sort: t,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(r)
                        });
                        t = o.checkAndchangeSort(t);
                        const i = o.getQueryStringForCatalog()
                          , s = this.modules.CatalogProvider.createGoodsProvider(this.xData)
                          , {goods: a=[], resp: l} = await this._loadGoodsAsync(s, i);
                        this.products = a,
                        this.sort = t,
                        this.searchSeoTag && (this.xData = this._updateXDataIfSearchTag(this.xData, l))
                    }
                }
                ,
                o._updateXDataIfSearchTag = function(e, t) {
                    var n;
                    const r = null != t && t.metadata ? null == t ? void 0 : t.metadata : t;
                    return null != r && r.name || (e.gender = null),
                    null != r && r.name && e.search !== (null == r ? void 0 : r.name) && (e.search = r.name),
                    null != r && r.catalog_value && (e.xcatalogQuery = r.catalog_value),
                    null != r && r.catalog_type && (e.xcatalogShard = r.catalog_type),
                    null != r && r.context && (e.xcatalogContext = r.context),
                    e.originalSearch = null !== (n = null == r ? void 0 : r.original) && void 0 !== n ? n : null,
                    e
                }
                ,
                o._loadGoodsAsync = async function(e, t) {
                    try {
                        const {goods: n=[], resp: r} = await e.loadGoodsAsync(t);
                        return {
                            goods: n,
                            resp: r
                        }
                    } catch (e) {
                        return {
                            goods: [],
                            resp: null
                        }
                    }
                }
                ,
                o.onActionExecuted = function(e) {
                    var t;
                    if (null == this.xData || this.cancelled)
                        return;
                    e.responseData || (e.responseData = {});
                    const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , r = {
                        xData: this.xData,
                        menuId: this.currentMenuItem.id,
                        currentMenuItem: this.currentMenuItem,
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        selectedHasChild: !!this.currentMenuItem.childs,
                        sitePathItems: n,
                        emptyCatalogLink: this.currentMenuItem.url,
                        tagsUrl: this.currentMenuItem.url,
                        products: this.products,
                        targetUrl: "GP",
                        title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                        containerClass: "catalog-page",
                        needAdultProtection: !wb.adult.isConfirmed,
                        sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                    };
                    this.currentMenuItem.seoTagInfo && this._updateModelIfSeoTagUrl(r, this.currentMenuItem.seoTagInfo);
                    const o = {
                        mainVersion: 0,
                        type: Qn.goods,
                        model: r
                    };
                    Object.assign(e.responseData, {
                        data: o
                    })
                }
                ,
                o._updateModelIfSeoTagUrl = async function(e, t) {
                    t.seo && (e.title = t.seo),
                    e.tagsUrl = t.url
                }
                ,
                o._initAsync = async function() {
                    const [e,t,n,r,o] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("xCatalogProvider"), this.$moduleLoader.loadModuleAsync("sorterModel"), wb.spa.getCatalogMenu()]);
                    this.modules = {
                        XCatalogData: e.XCatalogData,
                        XSearchCatalogData: e.XSeachData,
                        QueryHelper: t,
                        CatalogProvider: n,
                        SorterModel: r.CatalogSorterModel
                    },
                    this.catalogMenu = o,
                    this.seoTagsService = new Yn
                }
                ,
                o._getXDataAsync = async function() {
                    var e;
                    const t = null === (e = this.currentMenuItem) || void 0 === e ? void 0 : e.seoTagInfo;
                    if (this.searchSeoTag && t) {
                        const e = await WbSpaModel.prototype.$getUserGender();
                        return new this.modules.XSearchCatalogData(t.searchQuery,t.searchQuery,null,null,e,1)
                    }
                    const n = this.currentMenuItem && ((null == t ? void 0 : t.xQuery) || this.currentMenuItem.query);
                    return this.currentMenuItem && this.currentMenuItem.shard ? new this.modules.XCatalogData(n,this.currentMenuItem.shard) : null
                }
                ,
                t = e,
                (n = [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }]) && Zn(t.prototype, n),
                r && Zn(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const nr = tr;
            function rr(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, or(r.key), r)
                }
            }
            function or(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            let ir = function() {
                function e() {
                    this.initialized = !1,
                    this.requestCancelled = !1,
                    this.cancelled = !1,
                    this.catalogMenu = null,
                    this.currentMenuItem = null
                }
                var t, n, r, o = e.prototype;
                return o.onBeforeActionExecuting = async function(e, t, n) {
                    var r;
                    this.requestCancelled = this.cancelled = !1,
                    this.initialized || await this._initAsync();
                    const o = new URL(e);
                    o.pathname = o.pathname.replace("/webapi", ""),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(o),
                    null !== (r = this.currentMenuItem) && void 0 !== r && r.landing ? n.cancelRequest = this.requestCancelled = null != this.currentMenuItem : this.cancelled = !0
                }
                ,
                o.onActionExecuted = async function(e) {
                    if (this.cancelled)
                        return;
                    if (!this.requestCancelled)
                        return this._modifyServerResult(e.responseData);
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.currentMenuItem.id
                      , [r,o] = await Promise.all([this.$moduleLoader.loadModuleAsync("mainCatalogConfig"), this._getCarouselsFromSearchService(n)])
                      , i = new r(r.template,this.menuIdEnum).getConfig(this.currentMenuItem)
                      , s = this.bannersTask(i, n)
                      , a = this.catalogMenu.menuById.get(n).childs
                      , l = JSON.parse(JSON.stringify(a))
                      , c = {
                        menuId: n,
                        bannersTask: s,
                        brandCatalogCode: i.brandCatalogCode,
                        pageTitle: this.currentMenuItem.name,
                        sitePathItems: t,
                        catalogMenu: this._transformMenu(l),
                        needAdultProtection: n == this.menuIdEnum.forAdults && !wb.adult.isConfirmed,
                        promoMenuV2: !1,
                        reqiredCss: i.reqiredCss,
                        requiredJs: [],
                        topMenu: i.useTopMenu ? this._buildTopMenu(l) : null,
                        topBrandsUrl: this._getUrlForTopBrands(n, i),
                        carouselsData: o
                    }
                      , u = {
                        mainVersion: n === this.menuIdEnum.sport ? 2 : 3,
                        type: Qn.main,
                        model: c
                    };
                    Object.assign(e.responseData, {
                        data: u
                    })
                }
                ,
                o._modifyServerResult = function(e) {
                    const {data: t} = e;
                    if (!t)
                        return;
                    const {model: n} = t;
                    n && (n.bannersTask = Promise.resolve({
                        mainBannersFirst: this.$isDesktop ? n.firstBannersDesk : n.firstBannersMob,
                        mainBannersSecond: this.$isDesktop ? n.secondBannersDesk : n.secondBannersMob,
                        seasonBanners: n.seasonBanners,
                        verticalBanners: n.verticalBanners,
                        smallBanners: n.smallBanners
                    }))
                }
                ,
                o.bannersTask = async function(e, t) {
                    const n = await this.$services.bannersService.getCatalogBanners(t, this.menuIdEnum)
                      , r = this._buildBannersRows(n.smallBanners, e.bannersSort)
                      , o = this._buildBannersRows(n.verticalBanners, e.verticaBannerSort);
                    return {
                        mainBannersFirst: n.mainBannersFirst,
                        mainBannersSecond: n.mainBannersSecond,
                        seasonBanners: n.seasonBanners,
                        verticalBanners: o,
                        smallBanners: r
                    }
                }
                ,
                o._getUrlForTopBrands = function(e, t) {
                    const n = new URLSearchParams({
                        menuId: e,
                        brandCode: t.brandCatalogCode
                    });
                    return t.topBrandsCount && n.append("count", t.topBrandsCount),
                    `/webapi/maincatalog/topBrands?${n}`
                }
                ,
                o._buildTopMenu = function(e) {
                    if (!e || 0 == e.length)
                        return;
                    const t = e.slice(0, 7)
                      , n = this._toChunks(e, 10)
                      , r = [];
                    t.forEach((e => {
                        const t = this._toChunks(e.childs, 10)
                          , n = {
                            node: this._toTopMenuItem(e),
                            childNodes: t
                        };
                        r.push(n)
                    }
                    ));
                    return [{
                        node: this._allCategoriesMenuItem(e[0]),
                        childNodes: n
                    }].concat(r)
                }
                ,
                o._toTopMenuItem = function(e) {
                    return {
                        name: e.name,
                        link: e.url
                    }
                }
                ,
                o._allCategoriesMenuItem = function(e) {
                    return e.name = "Все категории",
                    this._toTopMenuItem(e)
                }
                ,
                o._toChunks = function(e, t) {
                    const n = [];
                    for (let r = 0; r < e.length; r += t) {
                        const o = e.slice(r, r + t).map((e => this._toTopMenuItem(e)));
                        o.length > 0 && n.push(o)
                    }
                    return n
                }
                ,
                o._buildBannersRows = function(e, t) {
                    if (!e || 0 == e.length || !t)
                        return null;
                    var n = {}
                      , r = 0;
                    return t.forEach(( (t, o) => {
                        let i = [];
                        o < 9 && this._isAllBannersExist(t, e) && t.forEach((t => {
                            var n;
                            (null === (n = e[t]) || void 0 === n ? void 0 : n.length) > 0 && i.push(e[t][0])
                        }
                        )),
                        n[r] = i,
                        r++
                    }
                    )),
                    n
                }
                ,
                o._isAllBannersExist = function(e, t) {
                    return e.forEach((e => {
                        var n;
                        if (!((null === (n = t[e]) || void 0 === n ? void 0 : n.length) > 0))
                            return !1
                    }
                    )),
                    !0
                }
                ,
                o._initAsync = async function() {
                    this.catalogMenu = await wb.spa.getCatalogMenu(),
                    this.initialized = this.catalogMenu.isInited
                }
                ,
                o._transformMenu = function(e) {
                    return null == e ? void 0 : e.map((e => {
                        var t, n;
                        return {
                            childNodes: this._transformMenu(null !== (t = e.childs) && void 0 !== t ? t : []),
                            entity: {
                                pageUrl: e.url,
                                name: e.name,
                                isDenyLink: null !== (n = e.isDenyLink) && void 0 !== n && n
                            },
                            parent: {}
                        }
                    }
                    ))
                }
                ,
                o._getCarouselsFromSearchService = async function(e) {
                    const t = async () => {
                        const [e,t,{XSeachData: n}] = await Promise.all([WbSpaModel.prototype.$getUserGender(), WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(), this.$moduleLoader.loadModuleAsync("xCatalogData")])
                          , r = new n(null,null,null,null,e)
                          , o = new URL(r.dataUrl);
                        return wb.helpers.appendToParamsFromQuery(o.searchParams, t),
                        o.searchParams.set("resultset", "catalog"),
                        WbSpaModel.prototype.$analitic.appendSplitInfoV2(o.searchParams, "search"),
                        o
                    }
                    ;
                    try {
                        const [n,r] = await Promise.all([WbSpaModel.prototype.$httpClient.fetchStaticDataV2(`main-catalog-carousels-${e}.json`, 3e3), t()])
                          , o = null == n ? void 0 : n.filter((e => {
                            var t;
                            return (null == e || null === (t = e.query) || void 0 === t ? void 0 : t.length) > 0
                        }
                        )).map((e => ( (e, t) => (wb.helpers.appendToParamsFromQuery(t.searchParams, e.query),
                        t.searchParams.sort(),
                        {
                            fetchUrl: t.toString(),
                            firstTitle: e.name,
                            showAllURL: t.toString(),
                            sort: e.sort,
                            targetURL: "TG"
                        }))(e, r)));
                        return null == o || o.sort(( (e, t) => e.sort - t.sort)),
                        o
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                }
                ,
                t = e,
                (n = [{
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$isDesktop",
                    get: function() {
                        return WbSpaModel.prototype.$isDesktop
                    }
                }, {
                    key: "menuIdEnum",
                    get: function() {
                        return this.catalogMenu.menuIdEnum
                    }
                }]) && rr(t.prototype, n),
                r && rr(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const sr = ir;
            function ar(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, lr(r.key), r)
                }
            }
            function lr(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const cr = function() {
                function e() {
                    this.initialized = !1,
                    this.requestCancelled = !1,
                    this.cancelled = !1,
                    this.catalogMenu = null,
                    this.currentMenuItem = null
                }
                var t, n, r, o = e.prototype;
                return o.onBeforeActionExecuting = async function(e, t, n) {
                    var r;
                    this.requestCancelled = this.cancelled = !1,
                    this.initialized || await this._initAsync();
                    const o = new URL(e);
                    o.pathname = o.pathname.replace("/webapi", ""),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(o),
                    null !== (r = this.currentMenuItem) && void 0 !== r && r.isDenyLink ? n.cancelRequest = this.requestCancelled = null != this.currentMenuItem : this.cancelled = !0
                }
                ,
                o.onActionExecuted = async function(e) {
                    var t;
                    if (this.cancelled)
                        return;
                    e.responseData || (e.responseData = {});
                    const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , r = {
                        mainVersion: 0,
                        type: Qn.categoryDenyLink,
                        model: {
                            menuId: this.currentMenuItem.id,
                            currentMenuItem: this.currentMenuItem,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            children: this.currentMenuItem.childs,
                            sitePathItems: n,
                            title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                            needAdultProtection: !wb.adult.isConfirmed,
                            catalogMenu: this.catalogMenu,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogDenyMenu(this.currentMenuItem, n)
                        }
                    };
                    Object.assign(e.responseData, {
                        data: r
                    })
                }
                ,
                o._initAsync = async function() {
                    this.catalogMenu = await wb.spa.getCatalogMenu(),
                    this.initialized = this.catalogMenu.isInited
                }
                ,
                t = e,
                (n = [{
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$isDesktop",
                    get: function() {
                        return WbSpaModel.prototype.$isDesktop
                    }
                }]) && ar(t.prototype, n),
                r && ar(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            function ur(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, dr(r.key), r)
                }
            }
            function dr(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const pr = function() {
                function e() {}
                var t, n, r, o = e.prototype;
                return o.onBeforeActionExecuting = async function(e, t, n) {
                    n.cancelRequest = !0,
                    this.initialized || await this._initAsync()
                }
                ,
                o.onActionExecuting = async function(e, t, n) {
                    var r, o;
                    const i = this.modules.QueryHelper.getInitialParams();
                    this.catalogMenu = this.xData = this.products = this.targetUrl = this.isEmpty = null,
                    this.isNetworkError = !1;
                    let {brand: s, page: a, sort: l="popular", cardsize: c, search: u, targeturl: d, nocorrection: p, ssubject: h, ...m} = i;
                    const f = new this.modules.QueryHelper({
                        sort: l,
                        page: a,
                        ssubject: h,
                        filters: this.modules.QueryHelper.checkOnlyFilterParams(m)
                    });
                    l = f.checkAndchangeSort(l);
                    const y = f.getQueryStringForCatalog()
                      , g = await this._getXDataAsync(i);
                    if (null == g.search || "" === g.search)
                        return n.redirected = !0,
                        this.$router.moveTo404Async();
                    const {redirect: v, isProductRedirect: b} = await this._checkPossibleRedirects(i, g);
                    if (v && !b)
                        return n.redirected = !0,
                        this.$router.moveTo(v, !0);
                    const w = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()
                      , S = this.modules.CatalogProvider.createGoodsProvider(g)
                      , {goods: _=[], resp: C, isNetworkError: I=!1} = await this._loadGoodsAsync(S, y)
                      , k = null != C && C.metadata ? null == C ? void 0 : C.metadata : C;
                    if (this.isEmpty = void 0 !== (null == k ? void 0 : k.is_empty) ? k.is_empty : null,
                    null != k && k.name || (g.gender = null),
                    "redirect" === (null == k ? void 0 : k.catalog_type) && null != k && k.catalog_value) {
                        const e = await this._checkRedirectUrl(k.catalog_value);
                        if (e)
                            return n.redirected = !0,
                            this.$router.moveTo(e, !0)
                    }
                    if (null != k && k.title && (g.title = k.title),
                    null != k && k.name && null != k && k.change_input && (g.search = k.name),
                    null != k && k.catalog_value && (g.xcatalogQuery = k.catalog_value),
                    null != k && k.catalog_type && (g.xcatalogShard = k.catalog_type),
                    null != k && k.context && (g.xcatalogContext = k.context),
                    null != k && k.normquery && (g.normQuery = k.normquery),
                    null != k && k.rmi && (g.rmi = k.rmi),
                    g.originalSearch = null !== (r = null == k ? void 0 : k.original) && void 0 !== r ? r : null,
                    g.change_input = null !== (o = null == k ? void 0 : k.change_input) && void 0 !== o && o,
                    this.products = I ? [] : _,
                    this.emptySearch = 0 === this.products.length && 0 === f.getFiltersQuery().toString().length,
                    this.isNetworkError = I,
                    b && this.emptySearch)
                        return n.redirected = !0,
                        this.$router.moveTo(v, !0);
                    this.emptySearchRecom = [],
                    this.emptySearch && (this.emptySearchRecom = await this._getEmptySearchRecommendations(g)),
                    this._needChangeEmptyUserSearch(this, g) && (g.userSearch = g.search),
                    this.xData = g,
                    this.targetUrl = d,
                    this.xInfo = w,
                    this.sort = l
                }
                ,
                o.onActionExecuted = function(e) {
                    var t;
                    e.responseData || (e.responseData = {});
                    this.$router.queryParams.get("ssubject");
                    const n = String.format(null !== (t = this.xData.title) && void 0 !== t ? t : this.xData.search)
                      , r = {
                        type: Qn.search,
                        model: {
                            title: n,
                            xData: this.xData,
                            tagsUrl: `${this.xData.search.toSafeString()}&lang=ru&${this.xInfo}&locale=${WbSpaModel.prototype.$user.getLocale()}`,
                            emptySearch: this.emptySearch,
                            products: this.products,
                            emptySearchRecom: this.emptySearchRecom,
                            targetUrl: this.targetUrl,
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,window.location.href),
                            currentMenuItem: null,
                            rootMenuItem: null,
                            isNetworkError: this.isNetworkError,
                            isEmpty: this.isEmpty,
                            selectedHasChild: !1
                        }
                    };
                    Object.assign(e.responseData, {
                        data: r
                    })
                }
                ,
                o._loadGoodsAsync = async function(e, t) {
                    try {
                        const {goods: n=[], resp: r} = await e.loadGoodsAsync(t);
                        return {
                            goods: n,
                            resp: r
                        }
                    } catch (e) {
                        return {
                            goods: [],
                            resp: null,
                            isNetworkError: !0
                        }
                    }
                }
                ,
                o._initAsync = async function() {
                    const [e,t,n,r] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("xCatalogProvider"), this.$moduleLoader.loadModuleAsync("sorterModel")]);
                    this.modules = {
                        XCatalogData: e.XSeachData,
                        QueryHelper: t,
                        CatalogProvider: n,
                        SorterModel: r.CatalogSorterModel
                    },
                    this.initialized = !0
                }
                ,
                o._getXDataAsync = async function(e) {
                    const t = await WbSpaModel.prototype.$getUserGender();
                    return new this.modules.XCatalogData(e.search,e.search,null,null,t,e.nocorrection,e.ssubject)
                }
                ,
                o._checkPossibleRedirects = async function(e, t) {
                    try {
                        const [n,r] = await Promise.all([this._getBrandsRedirect(e), this._tryGetUrlToProductCard(e, t)]);
                        return {
                            redirect: null != n ? n : r,
                            isProductRedirect: null != r
                        }
                    } catch (e) {
                        return console.error(`Error checking redirect ${e.message}`),
                        {
                            redirect: null
                        }
                    }
                }
                ,
                o._getBrandsRedirect = async function(e) {
                    try {
                        var t;
                        const n = await this.$httpClient.fetchBasicJSON(`https://brand-suggestions.wildberries.ru/api/v1/redirect?query=${encodeURIComponent(e.search)}`, {}, {
                            timeout: 2e3
                        });
                        return "" === (null !== (t = null == n ? void 0 : n.url) && void 0 !== t ? t : "") ? null : n.url
                    } catch (e) {
                        return null
                    }
                }
                ,
                o._checkRedirectUrl = async function(e) {
                    try {
                        const n = new URL(e.startsWith("http") ? e : "https://" + e);
                        if (n.host.endsWith(".wildberries.ru")) {
                            var t;
                            const e = !n.pathname.startsWith("/recent") && n.pathname.startsWith("/catalog");
                            if (e && null !== (t = await wb.spa.getCatalogMenu()) && void 0 !== t && t.menuByUrl.get(n.pathname) || !e)
                                return n.toString()
                        }
                        return n.toString()
                    } catch (e) {
                        return null
                    }
                }
                ,
                o._tryGetUrlToProductCard = async function(e, t) {
                    if (!t.isValid || "merger" === t.shardKey)
                        return null;
                    const n = e.search;
                    if (!this.$helper.isNumber(n))
                        return null;
                    if (n <= 1e3 || n >= 1e9)
                        return null;
                    try {
                        var r;
                        const e = await wb.xnm.getXnmProducts([n]);
                        if (!((null == e || null === (r = e[n]) || void 0 === r ? void 0 : r.pics) > 0))
                            return null;
                        const t = new URL(`/catalog/${n}/detail.aspx`,window.location.origin);
                        return t.searchParams.set("targetUrl", "SP"),
                        t
                    } catch (e) {
                        return null
                    }
                }
                ,
                o._getEmptySearchRecommendations = async function(e) {
                    const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e.search)}`;
                    try {
                        const e = await this.$httpClient.fetchBasicJSON(t, {}, {
                            timeout: 2e3
                        });
                        if (!(Array.isArray(e) && e.length > 0))
                            return [];
                        const n = await wb.xnm.getCatalogCards(e);
                        return Object.values(n).reduce(( (e, t) => (t.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t)),
                        e)), [])
                    } catch (e) {
                        return console.error(e.message),
                        []
                    }
                }
                ,
                o._notShowTecDoc = function(e) {
                    var t, n;
                    return !(null == e || null === (t = e.xcatalogContext) || void 0 === t ? void 0 : t.includes("autoproduct")) || wb.settings.isIE || !(null !== (n = wb.global.settings.switches) && void 0 !== n && n.tecDocEnable)
                }
                ,
                o._needChangeEmptyUserSearch = function(e, t) {
                    var n;
                    if (!e.emptySearch)
                        return !1;
                    if (this._notShowTecDoc(t))
                        return !1;
                    return -1 !== (null === (n = t.userSearch) || void 0 === n ? void 0 : n.indexOf("automodel:"))
                }
                ,
                t = e,
                (n = [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$httpClient",
                    get: function() {
                        return WbSpaModel.prototype.$httpClient
                    }
                }, {
                    key: "$helper",
                    get: function() {
                        return WbSpaModel.prototype.$helper
                    }
                }]) && ur(t.prototype, n),
                r && ur(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }()
              , hr = ["wide", "medium", "mini"];
            const mr = function() {
                function e() {
                    this.fullMenu = null,
                    this.menuByUrl = new Map,
                    this.menuById = new Map,
                    this.brandsMenuList = null,
                    this.promoId = null,
                    this.isSpecial = null,
                    this.isPremium = !1
                }
                var t = e.prototype;
                return t.initMenu = async function(e) {
                    var t;
                    e && (this.promoId = null !== (t = e.promo.id) && void 0 !== t ? t : 0,
                    this.isSpecial = e.promo.isSpecial,
                    this.isPremium = e.isPremium,
                    this._createMenuMap(e),
                    this._generateImg(e))
                }
                ,
                t.getCurrentMenuItem = function(e) {
                    if (!e)
                        return null;
                    const t = e.pathname.replace("promotionscatalogdata", "promotions");
                    return this.menuByUrl.get(t)
                }
                ,
                t.getSitePathItems = function(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url
                    });
                    let n = this.menuById.get(e.id).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url
                        }),
                        n = e.parentId
                    }
                    return t.push({
                        id: 2192,
                        name: "Акции",
                        pageUrl: "/promotions"
                    }),
                    t.reverse()
                }
                ,
                t.getCatalogMenu = function(e, t) {
                    var n, r, o, i, s, a;
                    if (!e)
                        return;
                    if (e.landing || 2 === t.length)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [],
                            parent: {},
                            parents: [],
                            tagsMenu: null !== (s = null === (a = e.childNodes) || void 0 === a ? void 0 : a.map((e => ({
                                name: e.name,
                                link: e.url
                            })))) && void 0 !== s ? s : []
                        };
                    const l = t[t.length - 2]
                      , c = t.slice(1).map((e => ({
                        name: e.name,
                        link: e.pageUrl
                    })));
                    c[c.length - 1].lastSelected = !0;
                    const u = null === (n = e.childNodes) || void 0 === n ? void 0 : n.map((e => ({
                        name: e.name,
                        link: e.url,
                        anc: !0
                    })));
                    if ((null === (r = e.childNodes) || void 0 === r ? void 0 : r.length) > 0)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [...c, ...u],
                            parent: {
                                name: l.name,
                                link: l.pageUrl
                            },
                            parents: this.getParents(e.id),
                            tagsMenu: null != u ? u : []
                        };
                    const d = this.menuByUrl.get(l.pageUrl);
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !0
                        },
                        sideMenu: c,
                        parent: {
                            name: l.name,
                            link: l.pageUrl
                        },
                        parents: this.getParents(e.id),
                        tagsMenu: null !== (o = null === (i = d.childNodes) || void 0 === i ? void 0 : i.map((e => ({
                            name: e.name,
                            link: e.url
                        })))) && void 0 !== o ? o : []
                    }
                }
                ,
                t.hasItem = function(e) {
                    return !!e && this.menuById.has(e)
                }
                ,
                t.getCatalogLink = function(e) {
                    return this.menuById.get(e).url
                }
                ,
                t.getParents = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            name: e.name,
                            link: e.url,
                            isLanding: e.landing
                        }),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                t.getRootNode = function(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                ,
                t._createMenuMap = function(e) {
                    this.brandsMenuList = e.promo,
                    this.fullMenu = e.menu,
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                ,
                t._setNode = function(e, t) {
                    var n;
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        id: e.id,
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        landing: e.landing,
                        childs: e.childNodes,
                        promoId: this.promoId
                    }),
                    null === (n = e.childNodes) || void 0 === n || n.forEach((t => this._setNode(t, e.id)))
                }
                ,
                t._adaptMenu = function(e) {
                    var t;
                    const n = this.menuById.get(e.id);
                    return n.childs = null === (t = n.childs) || void 0 === t ? void 0 : t.map((e => this._adaptMenu(e))),
                    n
                }
                ,
                t._generateImg = function(e) {
                    const t = e.promo.poster;
                    t && (e.isPremium ? this._generatePoster(t) : this.isSpecial && (this._generatePoster(t),
                    this._generateCategoryImgBackground(t.category)))
                }
                ,
                t._generatePoster = function(e) {
                    e && hr.forEach((t => {
                        const n = e.gradient ? `no-repeat url('${e[t]}'), ${e.gradient}, ${e.background}` : `no-repeat url('${e[t]}'), ${e.background}`;
                        document.documentElement.style.setProperty(`--custom-promo-poster-${t}`, n)
                    }
                    ))
                }
                ,
                t._generateCategoryImgBackground = function(e) {
                    document.documentElement.style.setProperty("--custom-promo-image-background", e)
                }
                ,
                e
            }();
            const fr = function() {
                function e() {
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {}
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.type = this.sort = this.isKursk = null,
                    n.cancelRequest)
                        return;
                    this.initialized || await this._initAsync();
                    const r = new URL(e);
                    r.pathname = r.pathname.replace("/webapi", "");
                    const o = r.pathname.split("/")[2];
                    if (this.promo !== o) {
                        this.promotionsService = WbSpaModel.prototype.$services.promotionsService;
                        const e = await this.promotionsService.getPromoDataByUrl(o);
                        await this._loadPromoMenu(e, o)
                    }
                    if (!(this.catalogMenu.promoId > 0 && (this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(r))))
                        return n.redirected = !0,
                        WbSpaModel.prototype.$router.moveTo404Async();
                    var i;
                    if (this.isKursk = 189881 === this.catalogMenu.promoId,
                    this.isKursk) {
                        if ("ru" !== wb.settings.currentLocale)
                            return n.redirected = !0,
                            this.$router.moveTo404Async();
                        this.rewriteDestTo = -2307160
                    }
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(r),
                    this.showCategories = null === (i = this.currentMenuItem) || void 0 === i ? void 0 : i.isTop,
                    this.xData = this.currentMenuItem ? new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shardKey,null,null,this.rewriteDestTo) : null,
                    this.xData.isPromo = !0,
                    this.enableEntryPromoPage = this.showCategories,
                    this.bannersTask = this.showCategories ? this._bannersTask(this.catalogMenu.promoId) : Promise.resolve(null),
                    this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                    n.cancelRequest = null != this.xData
                }
                ,
                t.onActionExecuting = async function() {
                    if (this.xData && this.xInfo && !this.enableEntryPromoPage) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: n, ...r} = e;
                        const o = new this.modules.QueryHelper({
                            sort: t,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(r)
                        });
                        t = o.checkAndchangeSort(t);
                        const i = o.getQueryStringForCatalog()
                          , s = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: a=[]} = await s.loadGoodsAsync(i);
                        this.products = a,
                        this.sort = t
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.enableEntryPromoPage ? this._getEntryModel(t) : this._getCatalogModel(t);
                    Object.assign(e.responseData, {
                        data: n
                    })
                }
                ,
                t._initAsync = async function() {
                    const [e,t,n,r,o] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel"), WbSpaModel.prototype.$moduleLoader.loadServiceAsync("promotionsService")]);
                    this.modules = {
                        XCatalogData: e.XCatalogData,
                        QueryHelper: t,
                        xCatalogProvider: n,
                        SorterModel: r.CatalogSorterModel
                    },
                    this.catalogMenu = new mr,
                    this.initialized = !0
                }
                ,
                t._loadPromoMenu = async function(e, t) {
                    await this.catalogMenu.initMenu(e),
                    this.promo = this.catalogMenu ? t : null
                }
                ,
                t._getEntryModel = function(e) {
                    var t;
                    if (this.catalogMenu.isPremium) {
                        const e = new URL(window.location.href);
                        e.pathname = this.catalogMenu.getRootNode(this.catalogMenu.getCurrentMenuItem(e)).url,
                        this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(e),
                        WbSpaModel.prototype.$router.replaceState(window.history.state, document.title, e)
                    }
                    return {
                        mainVersion: 0,
                        type: Qn.promoEntry,
                        model: {
                            xData: this.xData,
                            menuId: this.currentMenuItem.id,
                            currentMenuItem: this.catalogMenu.menuById.get(this.currentMenuItem.id),
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            children: this.currentMenuItem.childNodes,
                            sitePathItems: e,
                            title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                            needAdultProtection: !wb.adult.isConfirmed,
                            catalogMenu: this.catalogMenu,
                            promoId: this.catalogMenu.promoId,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogMenu(this.currentMenuItem, e),
                            bannersTask: this.bannersTask,
                            isSpecial: this.catalogMenu.isSpecial,
                            catalogType: Qn.promoEntry,
                            isKursk: this.isKursk
                        }
                    }
                }
                ,
                t._getCatalogModel = function(e) {
                    var t;
                    return {
                        mainVersion: 0,
                        type: Qn.goods,
                        model: {
                            xData: this.xData,
                            menuId: this.currentMenuItem.id,
                            currentMenuItem: this.catalogMenu.menuById.get(this.currentMenuItem.id),
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            selectedHasChild: !!this.currentMenuItem.childs,
                            sitePathItems: e,
                            promoMenuV2: !0,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogMenu(this.currentMenuItem, e),
                            emptyCatalogLink: this.currentMenuItem.url,
                            tagsUrl: this.currentMenuItem.url,
                            products: this.products,
                            targetUrl: "GP",
                            title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                            containerClass: "catalog-page",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url),
                            promoId: this.catalogMenu.promoId,
                            isSpecial: this.catalogMenu.isSpecial,
                            isKursk: this.isKursk
                        }
                    }
                }
                ,
                t._bannersTask = async function(e) {
                    return WbSpaModel.prototype.$services.bannersService.getPromoCatalogBanners(e)
                }
                ,
                e
            }();
            function yr(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, gr(r.key), r)
                }
            }
            function gr(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const vr = function() {
                function e() {}
                e.init = async function() {
                    var t;
                    if (e.prototype.menuBaseData)
                        return;
                    e.prototype.menuBaseData = null !== (t = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("subject-base.json", 1e4)) && void 0 !== t ? t : [],
                    e.prototype.menuByIdData = new Map,
                    e.prototype._createMenuMap()
                }
                ;
                var t, n, r, o = e.prototype;
                return o._createMenuMap = function() {
                    e.prototype.menuBase.forEach((t => e.prototype._setNode(t, null)))
                }
                ,
                o._setNode = function(t, n) {
                    var r;
                    n && (t.parentId = n),
                    e.prototype.menuByIdData.set(t.id, t),
                    null === (r = t.childs) || void 0 === r || r.forEach((n => e.prototype._setNode(n, t.id)))
                }
                ,
                t = e,
                r = [{
                    key: "menuById",
                    get: function() {
                        return e.prototype.menuByIdData
                    }
                }],
                (n = [{
                    key: "menuBase",
                    get: function() {
                        return e.prototype.menuBaseData
                    },
                    set: function(t) {
                        e.prototype.menuBaseData = t
                    }
                }]) && yr(t.prototype, n),
                r && yr(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            function br(e, t) {
                return br = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                br(e, t)
            }
            const wr = function(e) {
                function t(t, n) {
                    var r;
                    return (r = e.call(this) || this).modules = t,
                    r.brandConstructorService = n,
                    r.brandData = null,
                    r.fullMenu = null,
                    r.menuByUrl = new Map,
                    r.menuById = new Map,
                    r
                }
                var n, r;
                r = e,
                (n = t).prototype = Object.create(r.prototype),
                n.prototype.constructor = n,
                br(n, r);
                var o = t.prototype;
                return o.initMenu = async function(t, n, r, o) {
                    let i = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands/${t}.json`, {}, {
                        nullOnError: !0
                    });
                    if (!i) {
                        var s;
                        const e = null === (s = t.split("-")) || void 0 === s ? void 0 : s[0];
                        e && (i = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands-by-id/${e}.json`, {}, {
                            nullOnError: !0
                        })),
                        i && (location.href = $.views.helpers.brandUrl(i.url))
                    }
                    if (!i)
                        return null;
                    e.prototype.menuBase || await vr.init(),
                    this.isConstructor = n.indexOf(i.id) >= 0,
                    this.brandData = i;
                    const a = $.views.helpers.brandUrl(i.url)
                      , l = await this._getMenuItems(i, r, a, o);
                    this.fullMenu = this._getFullMenu(i, a, l, this.infoMenu),
                    this._createMenuMap(),
                    this.isInited = !0
                }
                ,
                o._getFullMenu = function(e, t, n, r=[]) {
                    return [{
                        id: e.id + "b",
                        name: e.name,
                        url: t,
                        shard: this.isConstructor ? "" : this._brandToShard(e.name),
                        query: this.isConstructor ? "" : this._brandToQuery(e.id),
                        childs: n.concat(r)
                    }]
                }
                ,
                o._getMenuItems = async function(e, t, n, r) {
                    var o, i, s;
                    if (!this.isConstructor)
                        return await this._getChildsFromSubjects(e, t, n);
                    const a = this.brandConstructorService.getPageInfo(r)
                      , l = await this.brandConstructorService.getMenus(e, a.pageType, a.infoUrl, a.previewMode);
                    if (this.previewMode = a.previewMode,
                    this.hasCustomMenu = (null == l || null === (o = l.menu) || void 0 === o ? void 0 : o.length) > 0,
                    (null == l || null === (i = l.infoMenu) || void 0 === i || null === (s = i.menuInfoItems) || void 0 === s ? void 0 : s.length) > 0 && (this.infoMenu = l.infoMenu.menuInfoItems.map((t => (t.id = `${t.id}info`,
                    t.url = `${n}/info/${t.href}`,
                    t.isInfo = !0,
                    this._convertBrandScemeItemToMenuItemDTO(t, e))))),
                    this.hasCustomMenu)
                        return await this._getChildsFromCustomMenu(e, l.menu);
                    const c = await this._getChildsFromSubjects(e, t, n)
                      , u = {
                        id: e.id + "b-all",
                        name: "Весь ассортимент",
                        url: `${n}/all`,
                        seo: `${e.name} Весь ассортимент`,
                        shard: this._brandToShard(e.name),
                        query: this._brandToQuery(e.id),
                        childs: []
                    };
                    return c.push(u),
                    c
                }
                ,
                o._getChildsFromCustomMenu = async function(e, t) {
                    const n = t.map((t => this._convertBrandScemeItemToMenuItemDTO(t, e, !0)));
                    return n.sort(( (e, t) => e - t)),
                    n
                }
                ,
                o._getChildsFromSubjects = async function(e, t, n) {
                    var r, o, i;
                    const s = this._brandToShard(e.name)
                      , a = this._brandToQuery(e.id)
                      , l = new this.modules.XCatalogData(a,s,"Brand")
                      , c = this.modules.xCatalogProvider.createGoodsProvider(l)
                      , u = await c.loadSubjectsAsync(t, l)
                      , d = null !== (r = null == u || null === (o = u.data) || void 0 === o || null === (i = o.filters.find((e => "xsubject" === e.key))) || void 0 === i ? void 0 : i.items.map((e => e.id))) && void 0 !== r ? r : []
                      , p = [];
                    for (const t of this.menuBase) {
                        let r = !1;
                        const o = [];
                        for (const i of null !== (h = null == t ? void 0 : t.childs) && void 0 !== h ? h : []) {
                            var h;
                            if (d.indexOf(i.id) >= 0) {
                                r = !0;
                                const t = Object.assign({}, i);
                                t.seo = `${e.name} ${i.name}`,
                                t.url = `${n}/${t.url}`,
                                t.shard = this._brandToShard(e.name),
                                t.query = this._brandToQuery(e.id, t.id),
                                o.push(t)
                            }
                        }
                        if (r) {
                            const r = Object.assign({}, t);
                            r.seo = `${e.name} ${t.name}`,
                            r.url = `${n}/${t.url}`,
                            r.shard = this._brandToShard(e.name),
                            r.query = this._brandToQuery(e.id, r.id),
                            r.childs = o,
                            r.parent = e.id + "b",
                            p.push(r)
                        }
                    }
                    return p
                }
                ,
                o._convertBrandScemeItemToMenuItemDTO = function(e, t, n) {
                    const r = this._getXQueryForMenuItem(t, e.query)
                      , o = {
                        id: e.id,
                        name: e.title,
                        url: e.url.toLowerCase(),
                        seo: `${t.name} ${e.title}`,
                        sort: e.sort,
                        shard: this._brandToShard(t.name),
                        query: r
                    };
                    return n && (o.isCustom = n,
                    o.parentId = t.id + "b"),
                    e.isInfo && (o.isInfo = !0),
                    o
                }
                ,
                o._getXQueryForMenuItem = function(e, t) {
                    const n = new URLSearchParams(t);
                    return n.has("type") && n.delete("type"),
                    n.set("brand", e.id),
                    decodeURIComponent(n)
                }
                ,
                o.getBrandInfo = function() {
                    var e;
                    return {
                        id: this.brandData.siteId,
                        brandCod: this.brandData.id,
                        name: this.brandData.name,
                        brandLink: $.views.helpers.brandUrl(this.brandData.url),
                        logoUrl: $.views.helpers.forBrandLogoFromId(null !== (e = this.brandData.hash) && void 0 !== e ? e : this.brandData.id)
                    }
                }
                ,
                o.getCurrentMenuItem = function(e) {
                    var t, n, r;
                    if (!(e = null !== (t = null === (n = e) || void 0 === n ? void 0 : n.pathname) && void 0 !== t ? t : e))
                        return null;
                    const o = e.replace("/data", "").replace("/preview", "");
                    let i = this.menuByUrl.get(o);
                    return !i && this.hasCustomMenu && this.menuByUrl.forEach((e => {
                        e.url.split("?")[0] == o && (i = e)
                    }
                    )),
                    null !== (r = i) && void 0 !== r ? r : this.menuByUrl.get(o.slice(0, o.lastIndexOf("/")))
                }
                ,
                o.getSitePathItems = function(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url,
                        isInfo: e.isInfo,
                        analytic: ["BCA", null, null, e.id]
                    });
                    let n = this.menuById.get(e.id).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url,
                            analytic: ["BCA", null, null, n]
                        }),
                        n = e.parentId
                    }
                    const r = this._brandLetterToSitePathParam(this.brandData.letter);
                    return t.push({
                        id: 0,
                        name: `Бренды на «${r.toUpperCase()}»`,
                        pageUrl: `/wildberries/brandlist.aspx?letter=${r}`
                    }),
                    t.reverse()
                }
                ,
                o.getCatalogMenu = function(e) {
                    var t;
                    const n = [];
                    if ((e = null === (t = e) || void 0 === t ? void 0 : t.filter((e => !e.isInfo))) && 0 !== e.length)
                        if (1 === e.length) {
                            var r, o;
                            const t = {
                                name: "",
                                link: ""
                            }
                              , i = null !== (r = null === (o = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === o ? void 0 : o.filter((e => !e.isInfo)).map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) && void 0 !== r ? r : [];
                            n.push({
                                node: t,
                                children: i
                            })
                        } else {
                            var i, s;
                            const t = this.menuByUrl.get(e[1].pageUrl)
                              , r = {
                                id: t.id,
                                isOpen: !0,
                                lastSelected: e[e.length - 1].id === t.id,
                                link: t.isDenyLink ? null : t.url,
                                name: t.name
                            }
                              , o = r.lastSelected ? null !== (i = null === (s = t.childs) || void 0 === s ? void 0 : s.filter((e => !e.isInfo)).map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) && void 0 !== i ? i : [] : this.getCatalogMenu(e.slice(1));
                            n.push({
                                node: r,
                                children: o
                            })
                        }
                    else
                        n.push({
                            node: {
                                name: "",
                                link: ""
                            },
                            children: []
                        });
                    return n
                }
                ,
                o.hasItem = function(e) {
                    return !!e && this.menuById.has(e)
                }
                ,
                o.getCatalogLink = function(e) {
                    return this.menuById.get(e).url
                }
                ,
                o.getParents = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push(e.name),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                o.getRootNode = function(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                ,
                o._createMenuMap = function() {
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                ,
                o._setNode = function(e, t, n) {
                    var r;
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        childs: e.childs,
                        id: e.id
                    }),
                    null === (r = e.childs) || void 0 === r || r.forEach((t => this._setNode(t, e.id, n)))
                }
                ,
                o._brandToShard = function(e) {
                    const t = e ? e.toLowerCase() : " "
                      , n = t.charCodeAt(0);
                    return 48 <= n && n <= 57 || 97 <= n && n <= 122 || 1072 <= n && n <= 1105 ? `brands/${t[0]}` : "brands/special"
                }
                ,
                o._brandToQuery = function(e, t) {
                    return t ? `brand=${e}&subject=${t}` : `brand=${e}`
                }
                ,
                o._brandLetterToSitePathParam = function(e) {
                    const t = e.charCodeAt(0);
                    return 1072 <= t && t <= 1105 ? "а-я" : 97 <= t && t <= 122 ? e : "123"
                }
                ,
                o._adaptMenu = function(e) {
                    var t;
                    const n = this.menuById.get(e.id);
                    return n.childs = null === (t = n.childs) || void 0 === t ? void 0 : t.map((e => this._adaptMenu(e))),
                    n
                }
                ,
                t
            }(vr);
            const Sr = function() {
                function e(e) {
                    Object.assign(this, e)
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Brand"),
                    n.cancelRequest = null != this.xData
                }
                ,
                t.onActionExecuting = async function(e, t, n) {
                    if (this.xData && this.xInfo) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: r, sle: o, ...i} = e;
                        if ("adidas" === this.brand && o)
                            return n.redirected = !0,
                            void this.$router.moveTo404Async();
                        const s = new this.modules.QueryHelper({
                            sort: t,
                            page: r,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(i)
                        });
                        t = s.checkAndchangeSort(t);
                        const a = s.getQueryStringForCatalog()
                          , l = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: c=[]} = await l.loadGoodsAsync(a);
                        this.products = c,
                        this.sort = t
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , r = {
                        mainVersion: 0,
                        type: Qn.brand,
                        model: {
                            brandInfo: this.catalogMenu.getBrandInfo(),
                            xData: this.xData,
                            currentMenuItem: this.currentMenuItem,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            selectedHasChild: !1,
                            sitePathItems: n,
                            catalogMenu: this.catalogMenu.getCatalogMenu(null == n ? void 0 : n.slice(1)),
                            emptyCatalogLink: this.currentMenuItem.url,
                            tagsUrl: this.currentMenuItem.url,
                            products: this.products,
                            promoMenuV2: !1,
                            targetUrl: "BP",
                            title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                            containerClass: "catalog-page",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                        }
                    };
                    Object.assign(e.responseData, {
                        data: r
                    })
                }
                ,
                e
            }();
            let _r = function() {
                function e(e) {
                    Object.assign(this, e)
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Brand"),
                    n.cancelRequest = null != this.xData
                }
                ,
                t.onActionExecuting = async function() {
                    if (this.xData && this.xData.xcatalogShard && this.xInfo) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: n, sle: r, ...o} = e;
                        if ("adidas" === this.brand && r)
                            return options.redirected = !0,
                            void this.$router.moveTo404Async();
                        const i = new this.modules.QueryHelper({
                            sort: t,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(o)
                        });
                        t = i.checkAndchangeSort(t);
                        const s = i.getQueryStringForCatalog()
                          , a = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: l=[]} = await a.loadGoodsAsync(s);
                        this.products = l,
                        this.sort = t
                    }
                }
                ,
                t.onActionExecuted = async function(e) {
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.catalogMenu.getCatalogMenu(null == t ? void 0 : t.slice(1))
                      , r = this.brandConstructorService.convertSchemeToViewModel(this.brandScheme, this.catalogMenu, this.currentMenuItem);
                    await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("brandConstructorConfig");
                    const o = await this._getMetaTags(this.currentMenuItem)
                      , i = {
                        brandInfo: this.catalogMenu.getBrandInfo(),
                        currentMenuItem: this.currentMenuItem,
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        containerClass: "brand-constructor-catalog",
                        isCatalog: !0,
                        needAdultProtection: !wb.adult.isConfirmed,
                        sitePathItems: t,
                        catalogMenu: n,
                        brandScheme: r,
                        title: this.currentMenuItem.seo,
                        metaTags: o,
                        tagsUrl: this.currentMenuItem.url,
                        sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url),
                        products: this.products,
                        xData: this.xData,
                        targetUrl: "BP",
                        emptyCatalogLink: this.currentMenuItem.url
                    }
                      , s = {
                        mainVersion: 0,
                        type: Qn.brandConstructorCatalog,
                        model: i
                    };
                    Object.assign(e.responseData, {
                        data: s
                    })
                }
                ,
                t._getMetaTags = async function(e) {
                    try {
                        var t;
                        const n = e.url.split("?")[0].replace("brands/", "brands/metatags/")
                          , r = await WbSpaModel.prototype.$httpClient.fetchJSON(`https://www.wildberries.ru/webapi/spa${n}?${new URLSearchParams({
                            name: e.name
                        })}`, {}, {
                            timeout: 3e3,
                            nullOnError: !0
                        });
                        return null !== (t = null == r ? void 0 : r.metaTags) && void 0 !== t ? t : []
                    } catch (e) {
                        return []
                    }
                }
                ,
                e
            }();
            const Cr = _r;
            let Ir = function() {
                function e(e) {
                    Object.assign(this, e)
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    n.cancelRequest = null != this.currentMenuItem
                }
                ,
                t.onActionExecuting = async function() {}
                ,
                t.onActionExecuted = async function(e) {
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.catalogMenu.getCatalogMenu(null == t ? void 0 : t.slice(1))
                      , r = this.brandConstructorService.convertSchemeToViewModel(this.brandScheme, this.catalogMenu, this.currentMenuItem)
                      , o = await this.brandConstructorService.getMainBanners(this.catalogMenu);
                    await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("brandConstructorConfig");
                    const i = {
                        brandInfo: this.catalogMenu.getBrandInfo(),
                        brandDirections: {},
                        containerClass: "brand-constructor-ordinary",
                        isCatalog: !1,
                        needAdultProtection: !wb.adult.isConfirmed,
                        sitePathItems: t,
                        catalogMenu: n,
                        brandScheme: r,
                        mainBanners: o
                    }
                      , s = {
                        mainVersion: 0,
                        type: Qn.brandConstructor,
                        model: i
                    };
                    Object.assign(e.responseData, {
                        data: s
                    })
                }
                ,
                e
            }();
            const kr = Ir;
            const Mr = function() {
                function e(e) {
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {},
                    this.preview = e,
                    this.pipeline = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    var r, o;
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.sort = this.pipeline = this.brandScheme = null,
                    n.cancelRequest)
                        return;
                    let i = new URL(e);
                    i.pathname = i.pathname.replace("/webapi", "").toLowerCase();
                    const s = i.pathname.split("/")[this.preview ? 4 : 3];
                    if (this.brand !== s && (this.initialized = !1,
                    this.brand = this.catalogMenu = null),
                    this.brand === s && this.initialized || await this._initAsync(this.preview),
                    this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                    this.brand !== s && await this._loadBrandMenu(s, i.pathname),
                    this.brand) {
                        if (this.preview && !this.catalogMenu.isConstructor && (i = new URL(e.href.replace("/preview", "")),
                        i.pathname = i.pathname.replace("/webapi", "").toLowerCase()),
                        this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(i),
                        !this.currentMenuItem)
                            return n.cancelRequest = !1,
                            void (n.cancelRequest || (t.body = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()));
                        if (this.catalogMenu.isConstructor) {
                            const e = this.brandConstructorService.getPageInfo(i.pathname)
                              , t = null == e ? void 0 : e.pageType
                              , n = null == e ? void 0 : e.infoUrl;
                            this.brandScheme = await this.brandConstructorService.getBrandSchemeAsync(this.catalogMenu.brandData, t, n, e.previewMode),
                            this.brandScheme || (this.ids = [],
                            await this._loadBrandMenu(s, i.pathname, !0))
                        }
                        return this.catalogMenu.isConstructor ? this.brandScheme.pageType == this.brandConstructorService.enums.pageType.catalog ? this.pipeline = new Cr(this) : this.pipeline = new kr(this) : this.pipeline = new Sr(this),
                        null === (r = (o = this.pipeline).onBeforeActionExecuting) || void 0 === r ? void 0 : r.call(o, e, t, n)
                    }
                    n.cancelRequest = !1
                }
                ,
                t.onActionExecuting = async function(e, t, n) {
                    var r, o;
                    return null === (r = this.pipeline) || void 0 === r || null === (o = r.onActionExecuting) || void 0 === o ? void 0 : o.call(r, e, t, n)
                }
                ,
                t.onActionExecuted = function(e) {
                    var t, n;
                    return null === (t = this.pipeline) || void 0 === t || null === (n = t.onActionExecuted) || void 0 === n ? void 0 : n.call(t, e)
                }
                ,
                t._initAsync = async function(e) {
                    const t = this._initConstructorServiceAndGetBrands(e)
                      , [n,r,o,i] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel")]);
                    this.modules = {
                        XCatalogData: n.XCatalogData,
                        QueryHelper: r,
                        xCatalogProvider: o,
                        SorterModel: i.CatalogSorterModel
                    },
                    this.ids = await t,
                    this.catalogMenu = new wr(this.modules,this.brandConstructorService),
                    this.initialized = !0
                }
                ,
                t._initConstructorServiceAndGetBrands = async function(e) {
                    var t;
                    return await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("brandConstructorService"),
                    this.brandConstructorService = WbSpaModel.prototype.$services.brandConstructorService,
                    null !== (t = await this.brandConstructorService.getConstructorBrands(e)) && void 0 !== t ? t : []
                }
                ,
                t._loadBrandMenu = async function(e, t) {
                    await this.catalogMenu.initMenu(e, this.ids, this.xInfo, t),
                    this.brand = this.catalogMenu.brandData ? e : null
                }
                ,
                e
            }();
            function $r(e, t) {
                return $r = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                $r(e, t)
            }
            const Pr = function(e) {
                function t(t) {
                    var n;
                    return (n = e.call(this) || this).modules = t,
                    n.sellerData = null,
                    n.fullMenu = null,
                    n.menuByUrl = new Map,
                    n.menuById = new Map,
                    n.shard = "sellers",
                    n
                }
                var n, r;
                r = e,
                (n = t).prototype = Object.create(r.prototype),
                n.prototype.constructor = n,
                $r(n, r);
                var o = t.prototype;
                return o.initMenu = async function(t, n) {
                    var r, o, i, s, a;
                    e.prototype.menuBase || await vr.init();
                    const l = this.shard
                      , c = this._sellerToQuery(t, null)
                      , u = new this.modules.XCatalogData(c,l,"Seller")
                      , d = this.modules.xCatalogProvider.createGoodsProvider(u)
                      , p = await d.loadSubjectsAsync(n, u)
                      , h = await this._getSellerData(t);
                    this.sellerData = h,
                    this.fullMenu = [{
                        id: h.id + "s",
                        name: this._trimSellerOrgForms(null !== (r = null !== (o = h.trademark) && void 0 !== o ? o : h.fineName) && void 0 !== r ? r : h.name, h.orgForms),
                        url: "/seller/" + h.id,
                        shard: this.shard,
                        query: this._sellerToQuery(h.id, null),
                        childs: [],
                        title: "Все товары"
                    }];
                    const m = null !== (i = null == p || null === (s = p.data) || void 0 === s || null === (a = s.filters.find((e => "xsubject" === e.key))) || void 0 === a ? void 0 : a.items.toHashSet((e => e.id))) && void 0 !== i ? i : new Set;
                    for (const e of this.menuBase) {
                        let t = !1;
                        const n = [];
                        for (const r of null !== (f = null == e ? void 0 : e.childs) && void 0 !== f ? f : []) {
                            var f;
                            if (m.has(r.id)) {
                                var y;
                                t = !0;
                                const e = Object.assign({}, r);
                                e.url = `/seller/${h.id}/${e.url}`,
                                e.shard = this.shard,
                                e.query = this._sellerToQuery(h.id, e.id),
                                e.parentId = null !== (y = e.parentId) && void 0 !== y ? y : h.id + "s",
                                e.title = e.name,
                                n.push(e)
                            }
                        }
                        if (t) {
                            const t = Object.assign({}, e);
                            t.url = `/seller/${h.id}/${e.url}`,
                            t.shard = this.shard,
                            t.query = this._sellerToQuery(h.id, t.id),
                            t.childs = n,
                            t.parentId = h.id + "s",
                            t.title = t.name,
                            this.fullMenu[0].childs.push(t)
                        }
                    }
                    this._createMenuMap(),
                    this.isInited = !0
                }
                ,
                o.getSellerInfo = function() {
                    return this.sellerData
                }
                ,
                o.getCurrentMenuItem = function(e) {
                    var t;
                    if (!e)
                        return null;
                    const n = e.pathname.replace("/data", "");
                    return null !== (t = this.menuByUrl.get(n)) && void 0 !== t ? t : this.menuByUrl.get(n.slice(0, n.lastIndexOf("/")))
                }
                ,
                o.getSitePathItems = function(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url
                    });
                    let n = this.menuById.get(e.id).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url
                        }),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                o.getCatalogMenu = function(e) {
                    const t = [];
                    if (e && 0 !== e.length)
                        if (1 === e.length) {
                            var n, r;
                            const o = {
                                name: "",
                                link: ""
                            }
                              , i = null !== (n = null === (r = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === r ? void 0 : r.map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) && void 0 !== n ? n : [];
                            t.push({
                                node: o,
                                children: i
                            })
                        } else {
                            var o, i;
                            const n = this.menuByUrl.get(e[1].pageUrl)
                              , r = {
                                id: n.id,
                                isOpen: !0,
                                lastSelected: e[e.length - 1].id === n.id,
                                link: n.url,
                                name: n.name
                            }
                              , s = r.lastSelected ? null !== (o = null === (i = n.childs) || void 0 === i ? void 0 : i.map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) && void 0 !== o ? o : [] : this.getCatalogMenu(e.slice(1));
                            t.push({
                                node: r,
                                children: s
                            })
                        }
                    else
                        t.push({
                            node: {
                                name: "",
                                link: ""
                            },
                            children: []
                        });
                    return t
                }
                ,
                o.hasItem = function(e) {
                    return !!e && this.menuById.has(e)
                }
                ,
                o.getCatalogLink = function(e) {
                    return this.menuById.get(e).url
                }
                ,
                o.getParents = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push(e.name),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                o.getRootNode = function(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                ,
                o._getSellerData = async function(e) {
                    var t;
                    const n = {
                        id: e,
                        isUnknown: !0,
                        name: $.localize("Продавец")
                    }
                      , r = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/supplier-by-id/${e}.json`, {}, {
                        nullOnError: !0
                    });
                    if (!r)
                        return n;
                    const o = WbSpaModel.prototype.$services.suppliersService.setSupplierInfo(r);
                    return {
                        id: o.supplierId,
                        name: null !== (t = o.supplierFullName) && void 0 !== t ? t : o.supplierName,
                        fineName: this._trimSellerOrgForms(o.supplierName, o.orgForms),
                        ogrn: o.ogrn,
                        ogrnip: o.ogrnip,
                        taxpayerCode: o.taxpayerCode,
                        inn: o.inn,
                        kpp: o.kpp,
                        unp: o.unp,
                        bin: o.bin,
                        unn: o.unn,
                        trademark: o.trademark,
                        legalAddress: o.legalAddress,
                        isUnknown: !1,
                        orgForms: o.orgForms
                    }
                }
                ,
                o._trimSellerOrgForms = function(e, t=[]) {
                    return $.views.converters.trimWord(e, t)
                }
                ,
                o._createMenuMap = function() {
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                ,
                o._setNode = function(e, t) {
                    var n;
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        id: e.id,
                        childs: e.childs
                    }),
                    null === (n = e.childs) || void 0 === n || n.forEach((t => this._setNode(t, e.id)))
                }
                ,
                o._sellerToQuery = function(e, t) {
                    return t ? `supplier=${e}&subject=${t}` : `supplier=${e}`
                }
                ,
                o._adaptMenu = function(e) {
                    var t;
                    const n = this.menuById.get(e.id);
                    return n.childs = null === (t = n.childs) || void 0 === t ? void 0 : t.map((e => this._adaptMenu(e))),
                    n
                }
                ,
                t
            }(vr);
            const Tr = function() {
                function e() {
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {}
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.type = this.sort = null,
                    n.cancelRequest)
                        return;
                    this.initialized || await this._initAsync();
                    let r = new URL(e);
                    r.pathname = r.pathname.replace("/webapi", "");
                    const o = r.pathname.split("/")[3];
                    this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                    this.seller !== o && await this._loadBrandMenu(o),
                    this.catalogMenu.isConstructor ? t.body = this.xInfo : (this.seller && (this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(r),
                    this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Seller")),
                    n.cancelRequest = null != this.xData)
                }
                ,
                t.onActionExecuting = async function() {
                    if (this.xData && this.xInfo) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: n, ...r} = e;
                        const o = new this.modules.QueryHelper({
                            sort: t,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(r)
                        });
                        t = o.checkAndchangeSort(t);
                        const i = o.getQueryStringForCatalog()
                          , s = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: a} = await s.loadGoodsAsync(i);
                        this.products = a,
                        this.sort = t
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = {
                        mainVersion: 0,
                        type: Qn.seller,
                        model: {
                            sellerId: this.catalogMenu.sellerData.id,
                            sellerInfo: this.catalogMenu.getSellerInfo(),
                            xData: this.xData,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            currentMenuItem: this.currentMenuItem,
                            selectedHasChild: !1,
                            sitePathItems: t,
                            catalogMenu: this.catalogMenu.getCatalogMenu(t),
                            emptyCatalogLink: this.currentMenuItem.url,
                            tagsUrl: this.currentMenuItem.url,
                            products: this.products,
                            promoMenuV2: !1,
                            title: this.currentMenuItem.title,
                            containerClass: "catalog-page catalog-page--brand",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                        }
                    };
                    Object.assign(e.responseData, {
                        data: n
                    })
                }
                ,
                t._initAsync = async function() {
                    const [e,t,n,r,o] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel"), WbSpaModel.prototype.$moduleLoader.loadServiceAsync("suppliersService")]);
                    this.modules = {
                        XCatalogData: e.XCatalogData,
                        QueryHelper: t,
                        xCatalogProvider: n,
                        SorterModel: r.CatalogSorterModel
                    },
                    this.catalogMenu = new Pr(this.modules),
                    this.initialized = !0
                }
                ,
                t._loadBrandMenu = async function(e) {
                    await this.catalogMenu.initMenu(e, this.xInfo),
                    this.seller = this.catalogMenu.sellerData ? e : null
                }
                ,
                e
            }();
            const Dr = function() {
                function e() {
                    this.bannersTask = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    this.bannersTask = null,
                    n.cancelRequest = !0
                }
                ,
                t.onActionExecuting = async function(e) {
                    this.bannersTask = WbSpaModel.prototype.$services.bannersService.getBannersForHomePageAsync(),
                    this.splitInfoTask = WbSpaModel.prototype.$analitic.getSplitInfo()
                }
                ,
                t.onActionExecuted = async function(e) {
                    e.responseData || (e.responseData = {});
                    const t = await this._getBanners();
                    Object.assign(e.responseData, {
                        bannersTask: this.bannersTask,
                        banners: t,
                        splitInfoTask: this.splitInfoTask
                    })
                }
                ,
                t._getBanners = async function() {
                    let e = 2e3
                      , t = null;
                    return this.bannersTask.then((e => {
                        t = e
                    }
                    )),
                    new Promise((n => {
                        let r = setTimeout((function o() {
                            if (!(e >= 0 && null == t))
                                return clearTimeout(r),
                                n(t);
                            e -= 200,
                            r = setTimeout(o, 200)
                        }
                        ), 200)
                    }
                    ))
                }
                ,
                e
            }();
            const Ar = function() {
                function e(e) {
                    this.timeout = e
                }
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    n.timeout = this.timeout
                }
                ,
                e
            }();
            const Er = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function() {
                    this.data = null,
                    await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("multipleSellersService")
                }
                ,
                t.onActionExecuting = async function() {
                    const e = WbSpaModel.prototype
                      , t = parseInt(e.$router.routeParameters.cod1S)
                      , {nmIds: n} = await this._getNmsForOtherSellers(t);
                    if (null != n && n.length)
                        try {
                            const t = await e.$services.multipleSellersService.loadSellersInfoAsync(n);
                            this.data = t.filter((e => e.salePrice > 0 && e.deliveryModel))
                        } catch (e) {
                            console.error(e)
                        }
                }
                ,
                t._getNmsForOtherSellers = async function(e) {
                    const [t,n] = await Promise.all([wb.xnm.getGoodsForRecommendAndCatalog([e], !0), WbSpaModel.prototype.$httpClient.fetchBasicJSON(wb.helpers.url.urlProductStatic(e), {}, {
                        timeout: 2e3
                    })])
                      , r = null == t ? void 0 : t[0]
                      , [o,i] = await Promise.all([WbSpaModel.prototype.$services.productCard.getMultiInfo(r, n), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("productSelectionManager")]);
                    r.metacard = o,
                    r.canCheckForMulti = WbSpaModel.prototype.$services.productCard._canCheckForMulti(n),
                    this.productSelectionManager = new i(null,{
                        nmId: e
                    },r);
                    const s = await this.productSelectionManager.getNmsForOtherSellers(e);
                    return s.isMulticard ? {
                        nmIds: s.nms
                    } : await WbSpaModel.prototype.$services.multipleSellersService.loadOtherSellersNmIds(e)
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    e.responseData || (e.responseData = {});
                    const n = {
                        otherSellers: null !== (t = this.data) && void 0 !== t ? t : []
                    };
                    Object.assign(e.responseData, n)
                }
                ,
                e
            }();
            const Or = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function() {
                    this.data = null,
                    await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("productFeedbacksService")
                }
                ,
                t.onActionExecuting = async function() {
                    const e = WbSpaModel.prototype
                      , t = parseInt(e.$router.routeParameters.cod1S);
                    let n = parseInt(e.$router.queryParams.get("imtId"));
                    isNaN(n) && (n = await this._loadImtIdAsync(t));
                    try {
                        var r;
                        const o = await e.$services.productCard.loadStaticProductAsync(t)
                          , i = !(null !== (r = o.colors) && void 0 !== r && r.length) || 1 == o.colors.length
                          , s = await this._setDefaultSort()
                          , {summary: a, votes: l} = await e.$services.productFeedbacksService.loadSummaryAndVotes(n, t, 10, s, null);
                        this.data = {
                            imtId: n,
                            summary: a,
                            votes: l,
                            sortValue: s,
                            nmId: t,
                            isOneColor: i,
                            staticProduct: o
                        }
                    } catch (e) {
                        return {
                            imtId: n
                        }
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, null !== (t = this.data) && void 0 !== t ? t : {})
                }
                ,
                t._loadImtIdAsync = async function(e) {
                    if (isNaN(e))
                        return null;
                    try {
                        const t = await WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(e), {}, {
                            noProcessResponse: !0
                        });
                        return null == t ? void 0 : t.imt_id
                    } catch (e) {
                        return console.error(e),
                        0
                    }
                }
                ,
                t._setDefaultSort = async function() {
                    return await WbSpaModel.prototype.$analitic.isAbTest133Approved() ? "rankDesc" : null
                }
                ,
                e
            }();
            let Br = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function() {
                    this.data = null,
                    await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("productQuestionsService")
                }
                ,
                t.onActionExecuting = async function() {
                    const e = WbSpaModel.prototype
                      , t = parseInt(e.$router.routeParameters.cod1S);
                    let n = parseInt(e.$router.queryParams.get("imtId"));
                    isNaN(n) && (n = await this._loadImtIdAsync(t));
                    try {
                        const [r,o] = await Promise.all([e.$services.productQuestionsService.loadQuestionsFromCache(n, 10), WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(t), {}, {
                            noProcessResponse: !0
                        })]);
                        this.data = {
                            staticProduct: o,
                            imtId: n,
                            questionsModel: r
                        }
                    } catch (e) {
                        return {
                            imtId: n
                        }
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, null !== (t = this.data) && void 0 !== t ? t : {})
                }
                ,
                t._loadImtIdAsync = async function(e) {
                    if (isNaN(e))
                        return 0;
                    try {
                        const t = await WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(e), {}, {
                            noProcessResponse: !0
                        });
                        return null == t ? void 0 : t.imt_id
                    } catch (e) {
                        return console.error(e),
                        0
                    }
                }
                ,
                e
            }();
            const xr = Br;
            const jr = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = function() {
                    this.data = null
                }
                ,
                t.onActionExecuting = async function() {
                    const e = WbSpaModel.prototype
                      , t = parseInt(e.$router.routeParameters.cod1S);
                    try {
                        this.data = await wb.xnm.getMiniProductCard(t)
                    } catch (e) {
                        console.error(e)
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t, n;
                    if (null == this.data)
                        return;
                    e.responseData || (e.responseData = {});
                    let r = parseInt(WbSpaModel.prototype.$router.queryParams.get("size"));
                    const o = this.data;
                    var i;
                    if (!isNaN(r) && null !== (t = o.sizes) && void 0 !== t && t.some((e => e.ch == r)))
                        o.characteristicId = r,
                        o.sizeName = null === (i = o.sizes.find((e => e.ch == r))) || void 0 === i ? void 0 : i.nm;
                    else if (1 == (null === (n = o.sizes) || void 0 === n ? void 0 : n.length)) {
                        const e = o.sizes[0];
                        o.characteristicId = e.ch,
                        o.sizeName = null == e ? void 0 : e.nm
                    }
                    e.responseData.miniCard = o
                }
                ,
                e
            }();
            function Lr(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Nr(r.key), r)
                }
            }
            function Nr(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Ur = function() {
                function e() {}
                var t, n, r, o = e.prototype;
                return o.onBeforeActionExecuting = function() {
                    this.model = this.imageId = null
                }
                ,
                o.onActionExecuting = async function() {
                    var e;
                    await this.$moduleLoader.loadServiceAsync("searchByImageService");
                    const t = this.$router.routeParameters.imageId
                      , n = this.$services.searchByImageService.getSearchResult(t);
                    !n.invalidPhoto && !n.error && (null === (e = n.recommendationsNms) || void 0 === e ? void 0 : e.length) > 0 && (n.products = await this._loadGoods(n.recommendationsNms),
                    n.statistic && (n.statistic.foundByImageOnStock = n.products.length)),
                    n.imageId = t,
                    this.model = n,
                    this.imageId = t
                }
                ,
                o.onActionExecuted = function(e) {
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, this.model)
                }
                ,
                o._loadGoods = async function(e) {
                    try {
                        const t = await wb.xnm.getCatalogCards(e, !1, !1);
                        return e.reduce(( (e, n) => {
                            var r;
                            return null !== (r = t[n]) && void 0 !== r && r.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),
                            e
                        }
                        ), [])
                    } catch (e) {
                        return []
                    }
                }
                ,
                t = e,
                (n = [{
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }]) && Lr(t.prototype, n),
                r && Lr(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            function Fr(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Rr(r.key), r)
                }
            }
            function Rr(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Wr = function() {
                function e() {}
                var t, n, r, o = e.prototype;
                return o.onActionExecuted = async function(e) {
                    e.responseData || (e.responseData = {});
                    const t = WbSpaModel.prototype.$router.queryParams.get("searchQuery")
                      , n = WbSpaModel.prototype.$router.queryParams.get("targetUrl")
                      , r = this._getSearchCatalogLink(t)
                      , o = `/recommendationssearch?searchQuery?searchQuery=${new URLSearchParams({
                        searchQuery: t,
                        targetUrl: n
                    })}`
                      , i = await this._loadGoods(t);
                    if (!Array.isArray(i) || 0 == i.length)
                        return this.$router.moveTo404Async();
                    const s = {
                        type: Qn.recommendationsSearch,
                        searchQuery: t,
                        targetUrl: n,
                        linkToSearchCatalog: r,
                        originalUrl: o,
                        products: i
                    };
                    Object.assign(e.responseData, s)
                }
                ,
                o._getSearchCatalogLink = function(e) {
                    let t = encodeURIComponent(e.replace(/<\/?[^>]+>/gi, "").trim());
                    return `${wb.urlHelper.xSearchBase}?search=${t}`
                }
                ,
                o._loadGoods = async function(e) {
                    try {
                        const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e)}`
                          , n = await WbSpaModel.prototype.$analitic.getRecomendationsSplitterHeaders()
                          , r = await this.$httpClient.fetchBasicJSON(t, {
                            credentials: "omit",
                            headers: n
                        }, {
                            timeout: 5e3
                        });
                        if (!((null == r ? void 0 : r.length) > 0))
                            return null;
                        const o = await wb.xnm.getCatalogCards(r, !1, !1);
                        return r.reduce(( (e, t) => {
                            var n;
                            return null !== (n = o[t]) && void 0 !== n && n.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(o[t])),
                            e
                        }
                        ), [])
                    } catch (e) {
                        return null
                    }
                }
                ,
                t = e,
                (n = [{
                    key: "$httpClient",
                    get: function() {
                        return WbSpaModel.prototype.$httpClient
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$user",
                    get: function() {
                        return WbSpaModel.prototype.$user
                    }
                }]) && Fr(t.prototype, n),
                r && Fr(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            function Hr(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, zr(r.key), r)
                }
            }
            function zr(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const qr = function() {
                function e() {}
                var t, n, r, o = e.prototype;
                return o.onActionExecuting = async function(e, t, n) {
                    var r, o;
                    this.goods = this.type = this.forproduct = this.result = null,
                    await this.$moduleLoader.loadServiceAsync("recommendationsCatalogService");
                    const i = this.$router.queryParams.get("type")
                      , s = this.$router.queryParams.get("forproduct")
                      , a = this.$services.recommendationsCatalogService
                      , l = a.getType(i)
                      , c = await a.getRecommendations(l.id, s);
                    let u;
                    if (null != c && null !== (r = c.goods) && void 0 !== r && r.length ? u = c.goods : null != c && null !== (o = c.nms) && void 0 !== o && o.length && (u = await this._loadGoods(c.nms)),
                    !(Array.isArray(u) && u.length > 0))
                        return n.redirected = !0,
                        void this.$router.moveTo404Async();
                    this.type = l,
                    this.goods = u,
                    this.result = c,
                    this.forproduct = s
                }
                ,
                o.onActionExecuted = async function(e) {
                    var t, n, r, o;
                    e.responseData || (e.responseData = {});
                    const {type: i, goods: s, result: a, forproduct: l} = this
                      , c = {
                        type: i.id,
                        targetInfo: {
                            targetUrl: i.targetUrl
                        },
                        products: s,
                        statistic: {
                            type: i.id,
                            source: null == a ? void 0 : a.source,
                            recommendationsCount: null !== (t = null !== (n = null == a || null === (r = a.goods) || void 0 === r ? void 0 : r.length) && void 0 !== n ? n : null == a || null === (o = a.nms) || void 0 === o ? void 0 : o.length) && void 0 !== t ? t : 0,
                            productsCount: s.length,
                            parentProduct: l
                        },
                        nmId: l,
                        title: i.title
                    };
                    Object.assign(e.responseData, c)
                }
                ,
                o._loadGoods = async function(e) {
                    try {
                        const t = await wb.xnm.getCatalogCards(e, !1, !1);
                        return e.reduce(( (e, n) => {
                            var r;
                            return null !== (r = t[n]) && void 0 !== r && r.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),
                            e
                        }
                        ), [])
                    } catch (e) {
                        return []
                    }
                }
                ,
                t = e,
                (n = [{
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }]) && Hr(t.prototype, n),
                r && Hr(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            function Vr(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Gr(r.key), r)
                }
            }
            function Gr(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Jr = function() {
                function e() {}
                var t, n, r, o = e.prototype;
                return o.onActionExecuted = async function(e) {
                    e.responseData || (e.responseData = {});
                    const t = await this._loadNms();
                    if (0 == t.length)
                        return this.$router.moveTo404Async();
                    const n = await this._loadGoods(t);
                    if (0 == n.length)
                        return this.$router.moveTo404Async();
                    const r = {
                        title: "Вы смотрели",
                        products: n,
                        type: "recent",
                        targetInfo: {
                            targetUrl: "RG"
                        },
                        statistic: {
                            recommendationsCount: t.length,
                            productsCount: n.length
                        }
                    };
                    Object.assign(e.responseData, r)
                }
                ,
                o._loadNms = async function() {
                    var e, t;
                    let n = null !== (e = null === (t = this.$recentViews.get()) || void 0 === t ? void 0 : t.nm) && void 0 !== e ? e : [];
                    try {
                        var r, o;
                        const e = await this.$httpClient.fetchBasicJSON("/webapi/goods/visited-nm", {
                            method: "POST",
                            body: null
                        }, {
                            timeout: 2e3
                        });
                        (null == e || null === (r = e.value) || void 0 === r || null === (o = r.nmsArr) || void 0 === o ? void 0 : o.length) > 0 && (n = e.value.nmsArr)
                    } catch (e) {
                        console.error(e)
                    }
                    return n
                }
                ,
                o._loadGoods = async function(e) {
                    try {
                        const t = await wb.xnm.getCatalogCards(e, !0, !0);
                        return e.reduce(( (e, n) => {
                            var r;
                            return null !== (r = t[n]) && void 0 !== r && r.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),
                            e
                        }
                        ), [])
                    } catch (e) {
                        return []
                    }
                }
                ,
                t = e,
                (n = [{
                    key: "$recentViews",
                    get: function() {
                        return WbSpaModel.prototype.$recentViews
                    }
                }, {
                    key: "$httpClient",
                    get: function() {
                        return WbSpaModel.prototype.$httpClient
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }]) && Vr(t.prototype, n),
                r && Vr(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const Qr = function() {
                function e(e) {
                    this.defaultValue = e
                }
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    n.defaultValue = this.defaultValue
                }
                ,
                e
            }();
            function Kr(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Xr(r.key), r)
                }
            }
            function Xr(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const Yr = function() {
                function e() {}
                var t, n, r;
                return e.prototype.onActionExecuting = async function(e, t, n) {
                    const {userInfo: r} = await this.$services.userData.getUserDataAsync();
                    r.isAuthenticated || (n.redirected = !0,
                    this.$router.moveToSignIn({
                        query: {
                            returnUrl: window.location.href
                        }
                    }, !0))
                }
                ,
                t = e,
                (n = [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }]) && Kr(t.prototype, n),
                r && Kr(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const Zr = function() {
                function e() {
                    this.bannersTask = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    this.bannersTask = null,
                    n.cancelRequest = !0
                }
                ,
                t.onActionExecuting = async function(e) {
                    this.bannersTask = WbSpaModel.prototype.$services.bannersService.getPromoBanners()
                }
                ,
                t.onActionExecuted = function(e) {
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, {
                        bannersTask: this.bannersTask
                    })
                }
                ,
                e
            }();
            const eo = function() {
                function e() {}
                return e.prototype.onActionExecuting = async function() {
                    WbSpaModel.prototype.$moduleLoader.loadModuleAsync("spaWbxAuthController")
                }
                ,
                e
            }();
            const to = function() {
                function e() {}
                return e.prototype.onBeforeActionExecuting = async function(e, t) {
                    const n = WbSpaModel.prototype.$services.cartService.publicBasketApiUrl;
                    t.credentials = "include",
                    e.host = n.replace("//", "")
                }
                ,
                e
            }();
            const no = function() {
                function e() {}
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    t.body || (t.body = new URLSearchParams),
                    t.body.append("currency", WbSpaModel.prototype.$user.getCurrency())
                }
                ,
                e
            }();
            function ro(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, oo(r.key), r)
                }
            }
            function oo(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const io = function() {
                function e() {}
                var t, n, r;
                return e.prototype.onActionExecuting = async function(e, t, n) {
                    if (this.$router.userIsAuth && WbSpaModel.prototype.$auth.jwt) {
                        var r;
                        const e = null !== (r = this.$router.queryParams.get("ReturnUrl") || this.$router.queryParams.get("returnUrl")) && void 0 !== r ? r : "/lk";
                        n.redirected = !0,
                        this.$router.moveTo(e)
                    }
                }
                ,
                t = e,
                (n = [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }]) && ro(t.prototype, n),
                r && ro(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            const so = function() {
                function e() {}
                var t = e.prototype;
                return t.onActionExecuting = async function(e, t) {
                    if (!(e.searchParams.get("redirect_uri") && e.searchParams.get("client_id") && e.searchParams.get("scope") && e.searchParams.get("code_challenge") && (e => {
                        const t = e.searchParams.get("redirect_uri");
                        return /^((http|https):\/\/)/.test(t)
                    }
                    )(e)))
                        throw new NotFoundError;
                    WbSpaModel.prototype.$auth.isAuth ? this.getSavedOptionsTask = WbSpaModel.prototype.$services.apiUserStorage.getData([{
                        path: "wb_oauth_saved_options"
                    }], {
                        timeout: 1200
                    }) : window.location.replace($.views.helpers.urlSignIn(window.location.pathname + window.location.search))
                }
                ,
                t.onActionExecuted = async function(e) {
                    if (!WbSpaModel.prototype.$auth.isAuth)
                        return;
                    const t = await this.getSavedOptionsTask;
                    if (t) {
                        if (null != t && t.length)
                            try {
                                return void (e.responseData = JSON.parse(WbSpaModel.prototype.$helper.base64.decode(t[0].file)))
                            } catch (e) {}
                        e.responseData = []
                    }
                }
                ,
                e
            }()
              , ao = new Ln
              , lo = new Un
              , co = new jr
              , uo = new Qr({
                isNetworkError: !0
            })
              , po = new Yr;
            const ho = function() {
                function e() {
                    const e = new Map;
                    e.set("SpaHomeData", {
                        pipelines: [new Dr]
                    }),
                    e.set("SpaPromotionsData", {
                        pipelines: [new Zr]
                    }),
                    e.set("SpaSignInData", {
                        pipelines: [new io, uo, new eo, new Ar(1e3)]
                    }),
                    e.set("SpaRefundData", {
                        pipelines: [uo]
                    }),
                    e.set("SpaProductCardData", {
                        pipelines: [lo, new zn]
                    }),
                    e.set("SpaGetGroupedDeliveries", {
                        pipelines: [po, lo, new Ar(1e3)],
                        fallback: () => ({
                            options: {}
                        })
                    }),
                    e.set("SpaHeadArchivePositions", {
                        pipelines: [po, uo],
                        fallback: () => ({
                            limit: 150,
                            filters: {
                                type: "all",
                                status: 0
                            }
                        })
                    }),
                    e.set("SpaBasketData", {
                        maxTriesCount: 0,
                        pipelines: [uo, ao, new Wn, new Ar(4e3)]
                    }),
                    e.set("SpaEmailedConfirmData", {
                        pipelines: [new Fn, new Un(( () => {
                            const {targetRoute: e} = WbSpaModel.prototype.$router;
                            return "SpaConfirmEmailedEntrypoint" != e && "SpaChangeEmailEntrypoint" != e
                        }
                        ))]
                    }),
                    e.set("SpaAccountData", {
                        pipelines: [po, ao, new Hn, uo],
                        fallback: () => ({
                            broken: !0,
                            data: {
                                subscriptions: {
                                    subscribtionsByType: {}
                                },
                                discountTable: {},
                                mySafety: {},
                                deleteAccountSettings: {},
                                settings: {},
                                calendarSettings: {}
                            }
                        })
                    }),
                    e.set("SpaWalletPurchaseData", {
                        pipelines: [po, ao, uo, new no]
                    }),
                    e.set("SpaCustomerReceiptData", {
                        pipelines: [ao, uo]
                    }),
                    e.set("SpaPersonalCabinetData", {
                        pipelines: [lo, ao, po]
                    }),
                    e.set("SpaTravelLkData", {
                        pipelines: [lo]
                    }),
                    e.set("SpaProfileData", {
                        pipelines: [ao]
                    }),
                    e.set("SpaBasketBuyItNowData", {
                        maxTriesCount: 0,
                        pipelines: [ao, new Wn, uo, new Ar(3e3)]
                    }),
                    e.set("SpaSearchData", {
                        pipelines: [new pr]
                    }),
                    e.set("SpaRecommendationsSearchCatalogData", {
                        pipelines: [lo, new Wr]
                    }),
                    e.set("SpaRecommendationsCatalogData", {
                        pipelines: [lo, new qr]
                    }),
                    e.set("SpaRecentCatalogData", {
                        pipelines: [lo, new Jr]
                    }),
                    e.set("SpaWlArrivedData", {
                        pipelines: [lo, new Gn, po]
                    }),
                    e.set("SpaCatalogData", {
                        pipelines: [new nr, new sr, new cr]
                    }),
                    e.set("SpaPromotionsCatalogData", {
                        pipelines: [new fr]
                    }),
                    e.set("SpaSellerCatalogData", {
                        pipelines: [new Tr]
                    }),
                    e.set("SpaBrandsData", {
                        pipelines: [new Mr]
                    }),
                    e.set("SpaBrandsPreviewData", {
                        pipelines: [new Mr(!0)]
                    }),
                    e.set("SpaFavoritesData", {
                        pipelines: [lo, new Jn, po]
                    }),
                    e.set("SpaProductCardOtherSellersData", {
                        pipelines: [lo, ao, co, new Er]
                    }),
                    e.set("SpaProductCardFeedbacksData", {
                        pipelines: [lo, ao, co, new Or]
                    }),
                    e.set("SpaProductCardQuestionsData", {
                        pipelines: [lo, ao, co, new xr]
                    }),
                    e.set("SpaSearchByImageData", {
                        pipelines: [lo, new Ur]
                    }),
                    e.set("SpaOrderConfirmedData", {
                        fallback: e => {
                            if (e) {
                                const t = e.url.searchParams.get("orderId");
                                if (t) {
                                    const e = sessionStorage.getItem(`confirmed_order_${t}`);
                                    if (e)
                                        return {
                                            data: JSON.parse(e)
                                        }
                                }
                            }
                            return {
                                data: {
                                    broken: !0,
                                    order: {}
                                }
                            }
                        }
                        ,
                        pipelines: [ao, new to]
                    }),
                    e.set("SpaOrderThankYouEntrypoint", {
                        fallback: () => ({})
                    }),
                    e.set("SpaPaymentFailData", {
                        fallback: () => ({})
                    }),
                    e.set("SpaFavoriteBrandsData", {
                        pipelines: [po, uo]
                    }),
                    e.set("SpaHistoryRefundsData", {
                        pipelines: [po, uo]
                    }),
                    e.set("SpaMyCommunicationsData", {
                        pipelines: [po, uo]
                    }),
                    e.set("SpaMyClaimsData", {
                        pipelines: [po, uo]
                    }),
                    e.set("SpaMyFeedbacksData", {
                        pipelines: [po, uo]
                    }),
                    e.set("SpaNotificationsData", {
                        pipelines: [po, uo]
                    }),
                    e.set("SpaOAuthSignInData", {
                        pipelines: [lo, new so, ao]
                    }),
                    e.set("SubscriptionPageData", {
                        pipelines: [lo, po, ao]
                    }),
                    e.set("ServicePagesData", {
                        pipelines: [new Nn]
                    }),
                    this.map = e
                }
                return e.prototype.extend = function(e) {
                    return this.map.get(e)
                }
                ,
                e
            }();
            function mo(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, fo(r.key), r)
                }
            }
            function fo(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            let yo = new o.A;
            const go = new ho
              , vo = new ye;
            let bo, wo, So, _o, Co, Io, ko, Mo, $o = null, Po = null;
            const To = Object.freeze({
                mobile: "m",
                desktop: "d"
            });
            let Do = function() {
                function e() {}
                var t, n, o, s = e.prototype;
                return s.asObservable = function(e) {
                    return $.observable(e)
                }
                ,
                s.toggleProperty = function(e) {
                    this.asObservable(this).setProperty(e, !this[e])
                }
                ,
                s.$localize = function(e) {
                    var t;
                    return (null === (t = wo[yo.current]) || void 0 === t ? void 0 : t[e]) || e
                }
                ,
                s.$moveToAnchor = function(...e) {
                    const t = arguments[0]
                      , n = e.find((e => e instanceof Event || e instanceof jQuery.Event))
                      , r = arguments[1]instanceof Event || arguments[1]instanceof jQuery.Event || arguments[1]
                      , o = !(arguments[2]instanceof Event || arguments[2]instanceof jQuery.Event) && arguments[2]
                      , i = arguments[3]instanceof Event || arguments[3]instanceof jQuery.Event || !arguments[3] ? 0 : arguments[3];
                    null == n || n.preventDefault(),
                    null == n || n.stopPropagation(),
                    null == n || n.stopImmediatePropagation();
                    const s = document.getElementById(t);
                    if (null == s)
                        return void console.warn("anchor element doesnt exist");
                    const a = {
                        top: 0 + i
                    };
                    let l = this.$helper.isElementInViewport(s, !0, a);
                    function c() {
                        "scrollBehavior"in document.documentElement.style ? window.scrollTo({
                            top: window.pageYOffset + s.getBoundingClientRect().top - i,
                            left: 0,
                            behavior: r ? "smooth" : "auto"
                        }) : window.scrollTo(0, window.pageYOffset + s.getBoundingClientRect().top - i)
                    }
                    if (c(),
                    o) {
                        const e = setInterval(( () => {
                            l = this.$helper.isElementInViewport(s, !0, a),
                            l ? clearInterval(e) : c()
                        }
                        ), 500)
                    }
                }
                ,
                s.$void = function() {}
                ,
                s.$getCurrentXInfoAsync = function() {
                    return Co.getXinfo()
                }
                ,
                s.$getCurrentXInfoWithClustersAndVectorsAsync = function(e) {
                    return Co.getXinfoWithClustersAndVectors(e)
                }
                ,
                s.$getUserGender = async function() {
                    const {userInfo: e} = await this.$services.userData.getUserDataAsync();
                    return e.genderE
                }
                ,
                s.$generateGuid = function() {
                    const e = () => Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
                    return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e()
                }
                ,
                s.$getLoadingError = async function() {
                    if (Mo)
                        return Mo;
                    try {
                        const e = await bo.loadModuleAsync("loadingError");
                        return Mo = new e,
                        Mo
                    } catch (e) {
                        return null
                    }
                }
                ,
                s.$getService = function(e) {
                    return bo.loadServiceAsSingletonAsync(e)
                }
                ,
                s.$checkLotteryAvailabilityAsync = async function() {
                    var e, t, n, r, o;
                    if ("ru" != wb.settings.currentLocale)
                        return !1;
                    const i = null !== (e = null === (t = wb.global) || void 0 === t || null === (n = t.settings) || void 0 === n || null === (r = n.variables.lotteryAccessSettings) || void 0 === r || null === (o = r.permitted) || void 0 === o ? void 0 : o.split(";")) && void 0 !== e ? e : [];
                    if (i.length) {
                        const [e,{userInfo: t}] = await Promise.all([this.$user.getShardAsync(), this.$services.userData.getUserDataAsync()]);
                        return t.isAuthenticated && i.some((t => {
                            const [n,r] = t.split("&").map((e => parseInt(e)));
                            return e >= n && e <= r
                        }
                        ))
                    }
                    return !0
                }
                ,
                s.$isWbxOrderEnabled = function(e) {
                    var t, n, r;
                    return !(null === (t = this.$auth.jwtData) || void 0 === t || !t.user) && (!!e.isWbxOrderEnabled || !(null === (n = wb.global.settings) || void 0 === n || null === (r = n.variables) || void 0 === r || !r.wbxOrderUsersRange) && this._checkByRange(wb.global.settings.variables.wbxOrderUsersRange))
                }
                ,
                s.$isWbxOrderCancelEnabled = function(e) {
                    var t, n, r;
                    return !(null === (t = this.$auth.jwtData) || void 0 === t || !t.user) && (!!e.wbxCanCancel || !(null === (n = wb.global.settings) || void 0 === n || null === (r = n.variables) || void 0 === r || !r.wbxOrderCancelUsersRange) && this._checkByRange(wb.global.settings.variables.wbxOrderCancelUsersRange))
                }
                ,
                s.$isUserGradeEnabled = function() {
                    var e, t, n;
                    return !(null === (e = this.$auth.jwtData) || void 0 === e || !e.user || null === (t = wb.global.settings) || void 0 === t || null === (n = t.variables) || void 0 === n || !n.userGradeUsersRange) && this._checkByRange(wb.global.settings.variables.userGradeUsersRange)
                }
                ,
                s.$isUserPremiumEnabled = function() {
                    var e, t, n, r, o;
                    if (null === (e = this.$auth.jwtData) || void 0 === e || !e.user || "ru" !== wb.settings.currentLocale)
                        return !1;
                    const i = this.$services.userData.getMaskedInfo();
                    return ((null === (t = wb.global.settings) || void 0 === t || null === (n = t.variables) || void 0 === n ? void 0 : n.usersRangeForPremiumSubs) && this._checkByRange(wb.global.settings.variables.usersRangeForPremiumSubs) || (null == i ? void 0 : i.isEmp)) && (null === (r = this.$user.getUserGradeFromCache()) || void 0 === r ? void 0 : r.premiumIsAvailable) && ((null == i ? void 0 : i.phone.startsWith("79")) || (null === (o = this.$user.getUserGradeFromCache().subscription_features) || void 0 === o ? void 0 : o.length) > 0)
                }
                ,
                s._checkByRange = function(e) {
                    var t;
                    const n = (null !== (t = null == e ? void 0 : e.split(";")) && void 0 !== t ? t : []).map((e => parseInt(e)));
                    if (n.length < 2)
                        return !1;
                    const r = isNaN(this.$auth.jwtData.user) ? Math.abs(this.$auth.jwtData.user.hashCode()) : parseInt(this.$auth.jwtData.user);
                    return r > n[0] && r <= n[1]
                }
                ,
                s.$isRangeEnabledFor = function(e) {
                    var t;
                    return !(null === (t = this.$auth.jwtData) || void 0 === t || !t.user || !e) && this._checkByRange(e)
                }
                ,
                s.$useCatalogReturnCost = function() {
                    var e, t, n, r;
                    return !(null === (e = wb.global.settings) || void 0 === e || null === (t = e.variables) || void 0 === t || !t.catalogReturnCostLocales) && (null === (n = wb.global.settings) || void 0 === n || null === (r = n.variables) || void 0 === r ? void 0 : r.catalogReturnCostLocales.includes(this.$user.getLocale()))
                }
                ,
                s.$getService = function(e) {
                    return bo.loadServiceAsSingletonAsync(e).then(( () => ko[e]))
                }
                ,
                t = e,
                (n = [{
                    key: "$userEnv",
                    get: function() {
                        return Eo
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return yo
                    }
                }, {
                    key: "$helper",
                    get: function() {
                        return r
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return bo
                    }
                }, {
                    key: "$verificationTokenHelper",
                    get: function() {
                        return ae
                    }
                }, {
                    key: "$menuLk",
                    get: function() {
                        return null == Po && (Po = (new i).init()),
                        Po
                    }
                }, {
                    key: "$localziation",
                    get: function() {
                        return wo
                    },
                    set: function(e) {
                        return wo = e,
                        !0
                    }
                }, {
                    key: "$httpClient",
                    get: function() {
                        return l
                    }
                }, {
                    key: "$auth",
                    get: function() {
                        return g
                    }
                }, {
                    key: "$wbxHttpClient",
                    get: function() {
                        return c
                    }
                }, {
                    key: "$observable",
                    get: function() {
                        return $.observable(this)
                    }
                }, {
                    key: "$storageHelper",
                    get: function() {
                        return he
                    }
                }, {
                    key: "$seoHelper",
                    get: function() {
                        return se
                    }
                }, {
                    key: "$stat",
                    get: function() {
                        return wb.stat
                    }
                }, {
                    key: "$user",
                    get: function() {
                        return Co
                    }
                }, {
                    key: "$geoLocation",
                    get: function() {
                        return Io
                    }
                }, {
                    key: "$adult",
                    get: function() {
                        return So
                    }
                }, {
                    key: "$observerHelper",
                    get: function() {
                        return _o
                    }
                }, {
                    key: "$analitic",
                    get: function() {
                        return wb.analitics
                    }
                }, {
                    key: "$productCardPopup",
                    get: function() {
                        var e;
                        return $o = null !== (e = $o) && void 0 !== e ? e : new oe,
                        $o
                    }
                }, {
                    key: "$isDesktop",
                    get: function() {
                        return To.desktop == wb.settings.displayMode
                    }
                }, {
                    key: "$eventBus",
                    get: function() {
                        return ie
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return ko
                    }
                }, {
                    key: "$routeExtensions",
                    get: function() {
                        return go
                    }
                }, {
                    key: "$apiSupport",
                    get: function() {
                        return vo
                    }
                }, {
                    key: "$recentViews",
                    get: function() {
                        return ge
                    }
                }, {
                    key: "$promotionsHelper",
                    get: function() {
                        return Me
                    }
                }]) && mo(t.prototype, n),
                o && mo(t, o),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            Object.defineProperties(window, {
                WbSpaModel: {
                    value: Do
                }
            }),
            Object.setPrototypeOf(o.A.prototype, Do.prototype),
            Object.setPrototypeOf(me.A.prototype, Do.prototype),
            Object.setPrototypeOf(fe.prototype, Do.prototype),
            Object.setPrototypeOf(X.prototype, Do.prototype),
            Object.setPrototypeOf(ee.prototype, Do.prototype),
            Object.setPrototypeOf(te.prototype, Do.prototype),
            Object.setPrototypeOf(oe.prototype, Do.prototype),
            Object.setPrototypeOf(Object.getPrototypeOf(se), Do.prototype),
            Object.setPrototypeOf(i.prototype, Do.prototype),
            Object.setPrototypeOf(ho.prototype, Do.prototype),
            Object.setPrototypeOf(Me.prototype, Do.prototype),
            Object.setPrototypeOf(Tt.prototype, Do.prototype),
            Object.setPrototypeOf(At.A.prototype, Do.prototype),
            Object.setPrototypeOf(Wt.prototype, Do.prototype),
            Object.setPrototypeOf(Ze.prototype, Do.prototype),
            Object.setPrototypeOf(et.prototype, Do.prototype),
            Object.setPrototypeOf(nt.prototype, Do.prototype),
            Object.setPrototypeOf(gn.prototype, Do.prototype),
            Object.setPrototypeOf(Mn.prototype, Do.prototype),
            Object.setPrototypeOf(Pn.prototype, Do.prototype),
            Object.setPrototypeOf(Kt.prototype, Do.prototype),
            Object.setPrototypeOf(An.prototype, Do.prototype),
            Object.setPrototypeOf(jn.prototype, Do.prototype),
            bo = new X(Do.prototype).init(),
            So = new ee,
            Co = new me.A,
            Io = new fe,
            _o = new te;
            const Ao = Do;
            wb.utils = Object.assign(wb.utils, r),
            wb.user = Co,
            wb.adult = So;
            const Eo = {
                currency: wb.user.getCurrency()
            };
            ko = {
                storeService: new Wt,
                userAddressService: new At.A,
                cartService: new Tt,
                favsService: new Ze,
                userData: new et,
                notifications: new nt,
                productCard: new Kt,
                bannersService: new gn,
                apiUserStorage: new Mn,
                sessionService: new Pn,
                pager: Tn,
                retryFetchService: new An,
                splitterService: new jn
            },
            Object.keys(ko).forEach((e => ko[e].init && ko[e].init())),
            localStorage.removeItem("suppliersInfo"),
            Object.keys(ko).forEach((e => ko[e].init && ko[e].init()));
            var Oo = n(86747);
            const Bo = function() {
                function e() {
                    this.fullMenu = null,
                    this.menuByUrl = new Map,
                    this.menuById = new Map,
                    this.isInited = !1,
                    this.menuIdEnum = this._menuIdEnum()
                }
                var t = e.prototype;
                return t._menuIdEnum = function() {
                    return {
                        sport: 784,
                        monocity: 61042,
                        forAdults: 62057,
                        promotion: 2192
                    }
                }
                ,
                t.initMenu = async function() {
                    const e = `main-menu-${WbSpaModel.prototype.$user.getLocale()}-ru-v3.json`;
                    if (this.fullMenu = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e, 1e4),
                    this.fullMenu) {
                        var t;
                        const e = null === (t = WbSpaModel.prototype.$user.getUserGradeFromCache()) || void 0 === t ? void 0 : t.wbClub
                          , n = this.fullMenu.findIndex((e => 1234 === e.id));
                        WbSpaModel.prototype.$isUserPremiumEnabled() && this.fullMenu.splice(n >= 0 ? n : 0, 0, {
                            id: 1122,
                            name: "Скидки WB Клуба",
                            url: e && "subscribed" === e ? "/promotions/klubnye-skidki" : "",
                            locked: !e || "subscribed" !== e
                        }),
                        "ru" !== wb.settings.currentLocale && n >= 0 && this.fullMenu.splice(n, 1),
                        this._createMenuMap();
                        const r = this.fullMenu.filter((e => e.dynamic)).map((e => this.loadDynamicBranch(e)));
                        await Promise.all(r),
                        this.isInited = !0
                    }
                    return this
                }
                ,
                t.loadDynamicBranch = async function(e) {
                    const t = `menu${e.url}.json`
                      , n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t, 1e4);
                    n && (n.forEach((t => this._setNode(t, e.id))),
                    delete e.dynamic,
                    e.childs = n,
                    e.isDenyLink = !0)
                }
                ,
                t.getCurrentMenuItem = function(e) {
                    if (!e)
                        return null;
                    let t = e.pathname.replace("catalogdata", "catalog");
                    return this.menuByUrl.get(t)
                }
                ,
                t.getSitePathItems = function(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url,
                        analytic: ["CCC", null, null, e.id]
                    });
                    let n = this.menuById.get(e.id).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url,
                            analytic: ["CCC", null, null, n]
                        }),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                t.getCatalogMenu = function(e) {
                    const t = [];
                    if (e && 0 !== e.length)
                        if (1 === e.length) {
                            var n, r;
                            const o = {
                                name: "",
                                link: ""
                            }
                              , i = null !== (n = null === (r = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === r ? void 0 : r.map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url,
                                    isDenyLink: e.isDenyLink
                                },
                                children: []
                            })))) && void 0 !== n ? n : [];
                            t.push({
                                node: o,
                                children: i
                            })
                        } else {
                            var o, i;
                            const n = this.menuByUrl.get(e[1].pageUrl)
                              , r = {
                                id: n.id,
                                isOpen: !0,
                                lastSelected: e[e.length - 1].id === n.id,
                                link: n.url,
                                name: n.name
                            }
                              , s = r.lastSelected ? null !== (o = null === (i = n.childs) || void 0 === i ? void 0 : i.map((e => {
                                var t;
                                return {
                                    node: {
                                        id: e.id,
                                        name: e.name,
                                        link: e.url,
                                        isDenyLink: e.isDenyLink
                                    },
                                    children: null === (t = e.childs) || void 0 === t ? void 0 : t.map((e => ({
                                        node: {
                                            id: e.id,
                                            name: e.name,
                                            link: e.url
                                        },
                                        children: []
                                    })))
                                }
                            }
                            ))) && void 0 !== o ? o : [] : this.getCatalogMenu(e.slice(1));
                            t.push({
                                node: r,
                                children: s
                            })
                        }
                    else
                        t.push({
                            node: {
                                name: "",
                                link: ""
                            },
                            children: []
                        });
                    return t
                }
                ,
                t.getCatalogDenyMenu = function(e, t) {
                    var n, r, o, i, s, a;
                    if (!e)
                        return;
                    if (e.landing || 1 === t.length)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [],
                            parent: {},
                            parents: [],
                            tagsMenu: null !== (s = null === (a = e.childs) || void 0 === a ? void 0 : a.map((e => ({
                                name: e.name,
                                link: e.url
                            })))) && void 0 !== s ? s : []
                        };
                    const l = t[t.length - 2]
                      , c = t.slice(1).map((e => ({
                        name: e.name,
                        link: e.pageUrl
                    })));
                    c[c.length - 1].lastSelected = !0;
                    const u = null === (n = e.childs) || void 0 === n ? void 0 : n.map((e => ({
                        name: e.name,
                        link: e.url,
                        anc: !0
                    })));
                    if ((null === (r = e.childs) || void 0 === r ? void 0 : r.length) > 0)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [...c, ...u],
                            parent: {
                                name: l.name,
                                link: l.pageUrl
                            },
                            parents: this.getParentsForDeny(e.id),
                            tagsMenu: null != u ? u : []
                        };
                    const d = this.menuByUrl.get(l.pageUrl);
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !0
                        },
                        sideMenu: c,
                        parent: {
                            name: l.name,
                            link: l.pageUrl
                        },
                        parents: this.getParentsForDeny(e.id),
                        tagsMenu: null !== (o = null === (i = d.childs) || void 0 === i ? void 0 : i.map((e => ({
                            name: e.name,
                            link: e.url
                        })))) && void 0 !== o ? o : []
                    }
                }
                ,
                t.getRootNode = function(e) {
                    let t = e;
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return t
                }
                ,
                t.hasItem = function(e) {
                    return !!e && this.menuById.has(e)
                }
                ,
                t.getCatalogLink = function(e) {
                    return this.menuById.get(e).url
                }
                ,
                t.getParents = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push(e.name),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                t.getParentsForDeny = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            name: e.name,
                            link: e.url
                        }),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                t.tryGetMenuItemFromDynamic = async function(e, t) {
                    if (!e) {
                        const e = t.pathname.split("/").length - 2;
                        let n = new URL(t);
                        for (let r = 0; r < e; r++) {
                            n.pathname = n.pathname.substring(0, n.pathname.lastIndexOf("/"));
                            const e = this.getCurrentMenuItem(n);
                            if (null != e && e.dynamic)
                                return await this.loadDynamicBranch(e),
                                this.getCurrentMenuItem(t);
                            if (e)
                                return null
                        }
                        return null
                    }
                    if (null != e && e.dynamic)
                        return await this.loadDynamicBranch(e),
                        e
                }
                ,
                t._createMenuMap = function() {
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                ,
                t._setNode = function(e, t) {
                    var n;
                    t && (e.parentId = t),
                    this.menuByUrl.has(e.url) && !e.shard || (this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, e)),
                    null === (n = e.childs) || void 0 === n || n.forEach((t => this._setNode(t, e.id)))
                }
                ,
                t._prepareDropdownMenu = function(e, t=null) {
                    const n = {
                        parentItem: t
                    };
                    for (let t in e)
                        e.hasOwnProperty(t) && (Array.isArray(e[t]) ? n[t] = e[t].map((e => this._prepareDropdownMenu(e, n))) : n[t] = e[t]);
                    return n
                }
                ,
                e
            }();
            n(16158),
            n(41279),
            n(54797),
            n(2680),
            n(80045),
            n(29017);
            wb.namespace("spa", function() {
                let e = {}
                  , t = new Oo.A;
                const n = new Ao
                  , r = {};
                async function o() {
                    var e, t, n, r;
                    if (!(null !== (e = wb.global.settings) && void 0 !== e && null !== (t = e.variables) && void 0 !== t && t.resourseStatSettings && "PerformanceObserver"in window && null !== (n = PerformanceObserver) && void 0 !== n && null !== (r = n.supportedEntryTypes) && void 0 !== r && r.includes("resource")))
                        return;
                    const o = await wb.user.getShardAsync();
                    for (const e in wb.global.settings.variables.resourseStatSettings) {
                        const [t,n] = wb.global.settings.variables.resourseStatSettings[e].split(";")
                          , r = parseInt(n)
                          , [s,a] = t.split("-")
                          , l = parseInt(s)
                          , c = parseInt(a);
                        if (o >= l && o <= c && r > 0) {
                            let t = 0;
                            new PerformanceObserver((async n => {
                                if (n.getEntries) {
                                    const u = n.getEntries();
                                    for (const n of u.filter((t => t.initiatorType === e))) {
                                        if (t % r == 0 && !i(n)) {
                                            var o, s, a, l, c;
                                            const e = {
                                                url: n.name,
                                                ok: n.responseStatus > 300 ? 1 : 0,
                                                error: n.responseStatus >= 300 ? n.responseStatus : 0,
                                                dns: parseInt(n.domainLookupEnd - n.domainLookupStart),
                                                connect: parseInt(n.connectEnd - n.connectStart),
                                                ttfb: parseInt(n.responseStart - n.requestStart),
                                                load: n.responseStart > 0 ? parseInt(n.responseEnd - n.fetchStart) : 0,
                                                full: parseInt(n.duration),
                                                cache: "HIT" === (null === (o = n.serverTiming) || void 0 === o || null === (s = o.find((e => "cache" === e.name))) || void 0 === s ? void 0 : s.description) ? 1 : 0,
                                                srv: null !== (a = null === (l = n.serverTiming) || void 0 === l || null === (c = l.find((e => "srv" === e.name))) || void 0 === c ? void 0 : c.description) && void 0 !== a ? a : "",
                                                size: n.transferSize
                                            };
                                            wb.analitics.sendEvent("performance_static_download", e)
                                        }
                                        t++
                                    }
                                }
                            }
                            )).observe({
                                type: "resource",
                                buffered: !0
                            });
                            let n = 0;
                            new PerformanceObserver((e => {
                                if (e.getEntries) {
                                    const t = e.getEntries();
                                    for (const e of t.filter((e => "img-load-error" === e.name)))
                                        n % r == 0 && wb.analitics.sendEvent("performance_static_download", {
                                            url: e.detail.url,
                                            ok: 0
                                        }),
                                        n++
                                }
                            }
                            )).observe({
                                type: "mark",
                                buffered: !0
                            })
                        }
                    }
                }
                function i(e) {
                    return !(e.transferSize > 0) && (e.decodedBodySize > 0 || e.duration < 3)
                }
                return $.views.loadTemplateAsync = async function(e, t="") {
                    if ($.templates[e])
                        return $.templates[e];
                    if (!r[e]) {
                        let i;
                        if (window._debug)
                            i = `${e}.json`;
                        else {
                            var o;
                            const r = n.$helper.currentCulture || "ru"
                              , s = `${e}-${wb.settings.currentLocale}-${r}.json`.toLowerCase()
                              , a = null === (o = n.$router.tmplHashes) || void 0 === o ? void 0 : o[s];
                            i = t ? `${e}-ru-${r}.${a}.json`.toLowerCase() : s.replace(".json", `.${a}.json`)
                        }
                        const s = t ? `${t}${i}` : $.views.converters.urlForJsTmpl(i);
                        r[e] = window._debug ? n.$httpClient.fetchBasicJSON(s) : n.$httpClient.fetchStaticV2(s)
                    }
                    try {
                        const t = await r[e]
                          , n = Object.keys(t);
                        return 1 === n.length ? ($.templates(e, t[n[0]]),
                        r[e] = null,
                        $.templates[e]) : ($.templates(t),
                        r[e])
                    } catch (t) {
                        throw r[e] = null,
                        t
                    }
                }
                ,
                $.views.loadWebApiTemplateAsync = async function(e) {
                    const t = `webapi_tmpl_${e}`;
                    if ($.templates[t])
                        return $.templates[t];
                    r[t] || (r[t] = n.$httpClient.fetchText(`webapi/htmltemplate/${e}`));
                    try {
                        const e = await r[t];
                        try {
                            const t = JSON.parse(e);
                            $.templates(t)
                        } catch (n) {
                            $.templates(t, e)
                        }
                        return r[t] = null,
                        $.templates[t]
                    } catch (e) {
                        throw r[t] = null,
                        e
                    }
                }
                ,
                $.views.loadTemplateDictionaryAsync = function(e) {
                    return $.views.loadTemplateAsync(e)
                }
                ,
                $.views.converters({
                    formatString: function() {
                        let[e,t,n,r] = arguments;
                        if ("string" != typeof e)
                            throw new Error("Template must be a string");
                        return n && (e = e.replace(/\[(\d+)\]/gm, "{$1}")),
                        r && (t = $.views.converters.encode(t)),
                        String.format.apply(null, [e, t])
                    },
                    dateFormat: function(e, t) {
                        return e.format(t)
                    }
                }),
                {
                    init: async function(e) {
                        var r;
                        const {router: i, seoHelper: s, menuLkHelper: a} = e;
                        Object.defineProperty(Ao, "appVersion", {
                            value: i.appVersion,
                            writable: !1
                        }),
                        n.$router.setData(i.routesDictionary, i.tmplHashes),
                        n.$moduleLoader.setModules(i.modules),
                        n.$moduleLoader.setServices(i.services);
                        const l = [];
                        if ("AbortController"in window || l.push(n.$moduleLoader.loadModuleAsync("abortControllerPolyfill", !0)),
                        "FormData"in window && "get"in (null === (r = FormData) || void 0 === r ? void 0 : r.prototype) || l.push(n.$moduleLoader.loadModuleAsync("formDataPolyfill", !0)),
                        "undefined" == typeof navigator || navigator.locks || l.push(n.$moduleLoader.loadModuleAsync("navigatorLocksPolyfill", !0)),
                        l.length > 0 && await Promise.all(l),
                        wb.displayModeSettings.init(),
                        n.$user.initUser(),
                        t.preInit(),
                        await wb.global.loadSettingAsync(),
                        wb.global.periodicBasketConfigUpdate(),
                        n.$seoHelper.init(s.items, s.updateUrl, s.defaultTitle),
                        n.$menuLk.setStatic(a),
                        t.init(),
                        wb.network.init(),
                        wb.analitics.getSplitInfo(),
                        WbSpaModel.prototype.$user.getBannersClusters(),
                        await n.$router.init(i.ssrModel),
                        -1 === document.location.hostname.indexOf("wildberries.ru") && -1 === document.location.hostname.indexOf("wildberries.kg") && -1 === document.location.hostname.indexOf("wildberries.am") && -1 === document.location.hostname.indexOf("wildberries.by") && "localhost" !== document.location.hostname)
                            return wb.spa.logError({
                                message: `fishing from ${document.location}`
                            }, {
                                referrer: wb.spa.getReferrer(),
                                cookie: document.cookie
                            }),
                            wb.popup.renderModalError("Вы находитесь на фишинговом сайте!"),
                            void (wb.spa = null);
                        document.body.addEventListener("load", (e => {
                            var t;
                            "IMG" === e.target.tagName && e.target.complete && (null === (t = e.target.closest(".img-plug")) || void 0 === t || t.classList.remove("img-plug--error"))
                        }
                        ), !0),
                        navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0 || document.body.addEventListener("error", (e => {
                            var t, n;
                            if (null !== (t = wb.global.settings) && void 0 !== t && null !== (n = t.switches) && void 0 !== n && n.enableErrorImagePlug && "IMG" === e.target.tagName && -1 === e.target.src.indexOf("/i/blank.gif")) {
                                var r;
                                const t = e.target.closest(".img-plug");
                                null == t || t.classList.add("img-plug--error"),
                                null == t || t.classList.remove("load"),
                                null === (r = performance) || void 0 === r || r.mark("img-load-error", {
                                    detail: {
                                        url: e.target.src
                                    }
                                })
                            }
                        }
                        ), !0),
                        setTimeout(o, 2e3),
                        setTimeout((function() {
                            WbSpaModel.prototype.$helper.loadJsAsync(wb.settings.scripts.performance)
                        }
                        ), 5e3)
                    },
                    registerViewModel: function(t) {
                        const r = Object.getPrototypeOf(t.prototype);
                        r === Object.prototype ? Object.setPrototypeOf(t.prototype, Ao.prototype) : Object.setPrototypeOf(r, Ao.prototype),
                        n.$router.getAppliedEntries().forEach((n => {
                            e[n] = t
                        }
                        ))
                    },
                    getViewModelByName: function(t) {
                        return e[t]
                    },
                    redirect: function(e, t, r=!1) {
                        n.$router.moveTo(e, t, !1, r)
                    },
                    setUserStatus: function({userIsAuth: e, userUid: t, userId: r}) {
                        $.observable(n.$router).setProperty({
                            userIsAuth: e,
                            userUid: t,
                            userId: r
                        }),
                        n.$eventBus.dispatchEvent(new CustomEvent(e ? "onUserAuth" : "onUserUnAuth")),
                        n.$services.favsService.setKey(e, t),
                        n.$services.userData.setKey(e, t),
                        n.$getService("orderService").then((e => e.startSync(n.$services.cartService.publicBasketApiUrl))),
                        n.$getService("wbxOrderService").then((e => e.startSync(n.$services.cartService.publicBasketApiUrl))),
                        e && (n.$getService("groupedDeliveriesService").then((e => e.init())),
                        "ru" !== wb.settings.currentLocale && n.$services.userData.migrateProfileFromGlobal())
                    },
                    refresh: function() {
                        n.$router.refresh()
                    },
                    getMainLayout: function() {
                        return t
                    },
                    getCatalogMenu: async function() {
                        return this._catalogMenuTask || (this._catalogMenuTask = new Promise((async (e, t) => {
                            const n = new Bo;
                            await n.initMenu(),
                            n.isInited ? e(n) : (t(),
                            this._catalogMenuTask = null)
                        }
                        ))),
                        this._catalogMenuTask
                    },
                    clearCatalogMenu: function() {
                        this._catalogMenuTask = null
                    },
                    getReferrer: function() {
                        return n.$router.referrer
                    },
                    logError: function(e, t=null, n=!1) {
                        try {
                            const r = {
                                msg: e.message
                            };
                            n && (r.stk = e.stack),
                            t && (r.data = t);
                            const o = "/webapi/logging/jserror"
                              , i = {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify(r)
                            };
                            WbSpaModel.prototype.$httpClient.fetch(o, i).catch(( () => {
                                WbSpaModel.prototype.$services.retryFetchService.saveRequest(o, i)
                            }
                            ))
                        } catch (e) {}
                    },
                    orderMetrics: function(e) {
                        try {
                            WbSpaModel.prototype.$httpClient.fetch(`/webapi/logging/orders/metrics?status=${e}`, {
                                method: "POST"
                            })
                        } catch (e) {}
                    },
                    signIn: function(e, t) {
                        n.$router.moveToSignIn(e, t)
                    },
                    afterSignOut: function() {
                        wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        }),
                        t.updateAfterLogin()
                    }
                }
            }()),
            wb.namespace("global", function() {
                const e = "user-settings"
                  , t = "global-settings-v2"
                  , n = "cdn-config"
                  , r = 18e4
                  , o = {
                    switches: {},
                    variables: {}
                };
                let i, s, a, l, c = [], u = !0, d = 200, p = 0;
                function h(e) {
                    if (!e || !WbSpaModel.appVersion)
                        return;
                    const t = e.split(".")
                      , n = WbSpaModel.appVersion.split(".");
                    if (t.length < 3 || n.length < 3)
                        return;
                    +((parseInt(n[0]) || 0) + ("000" + (parseInt(n[1]) || 0)).slice(-3) + ("000" + (parseInt(n[2]) || 0)).slice(-3)) < +(t[0] + ("000" + t[1]).slice(-3) + ("000" + t[2]).slice(-3)) && window.location.reload()
                }
                function m() {
                    return s || (s = localStorage.getObject(e),
                    s || (s = {}),
                    s.closed || (s.closed = []),
                    s.colorsHitory || (s.colorsHitory = []),
                    s.confirmed || (s.confirmed = []),
                    s)
                }
                function f(e) {
                    for (const t of ["basket_route_map", "feedback_route_map"]) {
                        if (!e[t])
                            continue;
                        let n = "switch (true) {";
                        for (const r of e[t])
                            n += `case volId >= ${r.vol_range_from} && volId <= ${r.vol_range_to}: return "${r.http_host}";`;
                        n += "}";
                        const r = new Function("volId",n);
                        r(0),
                        wb.helpers.setImgFunc(t, r)
                    }
                }
                return window.addEventListener("storage", (e => {
                    if (e.key === t)
                        try {
                            const {data: t} = JSON.parse(e.newValue);
                            i = t,
                            h(i.variables.siteMinVersion),
                            c.forEach((e => e(i))),
                            window._debug && console.log("[globalsettings] changed external")
                        } catch (e) {
                            console.error("[globalsettings] changed external failed")
                        }
                    else if (e.key === n) {
                        const t = JSON.parse(e.newValue);
                        t && f(t)
                    }
                }
                )),
                {
                    get settings() {
                        const e = i || (i = null !== (n = null === (r = localStorage.getObject(t)) || void 0 === r ? void 0 : r.data) && void 0 !== n ? n : o,
                        i);
                        var n, r;
                        return e.switches.enableWbxOrder = !0,
                        e
                    },
                    get userSettings() {
                        return m()
                    },
                    saveUserSettings: function() {
                        localStorage.putObject(e, m()),
                        Ao.prototype.$eventBus.dispatchEvent(new CustomEvent("UserSettingsSaved"))
                    },
                    subscribe(e) {
                        c.push(e)
                    },
                    loadSettingAsync: function e() {
                        a || (a = setInterval(e, 12e4)),
                        u ? u = !1 : d = 2e3;
                        const n = p >= 2 ? "/webapi/settings/global/hash" : wb.helpers.url.urlStaticData("data/settings-front-ru.json.hash");
                        return Ao.prototype.$httpClient.fetchText(n, {
                            method: "GET",
                            cache: "no-cache"
                        }, {
                            noProcessResponse: !0,
                            timeout: d
                        }).then((e => {
                            var n;
                            if (void 0 === e)
                                throw new Error;
                            if (e !== (null === (n = localStorage.getObject(t)) || void 0 === n ? void 0 : n.hash)) {
                                const n = p >= 2 ? "/webapi/settings/global/get" : wb.helpers.url.urlStaticData("data/settings-front-ru.json");
                                return Ao.prototype.$httpClient.fetchJSON(n, {
                                    method: "GET",
                                    cache: "no-cache",
                                    headers: {
                                        "Content-Type": "application/json"
                                    }
                                }, {
                                    noProcessResponse: !0,
                                    timeout: d
                                }).then((n => (i = n,
                                localStorage.putObject(t, {
                                    hash: e,
                                    data: i
                                }),
                                p = 0,
                                window._debug && console.log("[globalsettings] changed"),
                                c.forEach((e => e(i))),
                                h(i.variables.siteMinVersion),
                                Promise.resolve()))).catch(( () => Promise.resolve()))
                            }
                            return Promise.resolve()
                        }
                        )).catch(( () => (p++,
                        Promise.resolve())))
                    },
                    periodicBasketConfigUpdate: async function e() {
                        if (WbSpaModel.prototype.$isRangeEnabledFor(wb.global.settings.variables.usersRangeCdnConfig))
                            if (l)
                                try {
                                    await navigator.locks.request(`lock-${n}`, (async e => {
                                        var t;
                                        const o = localStorage.getObject(n);
                                        if (o && o.timestamp + r > Date.now())
                                            return;
                                        const i = await Ao.prototype.$httpClient.fetchBasicJSON(`https://cdn.wbbasket.ru/api/v2/upstreams?hash=${null !== (t = null == o ? void 0 : o.hash) && void 0 !== t ? t : ""}`, {
                                            cache: "no-cache"
                                        }, {
                                            nullOnError: !0
                                        });
                                        if (null == i || !i.upstreams || i.hash === (null == o ? void 0 : o.hash))
                                            return;
                                        let s = i.upstreams.filter((e => e.is_default || e.is_available));
                                        if (0 === s.length)
                                            return;
                                        if (1 === s.length)
                                            return f(s[0]),
                                            Object.assign(s[0], {
                                                timestamp: Date.now(),
                                                hash: i.hash
                                            }),
                                            void localStorage.putObject(n, s[0]);
                                        const a = "performance-check"
                                          , l = {}
                                          , c = new PerformanceObserver((e => {
                                            const t = e.getEntries();
                                            for (const e of t.filter((e => e.name.indexOf(a) > 0))) {
                                                const t = new URL(e.name).searchParams;
                                                if (parseInt(t.get(a)) < u)
                                                    continue;
                                                const n = t.get("name");
                                                l[n] || (l[n] = []),
                                                l[n].push(200 === e.responseStatus || e.encodedBodySize > 0 ? e.duration : 1e5)
                                            }
                                        }
                                        ));
                                        c.observe({
                                            type: "resource",
                                            buffered: !0
                                        });
                                        const u = Date.now();
                                        for (const e of s)
                                            for (let t = 0; t < 3; t++)
                                                await WbSpaModel.prototype.$httpClient.fetch(`${e.check_url}?name=${e.name}&${a}=${Date.now()}`, {
                                                    mode: "no-cors",
                                                    cache: "no-cache"
                                                }).catch((e => {}
                                                ));
                                        await Ao.prototype.$helper.sleep(1e3),
                                        c.disconnect();
                                        for (const e in l)
                                            s.find((t => t.name === e)).latency = ~~(l[e].reduce(( (e, t) => e + t), 0) / l[e].length);
                                        const d = s.sort(( (e, t) => e.latency - t.latency || !e.is_default - !t.is_default))[0];
                                        f(d),
                                        Object.assign(d, {
                                            timestamp: Date.now(),
                                            hash: i.hash
                                        }),
                                        localStorage.putObject(n, d)
                                    }
                                    ))
                                } catch (e) {
                                    wb.spa.logError(e)
                                }
                            else {
                                l = setInterval(e, r);
                                const t = localStorage.getObject(n);
                                t && t.timestamp + r > Date.now() ? f(t) : setTimeout(e, 5e3)
                            }
                    }
                }
            }())
        }
        ,
        86747: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => Q
            });
            var r = {};
            n.r(r),
            n.d(r, {
                dataProceeder: () => c,
                urlCreator: () => l
            });
            const o = function() {
                function e(e) {
                    var t;
                    this.layoutModel = e.layoutModel,
                    this.tmpl = "shortBasketInfoTmpl",
                    this.control = document.querySelector("#basketContent"),
                    this.addressesInfo = null,
                    this.eventsModels = this.layoutModel.$services.notifications.eventsModel,
                    this.profileMenu = null,
                    this.lkMenuMouseEnterHandler = this.lkMenuMouseEnterHandler.bind(this),
                    this.deliveriesPreviewEnterHandler = this.deliveriesPreviewEnterHandler.bind(this),
                    this.toggleControl = this.toggleControl.bind(this),
                    this.controlState = {
                        hide: !1
                    },
                    this.basketInfo = {
                        IsAuthenticated: this.layoutModel.$auth.isAuth,
                        BasketQuantity: this.layoutModel.$services.cartService.localCount,
                        UserIsPremium: !!this.layoutModel.$auth.isAuth && (null === (t = this.layoutModel.$user.getUserGradeFromCache()) || void 0 === t ? void 0 : t.isPremium)
                    },
                    $.templates[this.tmpl].link(this.control, this, {
                        controlState: this.controlState
                    })
                }
                var t = e.prototype;
                return t.init = function() {
                    var e, t, n;
                    this.layoutModel.$eventBus.addEventListener("LocalBasketUpdateCount", this._updateLocalBasketCount.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("UserReset", this.update.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("UserGradeUpdated", this.updatePremiumState.bind(this));
                    const r = this.layoutModel.$services.cartService.currentDeliveryType;
                    r && this.layoutModel.$analitic.setCurrentAddress(r.deliveryType, null !== (e = r.officeId) && void 0 !== e ? e : r.addressId),
                    null !== (t = this.layoutModel) && void 0 !== t && null !== (n = t.menuTop) && void 0 !== n && n.mobileMenu && this.layoutModel.menuTop.mobileMenu.updateBasket(this.basketInfo.BasketQuantity),
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this.toggleControl(!1)
                    }
                    )),
                    this.basketInfo.IsAuthenticated && this.layoutModel.$services.notifications.checkNotificationCountAsync().then((e => {
                        var t, n;
                        null !== (t = this.layoutModel) && void 0 !== t && null !== (n = t.menuTop) && void 0 !== n && n.mobileMenu && this.layoutModel.menuTop.mobileMenu.updateEvents(e),
                        $.observable(this.eventsModel).setAllProperty(e)
                    }
                    ))
                }
                ,
                t.update = function() {
                    var e;
                    const t = {
                        IsAuthenticated: this.layoutModel.$auth.isAuth,
                        BasketQuantity: this.layoutModel.$services.cartService.localCount,
                        UserIsPremium: null === (e = this.layoutModel.$user.getUserGradeFromCache()) || void 0 === e ? void 0 : e.isPremium
                    };
                    $.observable(this.basketInfo).setAllProperty(t),
                    (t.IsAuthenticated ? this.layoutModel.$services.notifications.checkNotificationCountAsync() : Promise.resolve({
                        eventsCount: 0
                    })).then((e => {
                        var t, n;
                        null !== (t = this.layoutModel) && void 0 !== t && null !== (n = t.menuTop) && void 0 !== n && n.mobileMenu && this.layoutModel.menuTop.mobileMenu.updateEvents(e),
                        $.observable(this.eventsModel).setAllProperty(e)
                    }
                    ))
                }
                ,
                t.updatePremiumState = function() {
                    var e;
                    $.observable(this.basketInfo).setProperty({
                        UserIsPremium: null === (e = this.layoutModel.$user.getUserGradeFromCache()) || void 0 === e ? void 0 : e.isPremium
                    })
                }
                ,
                t._updateLocalBasketCount = function(e) {
                    var t, n, r, o;
                    const i = null !== (t = null === (n = e.detail) || void 0 === n ? void 0 : n.count) && void 0 !== t ? t : 0;
                    $.observable(this.basketInfo).setProperty({
                        BasketQuantity: i
                    }),
                    null !== (r = this.layoutModel) && void 0 !== r && null !== (o = r.menuTop) && void 0 !== o && o.mobileMenu && this.layoutModel.menuTop.mobileMenu.updateBasket(i)
                }
                ,
                t.deliveriesPreviewEnterHandler = function() {
                    if (this.deliveriesPreview)
                        return this.toggleControl(!0);
                    this.layoutModel.$moduleLoader.loadModuleAsync("deliveriesPreview").then((e => {
                        const t = this.control.querySelector(".j-tooltip-delivery");
                        this.deliveriesPreview = new e,
                        e.template.link(t, this.deliveriesPreview, {
                            controlState: this.controlState
                        }),
                        this.toggleControl(!0)
                    }
                    ))
                }
                ,
                t.lkMenuMouseEnterHandler = function() {
                    if (this.lkMenuPreview)
                        return this.toggleControl(!0);
                    const e = WbSpaModel.prototype;
                    Promise.all([e.$moduleLoader.loadModuleAsync("cabinetMenuPreview"), e.$user.getBalance().catch((e => Promise.resolve({
                        isNetworkError: !0
                    }))), e.$services.userData.getUserDataAsync(!0)]).then(( ([e,t]) => {
                        const n = this.control.querySelector(".j-tooltip-profile");
                        this.lkMenuPreview = new e(t),
                        this.lkMenuPreview.template.link(n, this.lkMenuPreview, {
                            controlState: this.controlState
                        }),
                        this.toggleControl(!0)
                    }
                    ))
                }
                ,
                t.toggleControl = function(e) {
                    $.observable(this.controlState).setProperty({
                        hide: !e
                    })
                }
                ,
                e
            }()
              , i = Object.freeze({
                history: 0,
                catalog: 1,
                brands: 2,
                subjects: 3,
                goods: 4,
                grouped: 5,
                tags: 6,
                supplier: 7,
                redirect: 8
            });
            const s = new (function() {
                function e() {
                    this.isInited = !1
                }
                var t = e.prototype;
                return t.initMenu = async function() {
                    this.menu = await wb.spa.getCatalogMenu(),
                    this.isInited = this.menu.isInited
                }
                ,
                t.hasItem = function(e) {
                    return !!e && this.menu.menuById.has(e)
                }
                ,
                t.getCatalogLink = function(e) {
                    return this.menu.menuById.get(e).url
                }
                ,
                t.getParents = function(e) {
                    const t = [];
                    let n = this.menu.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menu.menuById.get(n);
                        t.push(e.name),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                e
            }())
              , a = Object.freeze(new Map([["home", "/"], ["faq", "/services/voprosy-i-otvety"], ["lk", "/lk"], ["notifications", "/lk/newsfeed/events"], ["basket", "/lk/basket"], ["delivery", "/lk/myorders/delivery"], ["orders", "/lk/myorders/archive"], ["favorites", "/lk/favorites"], ["favorite_brands", "/lk/favoritebrands"], ["communications", "/lk/communications"], ["claims", "/lk/claims"], ["feedback", "/lk/discussion/feedback?type=Comments"], ["cards", "/lk/details#bankCard"], ["sessions", "/lk/details#personal-safety"], ["balance", "/lk/mywallet/purchases"], ["refunds", "/lk/myrefunds"], ["receipts", "/lk/receipts/get"], ["pickups", "/services/besplatnaya-dostavka"], ["make_refund", "/lk/refund"], ["make_order", "/services/kak-sdelat-zakaz"], ["payment_options", "/services/sposoby-oplaty"], ["goods_refund", "/services/vozvrat-tovara"], ["money_refund", "/services/vozvrat-denezhnyh-sredstv"], ["sale_rules", "/services/pravila-prodazhi"], ["market_rules", "/services/pravila-polzovaniya-torgovoy-ploshchadkoy"], ["about_us", "/services/o-nas"], ["requisites", "/services/rekvizity"], ["press", "/presservice"], ["contacts", "/services/kontakty"], ["bug_bounty", "/services/bug-bounty"]]))
              , l = async () => "https://suggests.wb.ru/suggests/api/v7/hint"
              , c = async (e, t) => {
                const n = e.suggests
                  , r = e.max_tags_rows
                  , o = [];
                if (!Array.isArray(n) && !t)
                    return o;
                if ((!Array.isArray(n) || Array.isArray(n) && 0 === n.length) && t.trim())
                    return [{
                        type: i.catalog,
                        suggestions: [{
                            name: t,
                            search: t,
                            type: 1,
                            typedText: t
                        }]
                    }];
                if (s.isInited || await s.initMenu(),
                0 !== r) {
                    const e = n.filter((e => "tag" === e.type)).map((e => ({
                        name: e.name,
                        type: i.catalog,
                        typeStr: e.type,
                        pos: e.pos,
                        maxTagsRows: r
                    })));
                    o.push({
                        type: i.tags,
                        suggestions: e
                    })
                }
                const l = n.filter((e => "category" === e.type || "brand" === e.type || "supplier" === e.type || "redirect" === e.type || "external_redirect" === e.type)).map((e => {
                    switch (e.type) {
                    case "category":
                        const n = parseInt(e.menu_id);
                        if (s.hasItem(n)) {
                            const r = s.menu.menuById.get(n);
                            return {
                                typeStr: e.type,
                                name: r.name,
                                search: r.name,
                                typedText: t,
                                type: i.subjects,
                                xParams: r.query,
                                xShard: r.shard,
                                url: s.getCatalogLink(n),
                                breadCrumbs: s.getParents(n),
                                src: $.views.converters.imgForPromoCategory(n, !0),
                                imgWidth: 36,
                                imgHeight: 48
                            }
                        }
                        break;
                    case "brand":
                        return {
                            typeStr: e.type,
                            typeName: "Бренд",
                            name: e.brand_name,
                            search: e.brand_name,
                            brandId: e.brand_id,
                            brandHash: e.brand_hash,
                            typedText: t,
                            type: i.brands,
                            src: $.views.helpers.forBrandLogoFromId(e.brand_hash),
                            imgOnError: `${wb.settings.staticSiteUrl}/i/v3/broken-img/brands.jpg`,
                            imgWidth: 32,
                            imgHeight: 13
                        };
                    case "supplier":
                        return {
                            typeStr: e.type,
                            typeName: "Магазин",
                            name: $.views.converters.trimWord(e.supplier_name, $.views.helpers.suppliersOrgForms),
                            search: e.supplier_name,
                            supplierId: e.supplier_id,
                            typedText: t,
                            type: i.supplier,
                            url: `/seller/${e.supplier_id}`,
                            src: $.views.helpers.forSellerLogo(e.supplier_id),
                            imgOnError: `${wb.settings.staticSiteUrl}/i/v3/catalog/seller-logo-new.jpg`,
                            imgWidth: 67,
                            imgHeight: 28
                        };
                    case "redirect":
                    case "external_redirect":
                        return {
                            typeStr: e.type,
                            typeName: "Раздел",
                            name: e.name,
                            search: e.name,
                            id: e.id,
                            typedText: t,
                            type: i.redirect,
                            url: "external_redirect" === e.type ? e.url : a.get(e.id),
                            src: "//static-basket-01.wb.ru/vol0/interface/shops/wb.png",
                            imgWidth: 67,
                            imgHeight: 28
                        }
                    }
                }
                )).filter((e => e));
                o.push({
                    type: i.grouped,
                    suggestions: l
                });
                const c = n.filter((e => "suggest" === e.type)).map((e => ({
                    name: e.name,
                    search: e.name,
                    type: i.catalog,
                    typedText: t,
                    typeStr: e.type,
                    xParams: e.query,
                    xShard: e.shard_key
                }))).slice(0, 7);
                return 0 === c.length && 0 === tagsSuggests.length && t.trim() && c.push({
                    name: t,
                    search: t,
                    type: i.catalog,
                    typedText: t,
                    typeStr: "self"
                }),
                o.push({
                    type: i.catalog,
                    suggestions: c
                }),
                o
            }
            ;
            function u(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, d(r.key), r)
                }
            }
            function d(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            function p(e, t) {
                e.prototype = Object.create(t.prototype),
                e.prototype.constructor = e,
                h(e, t)
            }
            function h(e, t) {
                return h = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                h(e, t)
            }
            const m = [34, 42]
              , f = [38, 40]
              , y = Object.freeze({
                6: 0,
                0: 1,
                1: 2,
                5: 3
            });
            let g = function(e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).searchText = "",
                    t.searchQueryText = "",
                    t.showImageSearch = !1,
                    t.uploadingPhoto = !1,
                    t.suggestions = [],
                    t.allSuggestions = [],
                    t.suggestionsQueue = [],
                    t.prohibitSuggestions = !0,
                    t.searchTagClick = !1,
                    t.onlyTags = !1,
                    t.showSuggestionsDebouncer = t.showSuggestionsDebouncer(),
                    t.showSuggestionsDebounced = t.showSuggestionsDebouncer.debounce(t.showSuggestionsOuter.bind(t), 300),
                    t._hideSuggestionsByClick = t._hideSuggestionsByClick.bind(t),
                    t
                }
                p(t, e);
                var n, r, o, i = t.prototype;
                return i.clearSearch = function() {
                    this.searchTagClick = !1,
                    this.onlyTags = !1,
                    $.observable(this).setProperty({
                        searchText: ""
                    }),
                    this.$isDesktop && this.inputEl.focus()
                }
                ,
                i.onSearchInputKeypress = function(e) {
                    if (m.indexOf(e.which) > -1)
                        return !1;
                    if (13 === e.which)
                        return this.showSuggestionsDebouncer.stop(),
                        this.applySearch(),
                        !1;
                    if (this.onlyTags) {
                        const e = this.allSuggestionsAnalitics;
                        this.$analitic.saveLastSearchAnaliticsData("Tag_Suggest", this.searchText, e),
                        this.onlyTags = !1
                    }
                    if (this.$isDesktop && f.indexOf(e.which) > -1 && this.allSuggestions.length) {
                        e.preventDefault();
                        const n = 38 === e.which
                          , r = this.allSuggestions.filter((e => 1 !== e.type || 1 === e.type && !e.hasOwnProperty("pos")));
                        let o = r.findIndex((e => e.selected));
                        n && -1 === o && (o = 0),
                        o += n ? -1 : 1,
                        o %= r.length,
                        o < 0 && (o += r.length);
                        const i = r[o];
                        var t;
                        if (null != i)
                            $.observable(this).setProperty({
                                searchText: i.name
                            }),
                            null === (t = this._markSuggestAsSelected) || void 0 === t || t.call(this, i)
                    }
                }
                ,
                i.onSearchSubmit = function(e) {
                    e.preventDefault()
                }
                ,
                i.applySearch = function() {
                    this.searchText.length && (this.inputEl.blur(),
                    this._hideSuggestionsByClick(),
                    this._loadSearchPage())
                }
                ,
                i.searchByImage = async function(e) {
                    const [t] = await Promise.all([this.$moduleLoader.loadModuleAsync("imageChip"), this.$moduleLoader.loadServiceAsync("searchByImageService")])
                      , n = new t;
                    n.uploading = !0,
                    $.observable(this).setProperty({
                        imageChipData: n
                    });
                    try {
                        this.$analitic.saveState({
                            l: "SPA"
                        });
                        const t = e.currentTarget.files[0]
                          , n = await this.$services.searchByImageService.searchByImage(t)
                          , r = this.$analitic.getTermByTermName("qid");
                        this.$analitic.saveQueryIdForSearch(r),
                        this.$analitic.sendEvent("Search_Request_Send", {
                            type: "Photo",
                            query_id: r
                        }),
                        this.$router.moveTo(n)
                    } catch (e) {
                        console.error(e)
                    } finally {
                        $.observable(this).setProperty({
                            showImageSearch: !1
                        }),
                        e.currentTarget.form.reset()
                    }
                }
                ,
                i.enableSuggestions = function(e) {
                    if (!this.imageChipData)
                        return "focus" === e.type && (this.focusSearchTime = Date.now(),
                        this.focusSearchText = this.searchText),
                        $.observable(this).setProperty({
                            prohibitSuggestions: !1
                        }),
                        this.showSuggestions(e);
                    e.preventDefault()
                }
                ,
                i.showSuggestionsDebouncer = function() {
                    let e = null;
                    function t() {
                        e && clearTimeout(e)
                    }
                    return {
                        debounce: (n, r) => (...o) => {
                            t(),
                            e = setTimeout(( () => {
                                n.apply(this, o),
                                e = null
                            }
                            ), r)
                        }
                        ,
                        stop: t
                    }
                }
                ,
                i.showSuggestionsOuter = function(e) {
                    return this.prohibitSuggestions ? this.enableSuggestions(e) : this.showSuggestions(e)
                }
                ,
                i.showSuggestions = function(e) {
                    if (this.imageChipData)
                        return void (null == e || e.preventDefault());
                    clearTimeout(this._hideSuggestionsTimer);
                    const t = this.suggestionsHelper.loadSuggestionsAsync(this.searchText.toLowerCase(), null)
                      , n = this.$isDesktop ? $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl") : Promise.resolve();
                    this.suggestionsQueue.push(t),
                    Promise.all([t, n]).then(( ([e]) => {
                        var n;
                        if (this.prohibitSuggestions)
                            return void $.observable(this.suggestions).refresh([]);
                        const r = this.suggestionsQueue.findIndex((e => e == t));
                        if (r < 0)
                            return;
                        this.suggestionsQueue = this.suggestionsQueue.slice(r + 1);
                        const o = JSON.parse(JSON.stringify(e));
                        this._removeRepeats(o),
                        this._sortSuggests(o),
                        $.observable(this.suggestions).refresh(o);
                        const i = null === (n = o.find((e => 6 === e.type))) || void 0 === n ? void 0 : n.suggestions;
                        if (i) {
                            const e = i[0].maxTagsRows;
                            if (e > 0) {
                                const t = document.querySelector(".j-unmark-suggests");
                                document.documentElement.style.setProperty("--row-on-tags", e),
                                t.classList.add("autocomplete__list--row")
                            }
                        }
                        this.allSuggestions = o.reduce(( (e, t) => e.concat(t.suggestions)), []),
                        document.removeEventListener("click", this._hideSuggestionsByClick),
                        document.addEventListener("click", this._hideSuggestionsByClick),
                        this.toggleBackgroundBlur(!0)
                    }
                    )).catch((e => {
                        console.error(e)
                    }
                    ))
                }
                ,
                i.toggleBackgroundBlur = function(e) {
                    if (e && this.$isDesktop) {
                        if (!document.querySelector(".overlay--search")) {
                            const e = document.createElement("div");
                            e.classList.add("overlay", "overlay--search", "hide-mobile"),
                            document.querySelector("body").appendChild(e)
                        }
                    } else {
                        var t;
                        null === (t = document.querySelector(".overlay--search")) || void 0 === t || t.remove()
                    }
                }
                ,
                i._hideSuggestionsByClick = function(e) {
                    if ("m" == wb.settings.displayMode || null != e && e.target.closest(".search-catalog__btn--clear"))
                        return;
                    (e ? !e.target.closest(".j-menu-burger-btn") && this.inputEl == document.activeElement || e.target.closest(".j-clear-history") || e.target.closest(".j-clear-history-all") || e.target.closest(".j-suggest-tag") : null) ? this.inputEl.focus() : (clearTimeout(this._hideSuggestionsTimer),
                    $.observable(this).setProperty({
                        prohibitSuggestions: !0
                    }),
                    this._hideSuggestionsTimer = setTimeout(( () => {
                        $.observable(this.suggestions).refresh([]),
                        document.removeEventListener("click", this._hideSuggestionsByClick),
                        this.toggleBackgroundBlur(!1)
                    }
                    ), 150))
                }
                ,
                i.clearAllSearchHistories = function(e) {
                    this._clearSearchHistory(null, !0),
                    this.$analitic.sendEvent("Search_History_Delete")
                }
                ,
                i.clearSearchHistory = function(e) {
                    const {data: t} = $.view(e.currentTarget);
                    this._clearSearchHistory(t.name)
                }
                ,
                i._clearSearchHistory = function(e, t) {
                    this.suggestionsHelper.removeFromHistorySearch(e, t),
                    "m" === wb.settings.displayMode && this.showSuggestions(),
                    this.inputEl.focus()
                }
                ,
                i.fillWithTag = function(e) {
                    var t, n, r;
                    if (this.searchTagClick = !0,
                    e.target.closest(".j-clear-history"))
                        return;
                    const {data: o} = $.view(e.currentTarget);
                    if (!o)
                        return;
                    const i = null !== (t = o.name) && void 0 !== t ? t : ""
                      , s = (this.searchText,
                    this.searchText.trimLeft().split(/\s+/));
                    s[o.pos] = i,
                    this.onlyTags = !0,
                    this.$analitic.sendEvent("Search_Tag_Suggest_T", {
                        text: i,
                        text_typed: null !== (n = this.searchText) && void 0 !== n ? n : ""
                    }),
                    $.observable(this).setProperty({
                        searchText: s.join(" ") + " "
                    }),
                    null === (r = this.inputEl) || void 0 === r || r.focus()
                }
                ,
                i.followSuggest = function(e) {
                    var t, n;
                    if (e.target.closest(".j-clear-history"))
                        return;
                    this.onlyTags = !1;
                    const {data: r} = $.view(e.currentTarget);
                    if (null == r)
                        return;
                    const o = this.allSuggestionsAnalitics;
                    $.observable(this).setProperty({
                        searchText: r.name
                    }),
                    this.suggestionsHelper.saveHistorySearch(r.name);
                    const i = this._getAnalyticsFromSuggest(r)
                      , s = {
                        type: i.type,
                        l: i.location,
                        t: this.searchText,
                        t1: null === (t = r.searchParams) || void 0 === t ? void 0 : t.get("xParams"),
                        t2: null === (n = r.searchParams) || void 0 === n ? void 0 : n.get("xShard"),
                        t3: r.typedText,
                        t4: this.searchTagClick
                    }
                      , a = i.type;
                    this.$analitic.saveLastSearchAnaliticsData("Suggest", this.searchText, o);
                    const l = this.$analitic.getTermByTermName("qid");
                    this.$analitic.saveQueryIdForSearch(l),
                    this.$analitic.saveState(s);
                    const c = {
                        type: a,
                        text: r.search,
                        text_typed: r.typedText,
                        text_suggest: o,
                        query_id: l,
                        suggests: this.suggestionsJsonString,
                        start_inputed_at: this.focusSearchTime,
                        start_inputed_text: this.focusSearchText
                    };
                    r.isBrand || r.isHistory || (c.group = "new"),
                    this.$analitic.sendEvent("Search_Request_Send", c),
                    this._getUrlToFollow(r).then((e => {
                        if (null != wb.spa)
                            return wb.spa.redirect(e);
                        window.location.href = e
                    }
                    ))
                }
                ,
                i.removeImageChip = function() {
                    $.observable(this).setProperty({
                        imageChipData: null
                    })
                }
                ,
                i._loadSearchPage = function() {
                    var e, t;
                    if (/^\s+$/.test(this.searchText)) {
                        var n;
                        switch (wb.analitics.getState().l) {
                        case "SNT":
                        case "STA":
                            this.typeSearch = "Text";
                            break;
                        case "STH":
                            this.typeSearch = "Suggest";
                            break;
                        case "SNH":
                        case "SHS":
                            this.typeSearch = "Hist";
                            break;
                        case "STC":
                            this.typeSearch = "Category";
                            break;
                        case "STB":
                            this.typeSearch = "Brand";
                            break;
                        case "SPA":
                            this.typeSearch = "Photo";
                            break;
                        case "AST":
                        case "SST":
                        case "SIS":
                            this.typeSearch = "Tag_Suggest"
                        }
                        let e = {
                            type: null !== (n = this.typeSearch) && void 0 !== n ? n : "",
                            text: this.searchText,
                            text_typed: this.searchText,
                            reason: "search",
                            query: "",
                            shardKey: "",
                            text_suggest: "",
                            suggests: this.suggestionsJsonString,
                            query_id: wb.analitics.retrieveQueryIdForSearch()
                        };
                        wb.analitics.sendEvent("Search_Empty_Respon", e)
                    }
                    this.suggestionsHelper.saveHistorySearch(this.searchText);
                    const r = this.allSuggestionsAnalitics;
                    this.$analitic.saveState({
                        l: this.onlyTags ? "SST" : "SNT",
                        t: this.searchText,
                        t1: null === (e = this.xData) || void 0 === e ? void 0 : e.xcatalogQuery,
                        t2: null === (t = this.xData) || void 0 === t ? void 0 : t.xcatalogShard,
                        t4: this.searchTagClick
                    });
                    const o = this.$analitic.getTermByTermName("qid");
                    this.$analitic.saveQueryIdForSearch(o),
                    this.$analitic.sendEvent("Search_Request_Send", {
                        text: this.searchText,
                        type: this.onlyTags ? "Tag_Suggest" : "Text",
                        group: "new",
                        text_typed: this.searchText,
                        text_suggest: r,
                        query_id: o,
                        suggests: this.suggestionsJsonString,
                        start_inputed_at: this.focusSearchTime,
                        start_inputed_text: this.focusSearchText
                    }),
                    $.observable(this).setProperty({
                        searchQueryText: this.searchText
                    });
                    let i = this._makeSafeString(this.searchText);
                    const s = `${wb.urlHelper.xSearchBase}?search=${i}`;
                    if (null != wb.spa)
                        return wb.spa.redirect(s);
                    window.location.href = s
                }
                ,
                i._makeSafeString = function(e) {
                    return e.toSafeString()
                }
                ,
                i._getUrlToFollow = async function(e) {
                    if (e.url)
                        return Promise.resolve(e.url);
                    if (2 === e.type) {
                        const t = await $.views.helpers.brandUrlById(e.brandId);
                        if (t)
                            return t
                    }
                    return Promise.resolve(`${wb.urlHelper.xSearchBase}?search=${this._makeSafeString(e.search)}`)
                }
                ,
                i.markSelected = function(e, t) {
                    let n = e.trim();
                    if (t) {
                        const e = t.trim().replace(wb.settings.regexp.escapingRegExp, "\\$&")
                          , r = $.views.converters.encode(n.replace(new RegExp(e,"i"), "")).replace(wb.settings.regexp.escapingRegExp, "\\$&");
                        return n = $.views.converters.encode(n.replace(new RegExp(`(${r})$`,"i"), "[b]$&[/b]")),
                        n.replace(new RegExp("\\[b\\](" + $.views.converters.encode(r) + ")\\[\\/b\\]","gi"), "<b>$1</b>")
                    }
                    return $.views.converters.encode(n)
                }
                ,
                i._removeRepeats = function(e) {
                    const {history: t, common: n} = e.reduce(( (e, t) => {
                        switch (t.type) {
                        case 0:
                            e.history = t;
                            break;
                        case 1:
                            e.common = t
                        }
                        return e
                    }
                    ), {
                        history: null,
                        common: null
                    });
                    if (!t || !n)
                        return;
                    const r = t.suggestions.reduce(( (e, t) => (e.add(t.name),
                    e)), new Set);
                    n.suggestions = n.suggestions.filter((e => !r.has(e.name)))
                }
                ,
                i._sortSuggests = function(e) {
                    e.sort(( (e, t) => y[e.type] - y[t.type]))
                }
                ,
                i._getAnalyticsFromSuggest = function(e) {
                    switch (e.type) {
                    case 0:
                        return {
                            location: "SNH",
                            type: "Hist"
                        };
                    case 1:
                        return {
                            location: "STH",
                            type: "Suggest"
                        };
                    case 2:
                        return {
                            location: "STB",
                            type: "Brand"
                        };
                    case 3:
                        return {
                            location: "STC",
                            type: "Category"
                        };
                    case 4:
                        return {
                            location: "SIS",
                            type: "Item"
                        };
                    case 7:
                        return {
                            location: "STS",
                            type: "Supplier"
                        };
                    default:
                        return {
                            location: "",
                            type: "Unknown"
                        }
                    }
                }
                ,
                n = t,
                (r = [{
                    key: "allSuggestionsAnalitics",
                    get: function() {
                        return this.allSuggestions.map((e => e.name)).join("|")
                    }
                }, {
                    key: "suggestionsJsonString",
                    get: function() {
                        const e = {}
                          , t = this.allSuggestions.map((t => {
                            t.typeStr in e || (e[t.typeStr] = 0);
                            const n = e[t.typeStr];
                            return e[t.typeStr] += 1,
                            {
                                type: "history" === t.typeStr ? "hist" : t.typeStr,
                                value: t.name,
                                index: n
                            }
                        }
                        ));
                        return this.$analitic.saveLastSearchAnalyticsDataForSuggest(JSON.stringify(t)),
                        JSON.stringify(t)
                    }
                }]) && u(n.prototype, r),
                o && u(n, o),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n
            }(WbSpaModel)
              , v = function(e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).imageChipData = null,
                    t._hideSuggestionsTimer = null,
                    t.inputEl = document.getElementById("searchInput"),
                    t.applySearchEl = document.getElementById("applySearchBtn"),
                    t.searchByImageBtnEl = document.getElementById("searchByImageBtn"),
                    t.searchByImageContainerEl = document.getElementById("searchByImageContainer"),
                    t.searchInputMobileEl = document.querySelector(".j-search-input-mobile"),
                    t._checkImageFormClick = t._checkImageFormClick.bind(t),
                    t.hasAnySuggestions.depends = ["suggestions"],
                    t
                }
                p(t, e);
                var n = t.prototype;
                return n.init = async function() {
                    await this._prepareSuggestionsHelper(),
                    this._observeProperties(),
                    this._bindEvents(),
                    $.link(!0, "#searchBlock", this)
                }
                ,
                n.hasAnySuggestions = function() {
                    return this.suggestions.some((e => e.suggestions.length > 0))
                }
                ,
                n.toggleImageSearch = function() {
                    this.toggleProperty("showImageSearch")
                }
                ,
                n.markSuggest = function(e) {
                    const {data: t} = $.view(e.currentTarget);
                    null != t && this._markSuggestAsSelected(t)
                }
                ,
                n.unmarkSuggests = function() {
                    this.allSuggestions.forEach((e => {
                        $.observable(e).setProperty({
                            selected: !1
                        })
                    }
                    ))
                }
                ,
                n._markSuggestAsSelected = function(e) {
                    this.allSuggestions.forEach((t => {
                        $.observable(t).setProperty({
                            selected: t == e
                        })
                    }
                    ))
                }
                ,
                n._observeProperties = function() {
                    $.observe(this, "showImageSearch", ( (e, {value: t}) => {
                        t ? this._addImageSearchHandlers() : this._removeImageSearchHandlers()
                    }
                    ))
                }
                ,
                n._bindEvents = function() {
                    window.addEventListener("spaTransition", (e => {
                        var t;
                        "SpaSearchEntrypoint" !== (null === (t = e.detail.dest) || void 0 === t ? void 0 : t.name) && ($.observable(this).setProperty({
                            searchText: ""
                        }),
                        $.observable(this).setProperty({
                            searchQueryText: ""
                        }))
                    }
                    )),
                    this.inputEl.addEventListener("focus", ( () => {
                        this.$isDesktop || this._showMobileSearchPopup()
                    }
                    )),
                    this.$eventBus.addEventListener("NeedSearchUpdate", (e => {
                        const {searchText: t} = e.detail;
                        $.observable(this).setProperty({
                            searchText: t
                        }),
                        $.observable(this).setProperty({
                            searchQueryText: t
                        })
                    }
                    )),
                    this.$eventBus.addEventListener("RenderImageChip", (e => {
                        const {imageChipData: t} = e.detail;
                        $.observable(this).setProperty({
                            imageChipData: t
                        })
                    }
                    )),
                    this._bindDisplayEvents()
                }
                ,
                n._bindDisplayEvents = function() {
                    var e;
                    const t = this
                      , n = this._showMobileSearchPopup.bind(this);
                    function r() {
                        var e, r;
                        "m" == wb.settings.displayMode ? null === (e = t.searchInputMobileEl) || void 0 === e || e.addEventListener("click", n) : null === (r = t.searchInputMobileEl) || void 0 === r || r.removeEventListener("click", n)
                    }
                    r(),
                    null === (e = wb.displayModeSettings) || void 0 === e || e.addObserver(( () => {
                        r()
                    }
                    ))
                }
                ,
                n._addImageSearchHandlers = function() {
                    document.documentElement.addEventListener("click", this._checkImageFormClick)
                }
                ,
                n._removeImageSearchHandlers = function() {
                    document.documentElement.removeEventListener("click", this._checkImageFormClick)
                }
                ,
                n._checkImageFormClick = function(e) {
                    e.target == this.searchByImageBtnEl || this.searchByImageContainerEl.contains(e.target) || $.observable(this).setProperty({
                        showImageSearch: !1
                    })
                }
                ,
                n._showMobileSearchPopup = async function() {
                    await $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl");
                    const e = wb.popup.showCustomPopup({
                        showCross: !1,
                        useCenteredFunction: !0,
                        useHtml: !0,
                        lockScroll: !0,
                        popupClassesList: ["popup-search", "shown"],
                        contentClasses: ["popup__content", "popup-search__content"],
                        onShow: async (t, n) => {
                            const r = new b(this);
                            r.searchByImage = t => {
                                this.searchByImage(t),
                                e.close()
                            }
                            ,
                            $.templates.searchMobilePopupTmpl.link(t.querySelector(".popup__content"), r, {
                                close: () => e.close()
                            }),
                            await n,
                            r.onAfterShown()
                        }
                    })
                }
                ,
                n._prepareSuggestionsHelper = async function() {
                    const e = await this.$moduleLoader.loadModuleAsync("suggestionsHelper");
                    let t = [[{
                        cacheKey: "historySearch",
                        historiesLimit: 20
                    }, e.suggestionsTypes.history]];
                    t.push([r, e.suggestionsTypes.grouped]),
                    this.suggestionsHelper = e.createSuggestionsHelper(t)
                }
                ,
                t
            }(g)
              , b = function(e) {
                function t(t) {
                    var n;
                    return (n = e.call(this) || this).suggestionsHelper = t.suggestionsHelper,
                    n.searchText = t.searchText,
                    n
                }
                return p(t, e),
                t.prototype.onAfterShown = function() {
                    this.inputEl = document.getElementById("mobileSearchInput"),
                    this.inputEl.focus()
                }
                ,
                t
            }(g);
            const w = v;
            const S = function() {
                function e(e) {
                    var t;
                    this.layoutModel = e,
                    this.container = document.getElementById("balanceBlock"),
                    this.updateBalance = this.updateBalance.bind(this),
                    this.model = {
                        balance: 0
                    },
                    this._setWalletInfo(null === (t = e.$user.balance) || void 0 === t ? void 0 : t.walletTypeCode)
                }
                var t = e.prototype;
                return t.init = async function(e) {
                    e && await this._fetchBalanceAndLink().catch((e => Promise.resolve())),
                    this.layoutModel.$eventBus.addEventListener("BalanceReset", this._fetchBalanceAndLink.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("CurrencyChanged", this._fetchBalanceAndLink.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("BalanceUpdated", this.updateBalance.bind(this))
                }
                ,
                t._fetchBalanceAndLink = async function() {
                    if (!this.layoutModel.$auth.isAuth)
                        return;
                    let e = await this.layoutModel.$user.getBalance();
                    this._link(e.totalBalance || 0, (null == e ? void 0 : e.balanceCurrency) || "RUB")
                }
                ,
                t._link = function(e, t) {
                    void 0 !== e && null != e && this.layoutModel.$router.userIsAuth && !this._isLinked && (this._isLinked = !0,
                    this.model.balance = e,
                    this.model.balanceCurrency = t,
                    $.link(!0, this.container, this.model),
                    $.observable(this.layoutModel.$userEnv).setProperty({
                        balance: e,
                        balanceCurrency: t
                    }))
                }
                ,
                t.updateBalance = function(e) {
                    const {totalBalance: t, balanceCurrency: n, walletTypeCode: r} = e.detail;
                    this._isLinked ? ($.observable(this.model).setProperty({
                        balance: t,
                        balanceCurrency: n
                    }),
                    $.observable(this.layoutModel.$userEnv).setProperty({
                        balance: t,
                        balanceCurrency: n
                    })) : this._link(t),
                    this._setWalletInfo(r)
                }
                ,
                t._setWalletInfo = function(e) {
                    $.observable(wb.settings).setProperty({
                        balanceTitle: this._getBalanceTitle(e),
                        walletTypeCode: e
                    })
                }
                ,
                t._getBalanceTitle = function(e=0) {
                    return e > 0 ? "WB Кошелёк" : "Баланс"
                }
                ,
                e
            }();
            let _ = function() {
                function e(e) {
                    this.mainLayout = e;
                    const t = document.querySelector(".j-b-header-country")
                      , n = t.querySelector(".j-b-change-currency");
                    this.tooltip = document.querySelector(".j-tooltip-country"),
                    $.observable(e.$userEnv).setProperty({
                        currency: e.$user.getCurrency()
                    }),
                    this.currentCurrency = e.$user.getCurrency(),
                    this.changeCurrency = this.changeCurrency.bind(this),
                    $.templates({
                        changeCurrencyTmpl: '\n               <h2 class="popup__header">Выберите валюту</h2>\n                <div class="country">\n                    <div class="country__wrap" data-link="{on \'click\' \'.j-currency-item\' changeCurrency}">\n                    {^{radiogroup currentCurrency}}\n                        {^{props ~wbCurrencies sort=sort ^~current=currentCurrency}}\n                            <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                <input class="j-currency-item" type="radio" name="currency" value=\'{{:key}}\' ">\n                                <span class="radio-with-text__text radio-with-text__text--flag">\n                                    <span class="radio-with-text__language"><span class="radio-with-text__flag flag-{{:prop.locale}}"></span>{{:key}}</span>\n                                    <span class="radio-with-text__name">{{:prop.name}}</span>\n                                </span>\n                            </label>\n                        {{/props}}\n                    {{/radiogroup}}\n                    </div>\n                </div>\n        '
                    }),
                    $.templates.changeCurrencyTmpl.link(n, this),
                    $.link(!0, t, this),
                    $.link(!0, document.querySelector(".nav-element__currency"), this),
                    document.addEventListener("click", e.$helper.delegator(".j-currency-show-popup", ( (e, t) => this.showPopup())))
                }
                var t = e.prototype;
                return t.showPopup = function() {
                    this.currentPopup = wb.popup.showCustomPopup({
                        useHtml: !0,
                        popupClassesList: ["popup-country", "j-popup-country", "shown"],
                        contentClasses: ["popup__content"],
                        useCenteredFunction: !0,
                        modal: !0,
                        closeClass: ["j-close", "popup__close"],
                        closeSelector: ".j-close",
                        onShow: e => $.templates.changeCurrencyTmpl.link(e.querySelector(".popup__content"), this)
                    })
                }
                ,
                t.sort = function(e, t) {
                    return e.key === this.view.data.currentCurrency ? -1 : t.key === this.view.data.currentCurrency ? 1 : 0
                }
                ,
                t.changeCurrency = function(e) {
                    const t = e.target.value;
                    this.mainLayout.$user.setCurrency(t).then(( () => {
                        var e;
                        $.observable(this.mainLayout.$userEnv).setProperty({
                            currency: t
                        }),
                        this.mainLayout.$eventBus.dispatchEvent(new CustomEvent("CurrencyChanged",{
                            detail: {
                                currency: t
                            }
                        })),
                        null === (e = this.currentPopup) || void 0 === e || e.close()
                    }
                    )),
                    this.tooltip || (this.tooltip = document.querySelector(".j-tooltip-country")),
                    this._closeTooltip()
                }
                ,
                t.refresh = function(e) {
                    wb.currencies.info[e] && $.observable(this).setProperty("currentCurrency", e)
                }
                ,
                t._closeTooltip = function() {
                    if (this.tooltip)
                        return this.tooltip.style.pointerEvents = "none",
                        setTimeout(( () => this.tooltip.style.pointerEvents = "auto"), 100)
                }
                ,
                e
            }();
            const C = _;
            let I = function() {
                function e(e) {
                    this.layoutModel = e.layoutModel,
                    this.shortBasketInfo = new o(e),
                    this.search = new w,
                    this.chatStartedRefunds = new this.layoutModel.$helper.Deferred
                }
                var t = e.prototype;
                return t._initOnlineChat = function(e) {
                    setTimeout(( () => {
                        this.layoutModel.$moduleLoader.loadModuleAsync("onlineChatPopup").then((t => {
                            var n, r;
                            this.onlineChat = new t({
                                auth: e.isAuth,
                                uid: e.isAuth ? e.uid : e.basketUid,
                                startedRefunds: this.chatStartedRefunds
                            }).init(),
                            wb.displayModeSettings.removeObserver(this.onlineChat.onBreakpoint),
                            null !== (n = wb.global.settings) && void 0 !== n && null !== (r = n.switches) && void 0 !== r && r.enableOnlineChat ? (wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint, !0),
                            this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited"))) : wb.global.subscribe(( () => {
                                !this.onlineChat.inited && wb.global.settings.switches.enableOnlineChat && (wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint, !0),
                                this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited")))
                            }
                            )),
                            wb.global.subscribe((e => {
                                const t = e.switches.enableSellersChat;
                                this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("SellersChatSwitched",{
                                    detail: t
                                }))
                            }
                            ))
                        }
                        ))
                    }
                    ), 5e3)
                }
                ,
                t.init = async function() {
                    this.userBalance = new S(this.layoutModel),
                    this.changeCurrency = new C(this.layoutModel),
                    this.shortBasketInfo.init();
                    const e = WbSpaModel.prototype.$geoLocation.initPreferredLocation()
                      , t = this.search.init();
                    this.bindSignOut(),
                    this.bindStat();
                    const n = this.layoutModel.$user.getUserInfo();
                    return this._initOnlineChat(n),
                    this.userBalance.init(n.isAuth),
                    Promise.all([e, t])
                }
                ,
                t.bindSignOut = function() {
                    document.addEventListener("click", (e => {
                        const t = e.target.closest("a");
                        null == t || e._preventRouterTransition || t.href.endsWith("/security/exit") && (e.preventDefault(),
                        this.signOut())
                    }
                    ))
                }
                ,
                t.signOut = function(e) {
                    this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("onBeforeSignOut")),
                    this.layoutModel.$user.clearLocalUserData(),
                    this.layoutModel.$auth.signOut(e)
                }
                ,
                t.bindStat = function() {
                    const e = this.layoutModel.$analitic;
                    const t = document.querySelector(".j-header");
                    null == t || t.addEventListener("click", this.layoutModel.$helper.delegator(".j-wba-header-item", (function(t) {
                        const n = t.target.closest(".j-wba-header-item");
                        n && e.sendEvent("Header_T", {
                            name: n.dataset.wbaHeaderName
                        })
                    }
                    )));
                    const n = document.querySelector(".j-country");
                    null == n || n.addEventListener("click", this.layoutModel.$helper.delegator(".j-country-item input", (function(t) {
                        const n = t.target.closest(".j-country-item input");
                        n && e.sendEvent("Header_Country_Apl", {
                            name: n.value
                        })
                    }
                    )))
                }
                ,
                e
            }();
            const k = I;
            function M(e, t) {
                return M = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                M(e, t)
            }
            let P = function(e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).bannersLoaded = !1,
                    t.footerBanners = [],
                    t._onChangeDisplayMode = t._onChangeDisplayMode.bind(t),
                    t._loadBanners = t._loadBanners.bind(t),
                    t.$eventBus.addEventListener("GeoUpdated", ( () => {
                        "ru" !== wb.settings.currentLocale && t.$observable.setProperty({
                            userLocale: t.$user.getLocale()
                        }),
                        t._loadBanners(!0)
                    }
                    )),
                    t
                }
                var n, r;
                r = e,
                (n = t).prototype = Object.create(r.prototype),
                n.prototype.constructor = n,
                M(n, r);
                var o = t.prototype;
                return o.init = async function() {
                    await this.$helper.loadJsAsync(wb.settings.scripts.bannersTag),
                    this.userLocale = "ru" !== wb.settings.currentLocale && this.$user.getLocale() || "ru";
                    const e = document.querySelector(".j-footer");
                    $.link(!0, e, this),
                    this.showFooterObserver = WbSpaModel.prototype.$observerHelper.getVerticalObserver(e),
                    e.addEventListener(this.showFooterObserver.elementInViewportEventName, ( () => {
                        this._loadBanners(),
                        WbSpaModel.prototype.$analitic.sendEvent("Footer_S")
                    }
                    )),
                    this.showFooterObserver.observe()
                }
                ,
                o.onMenuSelected = function(e) {
                    if ("m" !== wb.settings.displayMode)
                        return;
                    e.currentTarget.parentNode.classList.toggle("dropdown-open")
                }
                ,
                o.sendStatEvent = function(e) {
                    const t = e.currentTarget;
                    t && WbSpaModel.prototype.$analitic.sendEvent("Footer_T", {
                        name: t.dataset.wbaFooterName
                    })
                }
                ,
                o._onChangeDisplayMode = function() {
                    this._setBanners()
                }
                ,
                o._setBanners = function() {
                    if (!this.banners)
                        return;
                    const e = "phone" == wb.settings.displayType;
                    $.observable(this).setProperty({
                        footerBanners: e ? this.banners.mobileBanners : this.banners.desktopBanners
                    })
                }
                ,
                o._loadBanners = async function(e) {
                    if (this.bannersLoaded && !e)
                        return;
                    this.bannersLoaded = !0;
                    const [t] = await Promise.all([this.$services.bannersService.getBannersForFooterAsync(), this.$helper.loadJsAsync(wb.settings.scripts.swiper)]);
                    this.banners = t,
                    this._onChangeDisplayMode(),
                    !e && $.observe(wb.settings, "displayType", this._onChangeDisplayMode)
                }
                ,
                t
            }(WbSpaModel);
            const T = P;
            function D(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, A(r.key), r)
                }
            }
            function A(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            const E = Object.freeze({
                UNKNOWN: "unknown",
                HOME: "home",
                CATALOG: "catalog",
                PRODUCTCARD: "product-card",
                SECURITY: "security",
                BASKET: "basket",
                PONED: "poned",
                PROFILE: "profile",
                ARCHIVE: "archive",
                ORDERS: "orders",
                SERVICES: "services",
                CLAIMS: "claims",
                SUBSCRIPTION: "subscription"
            });
            const O = function() {
                function e() {}
                return e.getType = function() {
                    const e = location.pathname.toLowerCase();
                    return "/" == e ? E.HOME : /\/catalog\/\d+\/detail\.aspx/.test(e) ? E.PRODUCTCARD : e.startsWith("/catalog") ? E.CATALOG : e.startsWith("/subscription") ? E.SUBSCRIPTION : e.startsWith("/security") ? E.SECURITY : e.startsWith("/lk/basket") ? E.BASKET : e.startsWith("/lk/favorites") ? E.PONED : e.startsWith("/lk/myorders/archive") ? E.ARCHIVE : e.startsWith("/lk/myorders/delivery") ? E.ORDERS : e.startsWith("/lk/claims") || e.startsWith("/lk/refund") ? E.CLAIMS : e.startsWith("/lk") ? E.PROFILE : e.startsWith("/services/") || e.startsWith("/promo/") || e.startsWith("/presservice") ? E.SERVICES : E.UNKNOWN
                }
                ,
                t = e,
                r = [{
                    key: "types",
                    get: function() {
                        return E
                    }
                }],
                (n = null) && D(t.prototype, n),
                r && D(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t;
                var t, n, r
            }();
            function B(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, x(r.key), r)
                }
            }
            function x(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            function j(e, t) {
                return j = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                j(e, t)
            }
            const L = function(e) {
                function t() {
                    var t, n, r;
                    return (r = e.call(this) || this).navbarContainer = document.querySelector(".j-navbar-mobile"),
                    r.navbarMenuLink = null === (t = r.navbarContainer) || void 0 === t ? void 0 : t.querySelector("#catalogNavbarLink"),
                    r.currentType = O.getType(),
                    r.menuModel = {
                        type: r.currentType,
                        catalogState: !1,
                        router: r.$router,
                        isPremium: !!r.$auth.isAuth && (null === (n = r.$user.getUserGradeFromCache()) || void 0 === n ? void 0 : n.isPremium)
                    },
                    r.catalogState = !1,
                    r
                }
                var n, r;
                r = e,
                (n = t).prototype = Object.create(r.prototype),
                n.prototype.constructor = n,
                j(n, r);
                var o = t.prototype;
                return o.init = function() {
                    this._bindEvents(),
                    $.link(!0, this.navbarContainer, this.menuModel, {
                        sendAnalytics: e => {
                            const t = e.target.closest(".navbar-mobile__link");
                            t && this.$analitic.sendEvent("Header_T", {
                                name: t.dataset.wbaHeaderName
                            })
                        }
                        ,
                        showPopupLoginMobile: e => {
                            !1 === this.$router.userIsAuth && (e.preventDefault(),
                            wb.popup.showCustomPopup({
                                useHtml: !0,
                                popupClassesList: ["popup-login-mobile", "shown"],
                                contentClasses: ["popup__content"],
                                useCenteredFunction: !0,
                                onShow: e => {
                                    $.views.templates.popupLoginMobile.link(e.querySelector(".popup__content"), this)
                                }
                            }))
                        }
                    })
                }
                ,
                o.setType = function(e) {
                    this.catalogState = e == this.types.CATALOG,
                    this.catalogState ? e = null : this.currentType = e,
                    $.observable(this.menuModel).setProperty({
                        catalogState: this.catalogState,
                        type: e
                    })
                }
                ,
                o.setCatalog = function() {
                    this.setType("catalog")
                }
                ,
                o.isCatalog = function() {
                    return this.catalogState
                }
                ,
                o.isNavbarLink = function(e) {
                    return !!e.closest(".navbar-mobile__link")
                }
                ,
                o.revertActive = function() {
                    this.setType(this.currentType)
                }
                ,
                o.updatePremiumState = function() {
                    var e;
                    $.observable(this.menuModel).setProperty({
                        isPremium: null === (e = this.$user.getUserGradeFromCache()) || void 0 === e ? void 0 : e.isPremium
                    })
                }
                ,
                o.updateBasket = function(e) {
                    $.observable(this.menuModel).setProperty({
                        basketCount: e
                    })
                }
                ,
                o.updateEvents = function(e) {
                    $.observable(this.menuModel).setProperty({
                        eventsModel: e
                    })
                }
                ,
                o._bindEvents = function() {
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished || (this.currentType = O.getType(),
                        this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{
                            detail: {
                                currentType: this.currentType
                            }
                        })))
                    }
                    )),
                    this.$eventBus.addEventListener("OnlineChatInited", (e => {
                        this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{
                            detail: {
                                currentType: this.currentType,
                                isInit: !0
                            }
                        }))
                    }
                    )),
                    this.$eventBus.addEventListener("MobileMenuTypeChange", (e => {
                        const {currentType: t} = e.detail;
                        let n = "";
                        switch (t) {
                        case O.types.HOME:
                        case O.types.BASKET:
                        case O.types.PONED:
                        case O.types.ARCHIVE:
                        case O.types.ORDERS:
                        case O.types.PROFILE:
                        case O.types.SUBSCRIPTION:
                            n = t;
                            break;
                        case O.types.SECURITY:
                            n = O.types.PROFILE
                        }
                        this.setType(n)
                    }
                    )),
                    this.$eventBus.addEventListener("UserGradeUpdated", this.updatePremiumState.bind(this))
                }
                ,
                function(e, t, n) {
                    return t && B(e.prototype, t),
                    n && B(e, n),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    e
                }(t, [{
                    key: "menuLink",
                    get: function() {
                        return this.navbarMenuLink
                    }
                }, {
                    key: "types",
                    get: function() {
                        return O.types
                    }
                }])
            }(WbSpaModel);
            const N = function() {
                function e(e) {
                    this.delay = e.delay,
                    this.menuContainer = e.menuContainer,
                    this.timerId = null,
                    this.updateFirstLvlMenuTask = null,
                    this.success = !1,
                    this.menuItemsUpdated = null
                }
                var t = e.prototype;
                return t.lazyUpdateMenu = function() {
                    this.timerId = setTimeout(this._setUpdateFirstLvlMenuTask.bind(this), this.delay)
                }
                ,
                t.forceUpdateMenu = async function() {
                    this._setUpdateFirstLvlMenuTask();
                    try {
                        const e = await this.updateFirstLvlMenuTask;
                        return Promise.resolve(e)
                    } catch (e) {
                        return Promise.reject(!1)
                    }
                }
                ,
                t.reloadMenu = function() {
                    this.updateFirstLvlMenuTask = null,
                    this.forceUpdateMenu()
                }
                ,
                t._stopUpdatingMenu = function() {
                    this.timerId && clearTimeout(this.timerId)
                }
                ,
                t._setUpdateFirstLvlMenuTask = function() {
                    this.updateFirstLvlMenuTask && this.success || (this.updateFirstLvlMenuTask = this._updateFirstLvlMenu()),
                    this._stopUpdatingMenu()
                }
                ,
                t._updateFirstLvlMenu = async function() {
                    const [e] = await Promise.all([wb.spa.getCatalogMenu(), $.views.loadTemplateDictionaryAsync("menuTopTmpl")])
                      , t = e.fullMenu;
                    return this.menuItemsUpdated = await this._addMenuItemsFirstLvl(t, this.menuContainer),
                    this.success = !0,
                    Promise.resolve(e)
                }
                ,
                t._addMenuItemsFirstLvl = async function(e, t) {
                    const n = t.querySelector(".menu-burger__main-list");
                    let r = n.querySelectorAll(".j-menu-main-item")
                      , o = null
                      , i = !0
                      , s = 0;
                    for (let t = 0; t < e.length; t++) {
                        var a, l, c;
                        const u = e[t];
                        if (i && (o = null === (a = r) || void 0 === a ? void 0 : a[s]),
                        u.id == (null === (l = o) || void 0 === l || null === (c = l.dataset) || void 0 === c ? void 0 : c.menuId)) {
                            i = !0,
                            s++;
                            continue
                        }
                        i = !1;
                        const d = $.templates.menuFirstLvlTmpl.render(u);
                        o ? o.insertAdjacentHTML("beforebegin", d) : n.insertAdjacentHTML("beforeend", d)
                    }
                    if (r = t.querySelectorAll(".j-menu-main-item"),
                    e.length < r.length)
                        for (let t = e.length; t < r.length; t++)
                            r[t].remove();
                    return Promise.resolve(r)
                }
                ,
                e
            }();
            function U(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, F(r.key), r)
                }
            }
            function F(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            function R(e, t) {
                return R = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                R(e, t)
            }
            let W = function(e) {
                function t(t) {
                    var n;
                    return (n = e.call(this) || this).mobileMenu = new L,
                    n.layoutModel = t.layoutModel,
                    n.menuBtn = document.querySelector(".j-menu-burger-btn"),
                    n.menuContainer = document.querySelector(".j-menu-burger"),
                    n.mainMenuContainer = n.menuContainer.querySelector(".j-menu-burger-main"),
                    n.header = document.querySelector(".j-header"),
                    n.widthScrollbar = Math.abs(window.innerWidth - document.documentElement.clientWidth),
                    n.bodyOverflowClass = "body--overflow",
                    n.menuContainerActiveClass = "menu-burger--active",
                    n.innerMenuContainerActiveClass = "menu-burger__drop--active",
                    n.innerMenuItemActiveClass = "menu-burger__drop-list-item--active",
                    n.menuActiveClass = "j-menu-active",
                    n.mainMenuItemActiveClass = "menu-burger__main-list-item--active",
                    n.headerFixedClass = "header--fixed",
                    n.headerFixedAnimateClass = "header--fixed-animate",
                    n.menuItemActiveClass = "menu-burger__drop-list-item--active",
                    n.menuBtnCloseClass = "nav-element__burger--close",
                    n.menuOverlay = n._getMenuOverlay(document.body.querySelector(".j-menu-burger")),
                    n._menuOpenHandler = n._menuOpenHandler.bind(n),
                    n._menuCloseHandler = n._menuCloseHandler.bind(n),
                    n.firstLvlMenuUpdater = new N({
                        menuContainer: n.menuContainer,
                        delay: 12e3
                    }),
                    n.firstLvlMenuUpdater.lazyUpdateMenu(),
                    n
                }
                var n, r;
                r = e,
                (n = t).prototype = Object.create(r.prototype),
                n.prototype.constructor = n,
                R(n, r);
                var o = t.prototype;
                return o.isMenuOpened = function() {
                    return this.menuContainer.classList.contains(this.menuContainerActiveClass)
                }
                ,
                o.init = function() {
                    this.mobileMenu.init(),
                    this._bindEvents(),
                    this._initMobileSearchbar(!this.$isDesktop)
                }
                ,
                o._initMobileSearchbar = function(e) {
                    const t = this.mobileMenu.types;
                    let n = 0
                      , r = !1
                      , o = "";
                    function i() {
                        r || (window.requestAnimationFrame(a.bind(this)),
                        r = !0)
                    }
                    i = i.bind(this);
                    const s = (e, t) => {
                        e ? (this.header.classList.add(this.headerFixedClass),
                        window.requestAnimationFrame(( () => this.header.classList.add(this.headerFixedAnimateClass)))) : (t && this.header.classList.remove(this.headerFixedClass),
                        window.requestAnimationFrame(( () => this.header.classList.remove(this.headerFixedAnimateClass))))
                    }
                    ;
                    function a() {
                        const e = window.scrollY;
                        if (Math.abs(e - n) < 0)
                            return void (r = !1);
                        if (e <= this.headerFixedScrollTop)
                            return s(!1, !0),
                            void (r = !1);
                        const t = e > n;
                        t && "down" != o ? (this.$isDesktop ? s(!0) : s(!1),
                        o = "down") : t || "up" == o || (s(!0),
                        o = "up"),
                        n = e > 0 ? e : 0,
                        r = !1
                    }
                    const l = e => {
                        const {currentType: n} = e.detail;
                        n == t.PRODUCTCARD ? this.header.classList.add("hide-mobile") : this.header.classList.remove("hide-mobile"),
                        n == t.HOME || n == t.SERVICES ? window.addEventListener("scroll", i) : (this.header.classList.remove(this.headerFixedClass, this.headerFixedAnimateClass),
                        window.removeEventListener("scroll", i))
                    }
                    ;
                    this.$eventBus.addEventListener("MobileMenuTypeChange", l);
                    l({
                        detail: {
                            currentType: O.getType()
                        }
                    })
                }
                ,
                o._renderInnerMenu = async function() {
                    var e, t;
                    const [n,r,o] = await Promise.all([this.layoutModel.$moduleLoader.loadModuleAsync("sideMenu"), this.firstLvlMenuUpdater.forceUpdateMenu()])
                      , i = this.layoutModel.$services.bannersService.getMenuBanners()
                      , s = new n(this.menuContainer,r,i);
                    return s.checkMenuItemForHide(s.menuItems, null === (e = this.$geoLocation) || void 0 === e || null === (t = e.location) || void 0 === t ? void 0 : t.destinations),
                    s.relinkModel(),
                    s.onSearchImage = () => this._onMenuHide(),
                    s
                }
                ,
                o._bindEvents = function() {
                    var e, t, n;
                    this.menuBtn.addEventListener("mousedown", this._menuOpenHandler),
                    null === (e = this.mobileMenu) || void 0 === e || null === (t = e.menuLink) || void 0 === t || t.addEventListener("mousedown", this._menuOpenHandler),
                    null === (n = wb.displayModeSettings) || void 0 === n || n.addObserver(( () => {
                        this._onMenuHide(),
                        this._initMobileSearchbar(!this.$isDesktop)
                    }
                    )),
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this._onMenuHide()
                    }
                    )),
                    this.$eventBus.addEventListener("HideSideMenu", ( () => {
                        this.isMenuOpened() && (document.body.classList.remove(this.bodyOverflowClass),
                        document.body.style.paddingRight = "")
                    }
                    )),
                    this.$eventBus.addEventListener("SelectedSideMenuItemUpdated", (e => {
                        const {menuId: t} = e.detail;
                        this.mainMenuItems.forEach((e => e.classList.toggle(this.mainMenuItemActiveClass, e.dataset.menuId == t)))
                    }
                    ))
                }
                ,
                o._bindMenuCloseHandlers = function() {
                    document.addEventListener("mousedown", this._menuCloseHandler)
                }
                ,
                o._unbindMenuCloseHandlers = function() {
                    document.removeEventListener("mousedown", this._menuCloseHandler)
                }
                ,
                o._menuOpenHandler = function(e) {
                    if (this.isMenuOpened() || !this.$isDesktop && this.mobileMenu.isCatalog())
                        return;
                    e.stopPropagation(),
                    e.preventDefault();
                    const t = e.currentTarget;
                    let n = "touchstart" === e.type ? "touchend" : "mouseup";
                    const r = () => {
                        t.removeEventListener(n, r),
                        this.layoutModel.$helper.loadCssAsync(wb.settings.styles.menuBurger).then(( () => this._onMenuShow()))
                    }
                    ;
                    t.addEventListener(n, r),
                    this.visibleCertItemMenu && wb.analitics.sendEvent("Certificate_S", {
                        location: "Catalog"
                    })
                }
                ,
                o._menuCloseHandler = function(e) {
                    const t = e.target
                      , n = this;
                    if (!(this.$isDesktop && t.closest(`.${this.menuActiveClass}`) || !this.$isDesktop && !this.mobileMenu.isNavbarLink(t) && !this.menuBtn.contains(t)))
                        if (this.$isDesktop) {
                            const i = e.currentTarget
                              , s = "touchstart" === e.type ? "touchend" : "mouseup";
                            function a() {
                                i.removeEventListener(s, a),
                                o()
                            }
                            i.addEventListener(s, a)
                        } else {
                            var r;
                            null === (r = this.sideMenu) || void 0 === r || r.touchHandlerHelper(e, o)
                        }
                    function o() {
                        n._onMenuHide()
                    }
                }
                ,
                o.refreshMenu = function(e) {
                    e && (wb.spa.clearCatalogMenu(),
                    this.firstLvlMenuUpdater.reloadMenu()),
                    this.menuRendered = !1,
                    !this.$isDesktop && this.isMenuOpened() && this._onMenuShow()
                }
                ,
                o._onMenuShow = async function() {
                    if (document.body.classList.add(this.bodyOverflowClass),
                    document.body.style.paddingRight = `${this.widthScrollbar}px`,
                    "d" === wb.settings.displayMode && scrollY <= this.header.offsetHeight && document.documentElement.style.setProperty("--scroll-top", window.scrollY + "px"),
                    this.menuContainer.classList.add(this.menuContainerActiveClass),
                    this.mainMenuContainer.classList.add(this.menuActiveClass),
                    this.menuBtn.classList.add(this.menuBtnCloseClass),
                    this.menuOverlay.show(),
                    !this.$isDesktop && this.mobileMenu.setCatalog(),
                    this._bindMenuCloseHandlers(),
                    this.menuRendered) {
                        var e;
                        null === (e = this.sideMenu) || void 0 === e || e.clearShownBanners()
                    } else {
                        const e = await this._renderInnerMenu();
                        this.sideMenu = e,
                        this.mainMenuItems.forEach((e => {
                            var t, n, r;
                            if (!this.$isDesktop && ("2192" === e.dataset.id || "4853" === e.dataset.id))
                                return;
                            const o = this.sideMenu.findItem(e.dataset.menuId);
                            o && (((null === (t = o.childs) || void 0 === t ? void 0 : t.length) > 0 || (null === (n = o.banners) || void 0 === n ? void 0 : n.length) > 0) && e.classList.add("menu-burger__main-list-item--subcategory"),
                            e.classList.toggle("hide", null !== (r = o.hide) && void 0 !== r && r),
                            1234 === o.id && (this.visibleCertItemMenu = !0,
                            wb.analitics.sendEvent("Certificate_S", {
                                location: "Catalog"
                            })))
                        }
                        )),
                        this.menuRendered = !0
                    }
                    this._menuMainHoverHandler()
                }
                ,
                o._onMenuHide = function() {
                    var e, t;
                    null === (e = this.sideMenu) || void 0 === e || e.changeSelectedMenuItem(null),
                    null === (t = this.sideMenu) || void 0 === t || t.innerMenuHide(),
                    document.body.classList.remove(this.bodyOverflowClass),
                    document.body.style.paddingRight = "",
                    this.menuContainer.classList.remove(this.menuContainerActiveClass),
                    this.mainMenuContainer.classList.remove(this.menuActiveClass),
                    this.menuBtn.classList.remove(this.menuBtnCloseClass),
                    this.menuOverlay.hide(),
                    !this.$isDesktop && this.mobileMenu.revertActive(),
                    this._unbindMenuCloseHandlers()
                }
                ,
                o._menuMainHoverHandler = function() {
                    !this.subMenuShowerActivated && this.$isDesktop && (this.layoutModel.$moduleLoader.loadModuleAsync("subMenuShower").then((e => new e(this.mainMenuItems,{
                        over: e => {
                            this.$isDesktop && this.sideMenu.onMenuSelected(e)
                        }
                        ,
                        out: () => {}
                        ,
                        timeout: 30,
                        interval: 40,
                        sensitivity: 4
                    }))),
                    this.subMenuShowerActivated = !0)
                }
                ,
                o._getMenuOverlay = function(e) {
                    const t = e;
                    let n;
                    function r() {
                        n && n.remove(),
                        n = null
                    }
                    return {
                        show: function() {
                            "m" != wb.settings.displayMode ? n || (t.insertAdjacentHTML("beforebegin", '<div class="overlay overlay--menu-burger j-overlay"></div>'),
                            n = e.parentElement.querySelector(".j-overlay")) : r()
                        },
                        hide: r
                    }
                }
                ,
                function(e, t, n) {
                    return t && U(e.prototype, t),
                    n && U(e, n),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    e
                }(t, [{
                    key: "headerFixedScrollTop",
                    get: function() {
                        return this.$isDesktop ? 24 : 400
                    }
                }, {
                    key: "mainMenuItems",
                    get: function() {
                        var e;
                        return null !== (e = this.firstLvlMenuUpdater) && void 0 !== e && e.menuItemsUpdated ? this.firstLvlMenuUpdater.menuItemsUpdated : this.menuContainer.querySelectorAll(".menu-burger__main-list-item")
                    }
                }])
            }(WbSpaModel);
            const H = W;
            const z = function() {
                function e(e) {
                    this.layoutModel = e.layoutModel,
                    this.cookiesWrapper = document.querySelector(".j-fixed-block .fixed-block__cookies"),
                    this.check()
                }
                var t = e.prototype;
                return t._show = function() {
                    this.cookiesWrapper.classList.contains("hide") && ($.link(!0, this.cookiesWrapper, this),
                    this.cookiesWrapper.classList.remove("hide"),
                    this.layoutModel.$analitic.sendEvent("Alert_S", {
                        name: "cookies_alert"
                    }),
                    window.BroadcastChannel && (this.channel = new BroadcastChannel("_cookiePolicy"),
                    this.channel.addEventListener("message", this._hide.bind(this))))
                }
                ,
                t._hide = function() {
                    var e;
                    this.cookiesWrapper.classList.contains("hide") || (this.cookiesWrapper.classList.add("hide"),
                    $.unlink(this.cookiesWrapper),
                    null === (e = this.channel) || void 0 === e || e.close(),
                    this.channel = null,
                    this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("CookiePolicyHide")))
                }
                ,
                t.check = function() {
                    const e = "1" === wb.cookieHelper.getCookie("_cp");
                    return e ? this._hide() : this._show(),
                    e
                }
                ,
                t.ok = function() {
                    const e = this.check();
                    var t;
                    (e || wb.cookieHelper.setCookie("_cp", "1", {
                        "max-age": 7776e3
                    }),
                    this.cookiesWrapper) && (null === (t = this.channel) || void 0 === t || t.postMessage("hide"),
                    this._hide(),
                    e || this.layoutModel.$analitic.sendEvent("Alert_T", {
                        name: "cookies_alert",
                        type: "ok"
                    }))
                }
                ,
                t.cookies = function() {
                    this.layoutModel.$analitic.sendEvent("Alert_T", {
                        name: "cookies_alert",
                        type: "cookies"
                    })
                }
                ,
                e
            }();
            let q = function() {
                function e(e) {
                    this.$base = e.layoutModel,
                    this.$base.$eventBus.addEventListener("onUserAuth", this._onAuthLogin.bind(this)),
                    this.$base.$auth.isAuth && window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this._onAuthLogin()
                    }
                    ), {
                        once: !0
                    })
                }
                var t = e.prototype;
                return t._loadResources = function() {
                    return this.$base.$moduleLoader.loadModuleAsync("offer0724").then((e => {
                        this.oferta || (this.oferta = new e)
                    }
                    ))
                }
                ,
                t._onAuthLogin = function() {
                    this._loadResources().then((e => {
                        this.oferta.show()
                    }
                    ))
                }
                ,
                t.confirm = async function() {
                    var e;
                    this.$base.$auth.isAuth && (await this._loadResources(),
                    null === (e = this.oferta) || void 0 === e || e.confirm())
                }
                ,
                t.promise = async function() {
                    var e;
                    if (this.$base.$auth.isAuth)
                        return await this._loadResources(),
                        (null === (e = this.oferta) || void 0 === e ? void 0 : e.promise()) || new Promise((e => e()))
                }
                ,
                e
            }();
            const V = q;
            function G(e, t) {
                return G = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                G(e, t)
            }
            let J = function(e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).initTask = new t.$helper.Deferred,
                    t
                }
                var n, r;
                r = e,
                (n = t).prototype = Object.create(r.prototype),
                n.prototype.constructor = n,
                G(n, r);
                var o = t.prototype;
                return o.preInit = function() {
                    const e = {
                        layoutModel: this
                    };
                    this.header = new k(e),
                    this.oferta = new V(e)
                }
                ,
                o.init = function() {
                    const e = {
                        layoutModel: this
                    };
                    this.footer = new T(e),
                    this.menuTop = new H(e),
                    this.cookiePolicy = new z(e),
                    this.menuTop.init();
                    const t = this.footer.init()
                      , n = this.header.init();
                    Promise.all([t, n]).then(( () => this.initTask.resolve()))
                }
                ,
                o.updateAfterLogin = function() {
                    this.$user.reset(),
                    this.header.shortBasketInfo.update(),
                    this.$geoLocation.updateLocation(),
                    this.$router.clearNotActiveContainer()
                }
                ,
                t
            }(WbSpaModel);
            Object.defineProperties(window, {
                MainLayoutSpa: {
                    value: J
                }
            });
            const Q = J
        }
        ,
        29017: () => {
            function e(t, n) {
                return e = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                e(t, n)
            }
            let t = null;
            function n(e) {
                return () => {
                    e.style.top = Math.max(document.documentElement.clientHeight / 2 + window.scrollY - e.clientHeight / 2, window.scrollY) + "px",
                    e.style.left = Math.max(document.documentElement.clientWidth / 2 - e.clientWidth / 2, 0) + "px"
                }
            }
            function r(e) {
                const t = document.createElement("div");
                return t.classList.addMany(e),
                t
            }
            function o(e, t) {
                const n = document.createElement("a");
                n.href = "#",
                t.push("close"),
                n.classList.addMany(t),
                e.appendChild(n)
            }
            function i(e, t, n, r, o, i) {
                const s = document.createElement("div");
                if (null != r && Array.isArray(r) && s.classList.addMany(r),
                n)
                    s.innerHTML = t;
                else if (i) {
                    let t = document.querySelector(i)
                      , n = document.createElement("span");
                    n.id = "popup_pc",
                    t.parentElement.insertBefore(n, t),
                    e.placeholder = document.getElementById(n.id),
                    s.appendChild(t)
                } else
                    s.textContent = t;
                null != o && Object.entries(o).forEach(( ([e,t]) => s.setAttribute(e, t))),
                e.appendChild(s)
            }
            function s(e, t, n) {
                const r = document.createElement("button");
                r.classList.addMany(n || []),
                r.textContent = t,
                e.appendChild(r)
            }
            function a(e, n, r, o) {
                var i, s, a;
                let l;
                const c = e => {
                    var t;
                    null == e || e.preventDefault(),
                    null !== (t = o.onBeforeHide) && void 0 !== t && t.call(o) || (n.classList.remove("shown"),
                    !o.keepOpenOnTransition && window.removeEventListener("spaTransition", l),
                    Promise.resolve().then(( () => {
                        var t;
                        null === (t = o.onHide) || void 0 === t || t.call(o, e)
                    }
                    )))
                }
                ;
                l = () => {
                    c()
                }
                ,
                !o.keepOpenOnTransition && window.addEventListener("spaTransition", l);
                const u = e => {
                    27 == e.keyCode && (c(e),
                    window.removeEventListener("keydown", u, !0))
                }
                ;
                (o.modal || null == o.modal) && (window.addEventListener("keydown", u, !0),
                null == r || r.addEventListener("click", c)),
                (null === (i = o.closeSelector) || void 0 === i ? void 0 : i.length) > 0 && n.addEventListener("click", this.$helper.delegator(o.closeSelector, c)),
                null != t && (t.close(),
                t = null);
                const d = function(e) {
                    if (!e)
                        return 0;
                    const t = document.querySelectorAll(".j-custom-overlay");
                    let n = 0;
                    return t.forEach((e => {
                        n = Math.max(n, e.style.zIndex)
                    }
                    )),
                    n
                }(r);
                r && (r.style.zIndex = d + 300),
                n.style.zIndex = d + 300 + 1,
                e.appendChild(n),
                r && e.appendChild(r),
                null === (s = o.onBeforeShow) || void 0 === s || s.call(o, n),
                document.body.insertBefore(e, document.body.firstChild),
                null === (a = o.onShow) || void 0 === a || a.call(o, n);
                const p = {
                    popup: n,
                    overlay: r,
                    close: e => {
                        var t;
                        return null === (t = o.onHide) || void 0 === t ? void 0 : t.call(o, n, e)
                    }
                    ,
                    centered: o.centeredFunction
                };
                return o.onlyOne && (t = p),
                p
            }
            function l(e, t, l, c=!0, u=!1) {
                e instanceof Error ? e = e.isCustomError && !e.isCancelled && e.message ? e.message : this.$localziation.serverError : e || (e = this.$localziation.serverError);
                const d = document.createDocumentFragment();
                let p = ["popup", "popup-alert", "shown"];
                t && (Array.isArray(t) ? p = p.concat(t) : p.push(t));
                const h = r(p);
                d.appendChild(h),
                u && o(h, ["popup__close"]),
                i(h, e, !0),
                null !== l && s(h, l || this.$localziation.close, ["popup__btn-main", "popup-alert__close"]);
                const m = document.createElement("div");
                m.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]);
                const f = n(h);
                window.addEventListener("resize", f),
                a.call(this, d, h, m, {
                    onlyOne: !0,
                    closeSelector: ".popup-alert__close, .popup__close",
                    modal: c,
                    onShow: function() {
                        h.style.display = "block",
                        f()
                    },
                    onHide: function() {
                        window.removeEventListener("resize", f),
                        h.remove(),
                        m.remove()
                    }
                })
            }
            function c(e, t={}) {
                const n = {
                    msg: e,
                    lockScroll: !0,
                    modal: !1,
                    showCloseBtn: !0,
                    useHtml: !0,
                    contentClasses: ["content"],
                    popupClassesList: ["shown", "tooltip", "tooltip--mobile", ...(null == t ? void 0 : t.classes) || []],
                    useCenteredFunction: !0,
                    onShow: e => e.classList.remove("popup")
                };
                return wb.popup.showCustomPopup(n)
            }
            function u(e, t, s, l) {
                const c = document.createDocumentFragment()
                  , u = r(t);
                o(u, ["j-close"]),
                i(u, e, !0, ["content", "quick-order-popup-content", "j-sizepicker-content"], null);
                const d = document.createElement("div");
                d.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]),
                u.id = "size-picker-popup",
                u.style.opacity = "0";
                const p = n(u);
                window.addEventListener("resize", p),
                a.call(this, c, u, d, {
                    closeSelector: ".j-close",
                    onHide: function() {
                        window.removeEventListener("resize", p),
                        u.remove(),
                        d.remove(),
                        null == l || l()
                    },
                    onShow: function() {
                        u.style.display = "block",
                        p(),
                        u.style.opacity = "1",
                        null == s || s(u)
                    }
                })
            }
            function d(e) {
                const t = this.$helper.deepMerge({}, {
                    overlay: !0,
                    showCross: !0,
                    useHtml: !1,
                    popupClassesList: [],
                    contentClasses: [],
                    overlayClasses: [],
                    contentAttributeDictionary: {},
                    msg: "",
                    closeClass: ["j-close", "popup__close"],
                    modal: !0,
                    closeSelector: ".j-close",
                    useCenteredFunction: !1,
                    lockScroll: !1,
                    onlyOne: !1
                }, e)
                  , s = document.createDocumentFragment()
                  , l = r(["popup"].concat(t.popupClassesList));
                t.showCross && o(l, t.closeClass),
                i(l, t.msg, t.useHtml, t.contentClasses, t.contentAttributeDictionary, t.srcElem),
                t.showCloseBtn && function(e, t) {
                    const n = document.createElement("button");
                    n.innerText = "Закрыть",
                    !t.length && t.push("close"),
                    n.classList.addMany(t),
                    e.appendChild(n)
                }(l, t.closeClass);
                const c = t.overlay ? document.createElement("div") : null;
                if (c) {
                    const e = ["overlay", "initially-hidden", "j-custom-overlay"].concat(t.overlayClasses);
                    c.classList.addMany(e)
                }
                let u;
                return t.useCenteredFunction && (u = n(l),
                window.addEventListener("resize", u)),
                a.call(this, s, l, c, {
                    onBeforeHide: () => {
                        var e;
                        return null === (e = t.onBeforeHide) || void 0 === e ? void 0 : e.call(t)
                    }
                    ,
                    onHide: function(e, n) {
                        var r, o;
                        if (null === (r = t.onBeforeHide) || void 0 === r || !r.call(t)) {
                            var i, s, a;
                            if (t.lockScroll && !(null != n && n.keepLockScroll || t.keepLockScroll) && (document.body.classList.remove("body--overflow"),
                            document.body.style.paddingRight = ""),
                            t.useCenteredFunction && window.removeEventListener("resize", u),
                            t.srcElem)
                                null === (i = l.placeholder) || void 0 === i || null === (s = i.parentElement) || void 0 === s || s.insertBefore(document.querySelector(t.srcElem), l.placeholder),
                                null === (a = l.placeholder) || void 0 === a || a.remove();
                            null === (o = t.onHide) || void 0 === o || o.call(t, l, e),
                            l.remove(),
                            null == c || c.remove()
                        }
                    },
                    onShow: () => {
                        var e;
                        if (document.activeElement.blur(),
                        t.lockScroll && !document.body.classList.contains("body--overflow")) {
                            const e = Math.abs(window.innerWidth - document.documentElement.clientWidth);
                            document.body.classList.add("body--overflow"),
                            document.body.style.paddingRight = `${e}px`
                        }
                        const n = () => {
                            l.style.opacity = 1,
                            t.useCenteredFunction && u()
                        }
                          , r = this.$helper.nextTick().then(( () => (n(),
                        Promise.resolve())));
                        Object.defineProperty(l, "contentEl", {
                            get: () => l.querySelector(".popup__content")
                        }),
                        t.onShowAsync ? t.onShowAsync(l).then(n) : null === (e = t.onShow) || void 0 === e || e.call(t, l, r)
                    }
                    ,
                    onBeforeShow: function() {
                        var e;
                        l.style.opacity = 0,
                        l.style.display = "block",
                        null === (e = t.onBeforeShow) || void 0 === e || e.call(t, l)
                    },
                    modal: t.modal,
                    closeSelector: t.closeSelector,
                    centeredFunction: u,
                    onlyOne: t.onlyOne,
                    keepOpenOnTransition: t.keepOpenOnTransition
                })
            }
            function p(e, t) {
                let n;
                const r = this.$helper
                  , o = wb.popup.showCustomPopup({
                    useHtml: !0,
                    popupClassesList: ["popup-video", "shown"],
                    contentClasses: ["content"],
                    useCenteredFunction: !0,
                    msg: $.templates('<h2 class="popup__header">{{>title}}</h2><div class="video"><video id="videoPlayer" class="video-js vjs-default-skin vjs-big-play-centered vjs-waiting" width="855" controls autoplay preload></video></div>')({
                        title: t
                    }),
                    onBeforeShow: e => {
                        e.style.opacity = 0,
                        e.style.display = "block"
                    }
                    ,
                    onShow: t => {
                        n = videojs("videoPlayer", {
                            html5: {
                                nativeAudioTracks: !1,
                                nativeVideoTracks: !1,
                                hls: {
                                    overrideNative: !0
                                }
                            }
                        }),
                        n.ready((function() {
                            this.src({
                                src: e,
                                type: "application/x-mpegURL",
                                withCredentials: !0
                            })
                        }
                        )),
                        r.nextTick().then(( () => {
                            t.style.opacity = 1,
                            o.centered()
                        }
                        ))
                    }
                    ,
                    onHide: () => {
                        n.isDisposed() || (n.isInPictureInPicture() && n.exitPictureInPicture(),
                        n.dispose())
                    }
                })
            }
            function h(e, t, n, r) {
                let o;
                const i = this.$helper
                  , s = wb.popup.showCustomPopup({
                    useHtml: !0,
                    popupClassesList: ["i-popup-video-review", "j-popup-video-review", "shown"],
                    contentClasses: ["content"],
                    useCenteredFunction: !0,
                    msg: t,
                    onBeforeShow: e => {
                        e.style.opacity = 0,
                        e.style.display = "block"
                    }
                    ,
                    onShow: t => {
                        o = videojs("videoPlayer", {
                            html5: {
                                nativeAudioTracks: !1,
                                nativeVideoTracks: !1,
                                hls: {
                                    overrideNative: !0
                                }
                            }
                        }),
                        o.ready((function() {
                            this.src({
                                src: e,
                                type: "application/x-mpegURL",
                                withCredentials: !0
                            })
                        }
                        )),
                        i.nextTick().then(( () => {
                            t.style.opacity = 1,
                            s.centered()
                        }
                        )),
                        null == n || n(t)
                    }
                    ,
                    onHide: () => {
                        o.isDisposed() || (o.isInPictureInPicture() && o.exitPictureInPicture(),
                        o.dispose(),
                        null == r || r())
                    }
                })
            }
            function m(e, t={}) {
                return new Promise((l => {
                    var c, u, d;
                    document.activeElement.blur();
                    const p = document.createDocumentFragment();
                    let h = ["popup", "popup-confirm", "shown"];
                    t.classList && (h = h.concat(t.classList));
                    let m = ["popup__btn-main", "j-yes"]
                      , f = ["popup__btn-base", "j-no"];
                    t.yesBtnClassList && (m = t.yesBtnClassList),
                    t.noBtnClassList && (f = t.noBtnClassList);
                    const y = r(h);
                    y.style.display = "block",
                    t.contentClasses = t.contentClasses || [],
                    t.contentClasses.push("popup__msg"),
                    i(y, e, !0, t.contentClasses);
                    let g = document.createElement("div");
                    g.classList.add("popup__btn", "btn-block"),
                    y.appendChild(g);
                    const v = [];
                    if ((null === (c = t.showYesBtn) || void 0 === c || c) && v.push(( () => s(g, t.yes || $.localize("Да"), m))),
                    (null === (u = t.showNoBtn) || void 0 === u || u) && v.push(( () => s(g, t.no || $.localize("Нет"), f))),
                    t.inverseBtns && v.reverse(),
                    v.forEach((e => e())),
                    t.showCross && o(y, ["popup__close"]),
                    t.lockScroll && !document.body.classList.contains("body--overflow")) {
                        const e = Math.abs(window.innerWidth - document.documentElement.clientWidth);
                        document.body.classList.add("body--overflow"),
                        document.body.style.paddingRight = `${e}px`
                    }
                    const b = document.createElement("div");
                    b.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]);
                    const w = a.call(this, p, y, b, {
                        onHide: function() {
                            y.remove(),
                            b.remove(),
                            l(!1),
                            t.lockScroll && (document.body.classList.remove("body--overflow"),
                            document.body.style.paddingRight = "")
                        },
                        onShow: function() {
                            var e;
                            n(y)(),
                            y.querySelector(m.map((e => "." + e)).join("")).addEventListener("click", (e => {
                                l(!0),
                                w.close()
                            }
                            )),
                            null === (e = y.querySelector(f.map((e => "." + e)).join(""))) || void 0 === e || e.addEventListener("click", (e => {
                                l(!1),
                                w.close()
                            }
                            ))
                        },
                        modal: null !== (d = t.modal) && void 0 !== d && d,
                        closeSelector: t.showCross ? ".popup__close" : null
                    })
                }
                ))
            }
            function f(e, {width: t=600, height: n=500}={}) {
                const r = [`top=${Math.floor((window.screenY || window.screenTop || 0) + (window.outerHeight - n) / 2) || 0}`, `left=${Math.floor((window.screenX || window.screenLeft || 0) + (window.outerWidth - t) / 2) || 0}`, `width=${t}`, `height=${n}`, "status=0", "toolbar=0"];
                return null != window.open(e, "", r.join(","))
            }
            let y = function(t) {
                function n() {
                    return t.apply(this, arguments) || this
                }
                var r, o;
                o = t,
                (r = n).prototype = Object.create(o.prototype),
                r.prototype.constructor = r,
                e(r, o);
                var i = n.prototype;
                return i.renderModalError = function() {
                    return l.apply(this, arguments)
                }
                ,
                i.renderModalAdaptive = function() {
                    return c.apply(this, arguments)
                }
                ,
                i.showCustomPopup = function() {
                    return d.apply(this, arguments)
                }
                ,
                i.confirm = function() {
                    return m.apply(this, arguments)
                }
                ,
                i.videoPlayer = function() {
                    return p.apply(this, arguments)
                }
                ,
                i.videoReviewPlayer = function() {
                    return h.apply(this, arguments)
                }
                ,
                i.showSizePickerPopup = function() {
                    return u.apply(this, arguments)
                }
                ,
                i.browserPopup = function() {
                    return f.apply(this, arguments)
                }
                ,
                i.showFeedbackError = function(e) {
                    return $.views.loadTemplateAsync("popuperrorunbuy").then((t => {
                        wb.popup.showCustomPopup({
                            useHtml: !0,
                            msg: t.render({
                                errorMessage: e.isCancelled ? null : e.message
                            }),
                            popupClassesList: ["popup-error-unbuy", "shown"],
                            contentClasses: ["popup__content"],
                            useCenteredFunction: !0,
                            modal: !0
                        })
                    }
                    ))
                }
                ,
                n
            }(WbSpaModel);
            wb.popup = new y
        }
        ,
        28148: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => a
            });
            const r = "spa_history";
            new Set;
            let o = function() {
                function e() {
                    this.history = new i
                }
                var t = e.prototype;
                return t.addItem = function(e) {
                    this.history.push(e),
                    this._updateCache()
                }
                ,
                t.tryInitFromCache = function(e) {
                    const t = sessionStorage.getObject(r);
                    return t && e && this.history.tryRevokeFromCache(t) && this.history.findCurrent(e),
                    this
                }
                ,
                t.updateCurrent = function(e) {
                    this.history.findCurrent(e)
                }
                ,
                t.updateCurrentItem = function(e) {
                    this.history.tryUpdateCurrrent(e) || this.history.push(e),
                    this._updateCache()
                }
                ,
                t.canMove = function(e) {
                    return this.history.canMove(e)
                }
                ,
                t._updateCache = function() {
                    sessionStorage.putObject(r, this.history)
                }
                ,
                e.generateId = function() {
                    return WbSpaModel.prototype.$generateGuid()
                }
                ,
                e
            }()
              , i = function() {
                function e() {
                    this.head = null,
                    this.current = null
                }
                var t = e.prototype;
                return t.push = function(e) {
                    const t = new s(e,this.current);
                    null == this.head || null == this.current ? this.head = t : this.current.updateNext(t),
                    this.current = t
                }
                ,
                t.tryUpdateCurrrent = function(e) {
                    return null != this.current && (this.current.update(e),
                    !0)
                }
                ,
                t.findCurrent = function(e) {
                    const {id: t} = e;
                    let n = this.head;
                    for (; n; ) {
                        if (n.state.id == t) {
                            this.current = n;
                            break
                        }
                        n = n.next
                    }
                }
                ,
                t.tryRevokeFromCache = function(e) {
                    const t = e.reduce(( (e, t) => (e.set(t.state, new s(t.state)),
                    e)), new Map);
                    e.forEach((e => {
                        const n = t.get(e.state);
                        if (e.next) {
                            const r = t.find((t => t.state.id == e.next));
                            n.updateNext(r)
                        }
                        if (e.previous) {
                            const r = t.find((t => t.state.id == e.previous));
                            n.updatePrevious(r)
                        }
                    }
                    ));
                    const n = t.find((e => null == e.previous));
                    return !!n && (this.head = n,
                    !0)
                }
                ,
                t.toJSON = function() {
                    let e = this.head;
                    const t = [];
                    for (; e; ) {
                        var n, r;
                        t.push({
                            state: e.state,
                            next: null === (n = e.next) || void 0 === n ? void 0 : n.state.id,
                            previous: null === (r = e.previous) || void 0 === r ? void 0 : r.state.id
                        }),
                        e = e.next
                    }
                    return t
                }
                ,
                t.canMove = function(e) {
                    let t = this.current
                      , n = e > 0 ? -1 : 1
                      , r = e > 0 ? "next" : "previous"
                      , o = e;
                    for (; 0 != o; )
                        if (t = t[r],
                        o += n,
                        null == t)
                            return;
                    return !0
                }
                ,
                e
            }()
              , s = function() {
                function e(e, t) {
                    this.state = e,
                    this.previous = t,
                    this.next = null
                }
                var t = e.prototype;
                return t.updateNext = function(e) {
                    this.next = e
                }
                ,
                t.updatePrevious = function(e) {
                    this.previous = e
                }
                ,
                t.update = function(e) {
                    this.state = e
                }
                ,
                e
            }();
            const a = o
        }
        ,
        84230: (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
            "use strict";
            __webpack_require__.d(__webpack_exports__, {
                A: () => __WEBPACK_DEFAULT_EXPORT__
            });
            var _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(28148);
            function _defineProperties(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, _toPropertyKey(r.key), r)
                }
            }
            function _createClass(e, t, n) {
                return t && _defineProperties(e.prototype, t),
                n && _defineProperties(e, n),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                e
            }
            function _toPropertyKey(e) {
                var t = _toPrimitive(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            function _toPrimitive(e, t) {
                if ("object" != typeof e || !e)
                    return e;
                var n = e[Symbol.toPrimitive];
                if (void 0 !== n) {
                    var r = n.call(e, t || "default");
                    if ("object" != typeof r)
                        return r;
                    throw new TypeError("@@toPrimitive must return a primitive value.")
                }
                return ("string" === t ? String : Number)(e)
            }
            const DEFAULT_PREVIEW = "preview_General"
              , APP_CONTAINERS = Object.freeze([{
                containerId: 0,
                viewModel: null
            }, {
                containerId: 1,
                viewModel: null
            }, {
                containerId: 2,
                viewModel: null
            }])
              , VIEW_MODEL_STATUSES = Object.freeze({
                prepearing: 0,
                readyToInstall: 1,
                installed: 2,
                destroyed: 3
            })
              , VALID_EXTERNAL_DOMAINS = Object.freeze(["vmeste.wildberries.ru", "vmeste-stage.wildberries.ru", "digital.wildberries.ru", "vsemrabota.ru", "guru.wildberries.ru", "guru-stage.wildberries.ru", "travel.wildberries.ru", "digital.wb.ru", "seller.wildberries.ru"]);
            let Router = function() {
                function Router() {}
                var _proto = Router.prototype;
                return _proto.init = async function(e) {
                    var t;
                    this.customHistory = (new _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A).tryInitFromCache(window.history.state),
                    this.abortController = new AbortController,
                    this.routeParameters = {},
                    this.clientRenderInited = !1,
                    this.referrer = document.referrer,
                    Object.defineProperty(document, "referrer", {
                        get: function() {
                            return WbSpaModel.prototype.$router.referrer
                        }
                    });
                    let n = null === (t = this._findRoute(window.location.pathname)) || void 0 === t ? void 0 : t.name;
                    if (!n) {
                        try {
                            const e = await this.$httpClient.fetchJSON(`/webapi/check-redirect${window.location.pathname}${window.location.search}`);
                            var r;
                            if (null != e && e.redirect)
                                n = null === (r = this._findRoute(window.location.pathname)) || void 0 === r ? void 0 : r.name
                        } catch (e) {}
                        if (!n)
                            return this._bindEvents(),
                            this.moveTo404Async()
                    }
                    this.currentRoute = this.routesDictionary[n],
                    this.targetRoute = n,
                    this._bindEvents();
                    const o = this.routesDictionary[n].useSSR;
                    return o || (this.current = $.templates["preview_" + n] ? "preview_" + n : DEFAULT_PREVIEW),
                    this._replaceState({
                        name: n
                    }, document.title, window.location.href),
                    this.loadingTemplate = n,
                    o && null != e ? this._initSSR(e, n) : this._routerTransitionAsync(n, window.location, !0).then(( ({needStateUpdate: e}) => Promise.resolve(e))).catch((e => (console.log(e),
                    e.isCancelled || this.moveTo500Async(),
                    Promise.resolve())))
                }
                ,
                _proto.setData = function(e, t) {
                    this.routesDictionary = e,
                    this.tmplHashes = t
                }
                ,
                _proto.refresh = function() {
                    const e = this.currentRoute;
                    this.clearNotActiveContainer(),
                    this.goToRoute(e, window.location, !0)
                }
                ,
                _proto.clearNotActiveContainer = function() {
                    this.appContainers.filter((e => e.containerId !== this.activeContainer)).forEach((e => {
                        var t, n;
                        null !== e.viewModel && ((null === (t = e.viewModel) || void 0 === t ? void 0 : t.__modelStatus__) != VIEW_MODEL_STATUSES.destroyed && (null === (n = e.viewModel) || void 0 === n || n.onBeforeUnrender()),
                        e.viewModel = null)
                    }
                    ))
                }
                ,
                _proto.move = function(e, t) {
                    var n;
                    null == (null == t || null === (n = t.currentTarget) || void 0 === n ? void 0 : n.href) ? window.history.go(e) : this.customHistory.canMove(e) && (t.preventDefault(),
                    window.history.go(e))
                }
                ,
                _proto.moveTo = function(e, t=!1, n=!1, r=!1) {
                    var o;
                    let i;
                    try {
                        i = new URL(e,window.location.origin)
                    } catch (e) {
                        return !1
                    }
                    if ("javascript:" === i.protocol)
                        return !1;
                    if (VALID_EXTERNAL_DOMAINS.includes(i.host))
                        return window.location = i.toString(),
                        !1;
                    const s = this._findRoute(i.pathname);
                    if (null == s || null == this.routesDictionary[s.name] || i.hostname !== window.location.host)
                        return this.isLeaving = !0,
                        t ? window.location.replace(encodeURIComponent(e)) : window.location = e;
                    var a, l;
                    (this.isLeaving = !1,
                    (null === (o = this.currentRoute) || void 0 === o ? void 0 : o.name) === s.name && window.dispatchEvent(new CustomEvent("spaTransition",{
                        detail: {
                            isFinished: !0,
                            dest: s
                        }
                    })),
                    i.pathname !== window.location.pathname || window.location.search !== i.search || n) ? (this.targetRoute = s.name,
                    this.referrer = window.location.href,
                    t ? this._replaceState({
                        name: s.name
                    }, document.title, i.href) : this._pushState({
                        name: s.name
                    }, document.title, i.href),
                    this.goToRoute(s, i, r).then((e => {
                        e && this._replaceState({
                            name: s.name
                        }, document.title, i.href)
                    }
                    )).catch(( () => {}
                    ))) : null === (a = this.viewModel) || void 0 === a || null === (l = a.onSamePageNavigation) || void 0 === l || l.call(a, e)
                }
                ,
                _proto.goToRoute = function(e, t, n=!1) {
                    return window.dispatchEvent(new CustomEvent("spaTransition",{
                        detail: {
                            isFinished: !1,
                            dest: e
                        }
                    })),
                    this._routerTransitionAsync(e.name, t, !1, n, !0)
                }
                ,
                _proto.getAppliedEntries = function() {
                    var e;
                    let t;
                    return "currentScript"in document && null !== (e = document.currentScript) && void 0 !== e && e.src ? (t = document.currentScript.src.replace(/https?:/, ""),
                    window._debug && (t = t.substring(t.indexOf("/j/")))) : t = this.routesDictionary[this.loadingTemplate].requiredModel,
                    Object.keys(this.routesDictionary).filter((e => this.routesDictionary[e].requiredModel === t))
                }
                ,
                _proto.prepareUrl = function(e) {
                    if (null == e.routePathSegments)
                        return e.path;
                    const t = e.routePathSegments.reduce(( (e, t) => (e += "/",
                    t.isParameter ? (!t.isOptional || t.isOptional && null != this.routeParameters[t.name]) && (e += this.routeParameters[t.name]) : e += t.content,
                    e)), "").replace(/[\/\?]$/, "");
                    return e.externalPath ? e.externalPath + t : t
                }
                ,
                _proto.addState = function(e, t, n) {
                    var r;
                    this._pushState({
                        isLocalHandler: !0,
                        name: (null === (r = this.currentRoute) || void 0 === r ? void 0 : r.name) || "",
                        ...e
                    }, t, n)
                }
                ,
                _proto.replaceState = function(e, t, n) {
                    var r;
                    this._replaceState({
                        isLocalHandler: !0,
                        name: (null === (r = this.currentRoute) || void 0 === r ? void 0 : r.name) || "",
                        ...e
                    }, t, n)
                }
                ,
                _proto._pushState = function(e, t, n) {
                    const r = _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A.generateId();
                    e.id = r,
                    window.history.pushState(e, t, n),
                    this.customHistory.addItem(e)
                }
                ,
                _proto._replaceState = function(e, t, n) {
                    e.id = _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A.generateId(),
                    e.title = t,
                    window.history.replaceState(e, "", n),
                    this.customHistory.updateCurrentItem(e)
                }
                ,
                _proto.initCSR = function() {
                    const e = Object.create(WbSpaModel.prototype, {
                        router: {
                            value: this
                        }
                    });
                    $.link.appTemplate("#app", e),
                    this.clientRenderInited = !0
                }
                ,
                _proto.updateRouteDataExternal = async function(e, t) {
                    var n;
                    t = t || (null === (n = this.currentRoute) || void 0 === n ? void 0 : n.name) || "",
                    await this._updateRouteData(t, e)
                }
                ,
                _proto.moveTo404Async = async function() {
                    const e = await this.$moduleLoader.loadModuleAsync("error404")
                      , t = new e(e.data,e.template);
                    await t.showErrorPage(),
                    window.dispatchEvent(new CustomEvent("spaTransition",{
                        detail: {
                            isFinished: !0
                        }
                    }))
                }
                ,
                _proto.moveTo500Async = async function(e, t) {
                    try {
                        await Promise.all([this.$helper.loadCssAsync(wb.settings.styles.error500), this.$helper.loadJsAsync(wb.settings.scripts.spaRecommendationCarousel)]),
                        this._updateRouteData("criticalError")
                    } catch (e) {
                        console.error(e),
                        this._updateRouteData("absoluteCriticalError")
                    } finally {
                        wb.spa.logError(e, t, !0)
                    }
                }
                ,
                _proto.loadRouteDataAsync = async function(e, t=0, n=!1, r=!1) {
                    const o = this.$routeExtensions.extend(null == e ? void 0 : e.name);
                    let i;
                    try {
                        var s, a, l, c;
                        if (!e)
                            return {
                                viewData: {},
                                needStateUpdate: !1
                            };
                        i = {
                            url: new URL(`${this.prepareUrl(e)}?${this.queryParams.toString()}`,window.location.origin),
                            params: {
                                method: "POST"
                            },
                            options: {
                                redirectUnauth: !0,
                                replaceState: !0,
                                includeResponse: !0
                            }
                        },
                        await Promise.all((null !== (s = null == o ? void 0 : o.pipelines) && void 0 !== s ? s : []).map((e => {
                            var n;
                            return null === (n = e.onBeforeActionExecuting) || void 0 === n ? void 0 : n.call(e, i.url, i.params, i.options, r, t)
                        }
                        )));
                        const n = [];
                        i.options.cancelRequest || i.options.redirected ? n.push(Promise.resolve({})) : n.push(this.$httpClient.fetchJSON(i.url.toString(), i.params, i.options)),
                        n.push(...(null !== (a = null == o ? void 0 : o.pipelines) && void 0 !== a ? a : []).map((e => {
                            var n;
                            return null === (n = e.onActionExecuting) || void 0 === n ? void 0 : n.call(e, i.url, i.params, i.options, r, t)
                        }
                        )));
                        const [u] = await Promise.all(n);
                        i.options.redirected || await Promise.all((null !== (l = null == o ? void 0 : o.pipelines) && void 0 !== l ? l : []).map((e => {
                            var t;
                            return null === (t = e.onActionExecuted) || void 0 === t ? void 0 : t.call(e, u, r)
                        }
                        )));
                        let d = u.responseData;
                        return i.options.cancelRequest && null != o && o.fallback && (d = null == o ? void 0 : o.fallback(i)),
                        {
                            viewData: d,
                            needStateUpdate: !1,
                            needRouteUpdate: !(null !== (c = i.options.redirected) && void 0 !== c && c)
                        }
                    } catch (r) {
                        var u;
                        const s = null !== (u = o.maxTriesCount) && void 0 !== u ? u : 3;
                        if (r.isNotFound || r.isUnauthorize || r.isCancelled || t >= s || n) {
                            if (null != o && o.fallback && (r.isCancelled || t >= s))
                                return {
                                    viewData: null == o ? void 0 : o.fallback(i),
                                    needStateUpdate: !1
                                };
                            throw r
                        }
                        return await this.loadRouteDataAsync(e, ++t)
                    }
                }
                ,
                _proto.moveToSignIn = function(e, t) {
                    let n = $.views.helpers.urlSignIn(e && e.query && e.query.returnUrl);
                    this.moveTo(new URL(n,window.location.href).href, t)
                }
                ,
                _proto._bindEvents = function() {
                    window.addEventListener("popstate", (e => {
                        var t;
                        this.$analitic.updateStatInfo(!1);
                        const {name: n, isLocalHandler: r, title: o} = history.state;
                        if (o && (document.title = o),
                        null != this.routesDictionary[n]) {
                            var i, s;
                            if (this.customHistory.updateCurrent(history.state),
                            window.dispatchEvent(new CustomEvent("spaTransition",{
                                detail: {
                                    isFinished: !1,
                                    dest: {
                                        name: n
                                    }
                                }
                            })),
                            r && (null === (t = this.currentRoute) || void 0 === t ? void 0 : t.name) == n)
                                return this._updateRouteParametres(window.location.pathname.substring(1), this.currentRoute),
                                this._updateQueryModel(),
                                null === (i = this.viewModel) || void 0 === i || null === (s = i.onHistoryChange) || void 0 === s || s.call(i, history.state, null, {
                                    fromPopstate: !0
                                }, this.abortController.signal),
                                void window.dispatchEvent(new CustomEvent("spaTransition",{
                                    detail: {
                                        isFinished: !0,
                                        dest: {
                                            name: n
                                        }
                                    }
                                }));
                            this.targetRoute = n,
                            this._routerTransitionAsync(n)
                        } else
                            window.location.reload()
                    }
                    )),
                    window.addEventListener("click", (e => {
                        const t = e.target.closest("a");
                        if (null != t && t.classList.contains("BDC_ReloadLink") || e.defaultPrevented || e.ctrlKey)
                            return !1;
                        null == t || e._preventRouterTransition || (t.hasAttribute("target") && "_blank" === t.getAttribute("target") ? this.$analitic.updateStatInfo(!0) : (this.$analitic.updateStatInfo(!1),
                        e.preventDefault(),
                        this.moveTo(t.href)))
                    }
                    ))
                }
                ,
                _proto._routerTransitionAsync = async function(e, t=window.location, n=!1, r=!1, o=!1) {
                    window.scrollTo(0, 0),
                    this.abortController.abort(),
                    this.abortController = new AbortController;
                    const i = this.abortController.signal;
                    this.currentRoute = this.routesDictionary[e],
                    wb.stat.sendPageView(),
                    this.$analitic.sendEvent("pageview", {
                        cookies_alert: wb.spa.getMainLayout().cookiePolicy.check() ? 1 : 0
                    });
                    try {
                        const {viewData: s, needStateUpdate: a, needRouteUpdate: l} = await this._loadRouteData(e, t, n, r, i);
                        return l && this._updateRouteData(e, s, i, o),
                        window.dispatchEvent(new CustomEvent("spaTransition",{
                            detail: {
                                isFinished: !0,
                                dest: this.currentRoute
                            }
                        })),
                        a
                    } catch (t) {
                        if (t.isNotFound)
                            return this.moveTo404Async(),
                            !1;
                        if (!t.isCancelled && !t.isUnauthorize && null != t.message && "" != t.message)
                            return console.log(t.message),
                            this.moveTo500Async(t, {
                                method: "_routerTransitionAsync",
                                destRoute: e,
                                current: window.location.toString(),
                                initial: n,
                                forced: r
                            }),
                            !1;
                        throw t
                    }
                }
                ,
                _proto._findRoute = function(e) {
                    var t;
                    const n = e.substring(1).split("/")
                      , r = e.substring(1);
                    let o = null !== (t = Object.keys(this.routesDictionary).filter((e => {
                        const t = this.routesDictionary[e];
                        return null == t.routePathSegments ? t.path === r : ("SpaCatalogEntrypoint" !== t.name || ".aspx" !== r.slice(-5)) && t.routePathSegments.every(( (e, t) => {
                            var r;
                            return e.isParameter ? !(null !== (r = null == e ? void 0 : e.isOptional) && void 0 !== r && !r) || n[t] : e.content === n[t]
                        }
                        ))
                    }
                    )).map((e => this.routesDictionary[e]))) && void 0 !== t ? t : [];
                    if (o.length > 1) {
                        const e = e => {
                            var t, n;
                            return null !== (t = null === (n = e.routePathSegments) || void 0 === n ? void 0 : n.some((e => e.isCatchAll))) && void 0 !== t && t
                        }
                        ;
                        o.sort(( (t, n) => e(t) - e(n))),
                        o = o.filter((e => "SpaCatalogEntrypoint" !== e.name))
                    }
                    return o[0]
                }
                ,
                _proto._initSSR = async function(e, t) {
                    this.currentRoute = this.routesDictionary[t];
                    const n = this.currentRoute.requiredModel ? this.$helper.loadJsAsync(this.currentRoute.requiredModel) : Promise.resolve()
                      , r = this._loadTemplateAsync(t);
                    this._updateQueryModel(),
                    this._updateRouteParametres(window.location.pathname.substring(1), this.routesDictionary[t]);
                    try {
                        var o, i, s, a, l, c, u, d;
                        await Promise.all([r, n]);
                        const p = wb.spa.getViewModelByName(t)
                          , h = p ? new p(e,t) : Object.create(WbSpaModel.prototype, {});
                        h.fromSSR = !0;
                        const m = null !== (o = null === (i = this.currentRoute) || void 0 === i ? void 0 : i.targetContainer) && void 0 !== o ? o : 0
                          , f = this.appContainers.find((e => e.containerId == m));
                        $.observable(f).setProperty({
                            viewModel: h
                        }),
                        $.observable(this).setProperty({
                            activeContainer: m
                        });
                        const y = new this.$helper.Deferred;
                        await (null === (s = (a = this.viewModel).onBeforeRender) || void 0 === s ? void 0 : s.call(a, e, y.promise)),
                        $.link(!0, "#app", this.viewModel),
                        await this.$helper.nextTick(),
                        null === (l = (c = this.viewModel).onAfterRender) || void 0 === l || l.call(c, {
                            data: e
                        }),
                        wb.stat.sendPageView();
                        const g = null === (u = (d = this.viewModel).getScreenName) || void 0 === u ? void 0 : u.call(d);
                        g && this.$analitic.sendEvent("Screen_V", {
                            name: g
                        })
                    } catch (e) {
                        console.error(e.message)
                    }
                }
                ,
                _proto._loadRouteData = async function(e, t, n, r, o) {
                    var i, s, a;
                    this._updateRouteParametres(t.pathname.substring(1), this.routesDictionary[e]),
                    this._updateQueryModel(t);
                    const l = this.prepareUrl(this.currentRoute);
                    this.$menuLk.updateMenu(l, this.currentRoute.lkMenuOptions, this.userIsAuth);
                    const c = null !== (i = null === (s = this.currentRoute) || void 0 === s ? void 0 : s.targetContainer) && void 0 !== i ? i : 0
                      , u = null === (a = this.appContainers.find((e => e.containerId == c))) || void 0 === a ? void 0 : a.viewModel
                      , d = !r && null != u && u.__modelStatus__ != VIEW_MODEL_STATUSES.destroyed && u.__routeName__ == e && null != u.onHistoryChange;
                    if (this.clientRenderInited || d)
                        if (d || n) {
                            if (d) {
                                var p, h, m;
                                return this.activeContainer == c || $.observable(this).setProperty({
                                    showPreview: !0
                                }),
                                null === (p = this.viewModel) || void 0 === p || null === (h = p.onActiveViewChanged) || void 0 === h || h.call(p, !1),
                                await (null === (m = u.onHistoryChange) || void 0 === m ? void 0 : m.call(u, window.history.state, r, {}, o)),
                                o.aborted || $.observable(this).setProperty({
                                    activeContainer: c,
                                    showPreview: !1
                                }),
                                {
                                    viewData: null,
                                    needStateUpdate: !1,
                                    needRouteUpdate: !1
                                }
                            }
                        } else
                            $.observable(this).setProperty({
                                showPreview: !0
                            });
                    else
                        !n && (this.current = $.templates["preview_" + e] ? "preview_" + e : DEFAULT_PREVIEW);
                    !this.currentRoute.metaTagsUrl && this.$seoHelper.update(l, null);
                    const f = await this._loadRequiredResoursesAsync(e);
                    return {
                        needRouteUpdate: !o.aborted,
                        ...f
                    }
                }
                ,
                _proto._loadRequiredResoursesAsync = function(e, t=0) {
                    this.loadingTemplate = e;
                    const n = this.routesDictionary[e]
                      , r = null == $.templates[e] && n.tmpl ? this._loadTemplateAsync(e, n.tmpl) : Promise.resolve()
                      , o = this.loadRouteDataAsync(n.requiredData, t, !0)
                      , i = n.requiredCss ? Promise.all(n.requiredCss.map(this.$helper.loadCssAsync)) : Promise.resolve()
                      , s = n.requiredJs ? Promise.all(n.requiredJs.map(this.$helper.loadJsAsync)) : Promise.resolve()
                      , a = n.requiredModel ? this.$helper.loadJsAsync(n.requiredModel) : Promise.resolve();
                    return Promise.all([o, s, i, a, r]).then(( ([e]) => Promise.resolve(e))).catch((n => n.isNotFound || n.isUnauthorize || n.isCancelled || t >= 3 ? Promise.reject(n) : this._loadRequiredResoursesAsync(e, ++t)))
                }
                ,
                _proto._updateRouteData = async function(e, t, n=this.abortController.signal, r=!1) {
                    var o, i, s, a, l, c, u, d;
                    if (n.aborted)
                        return;
                    if (e.indexOf("preview_") > -1)
                        return $.observable(this).setProperty({
                            showPreview: !0
                        });
                    const p = wb.spa.getViewModelByName(e)
                      , h = p ? new p(t,e) : Object.assign(Object.create(WbSpaModel.prototype), null != t ? t : {})
                      , m = null !== (o = null === (i = this.currentRoute) || void 0 === i ? void 0 : i.targetContainer) && void 0 !== o ? o : 0
                      , f = h.onBeforeRender
                      , y = h.onAfterRender
                      , g = h.onBeforeUnrender;
                    Object.defineProperties(h, {
                        __routeName__: {
                            value: e
                        },
                        __targetContainer__: {
                            value: m
                        },
                        __modelStatus__: {
                            value: VIEW_MODEL_STATUSES.prepearing,
                            writable: !0
                        },
                        routeTemplate: {
                            value: e
                        },
                        onBeforeRender: {
                            value: async function(e, t) {
                                n.aborted || (await (null == f ? void 0 : f.call(h, e, t)),
                                this.__modelStatus__ = VIEW_MODEL_STATUSES.readyToInstall)
                            }
                        },
                        onAfterRender: {
                            value: async function(e, t) {
                                n.aborted || (await (null == y ? void 0 : y.call(h, e, n, t)),
                                this.__modelStatus__ = VIEW_MODEL_STATUSES.installed)
                            }
                        },
                        onBeforeUnrender: {
                            value: async function(e) {
                                await (null == g ? void 0 : g.call(h, e)),
                                this.__modelStatus__ = VIEW_MODEL_STATUSES.destroyed
                            }
                        }
                    });
                    const v = null == this ? void 0 : this.viewModel;
                    var b, w, S, _;
                    null == v || v.__targetContainer__ != m && null != v.onHistoryChange ? null == this || null === (b = this.viewModel) || void 0 === b || null === (w = b.onActiveViewChanged) || void 0 === w || w.call(b, !1) : await (null == this || null === (S = this.viewModel) || void 0 === S || null === (_ = S.onBeforeUnrender) || void 0 === _ ? void 0 : _.call(S));
                    if (n.aborted)
                        return;
                    const C = new this.$helper.Deferred;
                    await (null === (s = h.onBeforeRender) || void 0 === s ? void 0 : s.call(h, t, C.promise));
                    let I = window._debug && performance.now();
                    const k = this.appContainers.find((e => e.containerId == m));
                    (null === (a = k.viewModel) || void 0 === a ? void 0 : a.__modelStatus__) != VIEW_MODEL_STATUSES.destroyed && (null === (l = k.viewModel) || void 0 === l || l.onBeforeUnrender(t)),
                    n.aborted || ($.observable(k).setProperty({
                        viewModel: h
                    }),
                    $.observable(this).setProperty({
                        showPreview: !1,
                        activeContainer: m
                    })),
                    this.clientRenderInited || this.initCSR(),
                    I && console.log("[INITIAL MODEL RENDER]: ", performance.now() - I, e),
                    await this.$helper.nextTick(),
                    C.resolve(),
                    null === (c = h.onAfterRender) || void 0 === c || c.call(h, t, n),
                    r && (null === (u = h.onSpaTransition) || void 0 === u || u.call(h));
                    const M = null === (d = h.getScreenName) || void 0 === d ? void 0 : d.call(h);
                    M && this.$analitic.sendEvent("Screen_V", {
                        name: M
                    })
                }
                ,
                _proto._updateRouteParametres = function(e, t) {
                    if (null == t.routePathSegments)
                        return void (this.routeParameters = {});
                    const n = e.split("/")
                      , r = t.routePathSegments.reduce(( (e, t, r) => (t.isParameter && (t.isCatchAll ? e[t.name] = n.slice(r).join("/") : e[t.name] = n[r]),
                    e)), {});
                    this.routeParameters = r
                }
                ,
                _proto._updateQueryModel = function(e) {
                    this.queryParams = new URLSearchParams((null != e ? e : window.location).search)
                }
                ,
                _proto._loadTemplateAsync = function _loadTemplateAsync(routeName, tmplNameInput) {
                    const tmplName = ("string" == typeof tmplNameInput ? tmplNameInput : `${routeName.replace("Entrypoint", "")}`).toLowerCase()
                      , tmplFullName = window._debug ? `${tmplName}.json` : `${tmplName}-${wb.settings.currentLocale}-${this.$helper.currentCulture}.json`
                      , hash = this.tmplHashes[tmplFullName];
                    return (window._debug ? this.$httpClient.fetchBasicJSON($.views.converters.urlForJsTmpl(`${tmplFullName}?${hash}`)) : this.$httpClient.fetchStaticV2($.views.converters.urlForJsTmpl(tmplFullName.replace(".json", `.${hash}.json`)))).then((tmpl => {
                        const {main, localization, ...templates} = tmpl;
                        if (localization)
                            try {
                                Object.assign(this.$localziation, {
                                    [routeName]: eval(localization)
                                })
                            } catch (e) {}
                        return $.templates({
                            [routeName]: main,
                            ...templates
                        }),
                        Promise.resolve()
                    }
                    )).catch((e => Promise.reject(e)))
                }
                ,
                _proto._hardReload = function() {
                    return location.reload()
                }
                ,
                _createClass(Router, [{
                    key: "appContainers",
                    get: function() {
                        return APP_CONTAINERS
                    }
                }, {
                    key: "previewTemplate",
                    get: function() {
                        return DEFAULT_PREVIEW
                    }
                }, {
                    key: "viewModel",
                    get: function() {
                        var e;
                        return null === (e = this.appContainers.find((e => e.containerId == this.activeContainer))) || void 0 === e ? void 0 : e.viewModel
                    }
                }])
            }();
            const __WEBPACK_DEFAULT_EXPORT__ = Router
        }
        ,
        39332: (e, t, n) => {
            "use strict";
            function r(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, o(r.key), r)
                }
            }
            function o(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            n.d(t, {
                A: () => l
            });
            const i = "wb_delivery-points-"
              , s = "wb_allpickups_hash"
              , a = 36e4;
            const l = function() {
                function e() {
                    this._startJobSyncPickups(),
                    this.checkInterval = null
                }
                var t, n, o, l = e.prototype;
                return l._startJobSyncPickups = function() {
                    this._pickupDbName = "wb_allpickups",
                    this._objectStoreName = "pickups_active",
                    this._version = 1,
                    setTimeout(this._syncPickups.bind(this), 15e3)
                }
                ,
                l._openPickupDb = function() {
                    return this.$storageHelper.openDb(this._pickupDbName, {
                        onupgradeneeded: e => e.createObjectStore(this._objectStoreName, {
                            keyPath: "id"
                        }),
                        version: this._version
                    })
                }
                ,
                l._syncPickups = async function() {
                    const e = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("all-poo-v9.json.hash", 5e3, "text").catch((e => null));
                    if (null !== e)
                        if (e !== localStorage.getItem(s)) {
                            const t = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("all-poo-fr-v9.json", 6e4)
                              , n = null == t ? void 0 : t.selectMany((e => (e.items.forEach((t => {
                                t.country = e.country
                            }
                            )),
                            e.items)));
                            if (!(n && n.length || this.checkInterval))
                                return void setTimeout(this._syncPickups.bind(this), 15e3);
                            if ((!n || !n.length) && this.checkInterval)
                                return;
                            this.checkInterval || (this.checkInterval = setInterval(this._syncPickups.bind(this), a)),
                            this._openPickupDb().then((t => {
                                window._debug && console.time("transaction pickups");
                                let r = t.transaction([this._objectStoreName], "readwrite").objectStore(this._objectStoreName);
                                r.clear();
                                for (let e = 0; e < n.length; e++)
                                    r.add(n[e]);
                                window._debug && console.timeEnd("transaction pickups"),
                                localStorage.setItem(s, e)
                            }
                            ))
                        } else
                            this.checkInterval || (this.checkInterval = setInterval(this._syncPickups.bind(this), a));
                    else
                        this.checkInterval || setTimeout(this._syncPickups.bind(this), 15e3)
                }
                ,
                l.getPickupAsync = function(e) {
                    return this._openPickupDb().then((t => this.$storageHelper.getItem(t, this._objectStoreName, e)))
                }
                ,
                l.getActivePickupsAsync = async function(e={}) {
                    const [t,n] = await Promise.all([this._openPickupDb().then((e => this.$storageHelper.getAll(e, this._objectStoreName))), this.$auth.jwtData.user ? this.$services.userData.getUserDataAsync() : Promise.resolve({})]);
                    return [...this._filterPickups(t, null == n ? void 0 : n.userInfo, e)]
                }
                ,
                l._filterPickups = function*(e, {isEmployeeSynced: t, houseKeeping: n, isPickupPointOwner: r}={}, o={}) {
                    for (const i of e) {
                        i.isHkn && !n || i.emp && !t || i.isSortCenter && !(r || t) || (null == o ? void 0 : o.dest) && i.dest3 != o.dest || "changeOffice" === (null == o ? void 0 : o.source) && (2 === i.status || i.isExternalPostamat) || (yield i)
                    }
                }
                ,
                l.getDeliveryPointsAsync = function(e, t) {
                    return new Promise(( (n, r) => {
                        const o = Object.assign({
                            deliveryWay: e,
                            currency: WbSpaModel.prototype.$user.getCurrency()
                        }, t);
                        this.$httpClient.fetchJSON(this.deliveryPointsUrl, {
                            method: "POST",
                            body: this.$helper.objectSerializer(o),
                            credentials: "include"
                        }, {
                            timeout: 2e3
                        }).then((t => {
                            const r = this._updateDeliveryPoints(t, e);
                            n(r)
                        }
                        )).catch((t => {
                            console.log(t.message);
                            let r = this.restoreDeliveryPoints(e);
                            r && n(r)
                        }
                        ))
                    }
                    ))
                }
                ,
                l._updateDeliveryPoints = function(e, t) {
                    const n = [...e, ...this.restoreDeliveryPoints(t).filter((e => e._local))].reduce(( (e, t) => {
                        const n = e.findIndex((e => e.addressId === t.addressId));
                        return -1 === n ? e.push(t) : e[n]._local = e[n]._local && t._local,
                        e
                    }
                    ), []);
                    return this.backupDeliveryPoints(n, t),
                    this._syncDeliveryPoints(n.filter((e => e._local)).reverse(), t),
                    n
                }
                ,
                l._syncDeliveryPoints = async function(e, t) {
                    for (let n = 0; n < e.length; n++)
                        await this._saveAddressAsync(e[n], t)
                }
                ,
                l.get = function(e, t) {
                    var n;
                    const r = null === (n = this.restoreDeliveryPoints(t)) || void 0 === n ? void 0 : n.find((t => t.addressId == e));
                    return r && r._local && this._syncDeliveryPoints([r], t),
                    r
                }
                ,
                l.getByCoordinates = function(e, t, n) {
                    return ["self", "courier"].forEach((r => {
                        var o;
                        const i = null === (o = this.restoreDeliveryPoints(r)) || void 0 === o ? void 0 : o.find((r => r.lat == e && r.lon == t && r.address === n));
                        if (i && i._local && this._syncDeliveryPoints([i], r),
                        i)
                            return i
                    }
                    )),
                    null
                }
                ,
                l.backupDeliveryPoints = function(e, t) {
                    this.deliveryPoints[t] = e;
                    const n = this._key;
                    localStorage.putObject(n, this.deliveryPoints),
                    Object.entries(localStorage).filter((e => e[0].startsWith(i) && e[0] !== n)).forEach((e => {
                        localStorage.removeItem(e[0])
                    }
                    ))
                }
                ,
                l.restoreDeliveryPoints = function(e) {
                    var t, n;
                    return this.deliveryPoints = null !== (t = localStorage.getObject(this._key)) && void 0 !== t ? t : {},
                    this.deliveryPoints.self || (this.deliveryPoints.self = []),
                    this.deliveryPoints.courier || (this.deliveryPoints.courier = []),
                    [...this.deliveryPoints.courier, ...this.deliveryPoints.self].forEach((e => {
                        e.latitude && e.longitude || !e.lat || !e.lon || (e.latitude = e.lat,
                        e.longitude = e.lon)
                    }
                    )),
                    null !== (n = this.deliveryPoints[e]) && void 0 !== n ? n : []
                }
                ,
                l.add = async function(e, t) {
                    let n = this.restoreDeliveryPoints(t);
                    const r = this._convertModel(e, t);
                    if (!n.find((e => (null == e ? void 0 : e.addressId) == r.addressId))) {
                        if ("courier" === t) {
                            const e = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://user-geo-data.wildberries.ru/get-office?latitude=${r.lat}&longitude=${r.lon}`, {}, {
                                timeout: 3e3,
                                nullOnError: !0
                            });
                            e && Object.assign(r, e)
                        }
                        n.unshift(r),
                        this.backupDeliveryPoints(n, t)
                    }
                    return this._saveAddressAsync(r, t),
                    n
                }
                ,
                l.remove = function(e, t) {
                    let n = this.restoreDeliveryPoints(t);
                    return n = n.filter((t => t.addressId != e)),
                    this.backupDeliveryPoints(n, t),
                    this._removeAddressAsync(e, t),
                    n
                }
                ,
                l._removeAddressAsync = function(e, t) {
                    this.$httpClient.fetchJSON(this.removeUrl, {
                        method: "POST",
                        body: this.$helper.objectSerializer({
                            addressId: e,
                            deliveryWay: t
                        }),
                        credentials: "include"
                    }).then((e => {
                        this.backupDeliveryPoints(e, t)
                    }
                    ))
                }
                ,
                l._saveAddressAsync = function(e, t) {
                    const n = "self" === t ? {
                        "Item.AddressId": e.addressId
                    } : e;
                    return this.$httpClient.fetchJSON(this._dataUrl(t), {
                        method: "POST",
                        credentials: "include",
                        body: this.$helper.objectSerializer(n, new URLSearchParams, !0)
                    }).then((e => (this.backupDeliveryPoints(e, t),
                    e)))
                }
                ,
                l._dataUrl = function(e) {
                    return "self" === e ? this.editPooUrl : this.editCourierAddressUrl
                }
                ,
                l._convertModel = function(e, t) {
                    if ("courier" === t) {
                        let n = Object.assign({}, e);
                        return n._local = !0,
                        n.deliveryType = t,
                        n.addressId = btoa(wb.helpers.generateGuid().slice(12)),
                        n.address = `${n.city ? n.city : n.province}, `,
                        n.area && !n.city && (n.address += `${n.area}, `),
                        n.street && (n.address += `${n.street}, `),
                        n.home && (n.address += `д. ${n.home}, `),
                        n.flat && (n.address += `кв. ${n.flat}, `),
                        n.entrance && (n.address += `под. ${n.entrance}, `),
                        n.doorCode && (n.address += `дмф. ${n.doorCode}, `),
                        n.floor && (n.address += `этаж ${n.floor}, `),
                        n.index && (n.address += `индекс ${$.views.converters.leadZero(n.index, 6)}, `),
                        n.address = n.address.slice(0, -2),
                        n.lat || (n.lat = n.latitude),
                        n.lon || (n.lon = n.longitude),
                        n
                    }
                    if ("self" === t)
                        return {
                            _local: !0,
                            address: e.address,
                            addressId: e.id,
                            lat: e.coordinates[0],
                            lon: e.coordinates[1],
                            workTime: e.workTime,
                            deliveryType: t,
                            pointTypeName: this._getPointTypeName(e.dtype),
                            IsSortCenter: 63 === t,
                            status: e.status,
                            rate: e.rate,
                            deliveryPrice: $.views.helpers.priceFromRub(e.deliveryPrice, !0),
                            country: e.country,
                            dest: e.dest,
                            sign: e.sign
                        }
                }
                ,
                l._getPointTypeName = function(e) {
                    return 63 === e ? "СЦ / Склад" : "Пункт выдачи"
                }
                ,
                t = e,
                (n = [{
                    key: "removeUrl",
                    get: function() {
                        return this.$services.cartService.publicBasketApiUrl + "/spa/removeaddress"
                    }
                }, {
                    key: "editPooUrl",
                    get: function() {
                        return this.$services.cartService.publicBasketApiUrl + "/spa/poos/create?version=1"
                    }
                }, {
                    key: "editCourierAddressUrl",
                    get: function() {
                        return this.$services.cartService.publicBasketApiUrl + "/spa/yandexaddress/editajax?version=2"
                    }
                }, {
                    key: "deliveryPointsUrl",
                    get: function() {
                        return this.$services.cartService.publicBasketApiUrl + "/spa/deliverypoints"
                    }
                }, {
                    key: "_key",
                    get: function() {
                        const e = this.$services.sessionService.getUserUid();
                        return `${i}_${e}`
                    }
                }]) && r(t.prototype, n),
                o && r(t, o),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }()
        }
        ,
        2929: () => {
            !function() {
                let e = function() {
                    function e() {}
                    return e.getCookie = function(e) {
                        const t = document.cookie.split(";").find((t => {
                            const [n] = t.trim().split("=");
                            return n == e
                        }
                        ));
                        return t ? decodeURIComponent(t.trim().split("=")[1]) : null
                    }
                    ,
                    e.setCookie = function(e, t, n={}) {
                        n = {
                            path: "/",
                            "max-age": 31536e3,
                            ...n
                        };
                        let r = encodeURIComponent(e) + "=" + encodeURIComponent(t);
                        Object.keys(n).forEach((e => {
                            r += `; ${e}`,
                            1 != n[e] && (r += `=${n[e]}`)
                        }
                        )),
                        document.cookie = r
                    }
                    ,
                    e.deleteCookie = function(t, n={}) {
                        e.setCookie(t, "", {
                            "max-age": -1,
                            ...n
                        })
                    }
                    ,
                    e
                }();
                wb.cookieHelper = e
            }()
        }
        ,
        2680: () => {
            function e(e, t) {
                e.prototype = Object.create(t.prototype),
                e.prototype.constructor = e,
                r(e, t)
            }
            function t(e) {
                var i = "function" == typeof Map ? new Map : void 0;
                return t = function(e) {
                    if (null === e || !function(e) {
                        try {
                            return -1 !== Function.toString.call(e).indexOf("[native code]")
                        } catch (t) {
                            return "function" == typeof e
                        }
                    }(e))
                        return e;
                    if ("function" != typeof e)
                        throw new TypeError("Super expression must either be null or a function");
                    if (void 0 !== i) {
                        if (i.has(e))
                            return i.get(e);
                        i.set(e, t)
                    }
                    function t() {
                        return function(e, t, o) {
                            if (n())
                                return Reflect.construct.apply(null, arguments);
                            var i = [null];
                            i.push.apply(i, t);
                            var s = new (e.bind.apply(e, i));
                            return o && r(s, o.prototype),
                            s
                        }(e, arguments, o(this).constructor)
                    }
                    return t.prototype = Object.create(e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    r(t, e)
                }
                ,
                t(e)
            }
            function n() {
                try {
                    var e = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                    )))
                } catch (e) {}
                return (n = function() {
                    return !!e
                }
                )()
            }
            function r(e, t) {
                return r = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                r(e, t)
            }
            function o(e) {
                return o = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                o(e)
            }
            let i = function(t) {
                function n(e) {
                    var r;
                    const {message: o, payload: i} = n.parsePayload(e);
                    return (r = t.call(this, o) || this).isCustomError = !0,
                    r.payload = i,
                    r
                }
                return e(n, t),
                n.parsePayload = function(e) {
                    var t;
                    return "string" == typeof e ? {
                        message: e,
                        payload: null
                    } : {
                        message: null !== (t = null == e ? void 0 : e.message) && void 0 !== t ? t : "Unknow error",
                        payload: null == e ? void 0 : e.payload
                    }
                }
                ,
                n
            }(t(Error))
              , s = function(t) {
                function n({msg: e, jwtDrop: n}={}) {
                    var r;
                    return (r = t.call(this, e) || this).isUnauthorize = !0,
                    r.jwtDrop = n,
                    r
                }
                return e(n, t),
                n
            }(i)
              , a = function(t) {
                function n(e="") {
                    var n;
                    return (n = t.call(this, e) || this).isCancelled = !0,
                    n
                }
                return e(n, t),
                n
            }(i)
              , l = function(t) {
                function n(e="") {
                    var n;
                    return (n = t.call(this, e) || this).isNotFound = !0,
                    n
                }
                return e(n, t),
                n
            }(i);
            Object.defineProperties(window, {
                KnownServerError: {
                    value: i
                },
                UnauthorizeError: {
                    value: s
                },
                CancelledRequestError: {
                    value: a
                },
                NotFoundError: {
                    value: l
                },
                NetworkError: {
                    value: function() {
                        this.isNetworkError = !0
                    }
                }
            })
        }
        ,
        15970: () => {
            !function() {
                let e = function() {
                    function e() {}
                    return e.canShowWalletDiscount = function(e=0, t="", n=0, r=0, o=0) {
                        if (1048576 & n)
                            return 0;
                        const i = r || (wb.settings.walletTypeCode > 1 ? wb.settings.wlt2DiscountPercent : wb.settings.wlt1DiscountPercent)
                          , s = o || (wb.settings.walletTypeCode > 1 ? wb.global.settings.variables.wlt2DiscountDisplayMaxPrice : wb.global.settings.variables.wlt1DiscountDisplayMaxPrice);
                        return i > 0 && s >= e && "RUB" === t ? i : 0
                    }
                    ,
                    e.calcWalletDiscount = function(t=0, n="", r=0, o=0, i=0) {
                        const s = e.canShowWalletDiscount(t, n, r, o, i);
                        return s > 0 ? e.calculateDiscount(t, s, n) : 0
                    }
                    ,
                    e.calculateDiscount = function(e=0, t=0, n="", r=!1) {
                        if (!t)
                            return 0;
                        let o = e * (t / 100);
                        const i = $.views.helpers.minFiscalPriceInCurrency(n);
                        return o < i ? i : Math[r ? "floor" : "ceil"](o / i) * i
                    }
                    ,
                    e.calculateCommission = function(e, t, n="") {
                        return this.calculateDiscount(e, t, n, !0)
                    }
                    ,
                    e.calculateCustomCharges = function(e, t, n) {
                        const r = 100 * e;
                        if (!n)
                            return 0;
                        if (r < n.dutyFreelimit)
                            return 0;
                        const o = .15 * (r - n.dutyFreelimit) + n.fixedAmount;
                        return $.views.helpers.toLocalPrice(o / 100, t)
                    }
                    ,
                    e
                }();
                wb.priceHelper = e
            }()
        }
        ,
        7893: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => y
            });
            const r = JSON.parse('{"RUB":{"locale":"ru","name":"Российский рубль","sign":"₽","code":"643"},"BYN":{"locale":"by","name":"Белорусский рубль","sign":"р.","code":"933"},"KZT":{"locale":"kz","name":"Казахстанский тенге","sign":"тг.","code":"398"},"AMD":{"locale":"am","name":"Армянский драм","sign":"драм","code":"051"},"KGS":{"locale":"kg","name":"Кыргызский сом","sign":"сом","code":"417"},"UZS":{"locale":"uz","name":"Узбекский сум","sign":"сум","code":"860"}}')
              , o = Object.entries(r).reduce(( (e, [t,n]) => (e[n.sign] = t,
            e)), {});
            var i;
            function s(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, a(r.key), r)
                }
            }
            function a(e) {
                var t = function(e, t) {
                    if ("object" != typeof e || !e)
                        return e;
                    var n = e[Symbol.toPrimitive];
                    if (void 0 !== n) {
                        var r = n.call(e, t || "default");
                        if ("object" != typeof r)
                            return r;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return ("string" === t ? String : Number)(e)
                }(e, "string");
                return "symbol" == typeof t ? t : t + ""
            }
            wb.currencies = {
                info: r,
                getIsoBySign: e => o[e] || wb.settings.currencyCodeByLetters,
                getDefaultForLocale: function(e) {
                    var t;
                    let n;
                    for (const t in r)
                        r[t].locale === e && (n = t);
                    return null !== (t = n) && void 0 !== t ? t : "RUB"
                }
            },
            $.views.helpers({
                wbCurrencies: wb.currencies.info
            }),
            $.views.converters({
                isoCode: e => {
                    var t;
                    return null === (t = wb.currencies.info[null == e ? void 0 : e.toUpperCase()] || wb.currencies.info[wb.settings.currencyCodeByLetters]) || void 0 === t ? void 0 : t.code
                }
                ,
                currencySign: e => {
                    var t;
                    return null === (t = wb.currencies.info[e] || wb.currencies.info[wb.settings.currencyCodeByLetters]) || void 0 === t ? void 0 : t.sign
                }
            });
            const l = "_sys_auth"
              , c = "user-balance"
              , u = "https://fin-person-installment.wildberries.ru"
              , d = ["65896095", "6182663", "8175888", "16474491", "126051733", "112501232", "13539779", "15800639", "60152764", "27921069", "20432466", "7127629", "146311557", "124235485", "11253735", "19089801"];
            let p = function() {
                function e() {
                    var t;
                    for (const t in e.syncData)
                        e.syncData[t].init();
                    this.balance = localStorage.getObject(e.storageKey(c)),
                    this.balance && (this._savedBalance = Object.assign(this.balance)),
                    this._balanceTs = (null === (t = this.balance) || void 0 === t ? void 0 : t.balanceTs) || 0,
                    this.getUserGrade = WbSpaModel.prototype.$helper.lockPromise(this.getUserGrade),
                    this.getCustomsDuty = WbSpaModel.prototype.$helper.lockPromise(this.getCustomsDuty),
                    window.addEventListener("storage", this._onSync.bind(this))
                }
                var t, n, r, o = e.prototype;
                return o.getUid = function() {
                    return e._getUserUid()
                }
                ,
                o.getId = function() {
                    return WbSpaModel.prototype.$auth.jwtData.user || 0
                }
                ,
                o.getUserInfo = function() {
                    return this.userInfo
                }
                ,
                o.initUser = function() {
                    const t = this.$auth.jwtData
                      , n = this.$auth.isAuth
                      , r = this.$services.sessionService.getBasketUid()
                      , o = n ? e._getUserUid() : "";
                    localStorage.setItem(l, n ? t.user : "unauth"),
                    this.userInfo = n ? {
                        uid: o,
                        basketUid: void 0,
                        isAuth: n,
                        t: t.user
                    } : {
                        uid: 0,
                        basketUid: r,
                        isAuth: n
                    },
                    wb.analitics.sendUserEvent(o, n ? t.user : ""),
                    wb.analitics.sendSessionStartEvent(),
                    n ? this.getUserGrade(this.getCurrency()) : this._setDiscountForUnAuth(),
                    wb.spa && wb.spa.setUserStatus({
                        userIsAuth: n,
                        userUid: n ? o : r,
                        userId: parseInt(t.user, 10)
                    })
                }
                ,
                o.getBalance = async function({force: t, timeout: n}={}) {
                    var r, o;
                    let i = !1;
                    if (t || null !== (r = this._savedBalance) && void 0 !== r && r.balanceCurrency && this._savedBalance.balanceCurrency !== this.getCurrency() || !this.balance || this._balanceTs < (new Date).getTime()) {
                        this._balanceTs = (new Date).getTime() + 3e4;
                        try {
                            this.balance = await this.$httpClient.fetchJSON("/webapi/account/getsignedbalance", {
                                method: "POST"
                            }, n ? {
                                timeout: n
                            } : {}),
                            this.balance.balanceCurrency = this.getCurrency(),
                            this.balance.walletTypeCode = this._getWalletTypeCode(this.balance.walletType, this.balance.walletStatus),
                            this._savedBalance = Object.assign(this.balance),
                            this.balance.balanceTs = this._balanceTs,
                            localStorage.putObject(e.storageKey(c), this.balance),
                            i = !0
                        } catch (e) {
                            if (!this._savedBalance)
                                throw this._balanceTs = (new Date).getTime() + 15e3,
                                e;
                            this.balance = Object.assign(this._savedBalance)
                        }
                    }
                    if (null === this.balance)
                        return {
                            walletLimit: 0,
                            moneyBalanceRUB: 0,
                            walletBalance: 0,
                            totalBalanceRub: 0,
                            totalBalance: 0,
                            balanceCurrency: this.getCurrency()
                        };
                    const s = null !== (o = this.balance[`moneyBalance${this.balance.balanceCurrency}`]) && void 0 !== o ? o : "RUB" === this.balance.balanceCurrency ? this.balance.moneyBalance : 0;
                    return this.balance.totalBalance = s + ("RUB" === this.balance.balanceCurrency ? this.balance.bonusBalance + this.balance.walletBalance : 0),
                    "RUB" === this.balance.balanceCurrency && (this.balance.totalBalance = Math.floor(Math.abs(this.balance.totalBalance) < 1 ? 0 : this.balance.totalBalance)),
                    this.balance.totalBalanceRub = (this.balance.moneyBalanceRUB || 0) + (this.balance.bonusBalance || 0) + (this.balance.walletBalance || 0),
                    this.balance.totalBalanceRub = Math.floor(Math.abs(this.balance.totalBalanceRub) < 1 ? 0 : this.balance.totalBalanceRub),
                    i && this.$eventBus.dispatchEvent(new CustomEvent("BalanceUpdated",{
                        detail: this.balance
                    })),
                    this.balance
                }
                ,
                o._getWalletTypeCode = function(e="", t="") {
                    return "rejected" === t || "closed" === t ? 0 : "verified" === e ? 2 : "anonymous" === e ? 1 : 0
                }
                ,
                o.resetBalance = function() {
                    this.balance = null,
                    this.$eventBus.dispatchEvent(new CustomEvent("BalanceReset"))
                }
                ,
                o.getBrokerInstallmentConfig = async function() {
                    if (!this.isBrokerInstEnabled())
                        return null;
                    if (this.brokerInstallmentConfig)
                        return this.brokerInstallmentConfig;
                    if (this.brokerInstallmentConfig = localStorage.getObject("wbx_br_inst_config"),
                    !this.brokerInstallmentConfig || this.brokerInstallmentConfig.expire < Date.now())
                        try {
                            const e = await this.$wbxHttpClient.fetch(`${u}/v1/config`, {
                                method: "GET",
                                timeout: 1e3
                            })
                              , t = await e.json();
                            t.expire = Date.now() + 36e5,
                            localStorage.putObject("wbx_br_inst_config", t),
                            this.brokerInstallmentConfig = t
                        } catch (e) {
                            wb.spa.logError(e, "[WBX_BR_INST_CONFIG]: failed to fetch broker installment config")
                        }
                    return this.brokerInstallmentConfig
                }
                ,
                o.resetBrokerInstStatusTs = function() {
                    this._resetBrokerInstStatusTs = !0
                }
                ,
                o.isBrokerInstEnabled = function() {
                    var e, t, n;
                    return this.$isRangeEnabledFor(null === (e = wb.global) || void 0 === e || null === (t = e.settings) || void 0 === t || null === (n = t.variables) || void 0 === n ? void 0 : n.cwbInstRange) || d.indexOf(this.$auth.jwtData.user) > -1
                }
                ,
                o.getBrokerInstallmentStatus = async function(e=!1) {
                    if (!this.isBrokerInstEnabled())
                        return null;
                    if (e && this.resetBrokerInstStatusTs(),
                    this._brokerInstStatusTs = this._resetBrokerInstStatusTs ? 0 : Date.now() + 3e5,
                    !this.brokerInstallmentStatus || this._brokerInstStatusTs < Date.now())
                        try {
                            const e = await this.$wbxHttpClient.fetch(`${u}/v1/status`, {
                                method: "GET",
                                credentials: "include",
                                timeout: 1e3
                            });
                            this.brokerInstallmentStatus = await e.json(),
                            this._resetBrokerInstStatusTs = !1
                        } catch (e) {
                            this.brokerInstallmentStatus = null
                        }
                    return this.brokerInstallmentStatus
                }
                ,
                o.resetInstallmentLimit = function() {
                    this.installmentLimit = null,
                    this.pdlInstallmentLimit = null
                }
                ,
                o.getUserGrade = async function(e="RUB") {
                    var t, n;
                    if (!this.$isUserGradeEnabled() || !this.$auth.isAuth)
                        return null;
                    let r = this._userGrade || localStorage.getObject("wbx_user_grade");
                    this.$auth.jwtData.user !== (null === (t = r) || void 0 === t ? void 0 : t.user_id) && (r = null);
                    const o = this.$useCatalogReturnCost() ? 4 : 3;
                    if (null == r || r.expire < Date.now() || this.$auth.jwtData.user !== r.user_id || r.currency !== e || r.version != o)
                        try {
                            var i, s, a;
                            const t = await this.$wbxHttpClient.fetch(`https://user-grade.wildberries.ru/api/v${o}/grade?curr=${e}`);
                            if (!t.ok)
                                throw new Error(`resp_status=${t.status}`);
                            const n = await t.json();
                            if (null == n.payload || 0 !== n.state)
                                throw new Error(`resp=${JSON.stringify(t || {})}`);
                            r = n.payload,
                            r.sign = n.sign,
                            r.sign_version = n.sign_version,
                            r.expire = Date.now() + 3e5,
                            r.fraud && null !== (i = JSON.parse(r.fraud)) && void 0 !== i && i.is_trust ? (r.premiumIsAvailable = !0,
                            r.wbClub = "available") : r.premiumIsAvailable = !1,
                            null !== (s = r.subscription_features) && void 0 !== s && s.length && (r.wbClub = "subscribed"),
                            r.isPremium = (null === (a = r.subscription_features) || void 0 === a ? void 0 : a.indexOf("extra_discount")) > -1,
                            localStorage.putObject("wbx_user_grade", r),
                            this._userGrade = r,
                            this.$eventBus.dispatchEvent(new CustomEvent("UserGradeUpdated"))
                        } catch (e) {
                            wb.spa.logError(e, "[WBX_USER_GRADE]: failed to fetch user grade data")
                        }
                    if (null !== (n = r) && void 0 !== n && n.payments) {
                        const e = r.payments.find((e => 1 === e.wctype_id));
                        wb.settings.wlt1DiscountPercent = (null == e ? void 0 : e.anonymous_discount) || 0,
                        wb.settings.wlt2DiscountPercent = (null == e ? void 0 : e.uprid_discount) || 0
                    }
                    return r || {
                        spp: 0,
                        postpaid_limit: 0,
                        currency: e
                    }
                }
                ,
                o.getUserGradeFromCache = function() {
                    return this.$auth.isAuth ? this._userGrade || localStorage.getObject("wbx_user_grade") : null
                }
                ,
                o.resetUserGrade = function() {
                    const e = this.getUserGradeFromCache();
                    e && (e.expire = 0,
                    localStorage.putObject("wbx_user_grade", e))
                }
                ,
                o._setDiscountForUnAuth = async function() {
                    var e;
                    let t = localStorage.getObject("wbx_default_discounts");
                    if (null == t || t.expire < Date.now()) {
                        const e = await this.$httpClient.fetchBasicJSON("https://static-basket-01.wb.ru/vol1/global-payment/default-payment.json", {}, {
                            nullOnError: !0
                        });
                        if (0 === (null == e ? void 0 : e.state)) {
                            var n;
                            const r = null === (n = e.data) || void 0 === n ? void 0 : n.find((e => 1 === e.wctype_id));
                            t = {
                                wctype_id: null == r ? void 0 : r.wctype_id,
                                discount_value: (null == r ? void 0 : r.discount_value) || 0,
                                expire: Date.now() + 3e5
                            },
                            t.expire = Date.now() + 3e5,
                            localStorage.putObject("wbx_default_discounts", t)
                        }
                    }
                    wb.settings.wlt1DiscountPercent = (null === (e = t) || void 0 === e ? void 0 : e.discount_value) || wb.global.settings.variables.wlt1DiscountPercent
                }
                ,
                o.getCustomsDuty = async function(e) {
                    var t, n;
                    if (null === (t = wb.global.settings) || void 0 === t || null === (n = t.switches) || void 0 === n || !n.enableCustomsDuty)
                        return null;
                    let r = this._customsData || localStorage.getObject("customs_duty");
                    try {
                        var o, i;
                        if (!r || !r.dutyForImportedGoods || r.dutyForImportedGoods.find((e => new Date(1e3 * e.timestamp).addDays(1) < new Date))) {
                            const e = await this.$httpClient.fetchBasicJSON("https://static-basket-03.wb.ru/vol44/duty/duty.json", {
                                timeout: 500
                            }).catch((e => (wb.spa.logError(e, "[CUSTOMS_DUTY]: failed to fetch customs duty data"),
                            this._customsData)));
                            e && (localStorage.putObject("customs_duty", e),
                            this._customsData = r = e)
                        }
                        return null === (o = r) || void 0 === o || null === (i = o.dutyForImportedGoods) || void 0 === i ? void 0 : i.find((t => t.curr == e))
                    } catch (e) {
                        return wb.spa.logError(e, "[CUSTOMS_DUTY]: customs duty exception"),
                        null
                    }
                }
                ,
                o.getCustomsDutyFromCache = function() {
                    return this._customsData || localStorage.getObject("customs_duty")
                }
                ,
                o.reset = function() {
                    this.resetUserGrade(),
                    wb.cookieHelper.deleteCookie("access_token"),
                    this.initUser(),
                    this.resetBalance(),
                    this.clearXInfo(),
                    this.$services.userData.clear(),
                    this.$getService("groupedDeliveriesService").then((e => e.resetCache()))
                }
                ,
                o.clearLocalUserData = function() {
                    this.$services.userData.clearLocalUserInfo(),
                    localStorage.removeItem(e.storageKey(c)),
                    localStorage.removeItem("offerRateMain")
                }
                ,
                e._getUserUid = function() {
                    return WbSpaModel.prototype.$auth.um.userUid || "0"
                }
                ,
                o._getUserData = async function() {
                    return e.syncData.userData.time <= Date.now() && !e.syncData.userData.updateInProgress && await this._xInfoUpdate(),
                    e.syncData.userData.data
                }
                ,
                e.storageKey = function(t) {
                    return `${t}-${e._getUserUid()}`
                }
                ,
                o._xInfoUpdate = async function() {
                    const t = e.syncData.userData;
                    t.updateInProgress = !0;
                    const n = e.storageKey(t.prefix);
                    await navigator.locks.request(`lock-${n}`, (async r => {
                        const o = e.syncData.userData;
                        if (!o || o.time < Date.now()) {
                            const e = null == t ? void 0 : t.data;
                            let r = new URLSearchParams;
                            (null == e ? void 0 : e.currency) && r.set("currency", e.currency),
                            e && (r.set("latitude", e.latitude),
                            r.set("longitude", e.longitude),
                            r.set("locale", e.locale),
                            r.set("address", e.address),
                            r.set("dt", e.dt || "0"),
                            e.addressId && r.set("addressId", e.addressId),
                            e.addressType && r.set("addressType", e.addressType));
                            const o = t.fetchParam.url(r)
                              , s = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(o, {
                                credentials: "include"
                            }, {
                                timeout: t.fetchParam.timeout,
                                nullOnError: !0,
                                addAuthHeader: !0
                            });
                            if (s) {
                                var i;
                                const e = null === (i = localStorage.getObject(n)) || void 0 === i ? void 0 : i.data
                                  , r = {
                                    time: Date.now() + t.interval,
                                    data: {
                                        ...e,
                                        ...s
                                    }
                                };
                                localStorage.putObject(n, r),
                                Object.assign(t, r),
                                this._checkForRefresh(e, s)
                            } else
                                e.time = Date.now() + 1e4
                        } else
                            o && o.time !== t.time && Object.assign(t, o);
                        t.updateInProgress = !1
                    }
                    ))
                }
                ,
                o.getXinfo = function() {
                    return this._getUserData().then((e => Promise.resolve(e.xinfo)))
                }
                ,
                o.getXinfoWithClustersAndVectors = function(t) {
                    return this._checkNeedUpdateData(e.syncData.userClusters),
                    this._checkNeedUpdateData(e.syncData.userVector),
                    this._getUserData().then((n => {
                        var r, o;
                        let i = e.syncData.userClusters.data.length > 0 ? n.xinfo + `&uclusters=${e.syncData.userClusters.data.join(",")}` : n.xinfo;
                        if ((wb.global.settings.switches.addUserVector && "search" === t || wb.global.settings.switches.addUserVectorCatalog && "catalog" === t) && null !== (r = e.syncData.userVector) && void 0 !== r && null !== (o = r.data[t]) && void 0 !== o && o.value) {
                            const n = e.syncData.userVector.data[t];
                            i += `&uv=${n.value}&uiv=${n.version}`
                        }
                        return Promise.resolve(i)
                    }
                    ))
                }
                ,
                o.getUserClusters = function() {
                    return this._checkNeedUpdateData(e.syncData.userClusters),
                    e.syncData.userClusters.data.join(",")
                }
                ,
                o.getBannersClusters = function() {
                    return this._checkNeedUpdateData(e.syncData.userClustersBanners),
                    e.syncData.userClustersBanners.data.length > 0 ? e.syncData.userClustersBanners.data : []
                }
                ,
                o.getXinfoSignedV1 = function() {
                    return this._getUserData().then((e => {
                        var t;
                        return Promise.resolve({
                            xinfo: e.xinfo,
                            userDataSign: e.userDataSign,
                            addressDataSign: e.addressDataSign,
                            shard: e.shard,
                            latitude: e.latitude,
                            longitude: e.longitude,
                            address: e.address,
                            dest: null === (t = e.destinations) || void 0 === t ? void 0 : t.last()
                        })
                    }
                    ))
                }
                ,
                o.getLocationData = async function() {
                    const e = await this._getUserData();
                    return {
                        latitude: e.latitude,
                        longitude: e.longitude,
                        address: e.address,
                        destinations: e.destinations,
                        locale: e.locale
                    }
                }
                ,
                o.setGeo = async function(t) {
                    var n, r;
                    const o = null !== (n = t.lat) && void 0 !== n ? n : t.latitude
                      , i = null !== (r = t.lon) && void 0 !== r ? r : t.longitude
                      , s = t.address;
                    if (o && i && s) {
                        var a;
                        const n = e.syncData.userData
                          , r = e.storageKey(n.prefix);
                        const l = `officeId=${"self" === t.deliveryType ? t.addressId : t.officeId}&dest=${t.dest}&sign=${t.sign}&lat=${o}&lng=${i}`
                          , c = {
                            ...null == n ? void 0 : n.data,
                            ...null === (a = localStorage.getObject(r)) || void 0 === a ? void 0 : a.data,
                            latitude: o,
                            longitude: i,
                            address: s,
                            addressId: t.addressId,
                            addressType: t.deliveryType,
                            addressDataSign: l,
                            dt: Date.now() / 1e3 | 0,
                            relevant: !1
                        };
                        c.xinfo = this._changeXDest(c.xinfo, t.dest);
                        const u = {
                            data: c,
                            time: e._timeInPast(n.interval)
                        };
                        Object.assign(n, u),
                        localStorage.putObject(r, u),
                        WbSpaModel.prototype.$geoLocation.setCityName(s),
                        await this._xInfoUpdate()
                    }
                }
                ,
                o.setCurrency = async function(t) {
                    if (t) {
                        var n;
                        const r = e.syncData.userData
                          , o = e.storageKey(r.prefix)
                          , i = {
                            ...null == r ? void 0 : r.data,
                            ...null === (n = localStorage.getObject(o)) || void 0 === n ? void 0 : n.data,
                            currency: t,
                            relevant: !1
                        };
                        i.xinfo = this._changeXCurrency(i.xinfo, t),
                        Object.assign(r, {
                            data: i,
                            time: e._timeInPast(r.interval)
                        }),
                        await this._xInfoUpdate()
                    }
                }
                ,
                o.clearXInfo = function() {
                    for (const t in e.syncData)
                        e.syncData[t].time = e._timeInPast(e.syncData[t].interval);
                    Object.keys(localStorage).forEach((t => {
                        for (const n in e.syncData)
                            -1 !== t.indexOf(e.syncData[n].prefix) && localStorage.removeItem(t)
                    }
                    ))
                }
                ,
                o.clearUserVectors = function() {
                    e.syncData.userVector.time = e._timeInPast(e.syncData.userVector.interval),
                    Object.keys(localStorage).forEach((t => {
                        -1 !== t.indexOf(e.syncData.userVector.prefix) && localStorage.removeItem(t)
                    }
                    ))
                }
                ,
                o.getShardAsync = async function() {
                    return (await this._getUserData()).shard
                }
                ,
                o.getIp = function() {
                    return e.syncData.userData.data.ip
                }
                ,
                o.getCurrency = function() {
                    return e.syncData.userData.data.currency
                }
                ,
                o.getCurrencyAsync = async function() {
                    return (await this._getUserData()).currency
                }
                ,
                o.getLocale = function() {
                    return e.syncData.userData.data.locale
                }
                ,
                o._changeXCurrency = function(e, t) {
                    const n = `$1${t.toLowerCase()}$3`;
                    return e.replace(/(&curr=)(.*?)(&)/, n)
                }
                ,
                o._changeXDest = function(e, t) {
                    const n = `$1${t}$3`;
                    return e.replace(/(&dest=)(.*?)(&)/, n)
                }
                ,
                e.getXCurrency = function(e) {
                    var t;
                    return null === (t = /curr=(.*?)&/.exec(e)) || void 0 === t ? void 0 : t[1]
                }
                ,
                o._checkForRefresh = function(t, n, r) {
                    var o;
                    let i = !1;
                    var s, a, l, c, u, d, p;
                    (null == t ? void 0 : t.currency) !== (null == n ? void 0 : n.currency) && (e._checkCurrencyInvalid(n) && location.reload(),
                    null === (s = wb.spa.getMainLayout().header) || void 0 === s || s.changeCurrency.refresh(n.currency),
                    i = !0);
                    ((null == t ? void 0 : t.destinations[t.destinations.length - 1]) !== (null == n ? void 0 : n.destinations[n.destinations.length - 1]) && (i = !0),
                    null != n && n.address && (null === (o = WbSpaModel.prototype.$geoLocation.location) || void 0 === o ? void 0 : o.address) !== (null == n ? void 0 : n.address) && WbSpaModel.prototype.$geoLocation.updateLocation(),
                    i) && (this.$eventBus.dispatchEvent(new CustomEvent("GeoUpdated")),
                    null === (a = wb.spa) || void 0 === a || null === (l = a.getMainLayout()) || void 0 === l || null === (c = l.menuTop) || void 0 === c || c.refreshMenu((null == t ? void 0 : t.locale) !== (null == n ? void 0 : n.locale)),
                    this.$router.clearNotActiveContainer(),
                    (r || WbSpaModel.prototype.$router.currentRoute && "SpaBasketEntrypoint" !== (null === (u = WbSpaModel.prototype.$router.currentRoute) || void 0 === u ? void 0 : u.name) && "SpaBasketBuyItNowEntrypoint" !== (null === (d = WbSpaModel.prototype.$router.currentRoute) || void 0 === d ? void 0 : d.name)) && (null === (p = wb.spa) || void 0 === p || p.refresh()))
                }
                ,
                o._onSync = function({key: t, oldValue: n, newValue: r}) {
                    if (t === l && r)
                        n !== r && (r && "unauth" !== r && !this.$router.userIsAuth ? wb.spa.getMainLayout().updateAfterLogin() : location.reload());
                    else if (t === e.storageKey(e.syncData.userData.prefix)) {
                        if (r) {
                            const t = JSON.parse(n)
                              , o = JSON.parse(r);
                            Object.assign(e.syncData.userData, o),
                            setTimeout(( () => this._checkForRefresh(null == t ? void 0 : t.data, o.data, !0)), 1e3)
                        }
                    } else
                        for (const n in e.syncData)
                            if (t === e.storageKey(e.syncData[n].prefix)) {
                                const t = JSON.parse(r);
                                Object.assign(e.syncData[n], t)
                            }
                }
                ,
                e._getFallbackData = function() {
                    const t = e._getDefaultLocale()
                      , n = e._getDefaultCurrency(t);
                    let r;
                    switch (t) {
                    case "ru":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=-1257786&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Москва",
                            latitude: 55.753737,
                            longitude: 37.6201,
                            currency: n,
                            destinations: [-1029256, -102269, -2162196, -1257786]
                        };
                        break;
                    case "by":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=-8139704&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Минск",
                            latitude: 53.901328,
                            longitude: 27.549044,
                            currency: n,
                            destinations: [12358386, 12358403, -70563, -8139704]
                        };
                        break;
                    case "kz":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=85&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Нур-Султан",
                            latitude: 51.129669,
                            longitude: 71.495475,
                            currency: n,
                            destinations: [12358388, 12358412, -3479876, 85]
                        };
                        break;
                    case "kg":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=28&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Бишкек",
                            latitude: 42.8618,
                            longitude: 74.5831,
                            currency: n,
                            destinations: [12358387, 12358395, -10860151, 28]
                        };
                        break;
                    case "am":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=36&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Ереван",
                            latitude: 40.177628,
                            longitude: 44.512547,
                            currency: n,
                            destinations: [12358387, 12358400, -13404218, 36]
                        };
                        break;
                    case "uz":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=491&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Ташкент",
                            latitude: 41.311158,
                            longitude: 69.279737,
                            currency: n,
                            destinations: [12358390, 12358442, -2448072, 491]
                        }
                    }
                    return r.locale = t,
                    r.shard = 0,
                    r
                }
                ,
                e._getDefaultCurrency = function(e) {
                    const t = localStorage.getItem("wbx__currency")
                      , n = wb.currencies.info[t];
                    return t && localStorage.removeItem("wbx__currency"),
                    n ? t : wb.currencies.getDefaultForLocale(e)
                }
                ,
                e._getDefaultLocale = function() {
                    switch (document.location.hostname) {
                    case "www.wildberries.by":
                        return "by";
                    case "www.wildberries.kz":
                        return "kz";
                    case "www.wildberries.kg":
                        return "kg";
                    case "www.wildberries.am":
                        return "am";
                    case "www.wildberries.uz":
                        return "uz"
                    }
                    return "ru"
                }
                ,
                e._timeInPast = function(e) {
                    return Date.now() - e
                }
                ,
                e._checkCurrencyInvalid = function(t) {
                    var n;
                    return !t || !wb.currencies.info[t.currency] || !wb.currencies.info[null === (n = e.getXCurrency(t.xinfo)) || void 0 === n ? void 0 : n.toUpperCase()]
                }
                ,
                o._checkNeedUpdateData = function(t) {
                    if (t.time >= Date.now() || t.updateInProgress)
                        return;
                    t.updateInProgress = !0;
                    const n = e.storageKey(t.prefix);
                    navigator.locks.request(`lock-${n}`, (async r => {
                        const o = localStorage.getObject(n);
                        if (!o || o.time < Date.now()) {
                            let r;
                            if ("0" !== e._getUserUid())
                                if (t.disableFetch && await t.disableFetch())
                                    r = [];
                                else {
                                    const n = t.fetchParam.url(e._getUserUid())
                                      , o = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(n, {
                                        credentials: "omit"
                                    }, {
                                        timeout: t.fetchParam.timeout,
                                        nullOnError: !0,
                                        addAuthHeader: t.fetchParam.jwt
                                    });
                                    r = t.processData(o)
                                }
                            else
                                r = [];
                            if (r) {
                                const e = {
                                    time: Date.now() + t.interval,
                                    data: r
                                };
                                localStorage.putObject(n, e),
                                Object.assign(t, e)
                            } else
                                t.time = Date.now() - t.interval + 6e4
                        } else
                            o && o.time !== t.time && Object.assign(t, o);
                        t.updateInProgress = !1
                    }
                    ))
                }
                ,
                t = e,
                (n = [{
                    key: "geoDataStorageKey",
                    get: function() {
                        return e.storageKey(e.syncData.userData.prefix)
                    }
                }]) && s(t.prototype, n),
                r && s(t, r),
                Object.defineProperty(t, "prototype", {
                    writable: !1
                }),
                t
            }();
            var h, m, f;
            i = p,
            h = p,
            f = {
                userData: {
                    prefix: "geo-data-v1",
                    data: null,
                    interval: 18e4,
                    fetchParam: {
                        url: e => `https://user-geo-data.wildberries.ru/get-geo-info?${e}`,
                        timeout: 3e3
                    },
                    init: function() {
                        const e = {
                            data: i._getFallbackData(),
                            time: i._timeInPast(Date.now())
                        }
                          , t = localStorage.getObject(i.storageKey(this.prefix));
                        null != t && t.data && i._checkCurrencyInvalid(t.data) && (t.time = i._timeInPast(this.interval)),
                        Object.assign(this, {
                            ...e,
                            ...t
                        })
                    }
                },
                userClusters: {
                    prefix: "user-clusters",
                    data: null,
                    processData: function(e) {
                        return this.fetchParam.dataField ? e[this.fetchParam.dataField] : e
                    },
                    interval: 432e5,
                    fetchParam: {
                        url: e => `https://personal-clusters.wildberries.ru/api/v1/clusters?id=${e}`,
                        dataField: "uclusters",
                        timeout: 2e4
                    },
                    init: function() {
                        Object.assign(this, {
                            data: [],
                            time: i._timeInPast(this.interval),
                            ...localStorage.getObject(i.storageKey(this.prefix))
                        })
                    }
                },
                userClustersBanners: {
                    prefix: "user-clusters-banners",
                    data: null,
                    processData: function(e) {
                        return this.fetchParam.dataField ? e[this.fetchParam.dataField] : e
                    },
                    interval: 432e5,
                    fetchParam: {
                        url: e => `https://user-banner.wb.ru/api/v1/clusters?id=${e}`,
                        timeout: 2e4
                    },
                    init: function() {
                        Object.assign(this, {
                            data: [],
                            time: i._timeInPast(this.interval),
                            ...localStorage.getObject(i.storageKey(this.prefix))
                        })
                    }
                },
                userVector: {
                    prefix: "user-vector",
                    data: null,
                    processData: function(e) {
                        var t;
                        return e ? null === (t = e.data[0]) || void 0 === t ? void 0 : t.vectors.reduce(( (e, t) => (e[t.space] = {
                            value: t.value,
                            version: t.version
                        },
                        e)), {}) : this.data
                    },
                    interval: 432e5,
                    fetchParam: {
                        url: () => "https://user-vector-info.wb.ru/api/v1/vector",
                        timeout: 2e4,
                        jwt: !0
                    },
                    init: function() {
                        Object.assign(this, {
                            data: [],
                            time: i._timeInPast(this.interval),
                            ...localStorage.getObject(i.storageKey(this.prefix))
                        })
                    },
                    disableFetch: async function() {
                        const e = await WbSpaModel.prototype.$services.userData.getUserDataAsync();
                        return !e || !e.userInfo.enableUserVectors
                    }
                }
            },
            (m = a(m = "syncData"))in h ? Object.defineProperty(h, m, {
                value: f,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : h[m] = f;
            const y = p
        }
        ,
        51584: () => {
            window.wb = {
                namespace: function(e, t) {
                    for (var n = e.split("."), r = this, o = n.length, i = 0; i < o; i++)
                        void 0 === r[n[i]] && (r[n[i]] = t && i === o - 1 ? t : {}),
                        r = r[n[i]];
                    return r
                },
                getURLparam: function(e) {
                    return (RegExp("[\\?&]" + e + "=([^&#]*)", "i").exec(location.href) || [, null])[1]
                }
            },
            $.processResponse = function(e, t, n, r) {
                var o;
                if (null == e)
                    return !1;
                let i = void 0 !== e.ResultState ? e.ResultState : e.resultState;
                switch (e.hasOwnProperty("resultState") || e.hasOwnProperty("ResultState") || (i = e.state),
                i) {
                case -1:
                    const s = e.Value || e.value || (null === (o = e.data) || void 0 === o ? void 0 : o.errorMsg) || "Ошибка сервера";
                    if ("boolean" == $.type(n)) {
                        n && wb.popup.renderModalError(s);
                        break
                    }
                    null != n ? n(s) : alert(s);
                    break;
                case 0:
                    if (null == t)
                        return !1;
                    t(e.Value || e.value);
                    break;
                case 1:
                    window.location.href = e.Value || e.value;
                    break;
                case 2:
                case 4:
                    if (4 === i && wb.spa) {
                        wb.spa.refresh();
                        break
                    }
                    let a = window.location.href;
                    const l = a.indexOf("#");
                    -1 !== l && (a = a.substr(0, l)),
                    null != e.Value || null != e.value ? (window.location.href = a + (e.Value || e.value),
                    window.location.reload()) : window.location.href = a;
                    break;
                case 3:
                    const c = e.Value || e.value;
                    if (null == wb.spa)
                        return window.location.href = c.url;
                    const u = new URL(decodeURIComponent(c.url),window.location.origin);
                    c.redirect = !0,
                    null == r || r(c),
                    wb.spa.redirect(u.href, c.replaceState, c.forceUpdate)
                }
                return !0
            }
            ,
            wb.quickNav = function(e) {
                var t = e || {}
                  , n = document.querySelector(".j-quicknav");
                n.addEventListener("click", (function() {
                    return window.scrollTo({
                        top: 0,
                        behavior: "smooth"
                    }),
                    !1
                }
                ));
                let r;
                function o() {
                    n.style.display = "block"
                }
                function i() {
                    n.style.display = "none"
                }
                window.addEventListener("scroll", (function() {
                    if (n) {
                        document.documentElement.clientWidth >= 768 ? function() {
                            const e = t.bottomPx || function() {
                                const e = document.querySelector("#app");
                                return e ? e.offsetTop + parseFloat(getComputedStyle(e, null).height.replace("px", "")) : 0
                            }();
                            (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0) > e ? o() : i()
                        }() : function() {
                            const e = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
                            r || (r = e),
                            function() {
                                if (e >= r)
                                    return !1;
                                const t = document.documentElement.clientHeight;
                                return !(e < 1.5 * t)
                            }() ? o() : i(),
                            r = e
                        }()
                    }
                }
                ))
            }
            ,
            wb.namespace("utils.script", function() {
                var e = {};
                function t(e) {
                    var t = $("html").attr("lang");
                    if ("ru" == t)
                        return Promise.resolve();
                    var n = e.substring(e.lastIndexOf("/") + 1).replace(".min.js", ".js").split("?");
                    return fetch("j/localized/" + n[0] + "?v=" + n[1] + "&c=" + t)
                }
                return {
                    require: function(n, r) {
                        var o, i = e[n];
                        return i || ($.isEmptyObject(e) && document.querySelectorAll("script[type='text/javascript']").forEach((function(t) {
                            if (t.type) {
                                var n = t.src.replace("http:", "").replace("https:", "");
                                e[n] = Promise.resolve()
                            }
                        }
                        )),
                        e[n] || (i = Promise.all([r ? t(n) : Promise.resolve(), (o = n,
                        new Promise(( (e, t) => {
                            try {
                                var n = document.createElement("script");
                                n.type = "text/javascript",
                                n.src = o,
                                n.readyState ? n.onreadystatechange = function() {
                                    "loaded" !== n.readyState && "complete" !== n.readyState || (n.onreadystatechange = null,
                                    e())
                                }
                                : (n.onload = function() {
                                    e()
                                }
                                ,
                                n.onerror = function() {
                                    t()
                                }
                                ),
                                document.body.appendChild(n)
                            } catch (e) {
                                t()
                            }
                        }
                        )))]),
                        e[n] = i)),
                        i
                    }
                }
            }()),
            wb.namespace("displayModeSettings", function() {
                const e = "displayMode";
                let t;
                var n = new Map;
                return {
                    init: function() {
                        function n() {
                            const n = wb.settings.breakponts
                              , r = window.innerWidth;
                            for (var o in t = "d",
                            n)
                                r < o && (t = n[o]);
                            let i = "desktop";
                            r <= 767.98 && (i = "phone"),
                            r >= 768 && r <= 1023.98 && (i = "tablet"),
                            $.observable(wb.settings).setProperty(e, t),
                            $.observable(wb.settings).setProperty({
                                displayType: i
                            })
                        }
                        n(),
                        window.addEventListener("resize", n)
                    },
                    addObserver: function(r, o) {
                        if ("function" == typeof r) {
                            o && r(t);
                            var i = () => r(t);
                            $.observe(wb.settings, e, i),
                            $.observe(wb.settings, "displayType", i),
                            n.set(r, i)
                        }
                    },
                    removeObserver: function(t) {
                        let r = n.get(t);
                        r && ($.unobserve(wb.settings, e, r),
                        $.unobserve(wb.settings, "displayType", r))
                    }
                }
            }()),
            wb.namespace("network", {
                init: function() {
                    function e() {
                        $.observable(wb.settings).setProperty("isOffline", !window.navigator.onLine)
                    }
                    e(),
                    window.addEventListener("online", e),
                    window.addEventListener("offline", e)
                }
            })
        }
        ,
        16158: () => {
            var e, t, n, r;
            wb.stat = function() {
                let e, t = [];
                function n() {
                    const e = t;
                    return t = [],
                    e
                }
                function r() {
                    if (!t.length)
                        return;
                    const r = n()
                      , o = {};
                    o.pageViewGuid = e,
                    o.path = window.location.pathname,
                    o.queryString = window.location.search,
                    o.urlReferrer = null != wb.spa ? wb.spa.getReferrer() : document.referrer,
                    o.deviceId = wb.cookieHelper.getCookie("_wbauid"),
                    o.statisticEvents = r,
                    WbSpaModel.prototype.$httpClient.fetch("/webapi/stats/events", {
                        method: "POST",
                        body: JSON.stringify(o),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }).catch((e => {
                        t = t.concat(r)
                    }
                    ))
                }
                return setInterval((function() {
                    r()
                }
                ), 3e3),
                {
                    sendEvent: function(e, n, o) {
                        const i = n.slice();
                        t.push({
                            EventName: e,
                            EventParams: i
                        }),
                        o && r()
                    },
                    wrapParam: function(e, t) {
                        return {
                            ParamName: e,
                            ParamValue: void 0 === t ? null : t.toString().replace(/"/g, "\\x22")
                        }
                    },
                    sendPageView: function() {
                        const r = {};
                        let o;
                        r.statusCode = 200,
                        r.path = window.location.pathname,
                        r.queryString = window.location.search,
                        r.urlReferrer = document.referrer,
                        r.deviceId = wb.cookieHelper.getCookie("_wbauid"),
                        t.length > 0 && (o = n(),
                        r.statisticEvents = o),
                        WbSpaModel.prototype.$user.getLocationData().then((e => (e && (r.address = e.address,
                        r.latitude = e.latitude,
                        r.longitude = e.longitude),
                        WbSpaModel.prototype.$httpClient.fetch("/webapi/stats/pageview", {
                            method: "POST",
                            body: JSON.stringify(r),
                            headers: {
                                "Content-Type": "application/json"
                            }
                        })))).then((e => e.json())).then((t => {
                            e = t
                        }
                        )).catch((e => {
                            t = t.concat(o)
                        }
                        ))
                    }
                }
            }(),
            wb.stat.banners = function() {
                const e = {
                    ths: this,
                    cl: {
                        banner: "j-banner"
                    }
                };
                e.sl = {
                    shownStat: ".j-banner-shown-stat",
                    clickStat: ".j-banner-click-stat",
                    banner: "." + e.cl.banner
                };
                const t = function(e) {
                    const t = []
                      , n = e.data("banner-id")
                      , r = e.data("section")
                      , o = e.data("statistic-fields");
                    return "" === n ? null : (t.push(wb.stat.wrapParam("BID", n)),
                    t.push(wb.stat.wrapParam("SCTN", r)),
                    o && (t.push(wb.stat.wrapParam("BUT", o.urlType)),
                    t.push(wb.stat.wrapParam("BLT", o.locationType)),
                    t.push(wb.stat.wrapParam("BDT", o.displayType)),
                    t.push(wb.stat.wrapParam("SORT", o.sort))),
                    t)
                }
                  , n = function(e) {
                    e instanceof jQuery || (e = $(e));
                    if (e.data("shown-stat-sent"))
                        return;
                    const n = t(e);
                    if (!n)
                        return;
                    const r = e[0].classList.contains("j-banner-stat-send");
                    wb.stat.sendEvent("BSE", n, r),
                    e.attr("data-shown-stat-sent", !0)
                };
                var r = function(e, n) {
                    if ((null == e ? void 0 : e.length) > 0) {
                        const t = e[0];
                        if (t.classList.contains("j-banner-wba")) {
                            var r;
                            let {data: e} = $.view(t);
                            e = e.length > 0 ? e[0] : e,
                            e.banner && (e = e.banner);
                            const n = !!e.ordBannerMark
                              , o = (null === (r = e.bannerSelections) || void 0 === r ? void 0 : r.length) > 0 ? e.bannerSelections.map((e => e.href)).toString() : e.link;
                            wb.analitics.sendBannersWbaEvent("Banner_T", e.alt, t.dataset.analiticsCode, o, t.dataset.bannerIndex, e.id, n)
                        }
                    }
                    var o;
                    n || (e.data("click-stat-sent") || (o = t(e)) && (wb.stat.sendEvent("BCE", o, !0),
                    e.attr("data-click-stat-sent", !0)))
                };
                return {
                    initClickEvent: function(t) {
                        $("body").off("mousedown", e.sl.clickStat).on("mousedown", e.sl.clickStat, (function(n) {
                            if (3 !== n.which) {
                                var o, i = n.currentTarget.classList.contains(e.cl.banner), s = $(n.currentTarget);
                                i || (o = $this.data("banner-id"),
                                s = $(e.sl.banner).filter((function(e, t) {
                                    return $(t).data("banner-id") === o
                                }
                                )).first()),
                                r(s, t)
                            }
                        }
                        ))
                    },
                    sendShownStatistic: n,
                    sendAllShownStatistic: function() {
                        var t = $(e.sl.shownStat);
                        wb.scrollListener.addElements(t, (function(e) {
                            n($(e))
                        }
                        ), !1, .6),
                        wb.scrollListener.start()
                    },
                    sendStatisticNow: function() {
                        $.each($(e.sl.shownStat), (function(e, t) {
                            wb.stat.banners.sendShownStatistic($(t))
                        }
                        ))
                    },
                    sendShownCarousel: function(e) {
                        var t;
                        t = e.find("li:not(.jc-clone)").find(".j-banner"),
                        $.each(t, (function(e, t) {
                            wb.stat.banners.sendShownStatistic($(t))
                        }
                        ))
                    },
                    callShownVisibleHandlerForCarousel: function(e, t) {
                        var n;
                        n = e.find("li").find(".j-banner:not(.j-banner-section)"),
                        wb.scrollListener.addElements(n, (function(e) {
                            wb.stat.banners.sendShownStatistic($(e))
                        }
                        ), !1, t),
                        wb.scrollListener.start()
                    },
                    getShownAfterSetActiveEvent: function(e) {
                        return function(t) {
                            var n = t.find(".j-banner").first();
                            wb.scrollListener.checkRatio(n, e) && wb.stat.banners.sendShownStatistic(n)
                        }
                    },
                    sendClickStatistic: r,
                    destroyClickEvent: function() {
                        $("body").off("mousedown", e.sl.clickStat)
                    },
                    bannerBlockShownStatWba: function(e) {
                        const t = function(e) {
                            if (!e)
                                return;
                            const t = document.querySelectorAll(".j-banners-block")
                              , n = [];
                            function r(t) {
                                const r = t.querySelectorAll(".j-banner-wba").toArray()
                                  , o = e.$observerHelper.getVerticalObserver(r, {
                                    threshold: .5
                                });
                                function i(t) {
                                    const n = t.target;
                                    let {data: r} = $.view(n);
                                    const s = !!r.ordBannerMark;
                                    e.$analitic.sendBannersWbaEvent("Banner_S", n.title, n.dataset.analiticsCode, n.href, n.dataset.bannerIndex, n.dataset.bannerId, s, r.pixelSrc),
                                    e.$stat.banners.sendShownStatistic(n),
                                    n.removeEventListener(o.elementInViewportEventName, i)
                                }
                                n.push(o),
                                r.forEach((e => {
                                    e.addEventListener(o.elementInViewportEventName, i)
                                }
                                )),
                                o.observe()
                            }
                            return t.forEach((e => {
                                r(e)
                            }
                            )),
                            {
                                destroy: function() {
                                    n.forEach((e => {
                                        e.destroy()
                                    }
                                    ))
                                },
                                addBlocks: function(e) {
                                    null != e && e.length && e.filter((e => e.classList.contains("j-banners-block"))).forEach((e => {
                                        r(e)
                                    }
                                    ))
                                }
                            }
                        }(e);
                        return {
                            destroy: function() {
                                t.destroy()
                            },
                            addBlocks: function(e) {
                                t.addBlocks(e)
                            }
                        }
                    }
                }
            }(),
            function() {
                var e = document.createElement("a");
                if (e.href = document.referrer,
                function(e) {
                    let t = !0;
                    return ["wb.", "wildberries."].forEach((function(n) {
                        e.indexOf(n) >= 0 && -1 === $.inArray(e.split(".")[0], ["style", "blog", "lookshop"]) && (t = !1)
                    }
                    )),
                    t
                }(e.hostname)) {
                    var t = wb.helpers.getParamsFromUrlQuery(location.search)
                      , n = wb.stat
                      , r = [];
                    e.hostname || t.utm_medium || t.utm_campaign || t.utm_source ? (r.push(n.wrapParam("UTMM", t.utm_medium ? t.utm_medium : "not_set")),
                    r.push(n.wrapParam("UTMC", t.utm_campaign ? t.utm_campaign : "not_set")),
                    r.push(n.wrapParam("UTMS", t.utm_source ? t.utm_source : e.hostname ? e.hostname : "not_set")),
                    t.gclid && r.push(n.wrapParam("GCID", "adwords")),
                    e.hostname && r.push(n.wrapParam("Rfr", e.hostname))) : r.push(n.wrapParam("Rfr", "direct")),
                    wb.stat.sendEvent("RFR", r)
                }
            }(),
            e = wb.getURLparam("wb_tp"),
            t = wb.getURLparam("wb_bnd"),
            n = wb.stat,
            r = [],
            e && t && (r.push(n.wrapParam("Btp", e)),
            r.push(n.wrapParam("Bbnd", t)),
            n.sendEvent("BV", r))
        }
        ,
        41279: () => {
            $.observable.Object.prototype.setAllProperty = function(e, t) {
                var n = this;
                $.each(e, (function(e, r) {
                    var o = e;
                    t && (o = t + "." + o),
                    $.isPlainObject(r) ? n.setAllProperty(r, o) : !$.isArray(r) && n.setProperty(o, r)
                }
                ))
            }
            ,
            $.observable.Array.prototype.refreshArray = function(e) {
                for (var t = this, n = 0; n < e.length; n++)
                    t._data.length === n ? t.insert(e[n]) : $.observable(t._data[n]).setProperty(e[n]);
                for (; e.length < t._data.length; )
                    t.remove(t._data.length - 1)
            }
            ,
            $.views.helpers({
                suppliersOrgForms: ["ООО", "ПАО", "ОАО", "ЗАО", "ИП", "Фонд", "Ассоциации", "Союзы", "НАО", "ТОО", "АО"],
                isDefaultSupplier: function(e, t) {
                    return 32477 === e || 12399 === e || 17887 === e || 23316 === e || 28906 === e || "Brands Seller" === t || "Best Brands" === t || "First Choice" === t || "WILDBERRIES" === t
                },
                supplierFineName: function(e, t) {
                    return 20624 === t ? "" : 1876 === t && "Wildberries" === e ? "Brands Seller" : 20253 === t && "Wildberries" === e ? "Best Brands" : 154 === t && "Wildberries" === e ? "First Choice" : "Wildberries" === e ? "WILDBERRIES" : $.views.converters.trimWord(e, $.views.helpers.suppliersOrgForms)
                },
                ImageUrl: wb.helpers.url.imageUrl,
                urlFeedbackPhoto: wb.helpers.url.urlFeedbackPhoto,
                urlProductVideo: wb.helpers.url.urlVideoProduct,
                urlFeedbackVideoPreview: wb.helpers.url.urlFeedbackVideoPreview,
                productCardUrl: function(e, t, n) {
                    return $.views.converters.urlForGood(e, null, n, null, null, t)
                },
                forBrandLogoFromId: function(e) {
                    return e ? wb.helpers.url.urlToExternalStatic(`/vol1/sellers/brands/${e}.webp`) : `${wb.settings.staticSiteUrl}/i/nologo.gif`
                },
                forSellerLogo: function(e, t=!1) {
                    return wb.helpers.url.urlToExternalStatic(`/vol1/crm-bnrs/shops/${e}_${t ? "main_banner" : "logo"}.webp`)
                },
                isEmptyObject: function(e) {
                    return $.isEmptyObject(e)
                },
                PersonalPhoto: function() {
                    return "https://static-basket-01.wbbasket.ru/vol0/i/v3/user/avatar.png"
                },
                Declension: function(e, t, n, r, o) {
                    var i, s = e % 10, a = e % 100;
                    return i = 1 == s && 11 != a ? t : 2 == s && 12 != a || 3 == s && 13 != a || 4 == s && 14 != a ? n : r || n,
                    void 0 === o ? i : String.format(o, e, String.format(i, e))
                },
                pluralize: function(e) {
                    return $.pluralize(null != e ? e : 0, Array.prototype.slice.call(arguments, 1))
                },
                debug: function(e) {
                    console.log(e)
                },
                toDateFormat: function(e, t) {
                    return new Date(parseInt(e.replace("/Date(", "").replace(")\\/", ""), 10)).format(t)
                },
                formatDate: function(e, t) {
                    return new Date(e).format(t)
                },
                toJson: function(e) {
                    return JSON.stringify(e)
                },
                fromJson: function(e) {
                    return JSON.parse(e)
                },
                encode: function() {
                    for (var e = "", t = 0; t < arguments.length; t++)
                        e = e.concat(arguments[t]);
                    return encodeURIComponent(e)
                },
                isLazyImgInCarousel: function(e, t, n, r, o) {
                    return !0 === e && (!0 === n ? t >= 2 * r && t < o - r : t >= 2 * r)
                },
                timeLeft: function(e) {
                    var t = $.views.helpers.parseFromDotNet(e);
                    return wb.helpers.date.leftBefore(t)
                },
                parseFromDotNet: function(e) {
                    return new Date(parseInt(e.replace("/Date(", "").replace(")\\/", ""), 10))
                },
                timeLeftSpa: function(e) {
                    var t = new Date(e);
                    return wb.helpers.date.leftBefore(t)
                },
                isPriceEqual: function(e, t) {
                    return e === t
                },
                isNullOrWhiteSpace: function(e) {
                    return !e || 0 === e.length || /^\s*$/.test(e)
                },
                HasFlag: function(e, t) {
                    return (e & t) == t
                },
                blurAdult: function(e) {
                    return e && !wb.adult.isConfirmed
                },
                nonBreakingSpaceFormatted: function(e) {
                    return String(e).replace(/\B(?=(\d{3})+(?!\d))/g, "&nbsp;")
                },
                pickupType: function(e, t) {
                    if (86 == e.dtype)
                        return e.name;
                    if ("courier" == e.deliveryType)
                        return "Курьерский адрес";
                    if (63 == e.dtype || e.isSortCenter)
                        return t ? "СЦ / Склад" : "СЦ / Склад Wildberries";
                    if (29 == e.dtype || 31 == e.dtype || 32 == e.dtype)
                        return t ? "Почта" : "Отделение Почты";
                    if (23 == e.dtype)
                        return 2 == e.pickupType ? "Партнерский&nbsp;пункт выдачи (Почта&nbsp;России)" : t ? "Почта&nbsp;России" : "Отделение Почты России";
                    if (14 == e.dtype)
                        return "Постамат Халва";
                    if (15 == e.dtype && e.pickupType >= 0) {
                        if (1 == e.pickupType)
                            return "Отделение&nbsp;Сбербанка";
                        if (0 == e.pickupType)
                            return "Постамат&nbsp;Сбербанка"
                    }
                    return 16 == e.dtype ? "Постамат&nbsp;Пятерочка" : e.isExternalPostamat ? "Партнерский&nbsp;постамат" : e.isWb ? "Пункт выдачи" : "Партнерский&nbsp;пункт выдачи"
                },
                pickupPhotos: e => {
                    var t, n;
                    if (!e.photos)
                        return [];
                    if (86 == e.dtype)
                        return e.photos;
                    const r = new Set
                      , o = new Set;
                    for (let t of e.photos) {
                        const e = t.split(".").pop();
                        t = t.replace("preview", ""),
                        "webp" == (null == e ? void 0 : e.toLowerCase()) ? r.add(t) : o.add(t)
                    }
                    return [...r.size > 0 && null !== (t = WbSpaModel.prototype) && void 0 !== t && null !== (n = t.$apiSupport) && void 0 !== n && n.webpImage ? r : o]
                }
                ,
                priceFromRub: (e, t, n) => {
                    var r, o;
                    if (null === (r = wb.global) || void 0 === r || null === (o = r.settings) || void 0 === o || !o.currencies)
                        return e;
                    const i = n || WbSpaModel.prototype.$user.getCurrency();
                    if ("RUB" === i)
                        return e;
                    if (!wb.global.settings.currencies[i])
                        return e;
                    let s = e / wb.global.settings.currencies[i].rubRate;
                    return t ? "AMD" === i || "KZT" === i ? 10 * Math.floor(s / 10) : "BYN" === i ? Math.floor(100 * s) / 100 : "UZS" === i ? 100 * Math.floor(s / 100) : Math.floor(s) : s
                }
                ,
                priceToRub: (e, t) => {
                    var n, r;
                    return null !== (n = wb.global) && void 0 !== n && null !== (r = n.settings) && void 0 !== r && r.currencies && wb.global.settings.currencies[t] ? e * wb.global.settings.currencies[t].rubRate : e
                }
                ,
                toLocalPrice: (e, t) => "AMD" === t || "KZT" === t ? 10 * Math.floor(e / 10) : "BYN" === t ? Math.floor(100 * e) / 100 : "UZS" === t ? 100 * Math.floor(e / 100) : Math.floor(e),
                max: e => Math.max(e, 0),
                abs: e => Math.abs(e),
                trimWord: function(e, t) {
                    var n, r;
                    if (null === (n = t) || void 0 === n || !n.length || !e)
                        return e;
                    if ((null === (r = t = [].concat(t)) || void 0 === r ? void 0 : r.length) > 0) {
                        const n = (e = e.trim()).toLowerCase();
                        for (var o = 0; o < t.length; o++) {
                            const r = t[o].toLowerCase()
                              , i = n.indexOf(r + " ", 0);
                            0 == i && (e = e.substring(r.length).trim());
                            const s = e.toLowerCase().indexOf(r, e.length - r.length);
                            if (s > 0 && (e = e.substring(0, s)),
                            0 == i || s > 0)
                                return e.trim()
                        }
                    }
                    return e
                },
                brandUrl: function(e) {
                    return `/brands/${encodeURIComponent(e)}`
                },
                brandUrlById: async function(e) {
                    if (!e)
                        return null;
                    const t = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands-by-id/${e}.json`, {}, {
                        nullOnError: !0
                    }).catch((e => null));
                    return t ? $.views.helpers.brandUrl(t.url) : null
                },
                formatPrice: function(e, t, n) {
                    let r = $.views.converters.divideNumberBySeparator(e) + (t ? `,${t}` : "");
                    return "" != n && (r += "&nbsp;" + (n || wb.settings.currencyShortName)),
                    r
                },
                isDateToday: e => new Date(e).dateEqual(new Date),
                isClosedByUser: e => {
                    var t;
                    return (null === (t = wb.global.userSettings.closed) || void 0 === t ? void 0 : t.includes(e)) || !1
                }
                ,
                getCurrentCurrency: function() {
                    return $.views.converters.currencySign(WbSpaModel.prototype.$user.getCurrency())
                },
                fillFeedbackPhotosAndVideo(e) {
                    return e ? e.map((e => {
                        const t = e.isVideo ? this.fillFeedbackVideos([e]) : this.fillFeedbackPhotos([e]);
                        return null == t ? void 0 : t[0]
                    }
                    )) : []
                },
                fillFeedbackPhotos: function(e) {
                    const t = [];
                    return e ? e.map((e => {
                        const t = e.id || e;
                        return {
                            id: t,
                            preview: wb.helpers.url.urlFeedbackPhoto(t, "ms"),
                            fullPath: wb.helpers.url.urlFeedbackPhoto(t, "fs")
                        }
                    }
                    )) : t
                },
                fillFeedbackVideos: function(e) {
                    if (!e)
                        return [];
                    return (Array.isArray(e) ? e : [e]).map((e => {
                        const t = e.id
                          , [n,r] = null == t ? void 0 : t.split("/")
                          , o = ("00" + n).slice(-2)
                          , i = e.durationSec ? wb.helpers.formatVideoDuration(e.durationSec) : "-";
                        return {
                            id: t,
                            preview: `https://videofeedback${o}.wbbasket.ru/${r}/preview.${$.views.converters.toWebp("jpg")}`,
                            video: `https://videofeedback${o}.wbbasket.ru/${r}/index.m3u8`,
                            mp4: `https://videofeedback${o}.wbbasket.ru/${r}/preview.mp4`,
                            isVideo: !0,
                            duration: i
                        }
                    }
                    ))
                },
                stripHtml: (e, t) => {
                    if (!e)
                        return "";
                    if (t)
                        return e;
                    return (new DOMParser).parseFromString(e, "text/html").body.textContent || ""
                }
                ,
                isIosDevice: wb.helpers.iOS,
                isHuaweiDevice: wb.helpers.huawei,
                sumBy: (e, t) => t && e && 0 != e.length ? e.reduce(( (e, n) => (isNaN(n[t]) || (e += +n[t]),
                e)), 0) : 0,
                minFiscalPriceInCurrency: function(e) {
                    switch (e.toUpperCase()) {
                    case "UZS":
                        return 100;
                    case "AMD":
                    case "KZT":
                        return 10;
                    case "BYN":
                    case "USD":
                        return .01;
                    default:
                        return 1
                    }
                },
                stopPropagation: e => e.stopPropagation(),
                subtract: function(e, t=0) {
                    return (Math.round(100 * e) - Math.round(100 * t)) / 100
                },
                isExpressDeliveryToday: function(e, t, n) {
                    if (!t || !e || !n)
                        return !1;
                    const r = new Date
                      , o = 60 * r.getHours() + r.getMinutes()
                      , i = n[0]
                      , s = n[1]
                      , a = o + 60 * e;
                    if (o >= i && o <= s) {
                        if (t.some((e => a < e.start)) && e < 5)
                            return !0
                    }
                    return !1
                }
            }),
            $.views.converters({
                not: function(e) {
                    return !e
                },
                formatPhone: function(e, t) {
                    return e.toString().formatPhone(t)
                },
                toOrdinalDigitByFemaleGender: function(e) {
                    return ["Первая", "Вторая", "Третья", "Четвертая", "Пятая", "Шестая", "Седьмая", "Восьмая", "Девятая", "Десятая"][e] || e + 1
                },
                spaceFormatted: function(e) {
                    return String(e).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1 ")
                },
                plusMinus: e => {
                    let t = "";
                    return e > 0 ? t = "+" : e < 0 && (t = "-"),
                    t + " " + $.views.converters.spaceFormatted(Math.abs(e))
                }
                ,
                toInt: function(e) {
                    return parseInt(e, 10)
                },
                toFixed: function(e, t) {
                    var n = parseFloat(e);
                    return isNaN(n) ? "" : n.toFixed(t)
                },
                leadZero: function(e, t) {
                    if (isNaN(e) || null == e)
                        return null;
                    for (var n = Math.floor(e); n.toString().length < t; )
                        n = "0" + n;
                    return n
                },
                basketDeliveryDate: function(e, t, n, r, o=!1, i=!1, s=!1, a=!1, l=!1) {
                    if (!e)
                        return "";
                    if (s && i && i > 540 && (o = "9:00–23:00"),
                    !(8 & ~n)) {
                        const t = (new Date).daysBetween(e);
                        if (o) {
                            const t = $.views.converters.dayNameFromDate(e, l);
                            return a ? t : `${t}, ${o}`
                        }
                        if (r < 5 && 0 == t)
                            return $.views.converters.deliveryDateTxt(r, !0)
                    }
                    if (!t) {
                        if (o) {
                            const t = $.views.converters.dayNameFromDate(e, l);
                            return a ? t : `${t}, ${o}`
                        }
                        return $.views.converters.dayNameFromDate(e, l)
                    }
                    const c = t instanceof Date ? t : new Date;
                    return "number" == typeof t && (c.setTime(e.getTime()),
                    c.setDate(c.getDate() + t)),
                    c.is1stJan() && c.setDate(c.getDate() + 1),
                    e.getMonth() !== c.getMonth() ? `${e.format("d MMMM")}-${c.format("d MMMM")}` : `${e.format("d")}-${c.format("d MMMM")}`
                },
                priceWithCoins: function(e, t, n=!1) {
                    var r, o, i, s, a, l, c = Math.abs(Math.round(100 * (e % 1).toFixed(2)));
                    e = e > 0 ? Math.floor(e) : Math.ceil(e);
                    const u = (null === (r = this.tagCtx) || void 0 === r || null === (o = r.props) || void 0 === o || null === (i = o.iso) || void 0 === i ? void 0 : i.toUpperCase()) || this.ctxPrm && (null === (s = this.ctxPrm("iso")) || void 0 === s ? void 0 : s.toUpperCase());
                    return u && (t = null === (a = wb.currencies) || void 0 === a || null === (l = a.info[u]) || void 0 === l ? void 0 : l.sign),
                    0 == c && n ? c = null : c < 10 && (c = "0" + c),
                    $.views.helpers.formatPrice(e, c, t)
                },
                priceWithCurrencyOld: function(e, t, n, r=!1) {
                    if (!t && (isNaN(e) || !e))
                        return "";
                    if (("byn" === n || !n && "" !== n) && ("by" === wb.settings.currentLocale || "byn" === n || r)) {
                        let t = Math.round(100 * (e % 1).toFixed(2));
                        return e = Math.floor(e),
                        t < 10 && (t = "0" + t),
                        n && "byn" !== n && (t = null),
                        n = "р.",
                        $.views.helpers.formatPrice(e, t, n)
                    }
                    let o = "" === n ? "" : n || wb.settings.currencyShortName;
                    return e = Math.floor(100 * e) / 100,
                    $.views.helpers.formatPrice(e, null, o)
                },
                priceWithCurrencyV2: function(e, t, n) {
                    var r, o, i, s, a, l, c, u, d, p, h;
                    if (!t && (isNaN(e) || !e))
                        return "";
                    const m = e.toString().split(".")
                      , f = n ? null === (r = wb.currencies) || void 0 === r || null === (o = r.getIsoBySign) || void 0 === o ? void 0 : o.call(r, n) : (null === (i = this.tagCtx) || void 0 === i || null === (s = i.props) || void 0 === s || null === (a = s.iso) || void 0 === a ? void 0 : a.toUpperCase()) || this.ctxPrm && (null === (l = this.ctxPrm("iso")) || void 0 === l ? void 0 : l.toUpperCase()) || WbSpaModel.prototype.$user.getCurrency();
                    n || (n = null === (c = wb.currencies) || void 0 === c || null === (u = c.info[f]) || void 0 === u ? void 0 : u.sign);
                    const y = null !== (d = null === (p = this.tagCtx) || void 0 === p || null === (h = p.props) || void 0 === h ? void 0 : h.sale) && void 0 !== d ? d : 0;
                    if (y > 0) {
                        e = Number(e);
                        let t = Math.ceil(e * (y / 100));
                        const r = $.views.helpers.minFiscalPriceInCurrency(n);
                        t = t < r ? -r : -Math.ceil(t / r) * r,
                        e += t,
                        m[0] = `${e}`
                    }
                    if ("RUB" === f && "byn" !== n)
                        return $.views.helpers.formatPrice(m[0], null, n || "₽");
                    let g, v = e;
                    if ("byn" === n || "BYN" === f) {
                        v = Math.floor(e),
                        g = "00";
                        const t = e.toString().replace(",", ".").split(".")[1];
                        (null == t ? void 0 : t.length) > 0 && (g = t.substring(0, 2),
                        1 == g.length && (g += "0")),
                        n = "р."
                    } else
                        "AMD" !== f && "KZT" !== f || "string" == typeof e ? "UZS" === f ? v = 100 * parseInt(e / 100) : "KGS" === f && (v = Math.floor(e)) : v = 10 * parseInt(e / 10);
                    return $.views.helpers.formatPrice(v, g, n)
                },
                priceUsdRaw: function(e) {
                    var t, n, r;
                    if (null === (t = wb.global) || void 0 === t || null === (n = t.settings) || void 0 === n || null === (r = n.variables) || void 0 === r || !r.toUsdExchangeRate)
                        return 0;
                    return (parseInt(e * wb.global.settings.variables.toUsdExchangeRate * 100) / 100).toFixedNumber(2)
                },
                priceUsd: function(e) {
                    var t, n, r;
                    if (null === (t = wb.global) || void 0 === t || null === (n = t.settings) || void 0 === n || null === (r = n.variables) || void 0 === r || !r.toUsdExchangeRate)
                        return "";
                    return "$" + $.views.converters.priceUsdRaw(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g, "&nbsp;").replace(".", ",")
                },
                urlForGood: function(e, t, n, r, o, i, s) {
                    const a = new URL("/catalog/" + e + "/detail.aspx",window.location.origin);
                    return n && a.searchParams.set("targetUrl", n),
                    i && a.searchParams.set("size", i),
                    s && a.searchParams.set("helpKursk", "true"),
                    r && (a.hash = r),
                    a.toString()
                },
                urlForStatic: function(e, t) {
                    return wb.settings.staticSiteUrl + e
                },
                toLower: function(e) {
                    return null == e ? void 0 : e.toLowerCase()
                },
                dateFromTimestamp: function(e, t) {
                    return new Date(e).format(t || "dd.MM.yyyy HH:mm")
                },
                formatDate: function(e, t) {
                    var n;
                    if (!e)
                        return "";
                    const r = new Date(e);
                    return null !== (n = this.tagCtx) && void 0 !== n && n.props.yearFormat && (new Date).getFullYear() != r.getFullYear() && (t += this.tagCtx.props.yearFormat),
                    r.format(t)
                },
                humanDate: function(e, t) {
                    if (!e)
                        return "";
                    "string" == typeof e && (e = new Date(e));
                    const n = e => `${e} мес`
                      , r = e => $.pluralize(e, "{0} год", "{0} года", "{0} лет")
                      , {years: o, months: i, days: s} = wb.helpers.date.diff(e);
                    let a = (o > 0 || i > 0) && s > 15 ? i + 1 : i;
                    return o > 0 ? 0 == a ? r(o) : 12 == a ? r(o + 1) : `${r(o)} ${n(a)}` : i > 0 ? 12 == a ? r(o + 1) : n(a) : null != t ? t : $.pluralize(s, "{0} день", "{0} дня", "{0} дней")
                },
                humanTime: function(e) {
                    var t, n, r, o;
                    if (e <= 0 || isNaN(e))
                        return "";
                    const i = null === (t = this.tagCtx) || void 0 === t || null === (n = t.props) || void 0 === n ? void 0 : n.genitive
                      , s = []
                      , a = Math.floor(e % 86400 / 3600);
                    a && s.push(i ? $.pluralize(a, "{0} часа", "{0} часов") : $.pluralize(a, "{0} час", "{0} часа", "{0} часов"));
                    const l = null === (r = this.tagCtx) || void 0 === r || null === (o = r.props) || void 0 === o ? void 0 : o.withSeconds
                      , c = Math.floor(e % 3600 / 60) + (l ? 0 : 1);
                    if (c && s.push(i ? $.pluralize(c, "{0} минуты", "{0} минут") : $.pluralize(c, "{0} минута", "{0} минуты", "{0} минут")),
                    l) {
                        const t = e % 60;
                        t && s.push(i ? $.pluralize(t, "{0} секунды", "{0} секунд") : $.pluralize(t, "{0} секунда", "{0} секунды", "{0} секунд"))
                    }
                    return s.reduce(( (e, t, n, r) => {
                        if (0 == n)
                            return t;
                        return `${e}${r.length - 1 == n ? " и " : ", "}${t}`
                    }
                    ), "")
                },
                differenceDatesInSeconds: function(e=new Date, t=0) {
                    const n = new Date(e).addDays(t)
                      , r = new Date
                      , o = Math.floor((n - r) / 1e3);
                    return Math.max(0, o)
                },
                humanTimerFormat: function(e=0, t=!1) {
                    if (e <= 0 || isNaN(e))
                        return "время закончилось";
                    const n = Math.floor(e / 3600)
                      , r = Math.floor(e % 3600 / 60)
                      , o = e % 60;
                    if (e < 86400)
                        return `${t ? "" : $.pluralize(n, "остался", "осталось")} ${n < 10 ? "0" : ""}${n}${t ? " ч " : ":"}${r < 10 ? "0" : ""}${r}${t ? " мин " : ":"}${o < 10 ? "0" : ""}${o}${t ? " сек" : ""}`;
                    {
                        const t = Math.floor(e / 86400);
                        return $.pluralize(t, "остался {0} день", " осталось {0} дня", "осталось {0} дней")
                    }
                },
                humanTimerFormatSimple: function(e=0) {
                    const t = Math.floor(e / 3600)
                      , n = Math.floor(e % 3600 / 60)
                      , r = e % 60;
                    return `${t > 0 ? `${t < 10 ? "0" : ""}${t}:` : ""}${n < 10 ? "0" : ""}${n}:${r < 10 ? "0" : ""}${r}`
                },
                dateStringToFormat: function(e, t) {
                    if (!e || "string" != typeof e)
                        return "";
                    const [n,r,o] = e.split(".").map((e => parseInt(e)));
                    try {
                        return new Date(o,r - 1,n).format(t || "dd MMMM yyyy")
                    } catch (e) {
                        return ""
                    }
                },
                localize: function(e) {
                    return $.localize(e, Array.prototype.slice.call(arguments, 1))
                },
                pluralize: function(e) {
                    return $.pluralize(null != e ? e : 0, Array.prototype.slice.call(arguments, 1))
                },
                customDateTimeFormat: function(e, t, n, r, o) {
                    o || (o = "HH:mm");
                    var i = new Date(e)
                      , s = new Date;
                    if (i.toDateString() === s.toDateString())
                        return n + ", " + i.format(o);
                    var a = function() {
                        return this.setDate(this.getDate() - 1),
                        this
                    }
                    .call(s);
                    if (i.toDateString() === a.toDateString())
                        return r + ", " + i.format(o);
                    var l = i.format(t);
                    return i.getFullYear() < s.getFullYear() ? l + " " + i.getFullYear() + ", " + i.format(o) : l + ", " + i.format(o)
                },
                divideNumberBySeparator: function(e, t) {
                    return Object.is(e, -0) ? "-0" : null == e ? void 0 : e.toString().replace(/\B(?=(\d{3})+(?!\d))/g, t || "&nbsp;")
                },
                trimWord: $.views.helpers.trimWord,
                join: function(e) {
                    if (!e || 0 == e.length)
                        return "";
                    const {upper: t, prefix: n, separator: r} = this.tagCtx.props;
                    return e.map((e => (t && (e = e.toUpperCase()),
                    n && (e = `${n}${e}`),
                    e))).join(r)
                },
                humanBytes: e => {
                    const t = ["Б", "КБ", "МБ", "ГБ"];
                    let n = 0;
                    for (; n < t.length - 1 && e >= 1024; )
                        e /= 1024,
                        n++;
                    return `${+e.toFixed(2)} ${t[n]}`
                }
                ,
                deliveryDateTxt: function(e, t) {
                    if (!e || "number" != typeof e)
                        return "";
                    let n;
                    const r = new Date(Date.now())
                      , o = new Date(r.getTime() + 60 * e * 60 * 1e3);
                    o.is1stJan() && (o.setDate(o.getDate() + 1),
                    e += 24);
                    const i = 24 - r.getHours()
                      , s = o.getHours();
                    return r.getDate() === o.getDate() && e < 24 ? n = s < 9 ? "Сегодня утром" : s < 23 ? t ? e < 5 ? "Сегодня за 2–4 часа" : $.pluralize(e, "Сегодня за {0} час", "Сегодня за {0} часа", "Сегодня за {0} часов") : $.pluralize(e, "За {0} час", "За {0} часа", "За {0} часов") : "Завтра утром" : e < i + 9 ? n = e < 5 ? "Завтра утром" : "Завтра" : e < 24 + i ? n = s < 23 ? "Завтра" : "Послезавтра" : e < 48 + i && s < 23 ? n = "Послезавтра" : (s >= 23 && (e += i),
                    n = $.views.converters.dateFromTimestamp(Date.now() + 60 * e * 60 * 1e3, "d MMMM")),
                    n
                },
                minutesToTime: function(e) {
                    return Math.floor(e / 60) + ":" + (e % 60).toString().padStart(2, "0")
                },
                fastDeliveryText: function(e, t, n) {
                    if (!t || !e || !n)
                        return;
                    const r = new Date
                      , o = 60 * r.getHours() + r.getMinutes()
                      , i = n[0]
                      , s = n[1]
                      , a = o + 60 * e
                      , l = t[0].start
                      , c = $.views.converters.minutesToTime(l);
                    if (o <= i)
                        return `Сегодня с ${c}`;
                    if (o >= i && o <= s) {
                        return t.some((e => a < e.start)) ? e < 5 ? "За 2–4 часа" : $.pluralize(e, "За {0} час", "За {0} часа", "За {0} часов") : `Завтра с ${c}`
                    }
                    return `Завтра с ${c}`
                },
                formatTimeStr: function(e) {
                    return e.replace(/^0(\d):/, "$1:")
                },
                dayNameFromDate: function(e, t=!1) {
                    if (!e)
                        return;
                    const n = new Date
                      , r = e instanceof Date ? e : new Date(e)
                      , o = n.daysBetween(r);
                    return 0 === o ? "Сегодня" : 1 === o ? "Завтра" : 2 === o && t ? "Послезавтра" : r.format("d MMMM")
                },
                catalogDeliveryDate: function(e) {
                    return `Доставка <span class="product-card__delivery-date">${$.views.converters.deliveryDateTxt(e)}</span>`
                },
                deliveryType: function() {
                    const {storeType: e} = this.tagCtx.props;
                    return `${4 & ~e ? "Доставка" : "Грузовая доставка"} ${8 & ~e ? "Wildberries" : "продавца"}`
                },
                formatString: function() {
                    let[e,t,n,r] = arguments;
                    if ("string" != typeof e)
                        throw new Error("Template must be a string");
                    return n && (e = e.replace(/\[(\d+)\]/gm, "{$1}")),
                    r && (t = $.views.converters.encode(t)),
                    String.format.apply(null, [e, t])
                },
                trim: function(e) {
                    return null == e ? void 0 : e.trim()
                },
                imgForPromoCategory: function(e=0, t=!1, n, r) {
                    const o = t ? "small/" : ""
                      , i = n ? `promo_custom/pack_${r}/` : "promo_v2/"
                      , s = e < 1e6 ? e : parseInt((e + "").slice(-6));
                    return wb.helpers.url.urlToExternalStatic(`/vol1/wbx-catalog/${i}${o}${s}.webp`)
                },
                fileName: function(e) {
                    var t, n;
                    const r = e.substring(e.lastIndexOf("/") + 1)
                      , o = null === (t = this.tagCtx) || void 0 === t || null === (n = t.props) || void 0 === n ? void 0 : n.mode;
                    return "name" == o ? r.substring(0, r.lastIndexOf(".")) || r : "extension" == o ? r.slice(1 + (Math.max(r.lastIndexOf("."), 0) || r.length)) || "" : r
                },
                convertToText: function(e) {
                    if (!Array.isArray(e) || 0 === e.length)
                        return "";
                    const t = {
                        text: "комментарий",
                        photo: "фото",
                        video: "видео"
                    }
                      , n = e.map((e => t[e.toLowerCase()])).filter(Boolean);
                    if (0 === n.length)
                        return "";
                    if (1 === n.length)
                        return $.localize(n[0]);
                    const r = n.pop()
                      , o = n.join(", ");
                    return $.localize(`${o} и&nbsp;${r}`)
                },
                toHttps: e => $.views.converters.url(null == e ? void 0 : e.replace(/^http:/i, "https:")),
                onlyDigits: e => null == e ? void 0 : e.replace(/[^\d\.]/g, ""),
                toWebp: function(e) {
                    var t, n;
                    return null !== (t = WbSpaModel.prototype) && void 0 !== t && null !== (n = t.$apiSupport) && void 0 !== n && n.webpImage ? "webp" : e
                },
                useWebp: function(e) {
                    var t, n;
                    return null !== (t = WbSpaModel.prototype) && void 0 !== t && null !== (n = t.$apiSupport) && void 0 !== n && n.webpImage ? null == e ? void 0 : e.replace(/^(.*\.)(jpg|jpeg)$/i, "$1webp") : e
                },
                toNumber: e => +e,
                fixHtml: e => e ? (new DOMParser).parseFromString(e, "text/html").body.innerHTML : ""
            }),
            $.views.tags({
                range: {
                    boundProps: ["start", "end"],
                    baseTag: "for",
                    render: function(e) {
                        var t = e
                          , n = this.tagCtx
                          , r = n.props.start || 0
                          , o = n.props.end
                          , i = n.params.props;
                        if (r || o)
                            if (n.args.length)
                                $.isArray(t) && (t = t.slice(r, o));
                            else {
                                t = [],
                                o = o || 0;
                                for (var s = r; s <= o; s++)
                                    t.push(s)
                            }
                        return arguments.length || i && (i.start || i.end) ? this.base(t) : this.base()
                    },
                    onArrayChange: function(e, t) {
                        this.refresh()
                    }
                },
                calendarV2: {
                    dataBoundOnly: !0,
                    onUpdate: !1,
                    bindTo: ["selected", "limitTo", "limitFrom"],
                    linkedCtxParam: ["selected", "limitTo", "limitFrom"],
                    format: "dd.MM.yyyy",
                    init: function(e) {
                        e.props.format && (this.format = e.props.format),
                        e.props.appendTo && (this.appendTo = e.props.appendTo)
                    },
                    onBind: function(e) {
                        const t = {
                            x: 0,
                            y: 1
                        };
                        e.props.offsetX && (t.x = e.props.offsetX),
                        this.datePicker = $(e.props.target).glDatePicker({
                            selectedDate: this.ctxPrm("selected") ? this.ctxPrm("selected") : e.props.limitTo,
                            customWidth: e.props.width,
                            zIndex: e.props.zIndex,
                            appendTo: this.appendTo,
                            overlay: "m" === wb.settings.displayMode,
                            useClick: !0,
                            calendarOffset: t,
                            onClick: (t, n, r, o) => {
                                this.ctxPrm("selected", r),
                                "function" == typeof e.props.onSelect && e.props.onSelect(r.format(this.format))
                            }
                        }).glDatePicker(!0)
                    },
                    onAfterLink: function(e, t, n, r, o) {
                        var i = {
                            from: e.props.defaultFrom ? e.props.defaultFrom : new Date(2001,1,1),
                            to: new Date
                        };
                        e.props.limitFrom && (i.from = e.props.limitFrom),
                        e.props.limitTo && (i.to = e.props.limitTo),
                        this.datePicker.options.selectableDateRange = [i];
                        for (var s = [], a = i.from.getFullYear(); a <= i.to.getFullYear(); a++)
                            s.push(a);
                        this.datePicker.options.selectableYears = s,
                        this.datePicker.render()
                    }
                },
                swiper: {
                    dataBoundOnly: !0,
                    mainElement: ".custom-slider",
                    boundProps: ["total", "needRefresh", "activeSlide"],
                    template: '\n                <div class="custom-slider{{if ~tag.showArrows}} {{: ~tag.sliderClass}}{{/if}}">\n                    <div class="custom-slider__list">\n                        {{include tmpl=#content/}}\n                    </div>\n                    {{if ~tag.showArrows}}\n                    <button type="button" aria-label="Назад" class="custom-slider__arrow custom-slider__arrow--prev" data-link="{on ~tag.scroll \'left\'}disabled{:~leftArrowDisabled}"></button>\n                    <button type="button" aria-label="Вперёд" class="custom-slider__arrow custom-slider__arrow--next" data-link="{on ~tag.scroll \'right\'}disabled{:~rightArrowDisabled}"></button>\n                    {{/if}}\n                </div>\n            ',
                    init: function() {
                        var e, t, n;
                        const r = this.tagCtx.props.slidesPerView;
                        this.slidesPerView = "auto" === r || "number" == typeof r ? r : 1,
                        this.showArrows = null !== (e = this.tagCtx.props.showArrows) && void 0 !== e && e,
                        this.sliderClass = null !== (t = this.tagCtx.props.sliderClass) && void 0 !== t && t,
                        this.slideSelector = null !== (n = this.tagCtx.props.slideSelector) && void 0 !== n ? n : ".custom-slider__item",
                        this.checkArrows = this.checkArrows.bind(this),
                        this.doOnScroll = WbSpaModel.prototype.$helper.throttle(this.doOnScroll.bind(this), 300),
                        this.scrollToSlide = this.scrollToSlide.bind(this)
                    },
                    onAfterLink: function() {
                        this.checkArrows();
                        const e = this.tagCtx.props.activeSlide;
                        void 0 !== e && this.scrollToSlide(e)
                    },
                    onBind: function(e) {
                        this.containerList = this.mainElem[0].querySelector(".custom-slider__list"),
                        this.containerList.addEventListener("scroll", this.doOnScroll)
                    },
                    onUpdate: function(e, t, n) {
                        return "propertyChange" === e.type && ("needRefresh" === t.path ? (this.containerList.scrollLeft = 0,
                        this.checkArrows()) : "activeSlide" === t.path && this.scrollToSlide(t.value)),
                        !1
                    },
                    scroll: function(e) {
                        const t = this.containerList.querySelector(this.slideSelector).clientWidth + parseInt(getComputedStyle(this.containerList).gap);
                        let n = this.slidesPerView;
                        if ("auto" === this.slidesPerView) {
                            const e = this.mainElem[0].getBoundingClientRect();
                            n = Math.floor(e.width / t)
                        }
                        const r = t * n
                          , o = Math.round(this.containerList.scrollLeft) + ("left" === e ? -r : r);
                        this.containerList.scrollLeft = Math.round(o / t) * t
                    },
                    scrollToSlide: function(e) {
                        const t = e * (this.containerList.querySelector(this.slideSelector).clientWidth + parseInt(getComputedStyle(this.containerList).gap));
                        this.containerList.scrollLeft = t
                    },
                    doOnScroll: async function(e) {
                        this.checkArrows()
                    },
                    checkArrows: async function() {
                        window.requestAnimationFrame(( () => {
                            const e = this.containerList.querySelectorAll(this.slideSelector);
                            if (!e.length > 0)
                                this.ctxPrm("leftArrowDisabled", !0),
                                this.ctxPrm("rightArrowDisabled", !0);
                            else {
                                const t = this.mainElem[0].getBoundingClientRect()
                                  , n = e[e.length - 1].getBoundingClientRect();
                                this.ctxPrm("leftArrowDisabled", this.containerList.scrollLeft <= 0),
                                this.ctxPrm("rightArrowDisabled", t.right + 5 >= n.right)
                            }
                        }
                        ))
                    }
                },
                btnAdvertising: {
                    template: "\n            {{if ordBannerMark}}<button type=\"button\" class=\"btn-advertising\" title=\"\" data-link=\"{on ~tag.onClickBtn}{tooltip classes='tooltip-advertising j-tooltip-advertising tooltip--dark' pos='alignright bottom' trigger='hover' distance=0 tmplName='advertisingTooltipTmpl' tmplData=ordBannerMark}\"><span>Реклама</span></button>{{/if}}\n        ",
                    onClickBtn: function(e) {
                        e.preventDefault()
                    }
                },
                infiniteScroll: {
                    mainElement: "div",
                    template: '<div class="scroll-loader"></div>',
                    onAfterLink() {
                        this.scrollObserver = new IntersectionObserver(( (e, t) => {
                            e.forEach((e => {
                                e.isIntersecting && this.tagCtx.props.callback()
                            }
                            ))
                        }
                        ),{
                            threshold: 0,
                            rootMargin: "0px 0px 50% 0px"
                        }),
                        this.scrollObserver.observe(this.mainElem[0])
                    },
                    onDispose() {
                        this.scrollObserver.disconnect()
                    }
                },
                onSwipe: {
                    init: function(e) {
                        var t;
                        this.threshold = 10,
                        1 == (null === (t = e.args) || void 0 === t ? void 0 : t.length) && "function" == typeof e.args[0] && (this.onSwiped = e.args[0]),
                        this.onTouchStart = this.onTouchStart.bind(this),
                        this.onTouchMove = this.onTouchMove.bind(this),
                        this.onTouchEnd = this.onTouchEnd.bind(this)
                    },
                    onBind: function() {
                        this.onSwiped && (this.linkCtx.elem.addEventListener("touchstart", this.onTouchStart, !1),
                        this.linkCtx.elem.addEventListener("touchmove", this.onTouchMove, !1),
                        this.linkCtx.elem.addEventListener("touchend", this.onTouchEnd, !1))
                    },
                    onUnbind: function() {
                        this.linkCtx.elem.removeEventListener("touchstart", this.onTouchStart, !1),
                        this.linkCtx.elem.removeEventListener("touchmove", this.onTouchMove, !1),
                        this.linkCtx.elem.removeEventListener("touchend", this.onTouchEnd, !1)
                    },
                    onTouchStart: function(e) {
                        const t = e.changedTouches[0];
                        this.startX = t.pageX,
                        this.startY = t.pageY,
                        e.cancelable && e.preventDefault()
                    },
                    onTouchMove: function(e) {
                        const t = e.changedTouches[0];
                        this.deltaX = t.pageX - this.startX,
                        this.deltaY = t.pageY - this.startY,
                        e.cancelable && e.preventDefault()
                    },
                    onTouchEnd: function(e) {
                        const t = Math.atan2(-this.deltaY, -this.deltaX)
                          , n = 3 * Math.PI / 4
                          , r = Math.PI / 4;
                        let o;
                        o = r <= t && t <= n ? "up" : -n <= t && t <= -r ? "down" : -n < t && t < n ? "left" : "right",
                        (Math.abs(this.deltaX) >= this.threshold || Math.abs(this.deltaY) >= this.threshold) && this.onSwiped(o),
                        e.cancelable && e.preventDefault()
                    }
                }
            })
        }
        ,
        84836: () => {
            "use strict";
            const e = "tail_object_data"
              , t = ["SNT", "SNH", "SNS", "SST", "SHT"]
              , n = ["SNS", "ANS", "SNH", "ANH", "SHT"]
              , r = ["SAB", "ANH", "ANS", "AST", "ATR"]
              , o = ["MBB", "MBM", "MBS", "BBB", "BBA", "CBB", "CBA", "CBU", "CBS"];
            const i = function() {
                function i() {}
                var s = i.prototype;
                return s.getTermsFromTailObject = function(e, i) {
                    const s = this.getTailObjectData()
                      , a = {
                        filters: s.filters,
                        filters_entry_point: s.filters_entry_point
                    }
                      , l = {
                        bid: s.bid,
                        bid_index: s.bid_index
                    }
                      , c = {
                        category: s.category,
                        id_category: s.id_category
                    };
                    if ("SCL" === e) {
                        const e = this.getTailObjectData();
                        return {
                            catalog_type: e.catalog_type,
                            catalog_value: e.catalog_value,
                            query_id: e.query_id,
                            rmi: e.rmi
                        }
                    }
                    if ("SCM" === e) {
                        const e = this.getTailObjectData();
                        return {
                            catalog_type: e.catalog_type,
                            catalog_value: e.catalog_value,
                            query_id: e.query_id,
                            rmi: e.rmi
                        }
                    }
                    function u() {
                        return {
                            ...a,
                            ...c
                        }
                    }
                    if (o.includes(e))
                        return {
                            ...l,
                            ...a
                        };
                    if (t.includes(e) || r.includes(e)) {
                        const t = {
                            catalog_type: s.catalog_type,
                            catalog_value: s.catalog_value,
                            normquery: s.normquery,
                            query_id: s.query_id,
                            rmi: s.rmi,
                            search_text: s.search_text,
                            ...a
                        };
                        var d;
                        if (n.includes(e))
                            t.text_typed = null !== (d = s.text_typed) && void 0 !== d ? d : "";
                        return t
                    }
                    return "STB" === e ? {
                        filters: s.filters,
                        filters_entry_point: s.filters_entry_point,
                        brand: s.brand,
                        query_id: s.query_id,
                        text_typed: null !== (p = s.text_typed) && void 0 !== p ? p : ""
                    } : "SCF" === e ? {
                        search_text: s.search_text
                    } : "SPA" === e ? {
                        query_id: s.query_id
                    } : "MAB" === e || "MCS" === e ? {
                        catalog_type: s.catalog_type,
                        catalog_value: s.catalog_value,
                        preset_type: s.preset_type,
                        recid: s.recid,
                        ...i
                    } : "MBL" === e ? {
                        bid: s.bid,
                        ...a
                    } : "MBT" === e ? {
                        ...l,
                        ...a,
                        tv_block: 1
                    } : ["BCR", "IBN", "IBC"].includes(e) ? a : "BCA" === e ? u() : "CCT" === e || "CCR" === e ? {} : ["CCC", "CTC", "CAB"].includes(e) ? u() : "ICC" === e ? a : "IAB" === e ? {
                        ...a,
                        banner_name: s.banner_name
                    } : ["ICO", "ICV", "ICR", "ICS", "ISP"].includes(e) ? {
                        parent_item_id: s.parent_item_id
                    } : "ISC" === e ? {
                        ...a,
                        parent_item_id: s.parent_item_id
                    } : "IPT" === e ? {
                        parent_item_id: s.parent_item_id
                    } : ["CCB", "CCM", "CPF"].includes(e) ? {
                        item_ids: s.item_ids
                    } : "CRV" === e ? {
                        empty_cart: s.empty_cart
                    } : "CSI" === e || "TCM" === e ? {
                        parent_item_id: s.parent_item_id
                    } : ["CSD", "CAD", "WLC", "WLA"].includes(e) ? {
                        discount_name: "Скидка WB клуба",
                        ...a,
                        ...c
                    } : ["PBC", "PBB"].includes(e) ? l : "PCB" === e ? c : ["PSA", "PBA", "PAP", "AMB", "PPA", "PCS", "DLV", "DCV", "DRE"].includes(e) ? {} : "FBR" === e ? a : ["AAA", "ADI"].includes(e) ? {
                        page_type: s.page_type,
                        page_info: s.page_info
                    } : ["LLI", "AIL"].includes(e) ? {
                        special_project: s.special_project
                    } : null;
                    var p
                }
                ,
                s.getTailObjectData = function() {
                    var t;
                    return null !== (t = sessionStorage.getObject(e)) && void 0 !== t ? t : {}
                }
                ,
                s.updateTailObjectDataFromHtml = function(e) {
                    if ([...o, "MBL", "MBT"].includes(e.l)) {
                        const t = {
                            bid: e.t,
                            bid_index: e.t2
                        };
                        this.updateTailObjectData(t)
                    } else if ("IAB" === e.l) {
                        const t = {
                            banner_name: e.t
                        };
                        this.updateTailObjectData(t)
                    } else if (["ICO", "ICV", "ICR", "ICS", "ISC", "ISP"].includes(e.l)) {
                        const t = {
                            parent_item_id: e.t
                        };
                        this.updateTailObjectData(t)
                    }
                }
                ,
                s.updateTailObjectData = function(e) {
                    const t = this.getTailObjectData();
                    e.terms && (e.terms = {
                        ...t.terms,
                        ...e.terms
                    });
                    const n = {
                        ...t,
                        ...e
                    };
                    this._saveTailObjectData(n)
                }
                ,
                s._saveTailObjectData = function(t) {
                    try {
                        if (!t)
                            return;
                        sessionStorage.putObject(e, t)
                    } catch (e) {}
                }
                ,
                i
            }();
            wb.namespace("analitics", ( () => {
                const e = "wbAnalitic"
                  , t = "__wba_s"
                  , n = "lats_search_type"
                  , r = "search_suggest"
                  , o = "purchase_checkout"
                  , s = "stat_helper"
                  , a = "query_id_search"
                  , l = {
                    l: "AAA",
                    iid: 1
                }
                  , c = 3e5
                  , u = new i;
                let d = {
                    moveFrom: ""
                }
                  , p = "";
                if (null == sessionStorage.getItem(e)) {
                    const t = JSON.parse(localStorage.getItem(e));
                    (null == t ? void 0 : t.expired) > Date.now() - c && sessionStorage.setItem(e, JSON.stringify(t.payload))
                }
                const h = JSON.parse(localStorage.getItem(s));
                function m() {
                    return d
                }
                async function f() {
                    return WbSpaModel.prototype.$services.splitterService.getSplitInfo()
                }
                async function y(e) {
                    return WbSpaModel.prototype.$services.splitterService.getSplitInfoV2(e)
                }
                function g(e) {
                    u.updateTailObjectData(e)
                }
                function v(e, t=null, n="", r=!1) {
                    e || (e = "");
                    const o = ["targetUrl", "iid", "l", "lw", "s", "t", "t1", "t2", "t3", "t4", "logs"]
                      , i = (e, r) => {
                        var o;
                        return null !== (o = null != e ? e : null == t ? void 0 : t[r]) && void 0 !== o ? o : n
                    }
                      , s = {}
                      , a = e.split("|");
                    for (let e = r ? 2 : 0; e < o.length; e++) {
                        var l;
                        let t = null !== (l = a[e]) && void 0 !== l ? l : null
                          , n = o[e];
                        if (!n)
                            return;
                        s[n] = i(t, n)
                    }
                    return s
                }
                return (null == h ? void 0 : h.expired) > Date.now() - c && (d = h.info),
                {
                    getTermsFromTailObject: function(e) {
                        return u.getTermsFromTailObject(e)
                    },
                    updateTailObjectData: g,
                    getTailObjectData: function() {
                        return u.getTailObjectData()
                    },
                    getTermByTermName: function(e) {
                        const t = wb.cookieHelper.getCookie("_wbauid")
                          , n = (new Date).format("yyyyMMddHHmmss", !0)
                          , r = {
                            qid: "qid",
                            recid: "recid"
                        };
                        return r[e] ? `${r[e]}${t}${n}` : void 0
                    },
                    analiticsInfoToListName: function(e={}, t={}) {
                        const n = {
                            ...e,
                            ...t
                        }
                          , {l: r="", lw: o="", s: i="", t: s="", t1: a="", t2: l="", t3: c="", t4: u="", t5: d=""} = n;
                        return `${r}|${o}|${i}|${s}|${a}|${l}|${c}|${u}|${d}`
                    },
                    getAnaliticsInfoFromTargetUrl: v,
                    getTailObjectFromAnalyticsInfo: function(e, t, n) {
                        return function({l: e="", lw: t="", s: n="", t: r="", t1: o="", t2: i="", t3: s="", t4: a="", t5: l="", t6: c="", t7: u=""}={}, d=null) {
                            const p = {
                                loc: e,
                                loc_way: t,
                                sort: n
                            };
                            if (d)
                                return p.terms = d,
                                p;
                            const h = l
                              , m = u
                              , f = i
                              , y = {
                                catalog_type: i,
                                catalog_value: o,
                                normquery: "",
                                rmi: ""
                            }
                              , g = {
                                catalog_type: "",
                                catalog_value: "",
                                normquery: "",
                                rmi: ""
                            }
                              , v = {
                                filters: "",
                                filters_entry_point: ""
                            }
                              , b = {}
                              , w = {
                                category: r,
                                id_category: o
                            }
                              , S = {
                                bid: r,
                                bid_index: i
                            }
                              , _ = {
                                supplier_type: o
                            };
                            return ["SVR", "STA", "SNT", "SHS", "SNH", "STH", "SNS", "SHT", "SCF", "STC", "STB"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...y,
                                    ...v,
                                    search_text: r,
                                    query_id: h
                                }
                            } : ["SST"].includes(e) ? {
                                ...p,
                                terms: {
                                    search_text: r,
                                    catalog_value: o,
                                    catalog_type: i
                                }
                            } : ["SAB", "AVR", "ANH", "ANS", "AST", "AHT", "ATR"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...b,
                                    search_text: s,
                                    query_id: h
                                }
                            } : ["ATC"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...b,
                                    id_category: s,
                                    query_id: h
                                }
                            } : ["ATB"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...b,
                                    brand: s,
                                    query_id: h,
                                    filtersT7: m
                                }
                            } : "STB" === e ? {
                                ...p,
                                terms: {
                                    brand: r,
                                    catalog_value: o,
                                    catalog_type: i,
                                    query_id: h
                                }
                            } : "STC" === e ? {
                                ...p,
                                terms: {
                                    ...y,
                                    ...v,
                                    category: r,
                                    query_id: h
                                }
                            } : "STS" === e ? {
                                ...p,
                                terms: {
                                    ...y,
                                    ...v,
                                    supplier_name: r,
                                    supplier_id: "",
                                    query_id: h
                                }
                            } : ["STR", "STG"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...v,
                                    ...g,
                                    tag_text: r,
                                    tag_index: o,
                                    supplier_id: "",
                                    query_id: h
                                }
                            } : ["SBA", "SIS", "SCM", "SCN", "SPH", "STM", "SCR", "SPA"].includes(e) ? {
                                ...p,
                                terms: {
                                    query_id: h
                                }
                            } : ["MBB", "MBH", "MBM", "MBS", "MBV"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...S,
                                    ...v
                                }
                            } : "MBT" === e ? {
                                ...p,
                                terms: {
                                    ...S,
                                    ...v,
                                    tv_block: o
                                }
                            } : ["MBG", "MBF"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...S
                                }
                            } : ["MAB", "AMB"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...b
                                }
                            } : ["MCS", "MCB", "MCP", "MCV", "MCO", "MPF", "MCM", "MCN", "MSA"].includes(e) ? {
                                ...p
                            } : "MCD" === e || "MAD" === e ? {
                                ...p,
                                terms: {
                                    promo_name: r,
                                    promo_id: o,
                                    type_of_block: l
                                }
                            } : ["BBB", "BBA", "BBD"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...v,
                                    ...S
                                }
                            } : "BCA" === e ? {
                                ...p,
                                terms: {
                                    filters: f,
                                    ...w
                                }
                            } : ["BPA"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...b,
                                    brand: s,
                                    filters: m
                                }
                            } : ["BCR", "BCB", "BCP"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...v
                                }
                            } : ["CCC", "CTC"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...w,
                                    filters: f,
                                    filters_entry_point: ""
                                }
                            } : "CAB" === e ? {
                                ...p,
                                terms: {
                                    ...v,
                                    ...b,
                                    id_category: s
                                }
                            } : "CAA" === e ? {
                                ...p,
                                terms: {
                                    ...v,
                                    ...b,
                                    search_text: s,
                                    query_id: h,
                                    filters: m
                                }
                            } : ["CBB", "CBA", "CBS", "CBU"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...S,
                                    ...v
                                }
                            } : ["CCA", "CCR", "CCT", "CAR", "CBP", "CPA"].includes(e) ? {
                                ...p
                            } : "CAR" === e ? {
                                ...p,
                                terms: {
                                    search_text: r,
                                    catalog_value: o,
                                    catalog_type: i,
                                    query_id: h,
                                    filters: m
                                }
                            } : "SPL" === e ? {
                                ...p,
                                terms: {
                                    ..._
                                }
                            } : ["SBB", "SBT", "SBC"].includes(e) ? {
                                ...p,
                                terms: {
                                    ..._,
                                    ...S
                                }
                            } : "SCA" === e ? {
                                ...p,
                                terms: {
                                    ..._,
                                    category: r
                                }
                            } : "SBR" === e ? {
                                ...p,
                                terms: {
                                    ..._,
                                    brand_index: i
                                }
                            } : ["SCB", "SCO", "SCP"].includes(e) ? {
                                ...p,
                                terms: {
                                    ..._
                                }
                            } : ["ABP", "ABC", "ABN"].includes(e) ? {
                                ...p,
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString(),
                                    ...b,
                                    brand: s,
                                    filters: m
                                }
                            } : ["ICO", "ICB", "ICF", "ICV", "ICD", "ICR", "ICE", "ICS", "IBS", "ICL", "ICI", "ISC", "IAD"].includes(e) ? {
                                ...p,
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString(),
                                    ...v
                                }
                            } : "ICA" === e ? {
                                ...p,
                                terms: {
                                    ...b,
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }
                            } : "IAB" === e ? {
                                ...p,
                                terms: {
                                    ...S,
                                    ...v
                                }
                            } : ["IBN", "IBP", "IBC", "ICC", "IRC", "ISP", "ITA"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...v
                                }
                            } : ["CCM", "CPF", "CRA"].includes(e) ? {
                                ...p,
                                terms: {
                                    item_ids: r
                                }
                            } : "CSI" === e ? {
                                ...p,
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }
                            } : "CRV" === e ? {
                                ...p,
                                terms: {
                                    empty_cart: r
                                }
                            } : ["CCS", "CSA"].includes(e) ? {
                                ...p,
                                terms: {}
                            } : ["CRT", "CER", "CEB"].includes(e) ? {
                                ...p
                            } : "CCB" === e ? {
                                ...p,
                                terms: {
                                    item_ids: r,
                                    parent_item_id: null == o ? void 0 : o.toString(),
                                    subject_id: i,
                                    subject_parent_id: s,
                                    carousel_type: a
                                }
                            } : ["DLV", "DCR", "DCV", "DRC", "DRE"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...v
                                }
                            } : "TCB" === e ? {
                                ...p,
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }
                            } : "TCM" === e || ["FCR", "FCS", "FRP", "FCV"].includes(e) || ["VRW", "VCV"].includes(e) || ["AAA", "AAB", "AAC", "AAS"].includes(e) || ["LCS", "LCR", "WTL"].includes(e) || ["WSH", "WCA", "WCV", "WCS", "WCR", "WAB"].includes(e) || "RWA" === e || ["NCV", "NCB", "NCM", "NCR"].includes(e) || "NIA" === e || ["PRC", "PCV"].includes(e) || "PPM" === e ? {
                                ...p
                            } : ["FBR", "FBV"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...v
                                }
                            } : "FBA" === e ? {
                                ...p,
                                terms: {
                                    ...b,
                                    brand: s,
                                    filters: m
                                }
                            } : "LBA" === e ? {
                                ...p,
                                terms: {
                                    ...v
                                }
                            } : "PCA" === e ? {
                                ...p,
                                terms: {
                                    ...v,
                                    type: r,
                                    name: o,
                                    link: i
                                }
                            } : "ITO" === e ? {
                                ...p,
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString(),
                                    type_of_block: o
                                }
                            } : "LSP" === e ? {
                                ...p,
                                sort: "default",
                                terms: {
                                    project_name: r
                                }
                            } : ["PBC", "PBB"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...S
                                }
                            } : ["PSA", "PBA", "PPA"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...b,
                                    bid: l,
                                    bid_index: c
                                }
                            } : "PAP" === e ? {
                                ...p,
                                terms: {
                                    ...b,
                                    category: l,
                                    id_category: c
                                }
                            } : "PCB" === e ? {
                                ...p,
                                terms: {
                                    ...w
                                }
                            } : "PSP" === e ? {
                                ...p,
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }
                            } : "PCS" === e || ["WCI", "WCD"].includes(e) ? {
                                ...p
                            } : ["TBV", "TBN", "TBC", "TBA", "TBP", "TBT"].includes(e) ? {
                                ...p,
                                terms: {
                                    ...S
                                }
                            } : {}
                        }(e, t = t || u.getTermsFromTailObject(null == e ? void 0 : e.l, n))
                    },
                    tryGetAnaliticsCodeForSearchAdvert: function(e) {
                        switch (e) {
                        case "SNH":
                            return "ANH";
                        case "SNS":
                            return "ANS";
                        case "SHT":
                            return "ATR";
                        case "STC":
                            return "ATC";
                        case "SNT":
                            return "SAB";
                        case "SST":
                            return "AST";
                        case "AAA":
                            return "ADI";
                        case "MBB":
                            return "AMB";
                        case "PBC":
                            return "PBA";
                        case "PBB":
                            return "PPA";
                        case "PCB":
                            return "PAP";
                        case "CSD":
                            return "CAD";
                        case "WLC":
                            return "WLA";
                        case "WCI":
                            return "WCD";
                        default:
                            return null
                        }
                    },
                    tryGetAdvertCode: function(e) {
                        switch (e) {
                        case "ANH":
                            return "SNH";
                        case "ANS":
                            return "SNS";
                        case "ATR":
                            return "SHT";
                        case "ATC":
                            return "STC";
                        case "SAB":
                            return "SNT";
                        case "AST":
                            return "SST";
                        default:
                            return null
                        }
                    },
                    getRecomendationsSplitterHeaders: async function() {
                        return await async function(e) {
                            var t, n;
                            const r = await y(e)
                              , o = WbSpaModel.prototype.$user.getUserInfo()
                              , i = (null !== (t = null == o ? void 0 : o.uid) && void 0 !== t ? t : 0).toString();
                            let s = "";
                            null != r && r.length && r.forEach((e => {
                                s += `${e.key}=${e.value};`
                            }
                            ));
                            const a = new Headers;
                            return a.set("UserID", i),
                            a.set("Test-Properties", (null === (n = s) || void 0 === n ? void 0 : n.substring(0, s.length - 1)) || ""),
                            a
                        }("rec")
                    },
                    checkDataInSplitterServiceV2: async function(e, t, n) {
                        let r = !1;
                        if (e) {
                            const o = await y(e);
                            for (let e = 0; e < o.length; e++)
                                o[e].key === t && o[e].value === n && (r = !0,
                                e = o.length)
                        }
                        return r
                    },
                    getSplitInfo: f,
                    getSplitInfoV2: y,
                    appendSplitInfoV2: async function(e, t) {
                        return WbSpaModel.prototype.$services.splitterService.appendSplitInfoV2(e, t)
                    },
                    getStatInfo: m,
                    updateStatInfo: function(e) {
                        const t = m();
                        t.moveFrom = p || "",
                        p = "",
                        function(e, t) {
                            try {
                                var n;
                                null === (n = localStorage) || void 0 === n || n.putObject(s, {
                                    info: e,
                                    expired: Date.now() + c
                                }),
                                t || (d = e)
                            } catch (e) {
                                console.warn("Saving analitics state has failed"),
                                console.error(e.message)
                            }
                        }(t, e)
                    },
                    sendWbaEcomStat: function(e, t, n, r) {
                        try {
                            var o, i;
                            if (!window.wba || (!r && !(null != t && t.length)) > 0)
                                return;
                            if ((n = null !== (o = n) && void 0 !== o ? o : {}).hasOwnProperty("cookies_alert") || (n.cookies_alert = wb.spa.getMainLayout().cookiePolicy.check() ? 1 : 0),
                            n.hasOwnProperty("country") || (n.country = wb.settings.currentLocale),
                            !n.hasOwnProperty("cluster")) {
                                const e = WbSpaModel.prototype.$user.getUserClusters();
                                e && (n.cluster = e)
                            }
                            n.address = null !== (i = this.currentAddress) && void 0 !== i ? i : "not_selected";
                            const s = (new Date).format("yyyy-MM-dd HH:mm:ss");
                            t.length && !r ? t.forEach((e => {
                                var t, r, o, i, a, l, c, u, d, p, h, m, f;
                                let y = {
                                    utcTime: s,
                                    id: null === (t = e.id) || void 0 === t ? void 0 : t.toString(),
                                    nm: Number(e.id),
                                    chrt: Number(e.chrt),
                                    rid: null === (r = e.rid) || void 0 === r ? void 0 : r.toString(),
                                    name: e.name,
                                    brand: e.brand,
                                    price: parseInt(e.price),
                                    inListIndex: parseInt(e.inListIndex) || 1,
                                    listName: e.listName,
                                    variant: null !== (o = e.variant) && void 0 !== o ? o : "",
                                    quantity: 1,
                                    affiliation: `${null !== (i = e.affiliation) && void 0 !== i ? i : ""}|${null !== (a = e.storeId) && void 0 !== a ? a : ""}`,
                                    category: null !== (l = e.category) && void 0 !== l ? l : "regular",
                                    category2: e.subjectId > 0 ? e.subjectId.toString() : "",
                                    category3: e.subjectParentId > 0 ? e.subjectParentId.toString() : "",
                                    coupon: `${null !== (c = e.feedbacksCount) && void 0 !== c ? c : ""}|${null !== (u = e.rating) && void 0 !== u ? u : ""}`,
                                    logs: null !== (d = e.logs) && void 0 !== d ? d : "",
                                    tailObject: e.tailObject
                                };
                                if ("cart_del" === (null === (p = n) || void 0 === p ? void 0 : p.type_remove) || "after_check_data" === (null === (h = n) || void 0 === h ? void 0 : h.type_remove) || "card" === (null === (m = n) || void 0 === m ? void 0 : m.type_add))
                                    return y.quantity = e.quantity,
                                    void window.wba("ec:addProduct", y);
                                const g = parseInt(e.quantity) || 1;
                                window.wba("ec:setCurrency", WbSpaModel.prototype.$user.getCurrency());
                                const v = !!e.rid && g > 1 && (null === (f = y.rid) || void 0 === f ? void 0 : f.split(",")) || [];
                                for (let e = 0; e < g; e++)
                                    (null == v ? void 0 : v.length) > e && (y = Object.assign({}, y),
                                    y.rid = v[e]),
                                    window.wba("ec:addProduct", y)
                            }
                            )) : window.wba("ec:setCurrency", WbSpaModel.prototype.$user.getCurrency()),
                            window.wba("ec:setAction", e),
                            window.wba("ec:send", n)
                        } catch (e) {
                            console.log("wba exception", e)
                        }
                    },
                    savePurchaseCheckout: function(e) {
                        sessionStorage.setItem(o, e)
                    },
                    getPurchaseCheckout: function() {
                        var e;
                        return null !== (e = sessionStorage.getItem(o)) && void 0 !== e ? e : "not_found"
                    },
                    sendCarouselWbaEvent: function(e, t, n, r, o, i) {
                        "Carousel_All" === e && (p = "carousel");
                        let s = {
                            location: t = t || this.getState().l,
                            index: null == n ? void 0 : n.toString(),
                            item_id: null == r ? void 0 : r.toString(),
                            name: o
                        };
                        i && (s = Object.assign(s, i)),
                        this.sendEvent(e, s)
                    },
                    sendEvent: function(e, t={}) {
                        var n;
                        if (!window.wba)
                            return;
                        t.country = wb.settings.currentLocale;
                        const r = WbSpaModel.prototype.$user.getUserClusters();
                        r && (t.cluster = r),
                        t.address = null !== (n = this.currentAddress) && void 0 !== n ? n : "not_selected",
                        "Header_T" === e && (t.type = "d" === wb.settings.displayMode ? "desktop" : "mobile"),
                        window.wba(e, t)
                    },
                    sendAddressSelection: function({source: e, deliveryType: t, addressId: n, address: r, isChanged: o}) {
                        const i = o ? "DLV_Address_Add_Ok" : "DLV_Address_Slt"
                          , s = {
                            location: e
                        };
                        "courier" === t ? (s.type = "CRR",
                        s.address_crr = r) : (s.type = "PUP",
                        s.pup_id = n.toString()),
                        this.sendEvent(i, s)
                    },
                    sendBannersWbaEvent: function(e, t, n, r, o="0", i, s, a=null) {
                        n = n || this.getState().l,
                        "Banner_T" === e && (p = "banner");
                        const l = {
                            name: null != t ? t : "",
                            location: n,
                            link: r,
                            index: (o = parseInt(o) + 1).toString(),
                            id: i,
                            promo: s ? "yes" : "no"
                        };
                        "MBT" === n && (l.tv_block = 1),
                        this.sendEvent(e, l),
                        a && this.sendTrackingPixel(a)
                    },
                    sendSessionStartEvent: function() {
                        const e = localStorage.getItem(t)
                          , n = Date.now();
                        localStorage.setItem(t, (n + 18e5).toString()),
                        e && e > n || this.sendEvent("session_start")
                    },
                    sendEventTmpl(e, ...t) {
                        if (!window.wba)
                            return;
                        const n = t.slice(0, -2)
                          , r = {};
                        if (n && n.length % 2 == 0)
                            for (let e = 0; e < n.length; e += 2)
                                r[n[e]] = n[e + 1];
                        this.sendEvent(e, r)
                    },
                    proceedAndSave(e, t, n, r, o, i, s, a, l) {
                        if ("string" != typeof e)
                            return;
                        "string" != typeof t && "number" != typeof t && (t = null),
                        "string" != typeof n && "number" != typeof n && (n = null),
                        "string" != typeof r && "number" != typeof r && (r = null),
                        "string" != typeof o && "number" != typeof o && (o = null),
                        "string" != typeof i && "number" != typeof i && (i = null),
                        "string" != typeof s && "number" != typeof s && (s = null),
                        "string" != typeof a && "number" != typeof a && (a = null),
                        "string" != typeof l && (l = null);
                        const c = {
                            l: e
                        };
                        let d = parseInt(t);
                        null == t || isNaN(d) || (c.iid = Math.max(1, d)),
                        null != n && (c.opt = n),
                        null != r && (c.t = r),
                        null != o && (c.t1 = o),
                        null != i && (c.t2 = i),
                        null != s && (c.t3 = s),
                        null != a && (c.t4 = a),
                        null != l && (c.logs = l),
                        u.updateTailObjectDataFromHtml(c),
                        this.saveState(c)
                    },
                    updateAnalyticsFromQuery() {
                        const e = new URL(window.location.href);
                        if (document.referrer.indexOf("guru.wildberries.ru") > 0 && e.searchParams.has("externalSource") && e.searchParams.has("analyticsCode"))
                            this.saveState(e.searchParams.get("analyticsCode"), !1, !0);
                        else if (e.searchParams.has("listName")) {
                            const t = v(`||${e.searchParams.get("listName")}`);
                            this.saveState(t),
                            ["LLI", "AIL"].includes(t.l) && g({
                                special_project: t.t
                            })
                        } else
                            e.searchParams.has("analiticsCode") && this.saveState({
                                l: e.searchParams.get("analiticsCode")
                            }, !0)
                    },
                    saveState(t, n=!1, r=!1) {
                        try {
                            "string" == typeof t && (t = v(`||${t}`));
                            const o = JSON.stringify({
                                payload: t,
                                expired: Date.now() + c
                            });
                            r || (t.s = function(e) {
                                var t, n;
                                const r = null === (t = function(e) {
                                    let t = document.cookie.match(new RegExp("(?:^|; )" + e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, "\\$1") + "=([^;]*)"));
                                    return t ? decodeURIComponent(t[1]) : void 0
                                }("__catalogOptions")) || void 0 === t || null === (n = t.split("&").find((e => {
                                    const [t] = e.trim().split(":");
                                    return "Sort" === t
                                }
                                ))) || void 0 === n ? void 0 : n.split(":")
                                  , o = (null == r ? void 0 : r.length) > 0 ? r[1] : "popular";
                                return "DRE" === e.l ? "" : o.toLowerCase()
                            }(t));
                            const i = JSON.stringify(t);
                            sessionStorage.setItem(e, i),
                            n || localStorage.setItem(e, o)
                        } catch (e) {
                            console.warn("Saving analitics state has failed"),
                            console.error(e.message)
                        }
                    },
                    updateState(e, t) {
                        const n = this.getState(!1);
                        let r = {
                            ...n,
                            ...e
                        };
                        !e.extraTerms && t && t[n.l] && (r = {
                            ...r,
                            ...t[n.l]
                        }),
                        this.saveState(r)
                    },
                    getState(t=!0) {
                        var n;
                        let r = null !== (n = sessionStorage.getObject(e)) && void 0 !== n ? n : l;
                        return t && r.extraL && (r.l = r.extraL,
                        r.extraTerms && (r = {
                            ...r,
                            ...r.extraTerms
                        })),
                        this._validateAndFix(r)
                    },
                    saveLastSearchAnaliticsData(e, t, r) {
                        sessionStorage.setItem(n, `${e}&${t}&${r}`)
                    },
                    saveLastSearchAnalyticsDataForSuggest(e) {
                        sessionStorage.setItem(r, e)
                    },
                    saveQueryIdForSearch(e) {
                        sessionStorage.setItem(a, e)
                    },
                    retrieveQueryIdForSearch() {
                        const e = sessionStorage.getItem(a);
                        if (e)
                            return e;
                        {
                            const e = this.getTermByTermName("qid");
                            return this.saveQueryIdForSearch(e),
                            e
                        }
                    },
                    getLastSearchAnaliticsData() {
                        var e;
                        return null !== (e = sessionStorage.getItem(n)) && void 0 !== e ? e : ""
                    },
                    getLastSearchAnalyticsDataForSuggest() {
                        var e;
                        return null !== (e = sessionStorage.getItem(r)) && void 0 !== e ? e : ""
                    },
                    _validateAndFix(e) {
                        return (null == e.iid || isNaN(e.iid) || e.iid < 1) && (e.iid = 1),
                        e.t = this._escape(e.t),
                        e.t1 = this._escape(e.t1),
                        e.t2 = this._escape(e.t2),
                        e
                    },
                    _escape: e => e ? "string" != typeof e ? e : e.replace(/'/g, " ") : "",
                    async isAbTest133Approved() {
                        const {splitId: e, title: t} = await f();
                        return "133" === e && "test_1" === t
                    },
                    async isAbTest155Approved() {
                        const {splitId: e, title: t} = await f();
                        return "155" === e && "test_1" === t
                    },
                    sendUserEvent(e, t) {
                        this.sendEvent("user_id", {
                            clientId: e,
                            account_id: t
                        })
                    },
                    setCurrentAddress(e, t) {
                        this.currentAddress = `${"courier" === e ? "CRR" : ""}${t}`
                    },
                    saveLastViewedNm(e) {
                        sessionStorage.putObject("LAST_VIEWED_NM", e)
                    },
                    getLastViewedNm: () => sessionStorage.getObject("LAST_VIEWED_NM"),
                    updateAnalyticsSource(e) {
                        this.updateState({
                            source: e
                        })
                    },
                    sendTrackingPixel(e) {
                        document.createElement("img").src = e
                    }
                }
            }
            )())
        }
        ,
        54797: () => {
            wb.xnm = function() {
                const e = [7031, 7032, 3382, 3392, 8332, 5020, 8411, 7018, 8251, 6217, 7019, 6296, 6304, 6302, 5783, 5519, 5948, 5814, 5784, 5789, 5813, 5553, 7015, 5779, 5780, 5292, 5293, 5294, 5297, 5478, 8588, 5132, 5129, 5150, 5121, 5126, 8590, 5361, 5127, 5128, 5158, 5193, 5194, 5159, 5019, 5186, 5021, 5023, 5119, 5122, 5125, 5156, 5065, 5050, 5084, 5025, 5037, 5026, 5086, 5040, 5043, 5045, 5046, 5052, 5064, 5066, 5068, 5070, 5073, 5076, 5085, 5087, 5088, 5091, 8589, 5051, 5090, 7014, 5117, 5118, 7025, 7733, 5069, 5071, 5120, 4256, 3489, 5075, 5080, 5197, 5534, 5482, 5288, 53, 5289, 5039, 2909, 5273, 2603, 2604, 2606, 2611, 3490, 2610, 2612, 7710, 2616, 2609, 2613, 2618, 5360, 2602, 2605, 5630, 7540, 5074, 5067, 2617, 2607, 7571, 6998, 5116, 5042, 5668, 2608, 5083, 2614, 5082, 5047, 8145, 5044, 7016, 5328, 7731, 8256, 5332, 5925, 5340, 5355, 7666, 7655, 5576, 7106, 5593, 5356, 7020, 5812, 400, 5049, 7755, 8110, 7012, 5072, 5048, 3517, 2615, 5325, 6303, 5153, 5359, 7770, 8111, 6315, 8248, 5326, 6246, 880, 5324, 5513, 5624, 5295, 8243, 2596, 5296, 5327, 1354, 7017, 5354, 5406, 6062, 6976, 7013, 7438, 5497, 5353, 5041, 5298, 7732, 5880, 6412, 5484, 5357, 3415, 3452, 3451, 3410, 6975, 6986, 6939, 6972, 6980, 6990, 7030, 6981, 6989, 6974, 6977, 6983, 6979, 6984, 6978, 6987, 6982, 6973, 6985, 5089, 5772];
                let t = [];
                const n = 864e5
                  , r = "adultSubjectIds";
                async function o() {
                    if (t.length > 0)
                        return Promise.resolve();
                    const e = JSON.parse(localStorage.getItem(r));
                    if ((null == e ? void 0 : e.expired) > Date.now() - n)
                        return t = e.info,
                        Promise.resolve();
                    try {
                        var o;
                        const e = "adult-subjects.json"
                          , i = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e, 5e3);
                        return i && 0 !== i.length ? (t = i,
                        null === (o = localStorage) || void 0 === o || o.putObject(r, {
                            info: i,
                            expired: Date.now() + n
                        }),
                        Promise.resolve()) : (console.warn("Getting adult subjects has failed"),
                        Promise.reject())
                    } catch (e) {
                        return console.warn("Getting adult subjects has failed"),
                        console.error(e.message),
                        Promise.resolve()
                    }
                }
                let i = {};
                const s = 36e5
                  , a = "no-return-subjects.json";
                function l(n, r) {
                    const o = t.length > 0 ? t : e;
                    return -1 !== o.indexOf(n) || !!r && -1 !== o.indexOf(r)
                }
                let c = function(e) {
                    let t = this;
                    this.width = this.weight = this.length = this.depth = 0,
                    null == e || e.forEach((function(e, n) {
                        "Вес с упаковкой (кг)" === e.name && (t.weight = parseFloat(e.value) || 0),
                        "Ширина упаковки (мм)" === e.name && (t.width = parseInt(e.value, 10) || 0),
                        "Длина упаковки (мм)" === e.name && (t.length = parseInt(e.value, 10) || 0),
                        "Высота упаковки (мм)" === e.name && (t.depth = parseInt(e.value, 10) || 0)
                    }
                    )),
                    this.v = this.width / 1e3 * (this.length / 1e3) * (this.depth / 1e3),
                    this.sum3d = this.width + this.length + this.depth
                };
                const u = (e, t) => {
                    if (e) {
                        if ("BYN" !== t && "byn" !== t)
                            return e.toString().slice(0, -2);
                        {
                            const t = e.toString();
                            return (t.slice(0, -2) || "0") + "." + t.slice(-2)
                        }
                    }
                    return e
                }
                ;
                function d(e, t) {
                    if (t && e.pics > 0)
                        return !0;
                    if (!e.price)
                        return !1;
                    if (0 === e.pics || !e.sizes || 0 === e.sizes.length)
                        return !1;
                    for (let t = 0; t < e.sizes.length; t++) {
                        const n = e.sizes[t];
                        if (n.stocks && n.stocks.length > 0)
                            return !0
                    }
                    return !1
                }
                function p(e) {
                    return !!(e.sizes && e.sizes.length > 0)
                }
                function h(e, t) {
                    return !t || !e.isAdult
                }
                async function m(e, t, n) {
                    const r = `${(e => e ? "https://card.wb.ru/cards/v2/list" : "https://card.wb.ru/cards/v2/detail")(n)}?${e}&nm=${t.join(";")}`;
                    return WbSpaModel.prototype.$httpClient.fetchBasicJSON(r, {
                        xhrFields: {
                            withCredentials: !1
                        },
                        processData: !1,
                        dataType: "json"
                    }, {
                        addAuthHeader: !0,
                        addCatalogCaptcha: !0,
                        retry: 2,
                        nullOnError: !0
                    })
                }
                function f(e, t=!1, n=null) {
                    return new Promise(( (r, i) => {
                        Promise.all([wb.user.getXinfo(), o()]).then(( ([o]) => {
                            var s, a;
                            ~~n && (o = WbSpaModel.prototype.$user._changeXDest(o, n));
                            const c = [];
                            let u = 0
                              , d = 0
                              , p = [];
                            const h = new URLSearchParams;
                            WbSpaModel.prototype.$analitic.appendSplitInfoV2(h, "catalog"),
                            h.size > 0 && (o += `&${h}`),
                            e.forEach((e => {
                                100 === u && (c[d] = m(o, p, t),
                                d += 1,
                                u = 0,
                                p = []),
                                p[u++] = e
                            }
                            )),
                            p.length > 0 && (c[d] = m(o, p, t));
                            const f = {}
                              , v = new URLSearchParams(o)
                              , b = null === (s = v.get("curr")) || void 0 === s ? void 0 : s.toUpperCase()
                              , w = +v.get("spp")
                              , S = +v.get("dest")
                              , _ = !(wb.global.settings.switches.showLogisticsInPrice || (null === (a = wb.global.settings.variables.destToShowLogistics) || void 0 === a ? void 0 : a.indexOf(S)) >= 0) || "ru" !== WbSpaModel.prototype.$user.getLocale();
                            Promise.all(c).then((e => {
                                e.forEach((e => {
                                    var t;
                                    0 === (t = e).state && t.data.products && t.data.products.forEach((e => {
                                        var t;
                                        e.name = (null === (t = e.name) || void 0 === t ? void 0 : t.length) > 0 ? e.name : "Название не указано",
                                        e.isAdult = e.isAdult || l(e.subjectId, e.subjectParentId),
                                        e.currency = b,
                                        e.spp = w,
                                        e.dest = S,
                                        g(e),
                                        y(e, _),
                                        f[e.id] = e
                                    }
                                    ))
                                }
                                )),
                                r(f)
                            }
                            )).catch((e => {
                                console.log(e.statusText + " " + e.responseText),
                                i()
                            }
                            ))
                        }
                        ))
                    }
                    ))
                }
                function y(e, t=!0) {
                    var n;
                    if (!e || !e.sizes)
                        return;
                    let r = {}
                      , o = !1;
                    const i = e.premiumSale > 0 && ((null === (n = WbSpaModel.prototype.$user.getUserGradeFromCache()) || void 0 === n ? void 0 : n.isPremium) || (null == e ? void 0 : e.showPremium));
                    i || (e.premiumSale = 0),
                    e.sizes.forEach((n => {
                        if (!n.price)
                            return;
                        let s = t ? n.price.total : n.price.product;
                        n.price.priceForBasket = s,
                        i && (s -= 100 * wb.priceHelper.calculateDiscount(n.price.product / 100, e.premiumSale, e.currency));
                        const a = ~~(100 * (n.price.basic - s) / n.price.basic);
                        n.price.sale = a > 0 ? a : 0,
                        n.price.priceToShow = s,
                        (n.price.basic < s || n.price.basic === s && n.sale > 0 || n.price.sale <= wb.global.settings.variables.pricesDeltaToShowSale) && (n.price.basic = s,
                        n.price.sale = 0),
                        r.priceToShow || (r = n.price),
                        r.priceToShow !== n.price.priceToShow && (o = !0,
                        r.priceToShow > n.price.priceToShow && (r = n.price))
                    }
                    )),
                    e.price = r,
                    o && (e.diffPrice = !0)
                }
                function g(e, t, n) {
                    var r, o, i, s, a;
                    return e ? (t || (t = null !== (r = null !== (o = null === (i = e.sizes) || void 0 === i || null === (s = i.filter((e => e.payload))) || void 0 === s ? void 0 : s[0]) && void 0 !== o ? o : null === (a = e.sizes) || void 0 === a ? void 0 : a[0]) && void 0 !== r ? r : e),
                    t && t.saleConditions ? (1 & t.saleConditions && (e.isUnrefusable = !0),
                    2 & t.saleConditions && (e[1 === n ? "needPrepay" : "isPrepaid"] = !0),
                    4 & t.saleConditions && (e.isUnreturnable = !0),
                    8 & t.saleConditions && (e.isVerificationReturn = !0),
                    128 & t.saleConditions && (e.isWbInstCompliant = !0),
                    1048576 & t.saleConditions && (e.wltSaleBan = !0),
                    e.premiumSale = t.saleConditions >> 22 & 31,
                    e) : e) : e
                }
                function v() {
                    try {
                        return localStorage.getObject("product_colors") || {}
                    } catch (e) {
                        return console.warn("[ProductColorsCache]: failed to read from local storage", e),
                        {}
                    }
                }
                function b(e) {
                    var t;
                    if (!wb.global.settings.switches.enableManualGluingOnProduct)
                        return null;
                    let n = {
                        isOnlyColor: !1,
                        value: ""
                    }
                      , r = null == e ? void 0 : e.map((e => {
                        if (e.is_variable) {
                            var t;
                            let n = /^[\d.,]+$/
                              , r = null === (t = e.variable_values) || void 0 === t ? void 0 : t.filter((e => {
                                if (!n.test(e))
                                    return e
                            }
                            )).join(", ");
                            if (4 === e.charc_type && !n.test(e.value))
                                return {
                                    value: e.value,
                                    name: e.name
                                };
                            if (r)
                                return {
                                    value: r,
                                    name: e.name
                                }
                        }
                    }
                    )).filter((e => e)).splice(0, 3);
                    return 1 == (null == r ? void 0 : r.length) && "Цвет" == (null === (t = r[0]) || void 0 === t ? void 0 : t.name) ? (n.isOnlyColor = !0,
                    n.value = null == r ? void 0 : r.map((e => e.value)).toString(),
                    n) : (null == r ? void 0 : r.length) >= 1 ? (n.isOnlyColor = !1,
                    n.value = null == r ? void 0 : r.map((e => e.value)).join(" • "),
                    n) : null
                }
                function w(e, t=!1, n=!1) {
                    var r, o, i, s, a, c, d;
                    const p = !(wb.global.settings.switches.showLogisticsInPrice || (null === (r = wb.global.settings.variables.destToShowLogistics) || void 0 === r ? void 0 : r.indexOf(e.dest)) >= 0) || "ru" !== WbSpaModel.prototype.$user.getLocale();
                    y(e, p);
                    const h = null !== (o = null === (i = e.sizes) || void 0 === i || null === (s = i.filter((e => e.payload))) || void 0 === s ? void 0 : s[0]) && void 0 !== o ? o : null === (a = e.sizes) || void 0 === a ? void 0 : a[0];
                    g(e, h),
                    y(e, p);
                    const m = null !== (c = e.price) && void 0 !== c ? c : {}
                      , f = 20624 === e.brandId || 30624 === e.siteBrandId;
                    let v = {
                        rcId: e.rcId,
                        nmId: e.id,
                        cod1S: e.id,
                        imtId: e.root,
                        name: e.name,
                        pics: e.pics,
                        subjectId: e.subjectId,
                        subjectParentId: e.subjectParentId,
                        kindId: e.kindId,
                        brand: e.brand,
                        brandId: e.siteBrandId,
                        brandCod: e.brandId,
                        price: u(m.basic, e.currency),
                        salePrice: u(m.priceToShow, e.currency),
                        productSalePrice: u(m.product, e.currency),
                        priceForBasket: u(m.priceForBasket, e.currency),
                        logisticsCost: m.logistics,
                        colorCodes: e.colors.map((e => e.id)),
                        sale: m.sale,
                        priceDiff: e.diffPrice,
                        star: e.rating,
                        reviewRating: e.reviewRating,
                        feedbacks: e.feedbacks,
                        adult: e.isAdult || l(e.subjectId, e.subjectParentId) || !1,
                        isDigitalGood: e.isDigital || !1,
                        sizes: S(e.sizes, t, n, e.currency),
                        panelPromoId: e.panelPromoId,
                        promoTxt: e.promoTextCat,
                        promoTextCard: e.promoTextCard,
                        color: e.colors.map((e => e.name)).join(","),
                        woSize: 1 === (null === (d = e.sizes) || void 0 === d ? void 0 : d.length) && "" === h.name,
                        canQuickOrder: !e.isDigital,
                        soldOut: e.soldOut || !1,
                        deliveryHours: (e.time1 || 0) + (e.time2 || 0),
                        fastestStore: e.wh,
                        isPreorder: 5772 === e.brandId && wb.settings.preOrderList.includes(e.id),
                        currency: e.currency,
                        spp: e.spp,
                        dest: e.dest,
                        saleConditions: null == h ? void 0 : h.saleConditions,
                        isUnrefusable: e.isUnrefusable,
                        isPrepaid: e.isPrepaid,
                        isUnreturnable: e.isUnreturnable,
                        isVerificationReturn: e.isVerificationReturn,
                        dist: e.dist,
                        time1: e.time1,
                        time2: e.time2,
                        totalQuantity: e.totalQuantity,
                        payloadV2: null == h ? void 0 : h.payload,
                        optionId: null == h ? void 0 : h.optionId,
                        whDtype: null == h ? void 0 : h.dtype,
                        log: e.log,
                        logs: e.logs,
                        supplierId: e.supplierId,
                        supplier: $.views.helpers.supplierFineName(e.supplier, e.brandId),
                        supplierRating: e.supplierRating,
                        sort: e.sort || 0,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !f && !!(8 & e.viewFlags),
                        paymentDiscountAmount: wb.priceHelper.calcWalletDiscount(m.priceToShow / 100, e.currency, null == h ? void 0 : h.saleConditions),
                        catalogPrice: m,
                        supplierFlags: e.supplierFlags,
                        normQuery: e.normQuery,
                        rs: e.rs,
                        isAdv: e.isAdv,
                        extraAnaliticsCode: e.extraAnaliticsCode,
                        preset_type: e.preset_type,
                        premiumSale: e.premiumSale,
                        isPremiumAccent: wb.global.settings.switches.enablePremiumSellerAccent && !!(8 & e.supplierFlags)
                    };
                    return v.priceWithCouponAndDiscount = v.salePrice,
                    v.productPriceWithCouponAndDiscount = v.productSalePrice,
                    _(v.panelPromoId) && (v.showRedPrice = !0),
                    function(e) {
                        if (!WbSpaModel.prototype.$auth.isAuth || !e.totalQuantity || e.totalQuantity > 1e3)
                            return;
                        WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(e.panelPromoId) && (e.showThermometer = !0)
                    }(v),
                    v
                }
                const S = (e, t=!1, n=!1, r=null) => {
                    if (null == e)
                        return;
                    e.sort((function(e, t) {
                        return e.rank - t.rank
                    }
                    ));
                    let o = e;
                    return t && (o = e.filter((e => {
                        var t;
                        return (null === (t = e.stocks) || void 0 === t ? void 0 : t.length) > 0
                    }
                    ))),
                    o.map((e => {
                        var t, o;
                        const i = {
                            ch: e.optionId,
                            s: 1,
                            nm: e.origName,
                            rusNm: e.name,
                            stocks: null !== (t = e.stocks) && void 0 !== t ? t : [{
                                wh: e.wh,
                                dtype: e.dtype,
                                qty: 1
                            }],
                            unavailable: (null === (o = e.stocks) || void 0 === o ? void 0 : o.length) <= 0,
                            payloadV2: e.payload,
                            saleConditions: e.saleConditions,
                            whDtype: e.dtype,
                            deliveryHours: (e.time1 || 0) + (e.time2 || 0)
                        };
                        return n && e.price && (i.price = u(e.price.basic, e.currency || r),
                        i.salePrice = u(e.price.priceToShow, e.currency || r),
                        i.priceForBasket = u(e.price.priceForBasket, e.currency || r),
                        i.catalogPrice = e.price,
                        i.returnCost = e.price.return,
                        i.logisticsCost = e.price.logistics),
                        i
                    }
                    ))
                }
                ;
                function _(e) {
                    return !!WbSpaModel.prototype.$promotionsHelper.isRedPriceNeeded(e)
                }
                return {
                    getGoodsForRecommendAndCatalog: function(e, t, n, r) {
                        return new Promise(( (o, i) => {
                            const s = [];
                            if (!e)
                                return s;
                            const a = !t;
                            f(e, a).then((i => {
                                e.forEach((e => {
                                    if (i[e]) {
                                        const o = i[e];
                                        if (a) {
                                            if (o && p(o) && h(o, n)) {
                                                const e = w(o, !1, !0);
                                                e.soldOut = !o.sizes || 0 === o.sizes.length,
                                                s.push(e)
                                            }
                                        } else if (o && d(o, t) && h(o, n)) {
                                            const e = w(o, !r, !0);
                                            e.soldOut = !d(o, !1),
                                            s.push(e)
                                        }
                                    }
                                }
                                )),
                                o(s)
                            }
                            )).catch(( () => {
                                e.forEach((e => {
                                    s.push({
                                        nmId: e,
                                        cod1S: e,
                                        isFail: !0
                                    })
                                }
                                )),
                                o(s)
                            }
                            ))
                        }
                        ))
                    },
                    getXnmProducts: f,
                    getInfoForWbaStat: async function(e, t) {
                        try {
                            const n = e.map((e => e.nmId))
                              , r = t ? await t : await f(n);
                            return e.reduce(( (e, t) => {
                                const {nmId: n, size: o} = t;
                                let i = null;
                                if (null != r && r.hasOwnProperty(t.nmId)) {
                                    var s, a;
                                    const e = r[n]
                                      , t = null === (s = e.sizes.find((e => e.optionId === o))) || void 0 === s || null === (a = s.price) || void 0 === a ? void 0 : a.total
                                      , l = o ? e.sizes.find((e => e.optionId === o)) : S(e.sizes).filter((e => {
                                        var t;
                                        return (null === (t = e.stocks) || void 0 === t ? void 0 : t.length) > 0
                                    }
                                    ))[0];
                                    i = {
                                        salePrice: t / 100,
                                        stores: null == l ? void 0 : l.stocks
                                    }
                                }
                                return e.set(n, i),
                                e
                            }
                            ), new Map)
                        } catch (e) {
                            return console.error(e),
                            new Map
                        }
                    },
                    getCatalogCards: function(e, t, n, r=!1) {
                        return new Promise(( (o, i) => {
                            const s = {};
                            e.forEach((e => {
                                s[e] = {}
                            }
                            ));
                            const a = !n;
                            f(e, a).then((e => {
                                Object.keys(e).forEach((o => {
                                    let i = e[o];
                                    const l = s[i.id];
                                    function c(e, t) {
                                        return e.rank > t.rank ? 1 : e.rank === t.rank ? 0 : e.rank < t.rank ? -1 : void 0
                                    }
                                    if (a)
                                        l && p(i) && h(i, t) && (s[i.id] = i,
                                        s[i.id].sizes.sort(c),
                                        i.soldOut = !1);
                                    else if (l && d(i, n) && h(i, t)) {
                                        if (s[i.id] = i,
                                        i.sizes && i.sizes.length > 0) {
                                            const e = r ? i.sizes : i.sizes.filter((e => e.stocks && e.stocks.length > 0));
                                            e.sort(c),
                                            s[i.id].sizes = e
                                        }
                                        i.soldOut = !d(i, !1)
                                    }
                                }
                                ))
                            }
                            )).then(( () => o(s)), ( () => i()))
                        }
                        ))
                    },
                    convertXProductToSpaCatalogProduct: w,
                    getProductNamesMap: v,
                    getProductColorsByNmIdsAsync: function(e) {
                        return new Promise(( (t, n) => {
                            let r = v()
                              , o = {}
                              , i = [];
                            if (e.forEach((e => {
                                let t = r[e];
                                t && t.dims ? o[e] = t : i.push(e)
                            }
                            )),
                            !i.length)
                                return void t(o);
                            let s = i.map((e => fetch(wb.helpers.url.urlProductStatic(e)).then((e => e.json())).then((e => Promise.resolve({
                                options: e.options,
                                nmId: e.nm_id,
                                color: e.nm_colors_names,
                                name: e.imt_name,
                                dims: new c(e.options),
                                gluedOptions: b(e.options)
                            }))).catch(( () => Promise.resolve({
                                nmId: e,
                                color: ""
                            })))));
                            return Promise.all(s).then((e => {
                                !function(e, t) {
                                    try {
                                        var n;
                                        const r = 255;
                                        t = null !== (n = t) && void 0 !== n ? n : v(),
                                        e.forEach((e => t[e.nmId] = {
                                            nmId: e.nmId,
                                            c: e.color,
                                            n: e.name,
                                            dims: e.dims,
                                            gluedOptions: e.gluedOptions,
                                            ts: Date.now()
                                        }));
                                        let o = Object.values(t);
                                        return o.length > r && (o.sort(( (e, t) => t.ts - e.ts)),
                                        o.splice(r),
                                        t = o.reduce(( (e, t) => (e[t.nmId] = t,
                                        e)), {})),
                                        localStorage.putObject("product_colors", t),
                                        t
                                    } catch (e) {
                                        return console.warn("[ProductColorsCache]: failed to update colors map", e),
                                        {}
                                    }
                                }(e, r),
                                t(r)
                            }
                            ))
                        }
                        ))
                    },
                    fillOtherSellersProducts: function(e) {
                        return new Promise((t => {
                            f(e.map((e => e.nmId))).then((n => {
                                e.forEach((e => {
                                    const t = n[e.nmId];
                                    null != t && d(t) && (Object.assign(e, w(t, !0)),
                                    e.stocks = function(e) {
                                        return Object.keys(e.sizes.reduce(( (e, t) => {
                                            var n;
                                            return (null === (n = t.stocks) || void 0 === n ? void 0 : n.length) > 0 && t.stocks.forEach((t => e[t.wh] = !0)),
                                            e
                                        }
                                        ), {}))
                                    }(t),
                                    e.isAvailable = !0)
                                }
                                )),
                                t()
                            }
                            ))
                        }
                        ))
                    },
                    getMiniProductCard: async function(e) {
                        if (isNaN(e))
                            throw new TypeError("nmId at getMiniProductCard is not a number");
                        const t = await f([e]);
                        return t[e] ? w(t[e], !1, !0) : null
                    },
                    proceedPrices: y,
                    waitNoReturnSubjectsInitialized: async function() {
                        if (Object.keys(i).length > 0)
                            return Promise.resolve();
                        const e = JSON.parse(localStorage.getItem(a));
                        if ((null == e ? void 0 : e.expired) > Date.now() - s)
                            return i = e.info,
                            Promise.resolve();
                        try {
                            var t;
                            const e = "no-return-subjects.json"
                              , n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e, 5e3);
                            return n && 0 !== n.length ? (i = n,
                            null === (t = localStorage) || void 0 === t || t.putObject(a, {
                                info: n,
                                expired: Date.now() + s
                            }),
                            Promise.resolve()) : (console.warn("Getting subjects has failed"),
                            Promise.reject())
                        } catch (e) {
                            return console.warn("Getting adult subjects has failed"),
                            console.error(e.message),
                            Promise.resolve()
                        }
                    },
                    setNoRefund: function(e) {
                        const t = i[e];
                        if (!t)
                            return !1;
                        let n;
                        switch (WbSpaModel.prototype.$user.getLocale()) {
                        case "by":
                            n = 2;
                            break;
                        case "kz":
                            n = 3;
                            break;
                        case "kg":
                            n = 4;
                            break;
                        case "am":
                            n = 5;
                            break;
                        case "uz":
                            n = 13;
                            break;
                        default:
                            n = 1
                        }
                        return !!(t & 1 << n - 1)
                    },
                    expandSaleConditions: g,
                    isRedPrice: _,
                    fillFeedbacksPayment: async function(e) {
                        if (!wb.global.settings.switches.enableFeedbacksForPoints || null == e || !e.length)
                            return null;
                        await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPayments(e)
                    },
                    fillFeedbacksPaymentByUser: async function(e) {
                        if (!wb.global.settings.switches.enableFeedbacksForPoints || null == e || !e.length)
                            return null;
                        await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPaymentsByUser(e)
                    },
                    getFeedbacksPaymentByUser: async function() {
                        return wb.global.settings.switches.enableFeedbacksForPoints ? (await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByUser()) : null
                    },
                    convertOptionsToGluedOptions: b,
                    isAdvert: function(e) {
                        return e && !!(64 & e.viewFlags)
                    }
                }
            }()
        }
        ,
        92151: e => {
            var t = {
                utf8: {
                    stringToBytes: function(e) {
                        return t.bin.stringToBytes(unescape(encodeURIComponent(e)))
                    },
                    bytesToString: function(e) {
                        return decodeURIComponent(escape(t.bin.bytesToString(e)))
                    }
                },
                bin: {
                    stringToBytes: function(e) {
                        for (var t = [], n = 0; n < e.length; n++)
                            t.push(255 & e.charCodeAt(n));
                        return t
                    },
                    bytesToString: function(e) {
                        for (var t = [], n = 0; n < e.length; n++)
                            t.push(String.fromCharCode(e[n]));
                        return t.join("")
                    }
                }
            };
            e.exports = t
        }
        ,
        3939: e => {
            var t, n;
            t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
            n = {
                rotl: function(e, t) {
                    return e << t | e >>> 32 - t
                },
                rotr: function(e, t) {
                    return e << 32 - t | e >>> t
                },
                endian: function(e) {
                    if (e.constructor == Number)
                        return 16711935 & n.rotl(e, 8) | 4278255360 & n.rotl(e, 24);
                    for (var t = 0; t < e.length; t++)
                        e[t] = n.endian(e[t]);
                    return e
                },
                randomBytes: function(e) {
                    for (var t = []; e > 0; e--)
                        t.push(Math.floor(256 * Math.random()));
                    return t
                },
                bytesToWords: function(e) {
                    for (var t = [], n = 0, r = 0; n < e.length; n++,
                    r += 8)
                        t[r >>> 5] |= e[n] << 24 - r % 32;
                    return t
                },
                wordsToBytes: function(e) {
                    for (var t = [], n = 0; n < 32 * e.length; n += 8)
                        t.push(e[n >>> 5] >>> 24 - n % 32 & 255);
                    return t
                },
                bytesToHex: function(e) {
                    for (var t = [], n = 0; n < e.length; n++)
                        t.push((e[n] >>> 4).toString(16)),
                        t.push((15 & e[n]).toString(16));
                    return t.join("")
                },
                hexToBytes: function(e) {
                    for (var t = [], n = 0; n < e.length; n += 2)
                        t.push(parseInt(e.substr(n, 2), 16));
                    return t
                },
                bytesToBase64: function(e) {
                    for (var n = [], r = 0; r < e.length; r += 3)
                        for (var o = e[r] << 16 | e[r + 1] << 8 | e[r + 2], i = 0; i < 4; i++)
                            8 * r + 6 * i <= 8 * e.length ? n.push(t.charAt(o >>> 6 * (3 - i) & 63)) : n.push("=");
                    return n.join("")
                },
                base64ToBytes: function(e) {
                    e = e.replace(/[^A-Z0-9+\/]/gi, "");
                    for (var n = [], r = 0, o = 0; r < e.length; o = ++r % 4)
                        0 != o && n.push((t.indexOf(e.charAt(r - 1)) & Math.pow(2, -2 * o + 8) - 1) << 2 * o | t.indexOf(e.charAt(r)) >>> 6 - 2 * o);
                    return n
                }
            },
            e.exports = n
        }
        ,
        87206: e => {
            function t(e) {
                return !!e.constructor && "function" == typeof e.constructor.isBuffer && e.constructor.isBuffer(e)
            }
            e.exports = function(e) {
                return null != e && (t(e) || function(e) {
                    return "function" == typeof e.readFloatLE && "function" == typeof e.slice && t(e.slice(0, 0))
                }(e) || !!e._isBuffer)
            }
        }
        ,
        83503: (e, t, n) => {
            var r, o, i, s, a;
            r = n(3939),
            o = n(92151).utf8,
            i = n(87206),
            s = n(92151).bin,
            (a = function(e, t) {
                e.constructor == String ? e = t && "binary" === t.encoding ? s.stringToBytes(e) : o.stringToBytes(e) : i(e) ? e = Array.prototype.slice.call(e, 0) : Array.isArray(e) || e.constructor === Uint8Array || (e = e.toString());
                for (var n = r.bytesToWords(e), l = 8 * e.length, c = 1732584193, u = -271733879, d = -1732584194, p = 271733878, h = 0; h < n.length; h++)
                    n[h] = 16711935 & (n[h] << 8 | n[h] >>> 24) | 4278255360 & (n[h] << 24 | n[h] >>> 8);
                n[l >>> 5] |= 128 << l % 32,
                n[14 + (l + 64 >>> 9 << 4)] = l;
                var m = a._ff
                  , f = a._gg
                  , y = a._hh
                  , g = a._ii;
                for (h = 0; h < n.length; h += 16) {
                    var v = c
                      , b = u
                      , w = d
                      , S = p;
                    c = m(c, u, d, p, n[h + 0], 7, -680876936),
                    p = m(p, c, u, d, n[h + 1], 12, -389564586),
                    d = m(d, p, c, u, n[h + 2], 17, 606105819),
                    u = m(u, d, p, c, n[h + 3], 22, -1044525330),
                    c = m(c, u, d, p, n[h + 4], 7, -176418897),
                    p = m(p, c, u, d, n[h + 5], 12, 1200080426),
                    d = m(d, p, c, u, n[h + 6], 17, -1473231341),
                    u = m(u, d, p, c, n[h + 7], 22, -45705983),
                    c = m(c, u, d, p, n[h + 8], 7, 1770035416),
                    p = m(p, c, u, d, n[h + 9], 12, -1958414417),
                    d = m(d, p, c, u, n[h + 10], 17, -42063),
                    u = m(u, d, p, c, n[h + 11], 22, -1990404162),
                    c = m(c, u, d, p, n[h + 12], 7, 1804603682),
                    p = m(p, c, u, d, n[h + 13], 12, -40341101),
                    d = m(d, p, c, u, n[h + 14], 17, -1502002290),
                    c = f(c, u = m(u, d, p, c, n[h + 15], 22, 1236535329), d, p, n[h + 1], 5, -165796510),
                    p = f(p, c, u, d, n[h + 6], 9, -1069501632),
                    d = f(d, p, c, u, n[h + 11], 14, 643717713),
                    u = f(u, d, p, c, n[h + 0], 20, -373897302),
                    c = f(c, u, d, p, n[h + 5], 5, -701558691),
                    p = f(p, c, u, d, n[h + 10], 9, 38016083),
                    d = f(d, p, c, u, n[h + 15], 14, -660478335),
                    u = f(u, d, p, c, n[h + 4], 20, -405537848),
                    c = f(c, u, d, p, n[h + 9], 5, 568446438),
                    p = f(p, c, u, d, n[h + 14], 9, -1019803690),
                    d = f(d, p, c, u, n[h + 3], 14, -187363961),
                    u = f(u, d, p, c, n[h + 8], 20, 1163531501),
                    c = f(c, u, d, p, n[h + 13], 5, -1444681467),
                    p = f(p, c, u, d, n[h + 2], 9, -51403784),
                    d = f(d, p, c, u, n[h + 7], 14, 1735328473),
                    c = y(c, u = f(u, d, p, c, n[h + 12], 20, -1926607734), d, p, n[h + 5], 4, -378558),
                    p = y(p, c, u, d, n[h + 8], 11, -2022574463),
                    d = y(d, p, c, u, n[h + 11], 16, 1839030562),
                    u = y(u, d, p, c, n[h + 14], 23, -35309556),
                    c = y(c, u, d, p, n[h + 1], 4, -1530992060),
                    p = y(p, c, u, d, n[h + 4], 11, 1272893353),
                    d = y(d, p, c, u, n[h + 7], 16, -155497632),
                    u = y(u, d, p, c, n[h + 10], 23, -1094730640),
                    c = y(c, u, d, p, n[h + 13], 4, 681279174),
                    p = y(p, c, u, d, n[h + 0], 11, -358537222),
                    d = y(d, p, c, u, n[h + 3], 16, -722521979),
                    u = y(u, d, p, c, n[h + 6], 23, 76029189),
                    c = y(c, u, d, p, n[h + 9], 4, -640364487),
                    p = y(p, c, u, d, n[h + 12], 11, -421815835),
                    d = y(d, p, c, u, n[h + 15], 16, 530742520),
                    c = g(c, u = y(u, d, p, c, n[h + 2], 23, -995338651), d, p, n[h + 0], 6, -198630844),
                    p = g(p, c, u, d, n[h + 7], 10, 1126891415),
                    d = g(d, p, c, u, n[h + 14], 15, -1416354905),
                    u = g(u, d, p, c, n[h + 5], 21, -57434055),
                    c = g(c, u, d, p, n[h + 12], 6, 1700485571),
                    p = g(p, c, u, d, n[h + 3], 10, -1894986606),
                    d = g(d, p, c, u, n[h + 10], 15, -1051523),
                    u = g(u, d, p, c, n[h + 1], 21, -2054922799),
                    c = g(c, u, d, p, n[h + 8], 6, 1873313359),
                    p = g(p, c, u, d, n[h + 15], 10, -30611744),
                    d = g(d, p, c, u, n[h + 6], 15, -1560198380),
                    u = g(u, d, p, c, n[h + 13], 21, 1309151649),
                    c = g(c, u, d, p, n[h + 4], 6, -145523070),
                    p = g(p, c, u, d, n[h + 11], 10, -1120210379),
                    d = g(d, p, c, u, n[h + 2], 15, 718787259),
                    u = g(u, d, p, c, n[h + 9], 21, -343485551),
                    c = c + v >>> 0,
                    u = u + b >>> 0,
                    d = d + w >>> 0,
                    p = p + S >>> 0
                }
                return r.endian([c, u, d, p])
            }
            )._ff = function(e, t, n, r, o, i, s) {
                var a = e + (t & n | ~t & r) + (o >>> 0) + s;
                return (a << i | a >>> 32 - i) + t
            }
            ,
            a._gg = function(e, t, n, r, o, i, s) {
                var a = e + (t & r | n & ~r) + (o >>> 0) + s;
                return (a << i | a >>> 32 - i) + t
            }
            ,
            a._hh = function(e, t, n, r, o, i, s) {
                var a = e + (t ^ n ^ r) + (o >>> 0) + s;
                return (a << i | a >>> 32 - i) + t
            }
            ,
            a._ii = function(e, t, n, r, o, i, s) {
                var a = e + (n ^ (t | ~r)) + (o >>> 0) + s;
                return (a << i | a >>> 32 - i) + t
            }
            ,
            a._blocksize = 16,
            a._digestsize = 16,
            e.exports = function(e, t) {
                if (null == e)
                    throw new Error("Illegal argument " + e);
                var n = r.wordsToBytes(a(e, t));
                return t && t.asBytes ? n : t && t.asString ? s.bytesToString(n) : r.bytesToHex(n)
            }
        }
    }
      , __webpack_module_cache__ = {};
    function __webpack_require__(e) {
        var t = __webpack_module_cache__[e];
        if (void 0 !== t)
            return t.exports;
        var n = __webpack_module_cache__[e] = {
            exports: {}
        };
        return __webpack_modules__[e](n, n.exports, __webpack_require__),
        n.exports
    }
    __webpack_require__.n = e => {
        var t = e && e.__esModule ? () => e.default : () => e;
        return __webpack_require__.d(t, {
            a: t
        }),
        t
    }
    ,
    __webpack_require__.d = (e, t) => {
        for (var n in t)
            __webpack_require__.o(t, n) && !__webpack_require__.o(e, n) && Object.defineProperty(e, n, {
                enumerable: !0,
                get: t[n]
            })
    }
    ,
    __webpack_require__.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t),
    __webpack_require__.r = e => {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }),
        Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }
    ,
    __webpack_require__(51584),
    __webpack_require__(84836);
    var __webpack_exports__ = __webpack_require__(93066)
}
)();
